<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="utf-8" xml:lang="utf-8">
<head>
<title>
Linux Gazette : November 2008 (#156) 
</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="../lg.css" rel="stylesheet" type="text/css" media="screen, projection" />

<style type="text/css" media="screen, projection">
<!--

.twdtarticle {
	width: 84%;
}

.twdtarticle h1 {
	font-size:19px;
	text-align:center;
}

.lgcontent {
        width: 84%;
        margin-top: 30px;
}

-->
</style>

</head>

<body id="twdtbody">

<a href="../">
<img src="../gx/2003/newlogo-blank-200-gold2.jpg" alt="Linux Gazette" id="twdtlogo"/>
</a>
<p id="fun">...making Linux just a little more fun!</p>

<div id="navigation">

<a href="../index.html">Home</a>
<a href="../faq/index.html">FAQ</a>
<a href="../lg_index.html">Site Map</a>
<a href="../mirrors.html">Mirrors</a>
<a href="../mirrors.html">Translations</a>
<a href="../search.html">Search</a>
<a href="../archives.html">Archives</a>
<a href="../authors/index.html">Authors</a>
<a href="http://lists.linuxgazette.net/mailman/listinfo/">Mailing Lists</a>
<a href="../jobs.html">Join Us!</a>
<a href="../contact.html">Contact Us</a>
</div>

<div id="breadcrumbs1">

<a href="../index.html">Home</a> &gt;
<a href="index.html">November 2008 (#156)</a> &gt;
TWDT

</div>


<div class="content lgcontent">

<h2>November 2008 (#156):</h2>

<ul>

	<li><a href="#lg_mail">Mailbag</a>

	<li><a href="#lg_talkback">Talkback</a>

	<li><a href="#lg_bytes">News Bytes</a>, by <i>Deividson Luiz Okopnik</i></li>

	<li><a href="#dellomodarme">A (not so) short overview of the Geographic Information System GRASS</a>, by <i>Matteo Dell'Omodarme and Giada Valle</i></li>

	<li><a href="#jangir">Writing Network Device Drivers for Linux</a>, by <i>Mohan Lal Jangir</i></li>

	<li><a href="#kapil">Not Screws and Bolts</a>, by <i>Kapil Hari Paranjape</i></li>

	<li><a href="#prestia">Joey's Notes: The Red Hat Linux Boot Process</a>, by <i>Joey Prestia</i></li>

	<li><a href="#collinge">HelpDex</a>, by <i>Shane Collinge</i></li>

	<li><a href="#ecol">Ecol</a>, by <i>Javier Malonda</i></li>

	<li><a href="#xkcd">XKCD</a>, by <i>Randall Munroe</i></li>

	<li><a href="#lg_launderette">The Linux Launderette</a>

</ul>

</div>



<br />


<div class="content lgcontent">

<a name="lg_mail"></a>
<h1>Mailbag</h1>

</b>
</p>

<p>
<h3>This month's answers created by:</h3><strong>[  Sayantini Ghosh, Amit Kumar Saha, Ben Okopnik, Dave Richardson, Faber Fedor, Kapil Hari Paranjape, Karl-Heinz Herrmann, Ren&eacute; Pfeiffer, Neil Youngman, Paul Sephton, Rick Moen, Robos, Thomas Adam  ]</strong>
<br />...and you, our readers!<br /><hr width="50%" align="center" size="3" /><h1>Gazette Matters</h1>
<hr />

<!-- Thread anchor: Undeliverable mail: Delivery reports about your e-mail --><a name='undeliverable_mail__delivery_reports_about_your_e_mail'></a>
<h3>Undeliverable mail: Delivery reports about your e-mail</h3>
<p>
<b><p>
Rick Moen [rick at linuxmafia.com]

</p>
</b><br />
<b>Tue, 30 Sep 2008 19:21:25 -0700</b>
</p>

<p>
<p class="editorial">
[[[  I've clipped out the offending message and tossed it into the /misc
directory as <a href="../156/misc/lg/undeliverable">http://linuxgazette.net/156/misc/lg/undeliverable</a> if you
actually are curious about what "these things" look like. -- Kat  ]]]
</p>

</p>

<p>
Subscribers might (or might not) be curious about what I do with these
things.  Basically, Faber had it about right:  I do indeed decide where
to aim the Blacklist of Doom and fire freely.
</p>

<p>
In this case, IP address 207.65.4.4 (rex2.isdn.net), running proprietary
MTA Communigate Pro, confessed that it had received (forged) mail from
IP address 71.75.8.158, which at the time was falsely claiming to be
"lists.linuxgazette.net" and conveying mail from
tag@lists.linuxgazette.net to downstream recipient chet@multipro.com.
</p>

<p>
And that incompetently run MTA, on rex2.isdn.net, <em>believed</em> that
particular barefaced lie -- and thus decided to send "back" to the forged,
falsified sender address, tag@lists.linuxgazette.net, the scintillating
intelligence that the illustrious Mr. Chet is over quota and sadly
cannot accept "our" mail.
</p>

<p>
This is incompetent mail administration in part because rex2.isdn.net
has no excuse for believing that lie:  Merely conducting the most basic
of checks of our SPF record would have revealed that 71.75.8.158 is
<em>not</em> an authorised MX for lists.linuxgazette.net.  Also, rex2 is
ethically obliged to be particularly careful about what mail it accepts
for redelivery to (e.g.) downstream hosts like multipro.com's MXes (mail
exchangers), specifically because of the risk of "backscatter spam" of
this sort.
</p>

<p>
In short, I've blackholed rex2.isdn.net completely on
lists.linuxgazette.net (for all SMTP purposes), which is indeed
hard-assed but ensures that it will not backscatter-spam us again.  If
there are any legitimate users on that mail host, they lose.
</p>

<p>
(As a reminder, TAG is particularly vulnerable to spam, because its
posting model has to date prevented it from being set so that all mail
from non-subscribed addresses is held for listadmin vetting.  All 
other mailing lists I run duck that bullet, and are for all practical 
purposes spam-free.)
</p>

<p>

</p>

<hr />

<h1>Still Searching</h1>
<hr />

<!-- Thread anchor: MPPP Problem --><a name='mppp_problem'></a>
<h3>MPPP Problem</h3>
<p>
<b><p>
kuldeep singh [kuldeep_1985_ec at yahoo.co.in]

</p>
</b><br />
<b>Sun, 5 Oct 2008 11:31:07 +0530 (IST)</b>
</p>

<p>
<p class="editorial">
[[[  I suspect this is "please do my homework", but as it wasn't
responded to last month, I'm tossing it into the "Still Searching" pile.
(Unsurprisingly, it was sent as html, adding to my annoyance.)
-- Kat  ]]]
</p>

</p>


<p>
hi
</p>

<p>
I am a student from IIT Delhi, India. I am working on a project in which
i need to establish multilink PPP connection between two embedded ARM
+board. The OS is linux(Debian).
</p>

<p>
Can u please tell me how to establish this mppp connection (configuring
in Linux).
</p>

<p>
Please reply soon.
</p>


<p>
Thanks
</p>

<p>
Kuldeep
</p>

<p>
IIT Delhi
</p>

<p>

</p>

<hr />


<!-- Thread anchor: iptables configuration in debian --><a name='iptables_configuration_in_debian'></a>
<h3>iptables configuration in debian</h3>
<p>
<b><p>
J.Bakshi [j.bakshi at icmail.net]

</p>
</b><br />
<b>Wed, 8 Oct 2008 19:18:12 +0530</b>
</p>

<p>
Hello friends,
</p>

<p>
I have a remote suse server where I have a shell script and in that I have the 
configuration of iptables firewall. so, after executing the script I get my 
firewall ready. I could also write a deamon there which can execute the 
script after booting the linux.
</p>

<p>
I wounder if there is anything in debian to do that. When checking iptables I 
have found the following
</p>


<pre>
iptables
iptables-apply
iptables-multi
iptables-restore
iptables-save
iptables-xm
</pre>

<p>
shall I just write a deamon which will then call the configuration file ? 
or there is already something in debian which I have missed ?
Kindly suggest.
Thanks
</p>

<p>

</p>

<hr />


<!-- Thread anchor: [OT] Booting mackbooks (was Help with Linux !) --><a name='ot_booting_mackbooks_was_help_with_linux'></a>
<h3>[OT] Booting mackbooks (was Help with Linux !)</h3>
<p>
<b><p>
Chris Bannister [mockingbird at earthlight.co.nz]

</p>
</b><br />
<b>Wed, 29 Oct 2008 00:55:13 +1300</b>
</p>

<p>
On Mon, Oct 27, 2008 at 06:38:09PM -0400, Faber J. Fedor wrote:
</p>

<pre>
&gt; On my Macbook, I boot off a CDROM by a) putting the CD into the drive,
&gt; b) rebooting the machine, c) and hold down the 'c' key during the
&gt; boot process.
</pre>

<p>
Do they still eject the cd if you try and boot off them or just ignore
it?
</p>

<pre>-- 
Chris.
======
I contend that we are both atheists. I just believe in one fewer god
than you do. When you understand why you dismiss all the other
possible gods, you will understand why I dismiss yours.
                                           -- Stephen F Roberts
</pre>

<p>

</p>

<hr />

<h1>Our Mailbag</h1>
<hr />

<!-- Thread anchor: deleted file recovery --><a name='deleted_file_recovery'></a>
<h3>deleted file recovery</h3>
<p>
<b><p>
J.Bakshi [j.bakshi at icmail.net]

</p>
</b><br />
<b>Thu, 16 Oct 2008 20:24:54 +0530</b>
</p>

<p>
Dear list,
</p>

<p>
I generally worked with Linux terminal. Frequently I have to do "rm" to delete 
files/folders which are not required any more. And this actually raised a 
oquestion in mind. what to do if some point of time I need a file/foldr which 
has been already deleted before few min. ago. I have googled a lot but have 
not found any open source tools which can recover the deleted ones. testdisk 
is there but it is totally different. there are some commercial GUI based 
tools available but I am looking for a CLI tool or technique which 
<strong>practically</strong> recover the deleted file/folder.
</p>

<p>
Hope some one can enlighten me.
Thanks
</p>

<p>

</p>

<p><b>[  <a name="mb-deleted_file_recovery"></a> <a href="misc/lg/deleted_file_recovery.html">Thread continues here (18 messages/31.21kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: startx problem --><a name='startx_problem'></a>
<h3>startx problem</h3>
<p>
<b><p>
J.Bakshi [j.bakshi at icmail.net]

</p>
</b><br />
<b>Sun, 5 Oct 2008 22:58:03 +0530</b>
</p>

<p>
Dear list,
</p>

<p>
I don't need kdm to run as a service because most of the time I access this 
linux box remotely. Only when I am at home then I need the desktop. That's 
why I have disabled the kdm. But after that "startx" gives an error
</p>

<p>
<pre class='code'>
Module Loader present
Markers: (--) probed, (**) from config file, (==) default setting,
(++) from command line, (!!) notice, (II) informational,                                                                 
(WW) warning, (EE) error, (NI) not implemented, (??) unknown.
                                                                                                                             
(==) Log file: "/var/log/Xorg.0.log", Time: Sun Oct  5 21:15:35 2008                                                                                                                          
(==) Using config file: "/etc/X11/xorg.conf"                                                                                                                         
(II) Module "i2c" already built-in                                                                                                                           
(II) Module "ddc" already built-in                                                                                                                         
(II) Module "ramdac" already built-in
                                                                                                                             
waiting for X server to shut down FreeFontPath: 
FPE "/usr/share/fonts/X11/misc"
                                                                                                                             
refcount is 2, should be 1; fixing.
</pre>

<p>
Every time the same error from startx. If I start the kdm no problem at all !!
</p>

<p>
Kindly CC to me
</p>

<p>

</p>

<p><b>[  <a name="mb-startx_problem"></a> <a href="misc/lg/startx_problem.html">Thread continues here (10 messages/19.31kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: What is the policy of apt in lenny ? --><a name='what_is_the_policy_of_apt_in_lenny'></a>
<h3>What is the policy of apt in lenny ?</h3>
<p>
<b><p>
J.Bakshi [j.bakshi at icmail.net]

</p>
</b><br />
<b>Sun, 5 Oct 2008 22:56:49 +0530</b>
</p>

<p>
Hello List,
</p>

<p>
 I have tried to install the gdeskcal with its dependency "python 
python-central   python-gtk2 python-numeric python-xml" in lenny and In 
return apt asking to install 170 packages with gnome gnome desktop and some 
other tools which really don't have any connection with gdeskcal !!! I did 
not see this in sarge. What is going on ?
</p>

<p>
I like to install gdeskcal with icewm. Why 170 pacakes ??
</p>

<p>
Thanks
</p>

<p>

</p>

<p><b>[  <a name="mb-what_is_the_policy_of_apt_in_lenny"></a> <a href="misc/lg/what_is_the_policy_of_apt_in_lenny.html">Thread continues here (17 messages/18.20kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: How to get fancy terminal ? --><a name='how_to_get_fancy_terminal'></a>
<h3>How to get fancy terminal ?</h3>
<p>
<b><p>
J.Bakshi [j.bakshi at icmail.net]

</p>
</b><br />
<b>Wed, 8 Oct 2008 14:26:53 +0530</b>
</p>

<p>
Hello list,
</p>

<p>
Once I tried Mandrake linux at my friend's PC. I have never seen that type of 
console in any other distro ( though I worked with redhat, debian, suse and 
puppy). The fonts are not so big which I see in debian or RH; they are neat 
and clean. more over at the bottom of the console there was a logo of 
mandrake !! Could any one suggest or give me any clue so that I can modify my 
present console to that fancy one ?
</p>

<p>
thanks
</p>

<p>

</p>

<p><b>[  <a name="mb-how_to_get_fancy_terminal"></a> <a href="misc/lg/how_to_get_fancy_terminal.html">Thread continues here (2 messages/1.13kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: Help with Linux !!!!!!!!!!!!!!! --><a name='help_with_linux'></a>
<h3>Help with Linux !!!!!!!!!!!!!!!</h3>
<p>
<b><p>
bill jones [userwilber2003 at yahoo.com]

</p>
</b><br />
<b>Mon, 27 Oct 2008 13:16:50 -0700 (PDT)</b>
</p>

<p>
<p class="editorial">
[[[  Mr. Jones sent this in as html mail, and also without much spacing
in his punctuation. For ease of the readership, I've done some minor
editing on his content. -- Kat  ]]]
</p>

</p>

<p>
Hello.
</p>

<p>
I need some help and I'm hoping you can do it. Ok,here goes.
I traded a guy at work for an Apple laptop with Linux installed. He got
it from a guy who didn't have the Root password. How nice! I've tried to
</p>

<p>
+ reinstall Opensuse 10.2 to gain controll of the laptop,and it won't
autorun. I made sure the discs were in ISO form. When the disc is in the
cdrom
</p>

<p>
+ it shows how big the disc is but it doesn't show how much space is
available. The memory shows that there's' 2.34mb avaliable. I'm very new at
this
</p>

<p>
+ Linux and don't really understand it yet. So, do you think you'ins' can
help me?
</p>

<p>
ON Opensuse site it said if it didn't start auto to open Bios setup and
go from ther. I'm not sure how to do that ,or where to type in Bios.
Any help would be greatly welcomed and appreaciated!
</p>

<p>
Thank-you,
<pre>-- 
Bill Jones
userwilber2003@yahoo.com
</pre>

<p>

</p>

<p><b>[  <a name="mb-help_with_linux"></a> <a href="misc/lg/help_with_linux.html">Thread continues here (4 messages/5.08kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: apt sources.list for multimedia --><a name='apt_sources_list_for_multimedia'></a>
<h3>apt sources.list for multimedia</h3>
<p>
<b><p>
J.Bakshi [j.bakshi at icmail.net]

</p>
</b><br />
<b>Mon, 6 Oct 2008 23:09:25 +0530</b>
</p>

<p>
Dear list,
</p>

<p>
I did a net installation of lenny. I have not found xmms and I think the 
source is mising from the configuration. Here is my sources.list
</p>

<pre>
deb <a href="http://ftp.de.debian.org/debian">http://ftp.de.debian.org/debian</a> lenny main contrib non-free
deb <a href="http://security.debian.org/">http://security.debian.org/</a> lenny/updates main contrib non-free
deb-src <a href="http://security.debian.org/">http://security.debian.org/</a> lenny/updates main contrin non-free
</pre>

<p>
will it need additional source to have the multimedia ?
</p>

<p>
Thanks
</p>

<p>

</p>

<p><b>[  <a name="mb-apt_sources_list_for_multimedia"></a> <a href="misc/lg/apt_sources_list_for_multimedia.html">Thread continues here (10 messages/17.23kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: How to modify linux console ? --><a name='how_to_modify_linux_console'></a>
<h3>How to modify linux console ?</h3>
<p>
<b><p>
J.Bakshi [j.bakshi at icmail.net]

</p>
</b><br />
<b>Fri, 10 Oct 2008 22:55:42 +0530</b>
</p>

<p>
Dear all,
</p>

<p>
I am a debian user but once I got a chance to test Mandrake 
Linux and there I saw first time the magic of Linux console. First of all; the 
Mandrake console was neat and clean with high resolution support and 
Colourful text. More over a transparent Logo was there at the buttom of the 
screen. It was really nice looking and at the same time disclousing the fact 
what power is inbuilt inside Linux console!!
</p>

<p>
I compiled the kernel ( in my debian box ) with Fb and vesa support. Then I 
add the vga=791 at the kernel configuration line at grub.cfg and now I get 
high resolution screen with linux logo support at booting. But There are so 
many things still unresolved and I'll be grateful to the list if some one 
atlest show me the right direction
</p>

<p>
1&gt; How can I test what max. resolution my monitor can suport with a command ?
</p>

<p>
2&gt; High resolution can be opted by SVGA, VGA or fbdevice. What are the 
difference between these and how can I know which one is best for my Display 
card ?
</p>

<p>
3&gt; How to get colorful text; like the text in knoppix during booting ?
</p>

<p>
4&gt; and finally how can I get the tranparent logo at  the butom of my console ?
</p>

<p>
A no. of question <img src="../gx/smile.png" alt=":-)"> may be these are already there in some document in the 
system itself. But currently I have no clue and it would be great if Someone 
atleast show me the direction following which I can be able to resolved all 
these myself. 
</p>

<p>
Thanks
</p>

<p>

</p>

<p><b>[  <a name="mb-how_to_modify_linux_console"></a> <a href="misc/lg/how_to_modify_linux_console.html">Thread continues here (9 messages/12.03kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: (How do I run/install downloaded programs using linux?) --><a name='how_do_i_run_install_downloaded_programs_using_linux'></a>
<h3>(How do I run/install downloaded programs using linux?)</h3>
<p>
<b><p>
Hunt, Melissa [mhunt at Dewberry.com]

</p>
</b><br />
<b>Wed, 29 Oct 2008 11:36:17 -0500</b>
</p>

<p>
Im new to xandros linux...never used any linux operating system
before...
</p>

<p>
How do I run/install downloaded programs using linux?
</p>

<p>
Wind0ws usually opts for an auto run or save. It seems linux wants to
save. So once I have it saved (which I do) how do I actually run or
install that downloaded program?
</p>

<p>
Thanks...
</p>


<p>
Melissa-Hope Hunt
<pre>-- 
Computer Aided Drafter
Dewberry
200 Broadacres Drive, 4th Floor
Bloomfield, NJ 07003-3154
973.338.9100 ext. 3116
973.338.5860 fax
www.dewberry.com &lt;<a href="http://www.dewberry.com&gt;">http://www.dewberry.com&gt;</a>
</pre>

<p>

</p>

<p><b>[  <a name="mb-how_do_i_run_install_downloaded_programs_using_linux"></a> <a href="misc/lg/how_do_i_run_install_downloaded_programs_using_linux.html">Thread continues here (7 messages/6.35kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: ISP blues (was: iptables configuration in debain) --><a name='isp_blues_was__iptables_configuration_in_debain'></a>
<h3>ISP blues (was: iptables configuration in debain)</h3>
<p>
<b><p>
Rick Moen [rick at linuxmafia.com]

</p>
</b><br />
<b>Thu, 9 Oct 2008 15:39:12 -0700</b>
</p>

<p>
Hi, J.Bakshi.  This note is to advise you that your choice of ISP is
causing your mail to be interpreted upon receipt as suspect, when
automatically parsed by spam-detection software.  My SMTP software
keeps kicking your mail addressed to this mailing list into an
administrative queue, to verify that it's not spam.  Even though
I've whitelisted _you personally_, your ISP's IP address keeps failing
several tests used within Spamassassin.  Those are:
</p>


<p>
RCVD_IN_SORBS:  This is fairly serious.  Your ISP's SMTP server IP
address (63.223.93.2) is in the SORBS (Spam and Open-Relay Blocking
System) antispam blocklist, which means it's been extensively used for
spamming activity (not by you).
</p>

<p>
RCVD_IN_SORBS_WEB:  This is also fairly serious.  That same IP is also
in a separate SORBS blocklist of sites that are known to have
exploitable vulnerability (e.g., FormMail scripts) that are widely
abused by spammers to send mass-mail spam.
</p>

<p>
FORGED_RCVD_HELO:  This refers to the fact that your ISP sends out a
mistaken/malformed greeting string during its SMTP delivery attempts.
In this case, IP address 63.223.93.2 (firewall.wahju.com) is sending a
greeting string claiming it's "icsmail.net".  Doing so violates mailing
list technical standards and makes your ISP's SMTP host look like a
spammer haven.
</p>

<p>
RCVD_IN_XBL:  This is <em>really</em> serious.  This means your ISP's SMTP
server IP address is also in the Spamhaus XBL blocklist, described as
"wholly incorporat[ing] data from two highly-trusted DNSBL sources, with
tweaks by Spamhaus to maximise the data efficiency and lower False
Positives. The main components are the CBL (Composite Block List) from
cbl.abuseat.org, and the NJABL Open Proxy IPs list from www.njabl.org".
Essentially, this means your ISP's mail server has been verified to be
repeatedly used by spammers to a high degree of certainty.
</p>


<p>
I cannot really advise you, except to say that, unless/until some of the
above facts about your ISP -- not your fault and not under your personal
control -- change radically, you are likely to have significant problems
with software classifying your mail as probable spam.  Some users in
similar situations have found it best to change providers.
</p>

<p>

</p>

<p><b>[  <a name="mb-isp_blues_was__iptables_configuration_in_debain"></a> <a href="misc/lg/isp_blues_was__iptables_configuration_in_debain.html">Thread continues here (6 messages/9.36kB)</a>  ]</b></p>
<hr />


<br clear="all" />

<script type='text/javascript'>
digg_url = 'http://linuxgazette.net/156/lg_mail.html';
digg_title = 'Mailbag';
digg_bodytext = '<p>In this month\'s Linux Gazette, \'Mailbag\' covers the following topics:<br>Undeliverable mail: Delivery reports about your e-mail<br>MPPP Problem<br>iptables configuration in debian<br>[OT] Booting mackbooks (was Help with Linux !)<br>deleted file recovery<br>startx problem<br>What is the policy of apt in lenny ?<br>How to get fancy terminal ?<br>Help with Linux !!!!!!!!!!!!!!!<br>apt sources.list for multimedia<br>How to modify linux console ?<br>(How do I run/install downloaded programs using linux?)<br>ISP blues (was: iptables configuration in debain)<br></p>';
digg_topic = 'linux_unix';
</script>
<script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:156/lg_mail.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
<!-- *** END author bio *** -->

<div id="articlefooter">


<p>
Published in Issue 156 of Linux Gazette, November 2008
</p>

</div>
</div>


<div class="content lgcontent">

<a name="lg_talkback"></a>
<h1>Talkback</h1>

</b>
</p>

<p>

<!-- Thread anchor: Talkback:124/smith.html --><a name='talkback_124_smith'></a>
<h3>Talkback:124/smith.html</h3>
<p><b>[ In reference to "<a href='../124/smith.html'>Build a Six-headed, Six-user Linux System</a>" in LG#124 ]</b></p><p>
<b><p>
Chad Van Maele [chadvm at gmail.com]

</p>
</b><br />
<b>Sun, 5 Oct 2008 15:40:13 +0000</b>
</p>

<p>
I've tried and tried and I can't get this to work, I'm using Debian/etch,
xorg 7.3, and xdm.   When try to start the X server manually, seat0 works
ok, but I've had varying success with seat1, sometimes it starts, but not on
the same vt, so monitor0 goes black, or it will start on the same vt, but no
window manager will start, the mouse and keyboard work ok though.  I've
looked at an exhaustive amount of other howto's, but most of them are
outdated, saying I need Xephyr to do it.  I've gone to irc.freenode.net and
went to #xorg, but no one there even talks at all, just a bunch of IRC
trolls I guess.  I don't know where to look for help anymore, so I'm writing
this email.  I don't want to be a bother, but I just don't know what else to
do.   Thanks.
</p>

<pre>-- 
Chad Van Maele
<a href="http://www.tshirthell.com/store/link.php?id=RGlvbml4">http://www.tshirthell.com/store/link.php?id=RGlvbml4</a>
</pre>

<p>

</p>

<p><b>[  <a name="mb-talkback_124_smith"></a> <a href="misc/lg/talkback_124_smith.html">Thread continues here (2 messages/2.20kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: Talkback:155/xkcd.html --><a name='talkback_155_xkcd'></a>
<h3>Talkback:155/xkcd.html</h3>
<p><b>[ In reference to "<a href='../155/xkcd.html'>XKCD</a>" in LG#155 ]</b></p><p>
<b><p>
Jimmy O'Regan [joregan at gmail.com]

</p>
</b><br />
<b>Thu, 9 Oct 2008 18:22:43 +0100</b>
</p>

<p>
XKCD Improving the Internet ... Yet Again
<a href="http://idle.slashdot.org/article.pl?sid=08/10/09/1618235&amp;from=rss">http://idle.slashdot.org/article.pl?sid=08/10/09/1618235&amp;from=rss</a>
</p>

<p>
The real story is here:
<a href="http://www.networkworld.com/community/node/33807">http://www.networkworld.com/community/node/33807</a>
</p>

<p>

</p>

<hr />


<!-- Thread anchor: Talkback:155/lg_tips.html --><a name='talkback_155_lg_tips'></a>
<h3>Talkback:155/lg_tips.html</h3>
<p><b>[ In reference to "<a href='../155/lg_tips.html'>2-Cent Tips</a>" in LG#155 ]</b></p><p>
<b><p>
Jimmy O'Regan [joregan at gmail.com]

</p>
</b><br />
<b>Fri, 10 Oct 2008 01:01:08 +0100</b>
</p>

<p>
<p class="editorial">
[[[  This is specifically a followup to the thread
<a href="../155/misc/lg/two_cent_tip__download_whole_directory_as_zip_file.html">http://linuxgazette.net/155/misc/lg/two_cent_tip__download_whole_directory_as_zip_file.html</a>
 -- Kat  ]]]
</p>

</p>

<p>
2008/9/16 Silas S. Brown &lt;ssb22@cam.ac.uk&gt;:
</p>

<pre>
&gt;
&gt; You shuld be able to use Gradint as well if you
&gt; can find someone to record the words and
&gt; phrases for you.
</pre>

<p>
I wanted to mention this at the time, but I couldn't find the link:
<a href="http://shtooka.net/">http://shtooka.net/</a> is a project aimed at just this idea - of
providing pronunciations of words in various languages.
</p>

<p>

</p>

<p><b>[  <a name="mb-talkback_155_lg_tips"></a> <a href="misc/lg/talkback_155_lg_tips.html">Thread continues here (5 messages/8.93kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: Talkback:152/srinivasan.html --><a name='talkback_152_srinivasan'></a>
<h3>Talkback:152/srinivasan.html</h3>
<p><b>[ In reference to "<a href='../152/srinivasan.html'>A Slightly Advanced Introduction to Vim</a>" in LG#152 ]</b></p><p>
<b><p>
Eric Deschamps [erdesc at free.fr]

</p>
</b><br />
<b>Tue, 30 Sep 2008 14:46:31 +0200</b>
</p>

<p>
Hi,
</p>

<p>
I guess there is another error on this document.
</p>

<p>
In the section "Miscellaneous Commands"
</p>

<pre>
		 Shift+j (or J) - This will brings up the previous line to the end of the current.
</pre>

<p>
It should be : This brings up the next line to the end of the current, 
shouldn't it ?
</p>

<p>
Best Regards,
</p>

<p>
Eric
</p>

<p>

</p>

<p><b>[  <a name="mb-talkback_152_srinivasan"></a> <a href="misc/lg/talkback_152_srinivasan.html">Thread continues here (2 messages/1.39kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: Talkback: [LG 86] 2c Tips #20 --><a name='talkback__lg_86_2c_tips_20'></a>
<h3>Talkback: [LG 86] 2c Tips #20</h3>
<p>
<b><p>
Jimmy O'Regan [joregan at gmail.com]

</p>
</b><br />
<b>Tue, 14 Oct 2008 09:33:58 +0100</b>
</p>

<p>
<p class="editorial">
[[[  This is clearly the wrong Talkback link, but after some serious
searching of the LG archives, I can't find the source anywhere. It may
be from some (rare) unpublished recent material. Lacking a better
subject line, I've opted to retain the (inaccurate) original it was sent
in as. -- Kat  ]]]
</p>

</p>

<p>
2008/3/10 Ben Okopnik &lt;ben@linuxgazette.net&gt;:
</p>

<pre>
&gt; Oh, heck - the classic "The spirit is willing, but the flesh is
&gt; weak"/"The vodka is good but the meat is rotten" problem is going to be
&gt; with us for a long, long time.
</pre>

<p>
Turns out that example is false, according to the MT Book
(<a href="http://www.essex.ac.uk/linguistics/clmt/MTBook/):">http://www.essex.ac.uk/linguistics/clmt/MTBook/):</a>
</p>

<pre>
There was/is an MT system which translated The spirit is willing,
but the flesh is weak into the Russian equivalent of The vodka is
good, but the steak is lousy, and hydraulic ram into the French
equivalent of water goat. MT is useless.
 
The `spirit is willing' story is amusing, and it really is a pity that
it is not true. However, like most MT `howlers' it is a fabrication.
In fact, for the most part, they were in circulation long before any
MT system could have produced them (variants of the `spirit is
willing' example can be found in the American press as early as 1956,
but sadly, there does not seem to have been an MT system in America
which could translate from English into Russian  until much more
recently --- for sound strategic reasons, work in the USA had
concentrated on the translation of Russian into English, not the other
way round). Of course, there are real MT howlers. Two of the nicest
are the translation of French  avocat (`advocate', `lawyer' or
`barrister') as avocado, and the translation of Les soldats sont dans
le café as The soldiers are in the coffee. However, they are not as
easy to find as the reader might think, and they certainly do not show
that MT is useless.
</pre>

<p>
For our own ins, the previous release of our Catalan-English
translator mistranslates 'Fidel Castro' (I requested that 'Faithful
Castrate be the release name for 0.8.4, but was unsuccessful); the
current versions of en-ca and en-es both mistranslate the Catalan and
Spanish versins of 'International Monetary Fund' to something like
'Worldwide Bottom Fund' - which might be more accurate in the current
climate, but still - which I fixed last week (you don't need to speak
a language to work on MT, but it helps).
</p>

<p>

</p>

<hr />


<br clear="all" />

<script type='text/javascript'>
digg_url = 'http://linuxgazette.net/156/lg_talkback.html';
digg_title = 'Talkback';
digg_bodytext = '<p>In this month\'s Linux Gazette, \'Talkback\' covers the following topics:<br>Talkback:124/smith.html<br>Talkback:155/xkcd.html<br>Talkback:155/lg_tips.html<br>Talkback:152/srinivasan.html<br>Talkback: [LG 86] 2c Tips #20<br></p>';
digg_topic = 'linux_unix';
</script>
<script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:156/lg_talkback.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
<!-- *** END author bio *** -->

<div id="articlefooter">


<p>
Published in Issue 156 of Linux Gazette, November 2008
</p>

</div>
</div>


<div class="content lgcontent">

<a name="lg_bytes"></a>
<h1>News Bytes</h1>
<p id="by"><b>By <a href="../authors/dokopnik.html">Deividson Luiz Okopnik</a></b></p>

</b>
</p>

<p>
<style type="text/css">
<!--
#news h2 { color: green; text-align: center; }
#news h3 { color: green; }
-->
</style>


<p>
<center>
<table cellpadding="7">
<tr>
<td>
<img src="../gx/bytes.gif" border="1" alt="News Bytes">
</td>
<td>
<h3>Contents:</h3>
<ul>
<li><a href="#general">News in General</a>
<li><a href="#Events">Conferences and Events</a>
<li><a href="#distro">Distro News</a>
</li><li><a href="#commercial">Software and Product News</a>
</ul>
</td>
</tr>
</table>
<strong>Selected and Edited by <a href="mailto:bytes@linuxgazette.net">Deividson Okopnik</a></strong>
</center>

<p style="font-style: italic"> Please submit your News Bytes items in
<strong>plain text</strong>; other formats may be rejected without reading.
(You have been warned!)  A one- or two-paragraph summary plus a URL has a
much higher chance of being published than an entire press release. Submit
items to <a
href="mailto:bytes@linuxgazette.net">bytes@linuxgazette.net</a>.

<hr>

<div id="news">

<p>
<a name="general"></a>
<h2>News in General</h2>

<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">Linux Kernel 2.6.27.2 Launched</h3>

<p>Version 2.6.27.2 of the Linux kernel was released on October
18th, introducing several bug-fixes to the 2.6.27 kernel that added a new
file-system (UBIFS, optimized for pure flash-based storage devices),
several new drivers, and Xen support for saving and restoring virtual
machines, </p>

<p>The full changelog of the release can be found here: 
<a href="http://www.kernel.org/pub/linux/kernel/v2.6/ChangeLog-2.6.27.2">http://www.kernel.org/pub/linux/kernel/v2.6/ChangeLog-2.6.27.2</a>.</p>

<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">Mono 2.0 Release - Major Milestone Reached</h3>

<p>Mono 2.0 was released on October 6th. This very specific release was much 
awaited by Mono users, and is a major milestone for the Mono project, by
offering complete support for Microsoft's .NET 2.0 framework. This gives
developers one more alternative for writing portable programs.</p>

<p>More details of the release:<br />
- New controls for Windows.Forms namespace (Tool and Menu bars, DataGridView, and 
WebBrowser components are some of those components);<br />
- Runtime performance improved;<br />
- Updates to the C# compiler;<br />
- LINQ and LINQ-to-XML support complete.<br />
Along with other changes.</p>

<p>The full release notes can be found here: 
<a href="http://www.mono-project.com/Release_Notes_Mono_2.0">http://www.mono-project.com/Release_Notes_Mono_2.0</a>.</p>


<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">Who says Open Source isn't about money?</h3>
<p>
Alan Lord wrote on the Inkscape discussion e-mail list:
</p>
<blockquote>
This is a great story and Inkscape, along with lots of other FOSS, played its part...
</blockquote>
<p>Details on the design of a new Dutch coin at the link here:
<a
href="http://pythonide.blogspot.com/2008/10/how-to-make-money-with-free-software.html">http://pythonide.blogspot.com/2008/10/how-to-make-money-with-free-software.html</a>
.
</p>

<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">Away with the keyboards and mice!</h3>

<p>
TAG member Jimmy O'Regan sent in this news item, quoting from 
<a href="http://weblog.infoworld.com/fatalexception/archives/2008/10/microsofts_touc.html">
http://weblog.infoworld.com/fatalexception/archives/2008/10/microsofts_touc.html</a>
<blockquote>
"Most recently, Iron Man's Tony Stark designed CAD models for an
entire suit of high-tech combat armor using only his bare hands. So
how come we're all still using keyboards and ordinary old mice?
InfoWorld's ace reporter Paul Krill was the first to spot a new
project from Micr0s0ft Office Labs and Micr0s0ft developer Mike
Wasserman that could bring those next-generation UIs one step closer."
</blockquote>
</p>

<p>
The code is released under the MS-PL, which is open source and
GPL-compatible:<a href="http://www.codeplex.com/touchless">http://www.codeplex.com/touchless</a> 
It's C#, so it should work with Mono (and if it doesn't, it's only a
matter of time before some Mono person makes it work)
</p>

<p>
The article also mentions this project:
<a href="http://www.hitl.washington.edu/artoolkit/">http://www.hitl.washington.edu/artoolkit/</a> which is GPL and already
works on Linux.
</p>

<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">Which came first, the 3-D printer or the 3-D printer it made?</h3>

<p>
Jimmy O'Regan sent in another fantastic tidbit, this one about a
self-replicating open source 3-D printer. "RepRap" stands for Replicating
Rapid-prototyper, and it's simply too cool to explain briefly here.
Code and specification are available under the GPL. "Not counting nuts
and bolts RepRap can make 60% of its parts; the other parts are
designed to be cheaply available everywhere."
They use Art of Illusion ( <a href="http://www.artofillusion.org/)">http://www.artofillusion.org/</a> ) to design models.
</p>

<p>
Version 2.0 is being designed, with a goal of being able to reproduce
its own electronics, too. They've also had success with plywood
<a href="http://reprap.org/bin/view/Main/PlywoodRepRaps">http://reprap.org/bin/view/Main/PlywoodRepRaps</a>
</p>

<p>
Go directly to the RepRap home page here:
<a href="http://reprap.org/bin/view/Main/WebHome">http://reprap.org/bin/view/Main/WebHome</a>
</p>

<hr>

<a name="links"></a>
<h2>Conferences and Events</h2>
<p>
<dl> <dt><strong>Dreamforce '08 SaaS Conference</strong>
<dd>November 2 - 5, San Francisco, CA<br />
<a href="http://www.salesforce.com/dreamforce/DF08/">http://www.salesforce.com/dreamforce/DF08/</a></dl>

<dl> <dt><strong>Storage Decisions 2008</strong>
<dd>November 4 - 6, San Francisco, CA<br />
<a href="http://storagedecisions.techtarget.com/index.html">http://storagedecisions.techtarget.com/index.html</a></dl>

<dl> <dt><strong>System-on-Chip (SoC) Conference 2008</strong>
<dd>November 5 - 6, Newport Beach, CA<br />
<a href="http://www.SoCconference.com">http://www.SoCconference.com</a></dl>

<dl> <dt><strong>OpenOffice.org Conference - OOoCon 2008</strong>
<dd>November 5 - 7, Beijing, China<br />
<a href="http://marketing.openoffice.org/ooocon2008">http://marketing.openoffice.org/ooocon2008</a></dl>

<dl><dt><strong>USENIX Large Installation System Administration Conference (LISA '08) </strong><dd>
November 9 - 14, San Diego, CA <br />
<p>For the past 20 years LISA has been the focal point for the global
community of system and network administrators. This year LISA continues
that tradition, featuring innovative tools and techniques essential for
your professional and technical development. LISA is the premier forum for
presenting new research in system administration. We selected papers
showcasing state-of-the-art work on topics including configuration
management, parallel systems deployment, virtualization, and security.
Bring your perplexing technical questions to experts at LISA's Guru Is In
sessions; explore the latest commercial innovations at the Vendor
Exhibition; benefit from opportunities for peer interaction (a.k.a. the
"Hallway Track").</p>

<a href="http://www.usenix.org/lisa08/lg"><img src="http://www.usenix.org/events/lisa08/art/lisa08_banner_450.jpg" border="0" width="450" height="70" alt="LISA '08">  </a> 

<p>
Early registration discounts for LISA '08, taking place November 9–14,
2008, in San Diego, are now available. Register by Friday, October 17, and
save up to $300!
</p></dl>

<dl> <dt><strong>Agile Development Practices 2008</strong>
<dd>November 10 - 13, Orlando, FL<br />
<a href="http://www.sqe.com/AgileDevPractices/">http://www.sqe.com/AgileDevPractices/</a></dl>

<dl> <dt><strong>ISPcon Fall 2008</strong>
<dd>November 11 - 13,San Jose, CA<br />
<a href="http://www.ispcon.com/future/f08_schedule.php">http://www.ispcon.com/future/f08_schedule.php</a></dl>

<dl> <dt><strong>Mashup Camp Silicon Valley 2008 - Free Registration</strong>
<dd>November 17 - 19, Mountain View, CA<br />
<a href="http://www.mashupcamp.com/">http://www.mashupcamp.com/</a></dl>

<dl> <dt><strong>QCon-SF 2008</strong>
<dd>November 17 - 21, San Francisco, CA<br />
<a href="http://qconsf.com/sanfrancisco-2008">http://qconsf.com/sanfrancisco-2008</a></dl>

<dl> <dt><strong>SANS 9th Annual Security Conference</strong>
<dd>November 19 - 21, Washington, DC<br />
<a href="https://www.sans.org/secitconf08/">https://www.sans.org/secitconf08/</a></dl>

<dl> <dt><strong>SpringOne Americas</strong>
<dd>December 1 - 4, Hollywood, FL<br />
<a href="http://americas.springone.com">http://americas.springone.com</a></dl>

<dl> <dt><strong>VMware Virtualization Forums</strong>
<dd>December 3 - San Diego, CA<br />
December 11 - Boston, MA<br />
<a href="http://info.vmware.com/content/VirtualizationForum_Home">http://info.vmware.com/content/VirtualizationForum_Home</a></dl>

<dl><dt><strong>USENIX Symposium on Operating Systems Design and Implementation (OSDI '08) </strong><dd>
December 8 - 10, San Diego, CA <br />
<p>Join us at the Paradise Point Resort for this symposium covering the
most innovative systems research, including over 20 high-quality papers
in areas including OS architecture, cloud computing, and monitoring, as
well as a poster session. Don't miss the opportunity to gather with
researchers from across the systems community in what has become a
premier forum for discussing the design, implementation, and
implications of systems software.  </p>
<a href="http://www.usenix.org/osdi08/lgb"><img src="http://www.usenix.org/events/osdi08/art/osdi08_banner_450.jpg" border="0" width="450" height="70" alt="OSDI '08"></a> 
<p>Register by November 17 and save $150!</p>
<a href="http://www.usenix.org/osdi08/lgb">http://www.usenix.org/osdi08/lgb</a> </dl>
</p>

<hr>

<a name="distro"></a>
<h2>Distro News</h2>
<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">Ubuntu 7.04 End of Support on October 19th</h3>

<p>On October 19th, Ubuntu 7.04 reaches the end of its support life.
Supported for 18 months, from April 19th 2007 to October 19th 2008, this
version of the Ubuntu distribution will now stop receiving new security
patches and updates.</p>

<p>The only direct update path for users of Ubuntu 7.04 is upgrading
to Ubuntu 7.10. Details of the process can be found here: <a
href="https://help.ubuntu.com/community/GutsyUpgrades">https://help.ubuntu.com/community/GutsyUpgrades</a>.</p>

<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">Red Hat High Performance Computing (HPC) Solution Launched</h3>

<p>Red Hat announced the launch of Red-Hat's HPC Solution, a package of
tools, including the operating system, cluster-creation and management
tools, and development tools, aimed at creation of an HPC cluster in
a single, easy to install package. </p>

<p>Backed up by Red Hat support services, the solution brings 
creation of such services to a new level. According to Red Hat, "With
the Red Hat HPC Solution, making changes to the cluster is a snap. With
its elegant and powerful node group and repository manager, you can
deploy new updates, patches, and software packaged as kits, or re-image
new nodes in minutes with no interruption in uptime. Managing four
hundred nodes requires as little effort as managing four nodes".</p>

<p>You can check more details of the solution here: <a
href="http://www.redhat.com/hpc/">http://www.redhat.com/hpc/</a></p>

<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">Ubuntu 8.10 Server Focuses on Java, Virtualization, and System Management updates</h3>

<p>The Ubuntu 8.10 Server edition is shipping with several updates, some
of then being significant improvements in Virtualization, Java and
System Management capabilities.</p>

<p>For virtualization, Ubuntu 8.10 Server comes with a virtual machine
builder, allowing the user to create and manage virtual machines via the
command line, giving users the option to automate those tasks with
simple scripts. It also comes with an updated KVM, allowing 
more-flexible memory management, including the ability to change a virtual
machine's memory amount without the need to reboot it.</p>

<p>By fully supporting Apache Tomcat 6.0 and the Java OpenJDK, Ubuntu
8.10 server also gives developers more options for developing and
deploying Java applications.</p>

<p>Ubuntu 8.10 Server also comes with several other improvements, including:<br />
- ClamAV and SpamAssassin in the main repositories, for virus and spam 
detection;<br />
- Ability to encrypt private directories;<br />
- Landscape (Canonical's System Management Solution) integration within the 
installer;<br />
- Improved RAID support.</p>

<p>More information about Ubuntu 8.10 Server can be found here: 
<a href="http://www.ubuntu.com/server">http://www.ubuntu.com/server</a>; <br />
And you can download it here: <a href="http://www.ubuntu.com/download">http://www.ubuntu.com/download</a>; <br />
For more information about Canonical's Landscape, follow this link: 
<a href="http://www.canonical.com/landscape">http://www.canonical.com/landscape</a>. </p>

<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">Ubuntu 8.10 To Be Released on October 30th</h3>

<p>Ubuntu's next release, codenamed Intrepid Ibex, will be released on
October 30th, and will include several updates, and some new
features as well. Some of those features are:</p>

<p>- Ability to install from an USB drive;<br />
- New instant-messaging software;<br />
- Guest Sessions (temporary, secure sessions, used when sharing your computer 
with someone else);<br />
- 3g network support;<br />
- Built-in time tracker.</p>

<p>Canonical also teamed up with BBC to ensure most BBC material will
be available trough Ubuntu 8.10's default media players.</p>

<p>More information about the release can be found on <a
href="http://www.ubuntu.com/">http://www.ubuntu.com/</a>, and downloads
will be available on <a
href="http://www.ubuntu.com/download">http://www.ubuntu.com/download</a>.</p>

<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">Debian 4.0r5</h3>

<p>The fifth revision of the popular Debian 4.0 ("Etch") distribution is
available for download, containing several fixes for security problems
of the stable release.</p>

<p>The full announcement of the release, including a list of fixes and
update instructions, can be found here: <a
href="http://www.debian.org/News/2008/20081023">http://www.debian.org/News/2008/20081023</a>.</p>

<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">Linux Mint 5 Fluxbox Released</h3>

<p>Linux Mint announced on October 21th the availability of the Linux
Mint 5 "Elyssa", Fluxbox edition, developed to be a lightweight
distribution, running the Fluxbox window manager.</p>

<p>New features includes an auto-generated and auto-updated Fluxbox
menu, Thunar custom actions, better language and localization support,
multimedia compatibility with several pre-installed codecs and plugins,
and more.</p>

<p>More details and download links can be found here: <a
href="http://www.linuxmint.com/blog/?p=404">http://www.linuxmint.com/blog/?p=404</a>.</p>

<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">Foresight Linux 2.0.5</h3>

<p>On October 17th, Foresight Linux 2.0.5 was released to the public,
being the first stable distribution to feature the latest GNOME, 2.24.
The distribution also contains several other cutting-edge updates,
including OpenOffice.org 3.0 and X.Org server 1.5.1.</p>

<p>More details about this release and download links can be found on <a
href="http://www.foresightlinux.org/releases/2-0-5.html">http://www.foresightlinux.org/releases/2-0-5.html</a>.</p>

<a name="commercial"></a>
<hr>
<h2>Software and Product News</h2>
<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">Java 6 Updated!</h3>

<p>Sun's Java Standard Edition 6 Update 10's availability was announced.
It can be downloaded at <a
href="http://java.sun.com/javase/downloads/index.jsp">http://java.sun.com/javase/downloads/index.jsp</a>.
Changes include faster startup for Java applications, new Direct3D
capabilities, several bug fixes, and more. </p>

<p>More information about the release can be found here: 
<a href="http://java.sun.com/javase/6/webnotes/6u10.html">http://java.sun.com/javase/6/webnotes/6u10.html</a></p>



<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">Flash Player 10 Launched</h3>

<p>Adobe launched Flash Player 10, with several updates and new
features.  This update, unlike Flash Player 9, was released on the same
day for several platforms, including Linux, Windows, and Mac OS X.</p>

<p>While the release does not seem too important for Flash development on
Linux (one of the main new features, the ability to use custom filters
and effects, can only be achieved on Windows and Mac OS, as it requires
the Adobe Pixel Bender toolkit, that runs only on those platforms), for
those who want only to be able to watch Flash clips on Linux, this is
still a release worthy of note.</p>



<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">Gnome 2.24</h3>

<p>GNOME received a new update, this month, and includes several new
features along with a long list of improvements and bug fixes.</p>

<p>The new features of this release include:<br />
- Included instant-messaging solution;<br />
- Ekiga 3 for audio/video conferencing; <br />
- Tabs and new ways of viewing files on the file browser;<br />
- New and improved screen resolution controls;<br />
- Support for sound themes;<br />
- Several accessibility updates;<br />
And much, much more.</p>

<p>Full details can be found here: 
<a href="http://library.gnome.org/misc/release-notes/2.24/">http://library.gnome.org/misc/release-notes/2.24/</a></p>

<h3><img alt="[lightning bolt]" src="../gx/bolt.gif">VMWare Workstation 6.5 Released</h3>

<p>VMWare Workstation, the virtualization solution from VMWare, just
received a new version, and it's full of new features and bug fixes.</p>

<p>Some of those new features include:<br />
- Support for new 32- and 64-bit operating systems;<br />
- Unity mode (integrates the guest and the host desktops);<br />
- Better internationalization support;<br />
- Easy-install option for Linux and Windows guests;<br />
- Virtual network editor for linux hosts;<br />
- Several performance improvements (including network and USB speed-ups);<br />
- Several new developer tools.</p>

<p>The full release-notes can be found here: <a
href="http://www.vmware.com/support/ws65/doc/releasenotes_ws65.html">http://www.vmware.com/support/ws65/doc/releasenotes_ws65.html</a></p>

</div>

<hr>


<br clear="all" />

<script type='text/javascript'>
digg_url = 'http://linuxgazette.net/156/lg_bytes.html';
digg_title = 'News Bytes';
digg_bodytext = '<p>In this month\'s Linux Gazette, \'News Bytes\' covers the following topics:<br>Contents:<br>Linux Kernel 2.6.27.2 Launched<br>Mono 2.0 Release - Major Milestone Reached<br>Who says Open Source isn\'t about money?<br>Away with the keyboards and mice!<br>Which came first, the 3-D printer or the 3-D printer it made?<br>Ubuntu 7.04 End of Support on October 19th<br>Red Hat High Performance Computing (HPC) Solution Launched<br>Ubuntu 8.10 Server Focuses on Java, Virtualization, and System Management updates<br>Ubuntu 8.10 To Be Released on October 30th<br>Debian 4.0r5<br>Linux Mint 5 Fluxbox Released<br>Foresight Linux 2.0.5<br>Java 6 Updated!<br>Flash Player 10 Launched<br>Gnome 2.24<br>VMWare Workstation 6.5 Released<br></p>';
digg_topic = 'linux_unix';
</script>
<script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:156/lg_bytes.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/authors/dokopnik.jpg" class="bio">
</p>

<em>
<p>
Deividson was born in Uni&atilde;o da Vit&oacute;ria, PR, Brazil, on
 14/04/1984. He became interested in computing when he was still a kid,
 and started to code when he was 12 years old. He is a graduate in
 Information Systems and is finishing his specialization in Networks and
 Web Development. He codes in several languages, including C/C++/C#, PHP,
 Visual Basic, Object Pascal and others.
</p>

<p>
Deividson works in Porto Uni&atilde;o's Town Hall as a Computer
 Technician, and specializes in Web and Desktop system development, and
 Database/Network Maintenance.
</p>



</em>

<br clear="all">


<!-- *** END author bio *** -->

<div id="articlefooter">


<p>
Copyright &copy; 2008, <a href="../authors/dokopnik.html">Deividson Luiz Okopnik</a>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication License</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>


<p>
Published in Issue 156 of Linux Gazette, November 2008
</p>

</div>
</div>


<div class="content lgcontent">

<a name="dellomodarme"></a>
<h1>A (not so) short overview of the Geographic Information System GRASS</h1>
<p id="by"><b>By <a href="../authors/dellomodarme.html">Matteo Dell'Omodarme</a> and <a href="../authors/valle.html">Giada Valle</a></b></p>

</b>
</p>

<p>

<p>
The aim of this article is to introduce the GRASS GIS software and to show
its basic usage. As with all GIS software, it is quite complex: there
is a huge number of features and controls, and non-trivial theoretical
information is required even for basic use.  Nevertheless, we think that
the quick introduction presented here could be of some help for 
neophyte users who want to master a GIS program.  </p>

<p>
We chose to devote a large part of this article to practical use of the
software, in particular to real data gathering, reprojection of maps, and
output of results. The decision is motivated by the fact that it is very
difficult (and in some case impossible) to find this information
systematically presented on the Net. Conversely, the introduction to the
interface and the ancillary theoretical information are touched upon only
briefly, because they can be retrieved from many sources (see the section
at the end of this document.)
</p>

<p>
Since there are so many topics to introduce, and since we do not want to
sacrifice clarity to brevity, some topics (i.e., climatological
map-making, interfacing GRASS with statistical software, etc.) are postponed
until another article.
</p>      

<h3>Introduction</h3>
<p>
A Geographic Information System (GIS) is software for
gathering, storing, managing, and presenting data that are
geographically referenced. The characteristic of a GIS is the capability
of examining different sets of geo-referenced data and reaching a
conclusion about the existing relationship among the data. 
In other words, a GIS can link information that is difficult to
associate by other means. 
</p>

<p>
For example, it is possible to relate some geo-referenced information
(e.g., disease foci) with other data (e.g., location of urbanized and rural
zones, climatological data). This can reveal new information that can lead
to better decisions about attempting to control the disease's spread.
</p>

<p>
Nowadays, GIS software is used in several scientific fields, including resource
management, environmental impact assessment, ecology, archaeology,
cartography, and epidemiology.
</p> 

<p>GISes are normally capable of different types of spatial analysis
and geographical feature processing. Some examples:</p>

<ul>
<li><strong>Topological overlay</strong>: software can overlap the elements of two thematic
maps to create a new map (e.g., users can superimpose the boundary of a
natural park with the boundaries of municipalities to determine the areas
of responsibility of administration for each of these);</li>  
<li><strong>Buffering</strong>: the possibility of defining areas within a given
distance from an element (e.g., lake, hill, river);</li>
<li><strong>Network analysis</strong>: algorithms that, given a network of elements
(e.g., roads), determine the minimum routes between two points;</li> 
<li><strong>Geostatistic analysis</strong>: analysis of the correlation between
 geographically referenced variables (e.g., altitude vs. humidity).</li>
</ul>

<p>Geographic Resources Analysis Support System (GRASS) GIS (<a
href="http://grass.osgeo.org/">http://grass.osgeo.org/</a>) is a
geographic information system released under the
GNU General Public License (GPL). 
GRASS is being developed for the GNU/Linux, Mac OS/X, and Windows
operating systems. 
GRASS development is split into stable and 
development branches. The first one is recommended for most
users.</p>

<p>
GRASS is capable of data management, image processing,
graphics production, spatial modeling, and visualization of many
types of data. It's an official project of the Open Source Geospatial
Foundation (<a
href="http://www.osgeo.org/">http://www.osgeo.org/</a>).</p>

<p>
GRASS was originally developed by the U.S. Army Construction Engineering
Research Laboratories (USA-CERL) as a tool for land management and
environmental planning by the military.  From 1982 to 1995, USA-CERL led
the development of GRASS, with the involvement of numerous others,
including universities and other federal agencies.
</p>

<p>
In 1995, the software's development was taken over by a group
formed at Baylor University. In this period, the package was ported to 
Linux. In 1998, Markus Neteler, current project leader,
announced the release of GRASS 4.2.1, offering major improvements
including a new graphical user interface. In October 1999, the license
of the originally public-domain GRASS software was changed to GNU
GPL (specifically, starting with GRASS v. 5.0). Users interested in 
additional historical background can
look at <a
href="http://grass.osgeo.org/devel/grasshist.html">http://grass.osgeo.org/devel/grasshist.html</a>.</p> 

<p>GRASS has now evolved into a powerful utility, with a wide range of
applications. It is currently used in academic institutions and commercial
companies around the world, as well as many governmental agencies and
environmental consulting companies.  
</p>

<h3>1.1 Basic features and documentation</h3>

<p>Upon starting GRASS, the user is presented with a Unix shell containing
a modified environment supporting execution of GRASS commands (known as
<em>modules</em>).  Users can also interface with the majority of GRASS
modules and capabilities through a graphical user interface (GUI).  There
are over 200 core GRASS modules included, and over 100 add-on modules
contributed by users and offered on the GRASS Web site. The GRASS libraries
and core modules are in C, while other modules are in C, Unix shell, Tcl,
or other scripting languages.
</p>

<p>Data managed by GRASS can be roughly divided into  <em>geometric</em>
and <em>attribute</em> data. In the first case, there are:</p>
<ul>
<li><em>Raster data</em>. Data continuously spread in space, 
structured in a matrix of quadratic cells. Each cell gets an attribute
(e.g., temperature, humidity, height, land use code, etc.) Remote
sensing (e.g., infrared images of aerial operations) and
satellite photographs are classical examples. Raster data 
are not associated with neighborhood relationships because
each pixel is defined by itself.</li>
<li><em>Vector data</em>. Used for storage of information about lines and
homogeneous areas defined by closed lines. A
line connects two end points, identified by their
coordinates. State boundaries are an example of such data. Each vector
object can be associated with several attributes.</li> 
</ul>

<p>Attribute data are attributes interconnected with the data types
mentioned above. For example, a vector layer representing countries
boundaries can be associated with data concerning state population, country
identification code, etc.  Data are usually saved within GIS or in a
database system coupled with GIS.</p>


<p>GRASS supports an extensive range of raster and vector formats through
binding to <a href="http://www.gdal.org/">GDAL/OGR libraries</a>. GRASS
release 6 introduces a new topological 2D/3D vector engine, and support for
vector network analysis. Attributes are usually managed in .dbf database
files, although other DBMSes can be used. The system is capable of
visualizing 3D vector graphics data.  
</p>  

<p>A huge amount of information, documentation, and other resources are
available for GRASS. The documentation includes a very useful internal help
system, a <a href="http://grass.osgeo.org/faq/index.html">FAQ list</a>, and
a number of textbooks. In addition to the textbooks (<a
href="http://grass.osgeo.org/gdp/books.php">http://grass.osgeo.org/gdp/books.php</a>),
the <a href="http://grass.osgeo.org/gdp/index.php">GRASS documentation Web
page</a> also hosts various user-contributed documentation, such as
tutorials and courses (<a
href="http://grass.osgeo.org/gdp/tutorials.php">http://grass.osgeo.org/gdp/tutorials.php</a>)
as well as manuals (<a
href="http://grass.osgeo.org/gdp/manuals.php">http://grass.osgeo.org/gdp/manuals.php</a>).
</p>

<p>Other GIS software is available, both open source and proprietary.
Among the former, GRASS is the most widely used, especially for academic
research. As for commercial products, the ArcInfo workstation from
ESRI and Mapinfo Professional from PitneyBowes Mapinfo are the market
leaders. The license price is 9,000-15,000 USD (depending on features)
for ArcInfo and about 1,700 USD for Mapinfo. Both programs have been
developed for Windows, GNU/Linux, and Unix operating systems but lack 
support for Mac OS/X.</p> 

<h3>1.2 Installing GRASS</h3>

<p>The latest version can be found at the
<a href="http://grass.osgeo.org/download/index.php">GRASS download
page</a>. Here, you can find precompiled binaries for several platforms
as well as the source code.</p>

<p>Installation from source requires at least two extra libraries: PROJ4
for management of projections and GDAL/OGR for reading and writing various
GIS data formats. These libraries must be installed in the right order,
before installing GRASS.</p>

<p>The first step is to download PROJ4 from <a
href="http://trac.osgeo.org/proj/">http://trac.osgeo.org/proj/</a>.  The
latest version of the library is 4.6.0. The installation
procedure is straightforward:</p>

<pre class="code">
tar zxf proj-4.6.0.tar.gz
cd proj-4.6.0/
./configure
make
make install
</pre>

<p> 
This library allows management of map projections, which are any
method used in cartography to represent the two-dimensional curved surface
of the Earth or another body on a plane.  Flat maps could not exist without
map projections, because a sphere cannot be laid flat over a plane without
distortions.  To run a GIS package, some details about this topic are
required. Some basic elements are given in the following:  
</p>

<p>The second step is installing the GDAL/OGR library combination. The 
latest version
(1.5.2) can be downloaded from <a
href="http://download.osgeo.org/gdal/">http://download.osgeo.org/gdal</a>.
The install procedure is, again, the usual one:</p>

<pre class="code">
tar zxf gdal-1.5.2.tar.gz
cd gdal-1.5.2/
./configure
make
make install
</pre>

<p>GDAL is a translator library for raster geospatial data, while the OGR
library (which lives within the GDAL source tree) provides a similar
capability for simple-features vector data. 
These libraries allow import and exchange of files between
different GIS programs.</p>

<p>Finally, GRASS can be installed. The last stable version of the
software (currently 6.2.3) is located at the <a
href="http://grass.osgeo.org/download/index.php">GRASS download
page</a>. The software is installed by the now-familiar method:</p>  

<pre class="code">
tar zxf grass-6.2.3.tar.gz
cd grass-6.2.3/
./configure
make
make install
</pre>

<h3>1.3 Running GRASS</h3>

<p> As a first step, the user is required to create a directory (GRASS
database) that will hold the GRASS data. A usual choice is to create a
directory named 'GRASS' (or 'grassdata') in the user's HOME directory.  </p>

<p>
A subdirectory tree, named <em>location</em>, is automatically created in the
GRASS database for each defined project region. All project data are saved
in the location subdirectory. The location can be further subdivided into
map subdirectories called <em>mapsets</em>.
</p>

<p>
All general information about the project area is stored within the
location in the PERMANENT mapset, which is automatically generated by
GRASS. A user can create one or several mapsets for a given location. They
can have the extent of the whole project or smaller.   This characteristic
makes it possible to have several users working on one project at the same
time, without the risk of destroying each other's data.  Other
information about the tree structure of a location can be found, for
example, at <a
href="http://www.gdf-hannover.de/lit_html/grass60_v1.2_en/node10.html">http://www.gdf-hannover.de/lit_html/grass60_v1.2_en/node10.html</a>.  
</p> 


<p>GRASS can then be started by typing the following at the shell
prompt:</p>

<pre class="code">
grass62
</pre>

<p>The program opens a modified shell and displays the following
text:</p>

<pre>
WELCOME TO GRASS              Version 6.2.3         2007

   1) Have at your side all available GRASS tutorials

   2) When working on your location, the following materials
      are extremely useful:
      - A topo map of your area
      - Current catalog of available computer maps

   3) Check the GRASS Web pages for feedback mailing lists and more:
      http://grass.itc.it/
      http://grass.ibiblio.edu/

Hit RETURN to continue
</pre>

<p>After the user presses Enter, GRASS displays a graphical window from which
one can choose the location and the mapset to open, as in the
following figure:</p> 

<img src="misc/dellomodarme/grass-welcome.jpg" alt="GRASS" width="552" height="586">

<p>From this window, one can read two important pieces of data:</p>

<ul>
<li>The database directory of the software (e.g., /home/matt/GRASS) where
all the GIS data reside.</li>
<li>The available locations in the database directory. In this case,
there are 4 locations. </li> 
</ul>

<p>
Besides choosing a defined location, it is also possible to create a new
location in three different ways. These methods differ in the amounts of
information required of the user. The simplest case occurs when
data about the location are self-contained in the imported map
(geo-referenced file); in these cases, no other information is needed. 
</p>


<p>The definition of a new location requires input (directly by
the user or indirectly from a map) of the following
information:</p>
<ul>
<li>the coordinate system for the location;</li> 
<li>the minimum and maximum coordinates of the area of interest; and</li>
<li>the ground resolution.</li>
</ul>

<p>These settings are critical for correct display and management of
the location. Therefore, before going further, it's worthwhile to introduce
some theoretical information about projections and coordinate systems.</p> 

<h3>1.4 Excursus: projections and coordinate systems</h3>

<p>
In a GIS, the information is stored with coordinates; therefore, a
coordinate system has to be specified.  For geographical data, the
geographic system (the well known <a
href="http://en.wikipedia.org/wiki/Latitude">latitude</a> and  <a
href="http://en.wikipedia.org/wiki/Longitude">longitude</a>) or a geodetic
projection like Universal Transverse Mercator (UTM) or Gauss-Kr&uuml;ger
are the usual choices.
</p>
  
<p>
The UTM coordinate system is a grid-based method of specifying locations
on the surface of the Earth. It differs from the traditional method of
latitude and longitude in several respects. The Gauss-Kr&uuml;ger system is
similar to the UTM system with only small differences. More details on
these coordinate systems can be found in further readings listed in the
final section.
</p> 

<p>
To optimize the projection from the geoid into a flat map, the Earth is
approximated by an ellipsoid.</p> 

<p>Different projections are used because each projection is particularly
appropriate for certain uses or areas. For example, a projection that
accurately represents the shapes of the continents will distort their
relative sizes.  GRASS offers predefined projections, as well as the
geographic system and the possibility to define a geodetic projection by
yourself.  In this last case, the projection type, the ellipsoid and the <a
href="http://en.wikipedia.org/wiki/Datum_(geodesy)">datum</a> (a reference
from which measurements are made) for referencing the ellipsoid have to be
specified.  </p>
 

<h3>1.5 Creating a location: the quest for data</h3>

<p>
The best way to appreciate the functionality of GRASS is to see it
in action on a real case-study. As a first step, let us introduce the
usual question that worries every new user: "Well, I have just
installed this wonderful software, and I have some geo-referenced
data to analyze and relate to geophysical characteristics of my
research area. But what about geophysical maps? Where can I get
them? What kinds of thematic data are available for my region of
interest?"
</p>

<p> 
The answer obviously depends on the analysis you have planned, and
on the geographic region of interest. Some frequently desired thematic
maps are:</p>

<ul>
<li>Elevation data</li>
<li>Landsat data</li>
<li>Land use data</li>
<li>Climatological data</li>
<li>State boundaries</li>
</ul>
<p>Let us state clearly that, if you are interested in a very specific
and very high resolution map, your only hope is to find this resource
for a fee (usually substantially high) from a local agency. Sometimes,
these data are distributed in electronic format; otherwise, you have to
scan them from the hardcopy, yourself.
</p>

<p>
If you are instead interested in large-region medium resolution (30 -
100 m) maps, the Net hosts several amazing resources you should use.      
In the following section, we describe Net sources where this information is
available for free download, and how to import them into GRASS.</p>

<h3>2. Elevation data</h3>

<p>The Shuttle Radar Topography Mission (SRTM) obtained elevation data on a
near-global scale to generate the most complete high-resolution digital
topographic database of Earth.  SRTM consisted of a specially modified
radar system flown onboard the Space Shuttle Endeavor during an 11-day
mission in February of 2000.  The SRTM data are available as 3 arc second
(90m resolution). 1 arc second data are available for US.  The Global Land
Cover Facility provides free access to the data (<a
href="http://glcfapp.umiacs.umd.edu:8080/esdi/">http://glcfapp.umiacs.umd.edu:8080/esdi/</a>).)
The data contains "holes" where water or heavy shadow prevented the
evaluation of elevation.</p> 

<p>In the following example we show how to obtain elevation data
for Tuscany (Central Italy), where we currently live.
</p>

<p>
Data gathering starts by connecting to the <a
href="http://glcfapp.umiacs.umd.edu:8080/esdi/">Global Land Cover
Facility</a> Web page. In the page, the three ways in which you can access
the data (Map Search, Path/Row Search, Product Search) are displayed. Let
us choose the first, Map search: the user must choose the desired product
in the left panel and select the world region of interest (map on the
right). Since we are interested in elevation data, we can choose one among
the four available options.  Note that GTOPO30 is a global digital
elevation model with a horizontal grid spacing of 30 arc seconds, so about
ten times less accurate than SRTM data.  The first two options are
different ways to access the SRTM dataset: the first one allows download of
tiles of 1 degree square, while the second accesses WRS-2 tiles to
approximate Landsat scenes, which we will introduce in the next paragraph.
For reasons that will become clear, we choose to select this second option.
</p>

<p>Now, we have to select the geographic region of interest, by clicking on
the place panel, just above the world map. In the displayed text box type
"Toscana, Italy" and press Enter. (In general, you type "Location, State".)
You should then see a page similar to the one displayed in the figure.</p>

<img src="misc/dellomodarme/srtm.jpg" alt="srtm-1" width="600" height="420"> 

<p>There are 35 maps available in the selection. The next step is to
select the ones of interest. Having pressed the button "Preview &amp;
Download", the selection window is displayed. It looks like the
figure below:</p>

<img src="misc/dellomodarme/srtm2.jpg" alt="srtm-2" width="650" height="364"> 
   
<p>The screen is divided into two zones. In the lower one available maps are
listed, with their associated information. In particular, you can see the
type of data (GeoTIFF format, a widely used raster format), the status
(unfinished, unfilled, finished-a, and finished-b in ascending order
of processing level and of our choice).  In the third column, there are
data which allow the identification of path/row attributes, used for 
Landsat satellite data. The user can select a map by clicking on its ID (first
column). In the upper area, information about the selected map is
shown. In the right part, the user can check which zone is covered by
the map. This picture can guide the selection of really interesting maps.
After identification of a desired map, the user should press the download
button, and download the .tif.gz file from the window that will open.  </p> 

<p>At the end of the scan, you will find that only four maps are required
for download: ID 180-332 (path/row: 191/030), ID 180-364 (192/029), ID
180-365 (192/030), and ID 180-408 (193/029). These files can be saved in a
directory, e.g., $HOME/SRTM, and uncompressed.  </p>

<h3>2.1 Importing a raster map</h3>

<p>GeoTIFF files incorporate information about the coordinate system, the
projection, and the datum used for their georeferencing. In this way, it is
possible to use them to define a new GRASS location, and subsequently
import them into the software. </p>

<p> The process is a little tedious. From the start page of GRASS
(displayed in the first figure of this article), define a new location by
pressing the button "Georeferenced file". In the window that will open,
insert the name of the new location (e.g., "tuscany"), and, in the last one,
select the path to one of the four downloaded files (e.g.,
SRTM_ffB03_p192r029.tif). End the location definition by pressing "Define
location". GRASS generates the tree for the new location, and displays a
warning requesting to close the program.</p> 

<p>At the restart, you will be able to see your first new generated
location!</p>

<p>Select the location tuscany, and the mapset PERMANENT, then click
on "Enter GRASS". The shell will display the following greeting
message:</p>

<pre>
Welcome to GRASS 6.2.3 (2007) 
GRASS homepage:                          http://grass.itc.it/
This version running thru:               TC Shell (/bin/tcsh)
Help is available with the command:      g.manual -i
See the licence terms with:              g.version -c
If required, restart the graphical user interface with: gis.m &amp;
When ready to quit enter:                exit

Mapset &lt;PERMANENT&gt; in Location &lt;tuscany&gt;
GRASS 6.2.3 &gt; 
</pre>

<p>Besides that, three more windows will open: the GUI (window GRASS
6.2.3 GIS Manager), the output window which will host the output of
all commands issued by means of GUI, and the map display window.<br>

At this point, the Tuscany location is created, but it hosts no
data. Importation of the four downloaded maps can be performed either
by shell command or by GUI. We illustrate first this second approach,
since it will also show the shell command associated with the GUI
procedure.</p>

<p>
From the GUI menu bar, select File / Import / Raster map / Multiple
formats using GDAL. Fill in the form that will open, as in the following
figure:</p>

<img src="misc/dellomodarme/r-in-gdal.png" alt="r-in-gdal" width="529" height="572"> 

<p>The only required fields are the name of input file and the output
name, i.e., the internal name GRASS associates to this map. The box
"Extend location extents based on new datasat" will extend the
location to encompass the imported map.</p>

<p> In the window's last line, the shell command associated with the
import operation gets displayed. Its structure is really simple, and makes it
faster to import the other maps from the shell. At the shell prompt, insert
these commands:</p>

<pre class="code">
r.in.gdal -e input=/home/matt/SRTM/SRTM_ffB03_p192r030.tif output=192_030
r.in.gdal -e input=/home/matt/SRTM/SRTM_ffB03_p193r029.tif output=193_029
</pre>
<p>Unfortunately, trying to import the fourth map, you receive an error:</p>

<pre class="code">
r.in.gdal -e input=/home/matt/SRTM/SRTM_ffB03_p191r030.tif output=191_030

ERROR: Projection of dataset does not appear to match current location.
</pre>

<p>What is happening? The answer is simple, as is the solution. The
projection information associated with this map is different from the those
of the three imported maps. The simpler solution is to import the map in a
new location (say, "tuscany2"), which will be created ad-hoc, and then
reproject the data in the current location. The first step is accomplished
by adding a <em>location</em> parameter to <i>r.in.gdal</i>:

<pre class="code">
r.in.gdal -e input=/home/matt/SRTM/SRTM_ffB03_p191r030.tif output=191_030 location=tuscany2
</pre>

<p> Since a map's projection does not extend the region boundaries on the
fly, you have to be certain that your region is large enough to contain the
projected map. In this case, this is false, because the fourth map is
partially outside the east boundary. You have to manually adjust this
boundary with the command <em>g.region</em> (Config / Region / Change
region settings from GUI), and then reproject (Raster / Develop map /
Reproject raster from other location from GUI).</p>

<p> Which value has to be set as the east boundary? To make an educated
guess, it is better to look at the coordinates of one of the imported maps.
You can do it by setting the boundaries of the location to match one of the
maps and then extrapolate where the fourth map will be located. For example:

<pre class="code">
g.region rast=192_029

g.region -p
</pre>

<p>The first command sets the location's boundaries 
to those of map 192_029. The second one queries all of the location's 
parameters; from its output, we can learn several
things, such as coordinate system, projection, datum, and
coordinates of the boundaries (Config / Region / Display region
settings from GUI): </p>

<pre>
projection: 1 (UTM)
zone:       32
datum:      wgs84
ellipsoid:  a=6378137 es=0.00669437999014138
north:      5065399.56462278
south:      4821139.56462278
west:       576236.63839707
east:       828866.63839707
nsres:      90
ewres:      90
rows:       2714
cols:       2807
cells:      7618198
</pre> 

<p>In the output above, the measures are in meters.
Now it is possible to set the eastern boundary:
</p>

<pre class="code">
g.region e=968866
</pre>

<p>And reproject the map in the current location:</p>

<pre class="code">
r.proj input=191_030 location=tuscany2 output=191_030 method=nearest
</pre>

<p>
The syntax of <em>r.proj</em> is self explanatory. The option
<em>method</em> chose the interpolation algorithm to be used. (Note: if you
set an incorrect east boundary, and you have to reproject the map, you
must add the flag --overwrite at the end of command <em>r.proj</em>.)</p>

<h3>2.2 Displaying and patching raster maps</h3>

<p>It is time to see some output from GRASS! Let us display one of the
imported maps, say, 192_029.  This is done by using the GUI and pressing
the "Add raster layer" button <img src="misc/dellomodarme/GUI-rast.png"
alt="GUI-rast" width="23" height="23">.</p>

<p>A new empty raster layer is then added for visualization in the upper
part of the GUI window. By clicking on the name of the layer, you cause 
the lower part of the window to display a form. Here, you can define
which map is associated with the layer. Press on the Base map button, and
select the map from the list that is then shown. At the end of the
procedure, the GUI should look like this:</p>

<img src="misc/dellomodarme/GUI-layer-rast.png" alt="GUI-layer-rast" width="493"
height="508">   

<p>You should now admire the results of your work. In the Map display
window, press the "Display active layer" button (the first one). The window
will probably remain empty. In this case, we have to set the zoom of the
displaying window to the one of the region boundaries (which we set in the
previous paragraph). You should press on the button "Zoom to..." <img
src="misc/dellomodarme/zoom.png" alt="zoom" width="23" height="23">, and
select the option "Zoom to current region" as shown in the figure:</p>

<img src="misc/dellomodarme/GUI-raster-1st.jpg" alt="GUI-rast"
width="550" height="482">   

<p>The displayed map should look almost red, with the exception of a few
yellow areas, which correspond to the no-data zones.  A useful instrument
available from the Map Display window is the query button <img
src="misc/dellomodarme/query.png" alt="query" width="23" height="23">.
Select it and then press over the map; the value associated to the cell is
shown in the output window. You will discover that, for example, no-data
areas are represented by value -32768.  </p>

     
<p>Now it's map-cleaning time! We have to patch the four maps to obtain a
new composite map. Before that, we have to clean up the maps. In fact, GRASS
expects that no data zones will be identified by a NULL value, while, as we
know, SRTM maps identifies no-data areas with the code -32768. The
following commands correct this problem (Raster / Develop map / Manage null
values from GUI):</p>

<pre class="code">
r.null map=191_030 setnull=-32768
r.null map=192_029 setnull=-32768
r.null map=192_030 setnull=-32768
r.null map=193_029 setnull=-32768
</pre>

<p>The next step is definition of the correct location boundaries.
GRASS can make boundaries from a series of maps. We use this
characteristic by issuing the command:</p>

<pre class="code">
g.region rast=191_030,192_029,192_030,193_029
</pre> 

<p>The resulting boundaries just encompass the four maps.</p>
 
<p>As our last step, we can merge the maps, and define an appropriate
colormap:</p>
<pre class="code">
r.patch in=191_030,192_029,192_030,193_029 output=elev
r.colors map=elev rules=srtm
</pre>

<p>The command <em>r.patch</em> (Raster / Overlay maps / Patch maps from GUI)
creates a new map, named <em>elev</em>, by merging the four existing ones,
while <em>r.colors</em> (Raster / Manage map colors / Set colors to
predefined color tables from GUI) defines a colormap using an appropriate
predefined ruleset (srtm).</p>  

<p>To correctly visualize the map, we have to restart GRASS after having
closed the session by entering <em>exit</em> at the shell prompt, and closing
the window manager.  After having restarted the software, we can display
the final result of our work: repeat the procedure used for displaying a
raster layer and select the map elev.  The map should look like this
one:</p>

<img src="misc/dellomodarme/tuscany.jpg" alt="tuscany" width="600"
height="526"> 

<p>If the result is satisfactory, you can delete the four small maps.  From 
the GUI, the path is "File / Manage maps and volumes / Remove maps"
and fill the raster field with the name of the maps to delete.  From the shell,
type:</p> 

<pre class="code">
g.remove rast=191_030,192_029,192_030,193_029
</pre>

<p>At the end of this section, we have created an elevation map for the
Central Italy area. We will later extract from it the data related to
the Tuscany region, and discard the rest.</p> 

<p>As a final note, since the coverage of SRTM data is worldwide, the
procedure can be repeated for any location.</p>


<h3>3. Landsat data</h3>

<p>Landsat-7 is a satellite launched on April 1999. It has
sun-synchronous, near-polar orbit that allows it to record the surface of
the Earth in a pattern of overlapping 185 km swaths, completing one scan
every 233 orbits. The pattern is catalogued as a tiled global grid of 233
paths and 248 rows in the so called Worldwide Referencing System (WRS). We
have seen an example of this reference system when downloading SRTM
data.</p>

<p>The satellite is equipped with an instrument called the Enhanced Thematic
Mapper (ETM+), a multi-spectral radiometric sensor.  The sensor records
eight bands of data with varying spectral and spatial resolutions (30 m
spatial resolution for red, green, blue, near infrared, and two bands of
medium infrared; 60 m for thermal infrared; and a 15 m panchromatic band).
A list of the bands with their spanned wavelength (in micrometers) is given
below:</p> 

<ol>
<li>Blue-Green: 0.45-0.515 &mu;m</li>
<li>Green: 0.525-0.605 &mu;m</li>
<li>Red: 0.63-0.690  &mu;m</li>
<li>Near infrared: 0.760-0.900 &mu;m</li>
<li>Medium infrared:  1.550-1.750 &mu;m</li>
<li>Thermal: 10.40-12.5  &mu;m</li>
<li>Medium infrared: 2.080-2.35  &mu;m</li>
<li>Panchromatic: 0.52-0.92 &mu;m</li>
</ol>


<p>Landsat data are available from many sources. During April 2008, all data
gathered by the satellite were released into the public domain, so it is
possible to download scenes acquired in different months and different
years. (See <a
href="http://landsat.usgs.gov/products_data_at_no_charge.php">http://landsat.usgs.gov/products_data_at_no_charge.php</a>
for details.) We will show here a simpler method of download, limited at
one dataset acquired in the years 2000-2001, available at the <a
href="http://glcfapp.umiacs.umd.edu:8080/esdi/">Global Land Cover
Facility</a> Web page. Data gathering procedure is identical to that
described in the previous section. The user must select the right
product by checking the ETM+ box in the interface shown in second figure of
this document.</p> 

<p>The result should be similar to the figure below:</p>

<img src="misc/dellomodarme/landsat.jpg" alt="landsat" width="650" height="343">

<p>The same path/row maps downloaded for elevation data are required; this
correspondence greatly accelerates the user choice. In this case, the map IDs
are: ID 036-387, ID 036-429, ID 036-430, and ID 036-128.</p> 

<p> By pressing the download button, you can see that the data are available
as a set of eight GeoTIFF files (one for each ETM+ band). They are much
bigger than SRTM data, since the resolution is about three times as great.
You can download whatever band you desire.</p>

<p> Landsat data can be used to assess the type, extent, and condition of
vegetation over a region, or vegetative change over time.  These studies
require that a vegetative index be calculated from sets of
remotely-sensed data. The most widely used index is the <a
href="http://en.wikipedia.org/wiki/NDVI">Normalized Difference Vegetative
Index</a> (NDVI). The NDVI is calculated as a ratio between measured
reflectivity in the red and near-infrared portions of the electromagnetic
spectrum. These two spectral bands are chosen because they are affected by
the absorption of chlorophyll in leafy green vegetation and by the density
of the green vegetation on the surface. Moreover, in red and near-infrared
bands, the contrast between vegetation and soil is at a maximum.</p> 

<p>ETM+ bands 3 and 4 provide red and near-infrared measurements, and
therefore can be used to generate NDVI data sets with the following
formula:</p> 
<pre>
NDVI = (Band 4 - Band 3) / (Band 4 + Band 3)
</pre>

<p>The NDVI equation produces values in the range of -1.0 to 1.0.
Vegetated areas will typically have values greater than zero, and negative
values indicate non-vegetated surface features such as barren, water, ice,
snow, or clouds.  NDVI value are usually scaled for display, as is the
following equation:</p> 

<pre>
Scaled NDVI = 100 (NDVI + 1)
</pre>


<h3>3.1 Making a raster map from existing ones</h3>

<p>To evaluate the NDVI index for Tuscany, we have to download bands 3 and
4.  These files can be saved in a directory, say, $HOME/Landsat, and
uncompressed. </p>

<p>In order to preserve the projection values of Landsat data, the data can
then be imported in a new location, e.g., landsat, in order to preserve the
projection values of Landsat data. As shown in the preceding section, the
command (dataset 193/29, band 4) is:</p>  

<pre class="code">
r.in.gdal -e input=/home/matt/GIS/Landsat/p193r029_7t20010801_z32_nn40.tif output=193_29_4 location=landsat
</pre>

<p>Restart GRASS, enter the new defined location, mapset PERMANENT,
and finish the import:</p>
<pre class="code">
r.in.gdal -e input=/home/matt/GIS/Landsat/p193r029_7t20010801_z32_nn30.tif output=193_29_3

r.in.gdal -e input=/home/matt/GIS/Landsat/p192r029_7t20000620_z32_nn40.tif output=192_29_4
r.in.gdal -e input=/home/matt/GIS/Landsat/p192r029_7t20000620_z32_nn30.tif output=192_29_3

r.in.gdal -e input=/home/matt/GIS/Landsat/p192r030_7t20000620_z32_nn40.tif output=192_30_4
r.in.gdal -e input=/home/matt/GIS/Landsat/p192r030_7t20000620_z32_nn30.tif output=192_30_3
</pre>

<p>As seen previously, map 191/30 has a different projection, so you have to
read that map in a new location (one for each map), extend the region
boundaries, and reproject the maps in the current location:</p>

<pre class="code">
r.in.gdal -e input=/home/matt/GIS/Landsat/p191r030_7t20010803_z33_nn40.tif output=191_30_4 location=landsat2
r.in.gdal -e input=/home/matt/GIS/Landsat/p191r030_7t20010803_z33_nn30.tif output=191_30_3 location=landsat2b

g.region e=968866

r.proj input=191_30_4 location=landsat2 output=191_30_4 method=nearest 
r.proj input=191_30_3 location=landsat2b output=191_30_3 method=nearest 
</pre>

<p>As a last step, we can patch the maps together. Since, in this case, null
values are represented by zeroes we can skip the <em>r.null</em> call by
adding a <em>-z</em> flag to <em>r.patch</em>:</p>

<pre class="code">
r.patch -z in=192_29_4,192_30_4,193_29_4,191_30_4 output=Landsat_B4
r.patch -z in=192_29_3,192_30_3,193_29_3,191_30_3 output=Landsat_B3
</pre>

<p>Now, all the elements for NDVI calculation are on hand. It is time
to learn how to make a new map starting from existing ones!
</p>

<p>
The best approach is to use the shell command <em>r.mapcalc</em>:
</p>

<pre class="code">
r.mapcalc "NDVI=(float(Landsat_B4 - Landsat_B3) / (Landsat_B4 + Landsat_B3) + 1)*100"
</pre>

<p>To obtain a floating point division (the Landsat maps are integer maps),
the float function is required. The command makes a new map, called NDVI,
by operating, cell by cell, on the values in maps Landsat_B3 and
Landsat_B4.</p>

<p>Finally, you should reproject the NDVI map into the tuscany location. To
do that, exit from GRASS session, restart the program, and login into the
tuscany location. Then issue the command:</p>

<pre class="code">
r.proj input=NDVI location=landsat output=NDVI
</pre>

<p>If no problem arises, you will have two raster maps in this location. To
recover disk space, all other locations can be erased. This can be done by
exiting GRASS, changing directory to $HOME/GRASS, and deleting the
directories tuscany2, landsat, landsat2, and landsat2b. The resulting map
will be shown in the next section, once having learned how to "mask" it in
order to show only the pixels of Tuscany.</p> 

<p>As for SRTM data, Landsat data also is worldwide, so you can repeat
the procedure for any location on the Earth.</p>

<h3>4. Getting state and districts' boundaries</h3>

<p>States', districts' and municipalities' boundaries can be retrieved from
several sources, depending on the region of interest. In the case of
Italian regions, for example, these are available from the <a
href="http://www.istat.it/ambiente/cartografia/">ISTAT</a> Web site (in
Italian). The file of interest (<a
href="http://www.istat.it/ambiente/cartografia/regioni.zip">regioni</a>)
can be downloaded from the right panel.  This file contains Italy's regional
boundaries.
</p>

<h3>4.1 Managing a vector map</h3>

<p>Download the file into a new directory, e.g., $HOME/IT, then unzip
it. The content of the archive consists of several files, one of
which is a .shp file, a widely used vector type of data.</p>

<p>To read this type of data into GRASS, proceed in this way. Start
GRASS in the tuscany location, then issue the command (File / Import /
Vector map / Various formats using OGR from GUI):</p>
<pre class="code">
v.in.ogr -e dsn=/home/matt/IT/reg2001_s.shp output=reg_boundaries min_area=0.0001 snap=-1 location=italy_reg
</pre>

<p>The import requires the specification of a datum transformation
parameter. At the prompt, you can select parameter 8, valid for whole
European area.  At the end, you will have a new location, named italy_reg,
which will contain a vector map named reg_boundaries.</p>

<p>Now, logout from the GRASS session and restart in the newly created
location. The acquired vector map contains political boundaries of all the
Italian regions. For our example, only the Tuscany region is of interest, so
we have to extract an element from a map. For a vector map, this is a quite
simple operation, since it is equivalent to extracting records from a
database through a query. </p>

<p>To do the extraction, we should first learn how to inspect the database
associated with a vector map. This can be easily done in the GUI. Vector
layers are added to the display layer, in a fashion similar to the raster
layers. The only change is that users have to press the "Add vector
layer" button <img src="misc/dellomodarme/GUI-vect.png" alt="GUI-vect" width="23"
height="23">. </p>

<p>Select the added layer in the top part of the GUI window. In the bottom
part, which will become available, choose the vector map you want to
display, using the "Vector map" text field or the corresponding button.
There are many more options for vector maps than for raster maps. For now,
we are interested in the two buttons located at the end of the list. Scroll
down the window, and you should see the buttons "show attribute columns"
and "show attribute data". </p>

<img src="misc/dellomodarme/GUI-vector.png" alt="GUI-vector" width="505" height="605">

<p>These buttons access the database linked to the map and return,
respectively, the names of the database columns and the contents of the whole
database, as shown in the next figure where these outputs are displayed.
Note that each output is prefaced by the command forwarded from the
GUI to the shell interpreter.</p>  

<img src="misc/dellomodarme/vector-db-out.png" alt="vector-db" width="562" height="465">

<p>The database contains four columns: a key used to index the
table, the code of the regions, their names and their populations as 
recorded in 2001. The region code could be used for extraction of
Tuscany. You can do that typing the command:</p> 

<pre class="code">
v.extract in=reg_boundaries out=tuscany_boundaries new=-1 where="COD_REG=9"
</pre>

<p>The map tuscany_boundaries will be created. The option
<em>new=-1</em> preserves the database table, exporting it in the new
map.</p>
 
<h3>4.2 Vector to raster conversion</h3>
 
<p>Before exiting and connecting again in the tuscany location, we'll
demonstrate how to convert a vector map to a raster one. This step will
create a silhouette of the Tuscany region, which will later help us to
"cut" the map of elevation and NDVI to the required extent.  The resolution
of the vector map is much lower than the one of the tuscany location (check
it yourself: <em>g.region -p</em>). So, we increase the resolution and then
convert the vector map:</p>

<pre class="code">
g.region nsres=90
g.region ewres=90

v.to.rast input=tuscany_boundaries output=MASK use=val
</pre>

<p>This command makes the map MASK (a reserved map name), assigning to all
cells the same value (option <em>use=val</em>). When a raster map named MASK
exists in a location, most raster operations (on any raster map) will
take place only in the grid cells specified by the MASK.</p> 

<p>Now, restart GRASS, and access the tuscany location. Then, reproject the
vector and the raster maps from italy_reg:</p> 
<pre class="code">
v.proj input=tuscany_boundaries location=italy_reg output=tuscany_boundaries

r.proj input=MASK location=italy_reg output=MASK
</pre>

<p>If we try to display the elev raster map, as we did before, the result is
different. The elev map is masked, and only cells from Tuscany will be
shown. The same behaviour occurs for NDVI map. The two maps are shown in
the following figure (NDVI on the left, elevation on the right).</p>

<img src="misc/dellomodarme/NDVI-elev.jpg" alt="NDVI-elev" width="573" height="313">

 
<h3>5. Land cover map</h3>

<p>Land cover data are available from different sources, depending on the
region of your interest. For European countries, you can refer to Corine
Land Cover (CLC). CLC is a map of the European environmental landscape
based on interpretation of satellite images; it provides comparable digital
maps of land cover for each country for much of Europe, and includes 47
classes of land cover. Data on land cover is necessary for environmental
policy, regional development, and agriculture policies.</p>

<p>Corine Land Cover 2000 data can be downloaded at 100 m horizontal
resolution in raster format (GeoTIFF) from the European Environmental
Agency Web site (<a
href="http://dataservice.eea.europa.eu/dataservice/metadetails.asp?id=1007">http://dataservice.eea.europa.eu/dataservice/metadetails.asp?id=1007</a>).
Users are required to complete the "Agreement form for Corine Land Cover
2000", which is shown before
download. In this way, you can download the whole European area
contained in the file lceugr100_00EEA17938I.zip (approx 66MB).
The download page is shown in the following figure. 
In the same page, you will find the file (four formats are available)
containing the legend for interpretation of the map. 
</p>

<img src="misc/dellomodarme/corine2000.png" alt="corine-download" width="650"
height="250">

<p>There is also the possibility of downloading data in vector
format (shapefile .shp), selecting on a
grid only the region of interest (see <a
href="http://www.eea.europa.eu/themes/landuse/clc-download"> 
http://www.eea.europa.eu/themes/landuse/clc-download</a>).
</p>

<p>After having downloaded the file into a directory, e.g., $HOME/CLC,
uncompress it; the files will be expanded in a subdirectory named
lceugr100_00. Then start GRASS in the tuscany location and import the data
into the new location (e.g., CLC):</p>
<pre class="code">
r.in.gdal -e input=/home/matt/CLC/lceugr100_00/lceugr100_00_pct.tif output=CLC location=CLC
</pre> 

<p>CLC data can be reprojected in the current location:</p>
<pre class="code">
r.proj input=CLC location=CLC output=CLC method=nearest
</pre> 

<p>The new raster map can be displayed as shown before. The result is
in the following figure; the presence of the raster MASK will cut the
map at the desired boundaries.
</p>

<img src="misc/dellomodarme/clc.jpg" alt="corine" width="499" height="482">

<p>The various areas are depicted in different colors. The legend for
interpretation of the map can be found in the file 
$HOME/CLC/lceugr100_00/clc_legend.xls. From this file you can see
that, for example, CLC code 111 represents Artificial surfaces/Urban
fabric/Continuous urban fabric and is depicted in RGB color 230-0-77,
while code 221 is Agricultural areas/Permanent crops/Vineyards, and its
RGB color is 230-128-0.
</p>

<p>After a successful import of the map, you can recover a lot of disk
space by erasing the location CLC. This is done by exiting GRASS and
deleting the directory $HOME/GRASS/CLC.</p>
  

<h3>5.1 Land cover map of US</h3>

<p>When the research area is within the USA, the user can refer to the
National Land Cover Database (NLCD 2001). It is an update of <a
href="http://landcover.usgs.gov/natllandcover.php">NLCD 1992</a>, and
includes 21 classes of land cover at 30 m cell resolution.  The 76 standard
NLCD mapping zones have been grouped into 15 larger zonal areas for easier
distribution and download.  The download site address is <a
href="http://www.mrlc.gov/nlcd_multizone_map.php">http://www.mrlc.gov/nlcd_multizone_map.php</a>.
</p> 

<img src="misc/dellomodarme/USA-landcover.jpg" alt="USA landcover" width="650" height="325">

<p>This page also contains a link to a zipped <a
href="http://www.mrlc.gov/mapzone.zip">shapefile</a> (3 MB) with the
standard NLCD zones as well as a multizone attribute.  Download it into
$HOME/US directory, and unzip its content: a subdirectory named
<em>landcover_bndry_030607_shp</em> will be created in the process. There,
along with several other files, you'll find the
<em>landcover_bndry_030607.shp</em> shapefile, which we'll later import
into a new location.</p>

<p>The next step is to download the landcover for the zone of
interest: you have the option to download data
for a state or a superzone. As an example, let us choose the data for
superzone 13 by clicking on it over the displayed US map. In the page that will
open, select the link <em>Land Cover zip file</em>, and save the
associated file <em>area_13_landcover.zip</em> (130 MB) in the directory
$HOME/US, then unzip its content. Among other files, you will see the
raster file <em>landcover13_3k_022007.img</em>, which we are going to
import into GRASS.</p> 

<p>After restarting GRASS in the tuscany location, we can import the
superzone 13 raster data into a new location, i.e., USA:</p>
<pre class="code">
r.in.gdal -e input=/home/matt/US/landcover13_3k_022007.img output=area13 location=USA
</pre>
<p>The import requires specifying the datum transformation parameter. At
the prompt, you can select parameter 6, valid for whole North American
region.</p>

<p>Exit GRASS, and restart in the USA location. Then, import the shapefile
containing the states' boundaries, and extend the location boundaries to
match the ones of the vector map:</p>
<pre class="code">
v.in.ogr -o dsn=/home/matt/US/landcover_bndry_030607.shp output=boundaries min_area=0.0001 snap=-1

g.region vect=boundaries
</pre>

<p>Finally, we can display the resulting map, superimposing the vector
layer to the raster one. To do that, in the GUI, you can start by adding a
raster layer for visualization and selecting the raster map area13. Then,
add a vector layer and select map boundaries. Using the vector layer, you
can display a variety of objects: points, lines, centroids, and areas.  To
display only the boundary lines, deselect checkbox centroids and areas, as
in the figure below.  </p>

<img src="misc/dellomodarme/GUI-USA.jpg" alt="USA layers" width="493" height="508">

<p>Then, activate the Map Display window, and press the display
button. The zoomed result should look like this:
</p>
<img src="misc/dellomodarme/USA-a13.jpg" alt="USA landcover A13" width="353" height="482">

<p>The described procedure could be adapted to other locations over the
planet. A useful reference for landcover data is <a
href="http://landcover.usgs.gov/landcoverdata.php">http://landcover.usgs.gov/landcoverdata.php</a>. 
</p>

<h3>6. Climatological data</h3>

<p>Climatological data open a entirely new way of searching for
information. Whereas elevation data can be considered static
(i.e., their value does not change with time), and Landsat and land use
data evolve slowly in time (in fact, you can find research papers
comparing the Landsat situation in various decades to trace the
global climate evolution), climatological data change rapidly. So, the
first question you have to ask yourself is: "What type of data am I
searching for?" You might be interested in daily or even hourly
measurements, or in monthly means, or even in seasonal or yearly means.
Moreover, yearly and seasonal means can be evaluated over a long period
(say, 15 years) to smooth out the fluctuations introduced by a very hot
summer or by a very cold winter.</p>        

<p> The second aspect to be considered is the format in which data are
distributed. The measurements are usually provided in tabular format: the
tables contain the values recorded by a set of meteorological stations
distributed over the region of interest. The main variables recorded are
temperature (minimum, maximum, mean), humidity, and rainfall. Values in places
without meteorological stations can be obtained by the user by
mean of interpolation techniques. This is a difficult process, and requires
a deeper analysis, because it involves either data manipulation (e.g.,
transformation of daily data in the tables to obtain a seasonal mean;
selection of the interesting stations, etc.) or interpolation with
advanced statistical techniques (e.g. <a
href="http://en.wikipedia.org/wiki/Kriging">universal kriging
interpolation</a>.) This last step can be performed by, for example,
interfacing GRASS with R, a statistical program which we briefly described
in <a href="../138/dellomodarme.html">issue 138</a> of the Linux Gazette.
</p>

<p>Since a detailed description of all these depicted procedures would
be long and complex, we'll postpone it until another article.  
</p>

<h3>Moving further</h3>

<p>
In this long excursus, we have introduced some basic features of the
software, but have neglected almost completely to describe the way in which
data could be analyzed and related to each other. This approach is
motivated by our experience with GRASS. In fact, when we started using this
software, we realized that there are many good tutorials and manuals
describing in great detail all the operations possible with the software -
but we had a great deal of difficulty in finding and acquiring thematic
maps, either because the tutorials are usually focused on a standard
dataset (provided as an example of location data with GRASS) or because the
information we needed was scattered all over the Net.  It is our hope that
the present document will contribute to filling this gap.
</p>

<p>While waiting for our next article, readers seriously interested in the
software can start by browsing the documentation pages available at the 
GRASS Web site, which also hosts some documents in non-English languages.
We recommend the following documents: </p>

<ul>
<li>Introduction to GRASS GIS software. <a href="http://grass.osgeo.org/gdp/neteler/index.html">http://grass.osgeo.org/gdp/neteler/index.html</a></li>
<li>An introduction to the practical use of the Free Geographical Information System GRASS 6.0. <a href="http://www.gdf-hannover.de/lit_html/grass60_v1.2_en/index.html">http://www.gdf-hannover.de/lit_html/grass60_v1.2_en/index.html</a>
(HTML), <a href="http://www.gdf-hannover.de/dl.php?download=gdf_grass60_v1.2_en.pdf">
http://www.gdf-hannover.de/dl.php?download=gdf_grass60_v1.2_en.pdf</a> (PDF)
<li>GRASS 6 in a nutshell. <a href="http://mpa.itc.it/markus/osg05/">http://mpa.itc.it/markus/osg05/</a></li>
</ul>

<p>Other resources available on the net can be useful:</p>
<ul>
<li>Geographic Information System. <a href="http://en.wikipedia.org/wiki/Geographic_information_system">http://en.wikipedia.org/wiki/Geographic_information_system</a></li>
<li>GIS file formats. <a href="http://en.wikipedia.org/wiki/GIS_file_formats">http://en.wikipedia.org/wiki/GIS_file_formats</a></li> 
<li>Description of possible projections. <a href="http://en.wikipedia.org/wiki/Map_projection">http://en.wikipedia.org/wiki/Map_projection</a></li>
<li>Universal Transverse Mercator coordinate system. <a href="http://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system">http://en.wikipedia.org/wiki/Universal_Transverse_Mercator_coordinate_system</a></li>
<li>Gauss-Kr&uuml;ger coordinate system. <a href="http://en.wikipedia.org/wiki/Gauss-Kr&uuml;ger_coordinate_system">http://en.wikipedia.org/wiki/Gauss-Kr&uuml;ger_coordinate_system</a></li>
<li>Geographic Information Systems. <a href="http://erg.usgs.gov/isb/pubs/gis_poster/">http://erg.usgs.gov/isb/pubs/gis_poster/</a>
</ul>


<br clear="all" />

<script type='text/javascript'>
digg_url = 'http://linuxgazette.net/156/dellomodarme.html';
digg_title = 'A (not so) short overview of the Geographic Information System GRASS';
digg_bodytext = '<p> The aim of this article is to introduce the GRASS GIS software and to show its basic usage. As with all GIS software, it is quite complex: there is a huge number of features and controls, and non-trivial theoretical information is required even for basic use.  Nevertheless, we think that the quick introduction presented here could be of some help for  neophyte users who want to master a GIS program.  </p> ';
digg_topic = 'linux_unix';
</script>
<script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:156/dellomodarme.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/2002/note.png" class="bio">
</p>

<em>
<p>
I am a physicist involved with Linux since 1994, when I acted as system
and security manager at the Department of Astronomy, University of Pisa
(Italy). My current research interests are mainly in Applied Statistics,
but I also work as system manager, net manager, web developer and
programmer (C, C++, FORTRAN, Php, Tcl/Tk).
</p>
</em>

<br clear="all">


	<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/2002/note.png" class="bio">
</p>

<em>
<p>
I am an astrophysicist mainly interested in galactic evolution; in this
subject I develop simulation codes in C/C++ and FORTRAN. I've been using
Linux since 1998, when I worked on my degree thesis at the University of
Pisa (Italy).
</p>
</em>

<br clear="all">


<!-- *** END author bio *** -->

<div id="articlefooter">


<p>
Copyright &copy; 2008, <a href="../authors/dellomodarme.html">Matteo Dell'Omodarme</a> and <a href="../authors/valle.html">Giada Valle</a>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication License</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>


<p>
Published in Issue 156 of Linux Gazette, November 2008
</p>

</div>
</div>


<div class="content lgcontent">

<a name="jangir"></a>
<h1>Writing Network Device Drivers for Linux</h1>
<p id="by"><b>By <a href="../authors/jangir.html">Mohan Lal Jangir</a></b></p>

</b>
</p>

<p>
<h2>Introduction</h2>

<p>
This article has been written for kernel newcomers interested in
learning about network device drivers. It assumes that reader has a
significant exposure to C and the Linux environment.  </p>

<p>
This article is based on a network driver for the RealTek 8139 network
card. I chose the RealTek chip for two reasons: First, RealTek provides
technical specifications for its chips free of cost. (Thanks, RealTek!)
Second; it's quite cheap. It is possible to get the chip under Rs 300
(approximately US$7) in Indian markets. 
</p>

<p>
The driver presented in this article is minimal; it simply sends and 
receives packets and maintains some statistics. For a full-fledged and 
professional-grade driver, please refer to the Linux source. 
</p>

<h2>Preparing for Driver Development</h2>
<p>
Before starting driver development, we need to set up our system for it.
This article was written and tested on Linux 2.4.18, which contains the
source code for the RealTek8139 chip driver. It's very likely that the
kernel you are running has the driver compiled either within the kernel
itself or as a module. It's advisable to build a kernel which does
<em>not</em> have the RealTek8139 driver in any form, to avert unnecessary
surprises. If you don't know how to recompile the Linux kernel, I
recommend you take a look at <a 
href="http://www.linuxheadquarters.com/howto/tuning/kernelreasons.shtml">http://www.linuxheadquarters.com/howto/tuning/kernelreasons.shtml</a>. 
</p>

<p>
From this point of discussion onwards, it is assumed that you have a working
kernel, which does not have driver for RealTek8139.  You'll also need the
technical specifications for the chip, which you can download from <a
href="http://www.realtek.com.tw/">http://www.realtek.com.tw/</a>. The last
activity in this series is to properly insert the NIC into the PCI slot, and
we are ready to go ahead.
</p>

<p>
It is strongly recommended to have Rubini's <em>Linux Device Drivers</em> book
with you for quick API reference. This is the best resource known to me for
Linux device driver development, as of now.
</p>

<h2>Starting Driver Development</h2>
<p>
Driver development breaks down into the following steps:
</p>
<ol type=1>
  <li>Detecting the device 
  <li>Enabling the device 
  <li>Understanding the network device 
  <li>Bus-independent device access 
  <li>Understanding the PCI configuration space 
  <li>Initializing net_device 
  <li>Understanding RealTek8139's transmission mechanism 
  <li>Understanding RealTek8139's receiving mechanism 
  <li>Making the device ready to transmit packets 
  <li>Making the device ready to receive packets 
</ol>

<h3>Detecting the Device</h3>
<p>

As a first step, we need to detect the device of our interest. The Linux kernel 
provides a rich set of APIs to detect a device over the PCI bus (Plug &amp; Play), 
but we will go for the simplest one and the API is pci_find_device.
</p>

<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>

<pre>#define REALTEK_VENDER_ID  0x10EC
#define REALTEK_DEVICE_ID   0x8139

#include &lt;linux/kernel.h&gt;
#include &lt;linux/module.h&gt;
#include &lt;linux/stddef.h&gt;
#include &lt;linux/pci.h&gt;
int init_module(void)
{
    struct pci_dev *pdev;
    pdev = pci_find_device(REALTEK_VENDER_ID, REALTEK_DEVICE_ID, NULL);
    if(!pdev)
        printk("&lt;1&gt;Device not found\n");
    else
        printk("&lt;1&gt;Device found\n");
    return 0;
}
</pre>
</td></tr></table>

<p>
Table 1: Detecting the device
</p>

<p>
Each vendor has a unique ID assigned, and each vendor assigns a unique ID to a 
particular kind of device. The macros REALTEK_VENDER_ID and REALTEK_DEVICE_ID 
indicate those IDs. You can find these values from the "PCI Configuration 
Space Table" in the RealTek8139 specifications.
</p>
<h3>Enabling the Device</h3>

<p>
After detecting the device, we need to enable the device before starting any 
kind of interaction or communication with the device. The code snippet shown in 
Table 1 can be extended for device detection and enabling the device.
</p>
<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>
<pre>static struct pci_dev* probe_for_realtek8139(void) 
{
        struct pci_dev *pdev = NULL;
        /* Ensure we are not working on a non-PCI system *
        if(!pci_present( )) {
               LOG_MSG("&lt;1&gt;pci not present\n");
               return pdev;
        }

#define REALTEK_VENDER_ID  0x10EC
#define REALTEK_DEVICE_ID  0X8139

        /* Look for RealTek 8139 NIC */
        pdev = pci_find_device(REALTEK_VENDER_ID, REALTEK_DEVICE_ID, NULL);
        if(pdev) {
               /* device found, enable it */
               if(pci_enable_device(pdev)) {
                       LOG_MSG("Could not enable the device\n");
                       return NULL;
               }
               else
                       LOG_MSG("Device enabled\n");
        }
        else {
               LOG_MSG("device not found\n");
               return pdev;
        }
        return pdev;
}

int init_module(void) 
{
        struct pci_dev *pdev;
        pdev = probe_for_realtek8139();
        if(!pdev)
               return 0;

        return 0;
}</pre>
</td></tr></table>

<p>
Table 2: Detecting and Enabling the Device
</p>

<p>
In Table 2, the function probe_for_realtek8139 performs the following 
tasks:
</p>
<UL type=disc>
  <li>Ensures that we are working on a PCI-capable system 
  <UL type=circle>
    <li>pci_present returns NULL if system does not have PCI 
    support </li></ul>
  <li>Detects the RealTek 8139 device as explained in Table 1 
  <li>Enables the device (by calling pci_enable_device), if 
  found </li></ul>

<p>
For time being, we temporarily suspend the thread of driver code study;
instead, we look into some important topics in order to understand the
Linux view of a network device. We will look at network devices, and the
difference between memory-mapped I/O,  port-mapped I/O, and PCI
configuration space.  </p>

<h3>Understanding Network Devices</h3>

<p>
We have detected the PCI device and enabled it, but the networking stack
in Linux sees interfaces as network devices. This is represented by the
structure net_device.  This means that the networking stack issues
commands to the network device (represented by net_device), and the
driver shall transfer those commands to the PCI device. Table 3 lists
some important fields of the structure net_device, which will be used
later in this article.  </p>

<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>
<pre>struct net_device 
{
  char *name;
  unsigned long base_addr;
  unsigned char addr_len;
  unsigned char dev_addr[MAX_ADDR_LEN];
  unsigned char broadcast[MAX_ADDR_LEN];
  unsigned short hard_header_len;
  unsigned char irq;
  int (*open) (struct net_device *dev);
  int (*stop) (struct net_device *dev);
  int (*hard_start_xmit) (struct sk_buff *skb,  struct net_device *dev);
  struct net_device_stats* (*get_stats)(struct net_device *dev);
  void *priv;
};</pre>
</td></tr></table>

<p>
Table 3: Structure net_device
</p>

<p>
Although this structure has many more members, for our minimal driver,
these members are good enough. The following section describes the structure
members: </p>

<UL type=disc>
  <li>name  -  The name of the device. If the first character of the name 
  is null, then register_netdev assigns it the name "ethn", where n is suitable 
  numeric. For example, if your system already has eth0 and eth1, your device 
  will be named eth2. 
  <li>base_addr  -  The I/O base address. We will discuss more 
  about I/O addresses later in this article. 
  <li>addr_len  -  Hardware address (MAC address) length. It is 6 
  for Ethernet interfaces. 
  <li>dev_addr  -  Hardware address (Ethernet address or MAC 
  address) 
  <li>broadcast  -  device broadcast address. It is 
  FF:FF:FF:FF:FF:FF for Ethernet interfaces 
  <li>hard_header_len  -  The "hardware header length" is the 
  number of octets that lead the transmitted packet before IP header, or other 
  protocol information. The value of hard_header_len is 14 for Ethernet 
  interfaces. 
  <li>irq  -  The assigned interrupt number. 
  <li>open  -  This is a pointer to a function that opens the 
  device. This function is called whenever ifconfig activates the device (for 
  example, "ifconfig eth0 up"). The open method should register any system 
  resources it needs (I/O ports, IRQ, DMA, etc.), turn on the hardware and 
  increment module usage count. 
  <li>stop  -  This is a pointer to a function that stops the 
  interface. This function is called whenever ifconfig deactivates the device 
  (for example, "ifconfig eth0 down"). The stop method releases all the resources 
  acquired by open function. 
  <li>hard_start_xmit  -  This function transfers a given packet 
  on the wire. The first argument of the function is a pointer to structure 
  sk_buff. Structure sk_buff is used to hold packets in Linux networking stacks. 
  Although this article does not require detailed knowledge about 
  sk_buff's structure, its details can be found at <a 
  href="http://www.tld#.org/LDP/khg/HyperNews/get/net/net-intro.html">http://www.tldp.org/LDP/khg/HyperNews/get/net/net-intro.html</a>.

  <li>get_stats  -  This function provides interfaces statistics. 
  The output of the command "ifconfig eth0" has most of the fields from get_stats. 
  <li>priv  -  Private data to the driver. The driver owns this field 
  and can use it at will. We will see later that our driver uses this field to 
  keep data related to PCI devices. </li></ul>

<p>
Although we have not mentioned all members of the net_device structure,
please note especially that there is no member function for receiving packets.
This is done by the device interrupt handler, as we will see later in this
article.
</p>
<h3>Bus-Independent Device Access</h3>

<p>
<em>Note: This section has been taken from Alan Cox's book <em>Bus-Independent 
Device Accesses</em> available at <a 
href="http://tali.admingilde.org/linux-docbook/deviceiobook.pdf">http://tali.admingilde.org/linux-docbook/deviceiobook.pdf</a></em>
</p>

<blockquote>
<p>
Linux provides an API set that abstracts performing I/O operations across all 
buses and devices, allowing device drivers to be written independent of bus 
type.
</p>

<h4>Memory-Mapped I/O</h4>

<p>
The most widely supported form of I/O is memory-mapped I/O. That is, a part of 
the CPU's address space is interpreted not as accesses to memory, but as 
accesses to a device. Some architectures define devices to be at a fixed 
address, but most have some method of discovering devices. The PCI bus walk is a 
good example of such a scheme. This document does not cover how to receive such 
an address, but assumes you are starting with one. 
</p>

<p>
Physical addresses are of type unsigned long. These addresses should not be 
used directly. Instead, to get an address suitable for passing to the functions 
described below, you should call ioremap. An address suitable for accessing the 
device will be returned to you.
</p>

<p>
After you've finished using the device (say, in your module's exit routine), 
call iounmap in order to return the address space to the kernel. Most 
architectures allocate new address space each time you call ioremap, and they 
can run out unless you call iounmap.
</p>

<h4>Accessing the device</h4>

<p>
The part of the interface most used by drivers is reading and writing
memory-mapped registers on the device. Linux provides interfaces to read
and write 8-bit, 16-bit, 32-bit and 64-bit quantities. Due to a
historical accident, these are named byte, word, long, and quad
accesses. Both read and write accesses are supported; there is no
prefetch support at this time. The functions are named readb, readw,
readl, readq, writeb, writew, writel, and writeq.
</p>

<p>
Some devices (such as framebuffers) would like to use larger transfers that 
are more than 8 bytes at a time. For these devices, the memcpy_toio, 
memcpy_fromio and memset_io functions are provided. Do not use memset or memcpy 
on I/O addresses; they are not guaranteed to copy data in order.
</p>

<p>
The read and write functions are defined to be ordered. That is, the compiler 
the the the is not permitted to reorder the I/O sequence. When the ordering can be compiler 
optimized, you can use __readb and friends to indicate the relaxed ordering. Use 
this with care. The rmb provides a read memory barrier. The wmb provides a write 
memory barrier.
</p>

<p>
While the basic functions are defined to be synchronous with respect to each 
other and ordered with respect to each other the buses the devices sit on may 
themselves have asynchronocity. In particular many authors are not comfortable 
by the fact that PCI bus writes are posted asynchronously. An author of the 
driver must issue a read from the same device to ensure that writes have 
occurred in the manner the author wanted it. This kind of property cannot be 
hidden from driver writers in the API.
</p>

<h4>Port Space Access</h4>

<p>
Another form of I/O commonly supported is Port Space. This is a range of 
addresses different from the normal memory address space. Access to these 
addresses is generally not as fast as accesses to the memory mapped addresses, 
and it also has a potentially smaller address space.
</p>

<p>
Unlike with memory mapped I/O, no preparation is required to access port space.
</p>

<h4>
Accessing Port Space or I/O mapped devices
</h4>

<p>
Accesses to this space are provided through a set of functions which allow 
8-bit, 16-bit and 32-bit accesses; also known as byte, word and long. These 
functions are inb, inw, inl, outb, outw and outl.
</p>

<p>
Some variants are provided for these functions. Some devices require
that accesses to their ports are slowed down. This functionality is
provided by appending a _p to the end of the function. There are also
equivalents to memcpy.  The ins and outs functions copy bytes, words or
longs to/from the given port.
</p>

</blockquote>


<h3>Understanding PCI Configuration Space</h3>

<p>
In this section, we will look at PCI configuration space. PCI devices
feature a 256-byte address space. The first 64 bytes are standardized
while the rest of the bytes are device dependent. Figure 1 shows the
standard PCI configuration space.  </p>

<P align="center"><IMG alt="PCI Configuration Space" 
src="Writing%20Network%20Device%20Driver%20for%20Linux_files/pci_config_space.gif" 
border=0>
</p>

<p>
Figure 1: PCI Configuration Space
</p>

<p>
The fields "Vendor ID" and "Device ID" are unique identifiers assigned
to the vendor and the device, respectively. (We have seen them in the
section "Device Detection".) Another field to note is "Base Address
Registers", popularly known as BAR. We will see how BARs are used
shortly.  </p>

<h3>Initializing net_device</h3>

<p>
Now it's time to revert back to driver development. Before that I remind you 
about the priv field of the structure net_device. We will declare a
structure which holds data private to our device and that structure
shall be pointed to by member priv. The structure has the following
members (We will update structure members as we progress).  </p>

<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>
<pre>struct rtl8139_private 
{
        struct pci_dev *pci_dev;  /* PCI device */
        void *mmio_addr; /* memory mapped I/O addr */
        unsigned long regs_len; /* length of I/O or MMI/O region */
};
           </pre>

</td>
</tr>
</table>

<p>
Table 4: rtl8139_private structure
</p>

<p>
Now we define a net_device pointer and initialize it, in the rest of the 
init_module function.
</p>

<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>

<pre>#define DRIVER "rtl8139"
static struct net_device *rtl8139_dev;

static int rtl8139_init(struct pci_dev *pdev, struct net_device **dev_out) 
{
        struct net_device *dev;
        struct rtl8139_private *tp;

        /* 
         * alloc_etherdev allocates memory for dev and dev-&gt;priv.
         * dev-&gt;priv shall have sizeof(struct rtl8139_private) memory
         * allocated.
         */
        dev = alloc_etherdev(sizeof(struct rtl8139_private));
        if(!dev) {
               LOG_MSG("Could not allocate etherdev\n");
               return -1;
        }

        tp = dev-&gt;priv;
        tp-&gt;pci_dev = pdev;
        *dev_out = dev;

        return 0;
}

int init_module(void) 
{
        struct pci_dev *pdev;
        unsigned long mmio_start, mmio_end, mmio_len, mmio_flags;
        void *ioaddr;
        struct rtl8139_private *tp;
        int i;

        pdev = probe_for_realtek8139( );
        if(!pdev)
               return 0;

        if(rtl8139_init(pdev, &amp;rtl8139_dev)) {
               LOG_MSG("Could not initialize device\n");
               return 0;
        }

        tp = rtl8139_dev-&gt;priv; /* rtl8139 private information */
        
        /* get PCI memory mapped I/O space base address from BAR1 */
        mmio_start = pci_resource_start(pdev, 1);
        mmio_end = pci_resource_end(pdev, 1);
        mmio_len = pci_resource_len(pdev, 1);
        mmio_flags = pci_resource_flags(pdev, 1);

        /* make sure above region is MMI/O */
        if(!(mmio_flags &amp; I/ORESOURCE_MEM)) {
               LOG_MSG("region not MMI/O region\n");
               goto cleanup1;
        }
        
        /* get PCI memory space */
        if(pci_request_regions(pdev, DRIVER)) {
               LOG_MSG("Could not get PCI region\n");
               goto cleanup1;
        }

        pci_set_master(pdev);

        /* ioremap MMI/O region */
        ioaddr = ioremap(mmio_start, mmio_len);
        if(!ioaddr) {
               LOG_MSG("Could not ioremap\n");
               goto cleanup2;
        }

        rtl8139_dev-&gt;base_addr = (long)ioaddr;
        tp-&gt;mmio_addr = ioaddr;
        tp-&gt;regs_len = mmio_len;

        /* UPDATE NET_DEVICE */

        for(i = 0; i &lt; 6; i++) {  /* Hardware Address */
               rtl8139_dev-&gt;dev_addr[i] = readb(rtl8139_dev-&gt;base_addr+i);
               rtl8139_dev-&gt;broadcast[i] = 0xff;
        }
        rtl8139_dev-&gt;hard_header_len = 14;

        memcpy(rtl8139_dev-&gt;name, DRIVER, sizeof(DRIVER)); /* Device Name */
        rtl8139_dev-&gt;irq = pdev-&gt;irq;  /* Interrupt Number */
        rtl8139_dev-&gt;open = rtl8139_open;
        rtl8139_dev-&gt;stop = rtl8139_stop;
        rtl8139_dev-&gt;hard_start_xmit = rtl8139_start_xmit;
        rtl8139_dev-&gt;get_stats = rtl8139_get_stats;

        /* register the device */
        if(register_netdev(rtl8139_dev)) {
               LOG_MSG("Could not register netdevice\n");
               goto cleanup0;
        }

        return 0;
}
               </pre>

</td>
</tr>
</table>

<p>
Table 5: net_device initialization
</p>

<p>
It's time to explain what we have done in Table 5. Function 
probe_for_realtek8139, we have already seen. Function rtl8139_init allocates 
memory for global pointer rtl8139_dev, which we shall be using as net_device. 
Additionally, this function sets the member pci_dev of rtl8139_private to the 
detected device.
</p>

<p>
Our next objective is to get the base_addr field of the net_device. This is
the starting memory location of device registers. This driver has been
written for memory-mapped I/O only. To get the memory-mapped I/O base
address, we use PCI APIs like pci_resource_start, pci_resource_end,
pci_resource_len, pci_resource_flags etc. These APIs let us read the PCI
configuration space without knowing internal details. The second
argument to these APIs is the BAR number. If you see, RealTek8139
specifications, you will find that the first BAR (numbered as 0) is
I/OAR, while second BAR (numbered as 1) is MEMAR. Since this driver is
using memory-mapped I/O, we pass the second argument as 1. Before
accessing the addresses returned by the above APIs, we have to do two
things. First is to reserve the above resources (memory space) by
driver; this is done by calling the function pci_request_regions. The
second thing is to remap I/O addresses as explained in section above on
Memory-Mapped I/O. The remapped io_addr is assigned to the base_addr
member of the net_device, and this is the point where we can start to
read/write the device registers.  </p>

<p>
The rest of the code in Table 5 does straightforward initialization of
net_device. Note that now we are reading the hardware address from the
device and assigning it to dev_addr. If you see "Register Descriptions"
in RealTek8139 specification, the first 6 bytes are the hardware address of
the device. Also we have initialized function pointer members but
haven't defined any corresponding function. For time being, we define
dummy functions to compile the module.  </p> 

<table border="1" bgcolor="#c0c0c0" align="center"> 
<tr>
<td> 

<pre>
static int rtl8139_open(struct net_device *dev) { LOG_MSG("rtl8139_open is
called\n"); return 0; }

static int rtl8139_stop(struct net_device *dev) 
{
        LOG_MSG("rtl8139_open is called\n");
        return 0;
}

static int rtl8139_start_xmit(struct sk_buff *skb, struct net_device *dev) 
{
        LOG_MSG("rtl8139_start_xmit is called\n");
        return 0;
}

static struct net_device_stats* rtl8139_get_stats(struct net_device *dev) 
{
        LOG_MSG("rtl8139_get_stats is called\n");
        return 0;
}</pre>

</td>
</tr>
</table>

<p>
Table 6: Dummy functions
</p>

<p>
Note that the error-handling part has been skipped in init_module. You
can write it by looking into the cleanup_module function defined below:
</p>

<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>

<pre>
void cleanup_module(void) 
{
        struct rtl8139_private *tp;
        tp = rtl8139_dev-&gt;priv;

        iounmap(tp-&gt;mmio_addr);
        pci_release_regions(tp-&gt;pci_dev);

        unregister_netdev(rtl8139_dev);
        pci_disable_device(tp-&gt;pci_dev);
        return;
}</pre>

</td>
</tr>
</table>

<p>
Table 7: Function cleanup_module
</p>

<p>
Now we have a dummy or template driver ready. Compile the module and
insert it as explained in Table 8 (assuming the kernel source is in
/usr/src/linux-2.4.18 ).  </p>

<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>

<pre>  gcc   - c  rtl8139.c   - D__KERNEL__  -DMODULE   - I /usr/src/linux-2.4.18/include
  insmod  rtl8139.o
</pre>

</td>
</tr>
</table>

<p>
Table 8: Compiling the driver
</p>

<p>
Now execute a series of commands; "<em>ifconfig</em>", "<em>ifconfig 
 - a</em>", "<em>ifconfig rtl8139 up</em>", "<em>ifconfig</em>" and 
"<em>ifconfig rtl8139 down</em>", and observe their output. These calls
show you when each function is called. If everything goes fine, you
should see device rtl8139 when you issue "ifconfig  - a" and should get
message "function rtl8139_get_stat" called. You should get message
"function rtl8139_open called" when you issue command "ifconfig rtl8139
up". Similarly you should get "function rtl8139_stop called" when you
issue command "ifconfig rtl8139 down".  </p>

<p>
Now again, we stop driver development in order to better understand the device
transmission and receiving mechanism.  </p>

<h3>Understanding the RealTek 8139 Transmission Mechanism</h3>

<p>
In this section, I describe RealTek8139 transmission mechanism; however
I recommend to download "RTL8139 (A/B) Programming Guide", which
provides exact details. RealTek8139 has 4 Transmission Descriptors; each
descriptor has a fixed I/O address offset. The 4 descriptors are used 
round-robin. This means that for transmitting four packets, the driver will
use descriptor 0, descriptor 1, descriptor 2 and descriptor 3 in 
round-robin order. For transmitting next packet, driver will use descriptor 0
again (provided that is available). If you read the RealTek8139
specification, the section "Register Description" has TSAD0, TSAD1,
TSAD2 and TSAD3 registers at offset 0x20, 0x24, 0x28, 0x2C, respectively.
These registers store "Transmit Start Address of Descriptors" i.e., they
store starting address (in memory) of packets to be transmitted. Later
device reads packet contents from these addresses, DMA to its own FIFO,
and transmits on wire. 
</p>

<p>
We will shortly see that this driver allocates DMAable memory for packet 
contents, and stores the address of that memory in TSAD registers.
</p>

<h3>Understanding the RealTek 8139 Receiving Mechanism</h3>

<p>
The receive path of RTL8139 is designed as a ring buffer (A liner
memory, managed as ring memory). Whenever the device receives a packet,
packet contents are stored in ring buffer memory, and the location of the next
packet to store is updated (to first packet starting address + first
packet length). The device keeps on storing packets in this fashion until
linear memory is exhausted. In that case, the device starts again writing at
the starting address of linear memory, thus making it a ring buffer.
</p> 

<h3>Making Device Ready to Transmit Packets</h3>

<p>
In this section, we discuss driver source used to make the device ready for
transmission. We defer discussion of the receiving source to further
sections. We will discuss functions rtl8139_open and rtl8139_stop, in
this section. Before that, we enhance our rtl8139_private structure, to
accommodate members to hold data related to packet transmission.  </p>

<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>

<pre>
#define NUM_TX_DESC 4
struct rtl8139_private 
{
        struct pci_dev *pci_dev;  /* PCI device */
        void *mmio_addr; /* memory mapped I/O addr */
        unsigned long regs_len; /* length of I/O or MMI/O region */
        unsigned int tx_flag;
        unsigned int cur_tx;
        unsigned int dirty_tx;
        unsigned char *tx_buf[NUM_TX_DESC];   /* Tx bounce buffers */
        unsigned char *tx_bufs;        /* Tx bounce buffer region. */
        dma_addr_t tx_bufs_dma;
};
               </pre>

</td>
</tr>
</table>

<p>
Table 9: rtl8139_private structure
</p>

<p>
Member tx_flag shall contain transmission flags to notify the device
about some parameters described shortly. Field cur_tx shall hold current
transmission descriptor, while dirty_tx denotes the first of
transmission descriptors, which have not completed transmission. (This
also means that, we can't use dirty descriptor for further packet
transmission until previous packet is transmitted completely.) Array
tx_buf holds addresses of 4 "transmission descriptors". Field tx_bufs is
also used in same context, as we will see shortly. Both tx_buf and
tx_bufs do hold kernel virtual address, which can be used by the driver, but
the device cannot use these addresses. The device need to access physical
addresses, which are stored in field tx_bufs_dma. Here is a list of
register offsets, used in code. You can get more details about these
values from the RealTek8139 specifications.  </p>

<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>

<pre>#define TX_BUF_SIZE  1536  /* should be at least MTU + 14 + 4 */
#define TOTAL_TX_BUF_SIZE  (TX_BUF_SIZE * NUM_TX_SIZE)

/* 8139 register offsets */
#define TSD0          0x10
#define TSAD0       0x20
#define RBSTART  0x30
#define CR               0x37
#define CAPR         0x38
#define IMR            0x3c
#define ISR             0x3e
#define TCR           0x40
#define RCR           0x44
#define MPC           0x4c
#define MULINT    0x5c

/* TSD register commands */
#define TxHostOwns    0x2000
#define TxUnderrun    0x4000
#define TxStatOK      0x8000
#define TxOutOfWindow 0x20000000
#define TxAborted     0x40000000
#define TxCarrierLost 0x80000000

/* CR register commands */
#define RxBufEmpty 0x01
#define CmdTxEnb   0x04
#define CmdRxEnb   0x08
#define CmdReset   0x10

/* ISR Bits */
#define RxOK       0x01
#define RxErr      0x02
#define TxOK       0x04
#define TxErr      0x08
#define RxOverFlow 0x10
#define RxUnderrun 0x20
#define RxFIFOOver 0x40
#define CableLen   0x2000
#define TimeOut    0x4000
#define SysErr     0x8000

#define INT_MASK (RxOK | RxErr | TxOK | TxErr | \
               RxOverFlow | RxUnderrun | RxFIFOOver | \
               CableLen | TimeOut | SysErr)
               </pre>

</td>
</tr>
</table>

<p>
Table 10: RTL 8139 Register Definitions
</p>

<p>
With above definition, we look into function rtl8139_open:
</p>

<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>

<pre>static int rtl8139_open(struct net_device *dev) 
{
        int retval;
        struct rtl8139_private *tp = dev-&gt;priv;

        /* get the IRQ
         * second arg is interrupt handler
         * third is flags, 0 means no IRQ sharing
         */
        retval = request_irq(dev-&gt;irq, rtl8139_interrupt, 0, dev-&gt;name, dev);
        if(retval)
               return retval;

        /* get memory for Tx buffers
         * memory must be DMAable
         */
        tp-&gt;tx_bufs = pci_alloc_consistent(
                       tp-&gt;pci_dev, TOTAL_TX_BUF_SIZE, &amp;tp-&gt;tx_bufs_dma);
        
        if(!tp-&gt;tx_bufs) {
               free_irq(dev-&gt;irq, dev);
               return -ENOMEM;
        }

        tp-&gt;tx_flag = 0;
        rtl8139_init_ring(dev);
        rtl8139_hw_start(dev);
        
        return 0;
}

static void rtl8139_init_ring (struct net_device *dev)
{
        struct rtl8139_private *tp = dev-&gt;priv;
        int i;

        tp-&gt;cur_tx = 0;
        tp-&gt;dirty_tx = 0;

        for (i = 0; i &lt; NUM_TX_DESC; i++)
               tp-&gt;tx_buf[i] = &amp;tp-&gt;tx_bufs[i * TX_BUF_SIZE];
        
        return;
}

static void rtl8139_hw_start (struct net_device *dev)
{
        struct rtl8139_private *tp = dev-&gt;priv;
        void *ioaddr = tp-&gt;mmio_addr;
        u32 i;

        rtl8139_chip_reset(ioaddr);

        /* Must enable Tx before setting transfer thresholds! */
        writeb(CmdTxEnb, ioaddr + CR);

        /* tx config */
        writel(0x00000600, ioaddr + TCR); /* DMA burst size 1024 */

        /* init Tx buffer DMA addresses */
        for (i = 0; i &lt; NUM_TX_DESC; i++) {
               writel(tp-&gt;tx_bufs_dma + (tp-&gt;tx_buf[i] - tp-&gt;tx_bufs),
                                      ioaddr + TSAD0 + (i * 4));
        }

        /* Enable all known interrupts by setting the interrupt mask. */
        writew(INT_MASK, ioaddr + IMR);

        netif_start_queue (dev);
        return;
}

static void rtl8139_chip_reset (void *ioaddr)
{
        int i;

        /* Soft reset the chip. */
        writeb(CmdReset, ioaddr + CR);

        /* Check that the chip has finished the reset. */
        for (i = 1000; i &gt; 0; i--) {
               barrier();
               if ((readb(ioaddr + CR) &amp; CmdReset) == 0)
                       break;
               udelay (10);
        }
        return;
}
               </pre>

</td>
</tr>
</table>

<p>
Table 11: Writing the open function
</p>

<p>
Now, we explain the code in Table 11. The function rtl8139_open starts with 
requesting the IRQ by calling API request_irq. In this function, we
register the interrupt handler rtl8139_interrupt. This function shall be
called by kernel, whenever the device generates an interrupt. Now, we
allocate memory, where outgoing packets reside before being sent on
wire. Note that API pci_allocate_consistant returns kernel virtual
address. The physical address is returned in third argument, which is
later used by driver. Also observe that we have allocated memory needed
for all four descriptors. Function rtl8139_init_ring distributes this
memory to four descriptors. Here, we call function rtl8139_hw_start to
make the device ready for transmitting packets. At first, we reset the
device, so that device shall be in a predictable and known state. This
is done by writing reset value (described in specification) in CR
(Command Register). We wait until the written value is read back, which
means device has reset. The next function, barrier ( ), is called to force the
kernel to do required memory I/O immediately without doing any
optimization. Once the device is reset, we enable transmission mode of
the device by writing transmission enable value in CR. Next, we configure TCR
(Transmission Configuration Register). The only thing we are specifying to
TCR register is "Max DMA Burst Size per Tx DMA Burst". The rest we leave at
default values. (See specification for more details.)  Now we write the
DMAable address of all four descriptors to TSAD (Transmission Start
Address Descriptor) registers. Next, we enable the interrupt, by writing
in IMR (Interrupt Mask Register). This register lets us configure the
interrupts; the device will be generating. Last, we call
netif_start_queue to tell the kernel that device is ready. The only
thing remaining is writing the rtl8139_interrupt function. For the time being,
let's skip this. At this time, the device is ready to send
packets, but the function to send packets out is missing. (Remember
hard_start_xmit.) So, let's do it.  </p>

<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>
<pre>static int rtl8139_start_xmit(struct sk_buff *skb, struct net_device *dev)
{
        struct rtl8139_private *tp = dev-&gt;priv;
        void *ioaddr = tp-&gt;mmio_addr;
        unsigned int entry = tp-&gt;cur_tx;
        unsigned int len = skb-&gt;len;
#define ETH_MIN_LEN 60  /* minimum Ethernet frame size */
        if (len &lt; TX_BUF_SIZE) {
               if(len &lt; ETH_MIN_LEN)
                       memset(tp-&gt;tx_buf[entry], 0, ETH_MIN_LEN);
               skb_copy_and_csum_dev(skb, tp-&gt;tx_buf[entry]);
               dev_kfree_skb(skb);
        } else {
               dev_kfree_skb(skb);
               return 0;
        }
        writel(tp-&gt;tx_flag | max(len, (unsigned int)ETH_MIN_LEN), 
                       ioaddr + TSD0 + (entry * sizeof (u32)));
        entry++;
        tp-&gt;cur_tx = entry % NUM_TX_DESC;

        if(tp-&gt;cur_tx == tp-&gt;dirty_tx) {
               netif_stop_queue(dev);
        }
        return 0;
}
               </pre>
</td></tr></table>

<p>
Table 12: Writing start_xmit function
</p>

<p>
The function rtl8139_start_xmit, explained in Table 12, is very trivial.
First, it finds the available transmission descriptor and then checks that
the packet size is at least 60 bytes (as Ethernet packet size can't be less
than 60 bytes). Once this is ensured, the function skb_copy_and_csum_dev
is called, which copies the packet contents to the DMA capable memory.
In the next writel, we inform the device about the packet length. At this
time, the packet is transmitted on the wire. Next, we determine
the next available transmission descriptors, and, if this happens to be equal
to a dirty descriptor, we stop the device; otherwise we simply return.
</p>

<p>
Our device is now ready to send packets out. (Remember, we can't receive 
packets, yet.) Compile the driver, and try sending ping packets out of
the host.  At other end, you should see some ARP packets. Even remote
hosts reply to ARP packets; they are useless for us, as we are not
ready to receive packets.  </p> 

<h3>Making Device Ready to Receive Packets</h3>

<p>
Now, we will make the device ready to receive packets. For this, we will look 
into some of already discussed functions, and then the interrupt handler. First,
we extend the structure rtl8139_private to accommodate variables needed to 
receive packets.
</p>

<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>

<pre>struct rtl8139_private 
{
        struct pci_dev *pci_dev;  /* PCI device */
        void *mmio_addr; /* memory mapped I/O addr */
        unsigned long regs_len; /* length of I/O or MMI/O region */
        unsigned int tx_flag;
        unsigned int cur_tx;
        unsigned int dirty_tx;
        unsigned char *tx_buf[NUM_TX_DESC];   /* Tx bounce buffers */
        unsigned char *tx_bufs;        /* Tx bounce buffer region. */
        dma_addr_t tx_bufs_dma;

        struct net_device_stats stats;
        unsigned char *rx_ring;
        dma_addr_t rx_ring_dma;
        unsigned int cur_rx;
};
               </pre>
</td></tr></table>

<p>
Table 13: Extending rtl8139_private structure
</p>

<p>
The member stats shall keep device statistics (most of the ifconfig
statistics is from this structure). The next member, rx_ring, is the kernel
address of memory where received packets are stored, while rx_ring_dma
is the physical address of the same memory. Member cur_rx is used to keep
track of next packet writing, as we will see shortly.  </p>

<p>
Now we re-look into rtl8139_open function, where we allocated memory for 
transmission side only. Now, we allocate memory for packet receiving also. 
</p>
<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>
<pre>/* Size of the in-memory receive ring. */
#define RX_BUF_LEN_IDX 2         /* 0==8K, 1==16K, 2==32K, 3==64K */
#define RX_BUF_LEN     (8192 &lt;&lt; RX_BUF_LEN_IDX)
#define RX_BUF_PAD     16           /* see 11th and 12th bit of RCR: 0x44 */
#define RX_BUF_WRAP_PAD 2048   /* spare padding to handle pkt wrap */
#define RX_BUF_TOT_LEN  (RX_BUF_LEN + RX_BUF_PAD + RX_BUF_WRAP_PAD)

/* this we have already done */
tp-&gt;tx_bufs = pci_alloc_consistent(tp-&gt;pci_dev, TOTAL_TX_BUF_SIZE, &amp;tp-&gt;tx_bufs_dma);

/* add this code to rtl8139_function */
tp-&gt;rx_ring = pci_alloc_consistent(tp-&gt;pci_dev, RX_BUF_TOT_LEN, &amp;tp-&gt;rx_ring_dma);

if((!tp-&gt;tx_bufs)  || (!tp-&gt;rx_ring)) {
        free_irq(dev-&gt;irq, dev);

        if(tp-&gt;tx_bufs) {
                       pci_free_consistent(tp-&gt;pci_dev, TOTAL_TX_BUF_SIZE, tp-&gt;tx_bufs, tp-&gt;tx_bufs_dma);
                       tp-&gt;tx_bufs = NULL;
               }
        if(tp-&gt;rx_ring) {
                       pci_free_consistent(tp-&gt;pci_dev, RX_BUF_TOT_LEN, tp-&gt;rx_ring, tp-&gt;rx_ring_dma);
                       tp-&gt;rx_ring = NULL;
               }
        return -ENOMEM;
}
               </pre>
</td></tr></table>

<p>
Table 14: Extending rtl8139_open function
</p>

<p>
The code in Table 14 calculates the memory required for ring buffer. The
calculation of RX_BUF_TOT_LEN depends upon some device configuration
parameters.  As we see shortly in rtl8139_hw_start, we configure Bits
12-11 of RCR register as 10, which configures a 32K+16 receiver buffer
length. Therefore, we allocate that much memory for the receiver buffer.
Also, we configure bits 7 to 1, which means RTL8139 will keep moving the
rest of the packet data into the memory, immediately after the end of Rx
buffer.  Therefore, we allocate 2048 bytes of buffer extra to cope up
with such situations.  </p>

<p>
Now that we've looked into function rtl8139_open, we look into
rtl8139_hw_start, where we configure the device for receiving packets.
</p>

<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>
<PRE >static void rtl8139_hw_start (struct net_device *dev)
{
        struct rtl8139_private *tp = dev-&gt;priv;
        void *ioaddr = tp-&gt;mmio_addr;
        u32 i;

        rtl8139_chip_reset(ioaddr);

        /* Must enable Tx/Rx before setting transfer thresholds! */
        writeb(CmdTxEnb | CmdRxEnb, ioaddr + CR);

        /* tx config */
        writel(0x00000600, ioaddr + TCR); /* DMA burst size 1024 */

        /* rx config */
        writel(((1 &lt;&lt; 12) | (7 &lt;&lt; 8) | (1 &lt;&lt; 7) | 
                               (1 &lt;&lt; 3) | (1 &lt;&lt; 2) | (1 &lt;&lt; 1)), ioaddr + RCR);

        /* init Tx buffer DMA addresses */
        for (i = 0; i &lt; NUM_TX_DESC; i++) {
               writel(tp-&gt;tx_bufs_dma + (tp-&gt;tx_buf[i] - tp-&gt;tx_bufs),
                                      ioaddr + TSAD0 + (i * 4));
        }

        /* init RBSTART */
        writel(tp-&gt;rx_ring_dma, ioaddr + RBSTART);

        /* initialize missed packet counter */
        writel(0, ioaddr + MPC);

        /* no early-rx interrupts */
        writew((readw(ioaddr + MULINT) &amp; 0xF000), ioaddr + MULINT);

        /* Enable all known interrupts by setting the interrupt mask. */
        writew(INT_MASK, ioaddr + IMR);

        netif_start_queue (dev);
        return;
}</pre>
</td></tr></table>

<p>
Table 15: Extending rtl8139_hw_start function
</p>

<p>
As shown in Table 15, the first change in rtl8139_hw_start function is
that we are writing CmdTxEnb | CmdRxEnb to CR register, which means the
device will be transmitting as well as receiving packets. The next change
is device receive configuration. I have not used macros in code, but
they are quite obvious, if you see the rtl8139 specification. The bits
used in this statement are as follows: </p>

<UL type=disc>
  <li>Bit 1  -  Accept physical match packets 
  <li>Bit 2  -  Accept multicast packets 
  <li>Bit 3  -  Accept broadcast packets 
  <li>Bit 7  -  WRAP. When set to 1, RTL8139 will keep moving the 
  rest of packet data into the memory immediately after the end of Rx buffer. 
  <li>Bit 8-10  -  Max DMA burst size per Rx DMA burst. We are 
  configuring this to 111, which means unlimited. 
  <li>Bit 11-12  -  Rx buffer length. We are configuring to 10 
  which means 32K+16 bytes. </li></ul>

<p>
The next major change is configuring RBSTART register. This register contains 
starting address of receive buffer. Later, we initialize MPC (Missed Packet 
Counter) register to zero and configure the device for not generating early 
interrupts.
</p>

<p>
The last major function we want to discuss is the device interrupt
handler. This interrupt handler is responsible for receiving packets, as
well as for updating necessary statistics. Here is the source code for
an interrupt handler.  </p>

<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>

<PRE >static void rtl8139_interrupt (int irq, void *dev_instance, struct pt_regs *regs) 
{
        struct net_device *dev = (struct net_device*)dev_instance;
        struct rtl8139_private *tp = dev-&gt;priv;
        void *ioaddr = tp-&gt;mmio_addr;
        unsigned short isr = readw(ioaddr + ISR);
        
        /* clear all interrupt.
         * Specs says reading ISR clears all interrupts and writing
         * has no effect. But this does not seem to be case. I keep on
         * getting interrupt unless I forcibly clears all interrupt :-(
         */
        writew(0xffff, ioaddr + ISR);

        if((isr &amp; TxOK) || (isr &amp; TxErr)) 
        {
               while((tp-&gt;dirty_tx != tp-&gt;cur_tx) || netif_queue_stopped(dev))
               {
                       unsigned int txstatus = 
                               readl(ioaddr + TSD0 + tp-&gt;dirty_tx * sizeof(int));

                       if(!(txstatus &amp; (TxStatOK | TxAborted | TxUnderrun)))
                               break; /* yet not transmitted */

                       if(txstatus &amp; TxStatOK) {
                               LOG_MSG("Transmit OK interrupt\n");
                               tp-&gt;stats.tx_bytes += (txstatus &amp; 0x1fff);
                               tp-&gt;stats.tx_packets++;
                       }
                       else {
                               LOG_MSG("Transmit Error interrupt\n");
                               tp-&gt;stats.tx_errors++;
                       }
                               
                       tp-&gt;dirty_tx++;
                       tp-&gt;dirty_tx = tp-&gt;dirty_tx % NUM_TX_DESC;

                       if((tp-&gt;dirty_tx == tp-&gt;cur_tx) &amp; netif_queue_stopped(dev))
                       {
                               LOG_MSG("waking up queue\n");
                               netif_wake_queue(dev);
                       }
               }
        }

        if(isr &amp; RxErr) {
               /* TODO: Need detailed analysis of error status */
               LOG_MSG("receive err interrupt\n");
               tp-&gt;stats.rx_errors++;
        }

        if(isr &amp; RxOK) {
               LOG_MSG("receive interrupt received\n");
               while((readb(ioaddr + CR) &amp; RxBufEmpty) == 0)
               {
                       unsigned int rx_status;
                       unsigned short rx_size;
                       unsigned short pkt_size;
                       struct sk_buff *skb;

                       if(tp-&gt;cur_rx &gt; RX_BUF_LEN)
                               tp-&gt;cur_rx = tp-&gt;cur_rx % RX_BUF_LEN;
        
                       /* TODO: need to convert rx_status from little to host endian
                        * XXX: My CPU is little endian only :-)
                        */
                       rx_status = *(unsigned int*)(tp-&gt;rx_ring + tp-&gt;cur_rx);
                       rx_size = rx_status &gt;&gt; 16;
                       
                       /* first two bytes are receive status register 
                        * and next two bytes are frame length
                        */
                       pkt_size = rx_size - 4;

                       /* hand over packet to system */
                       skb = dev_alloc_skb (pkt_size + 2);
                       if (skb) {
                               skb-&gt;dev = dev;
                               skb_reserve (skb, 2); /* 16 byte align the IP fields */

                               eth_copy_and_sum(
                                      skb, tp-&gt;rx_ring + tp-&gt;cur_rx + 4, pkt_size, 0);

                               skb_put (skb, pkt_size);
                               skb-&gt;protocol = eth_type_trans (skb, dev);
                               netif_rx (skb);

                               dev-&gt;last_rx = jiffies;
                               tp-&gt;stats.rx_bytes += pkt_size;
                               tp-&gt;stats.rx_packets++;
                       } 
                       else {
                               LOG_MSG("Memory squeeze, dropping packet.\n");
                               tp-&gt;stats.rx_dropped++;
                       }
               
                       /* update tp-&gt;cur_rx to next writing location  * /
                       tp-&gt;cur_rx = (tp-&gt;cur_rx + rx_size + 4 + 3) &amp; ~3;

                       /* update CAPR */
                       writew(tp-&gt;cur_rx, ioaddr + CAPR);
               }
        }
        
        if(isr &amp; CableLen)
               LOG_MSG("cable length change interrupt\n");
        if(isr &amp; TimeOut)
               LOG_MSG("time interrupt\n");
        if(isr &amp; SysErr)
               LOG_MSG("system err interrupt\n");
        return;
}</pre>
</td></tr></table>

<p>
Table 16: Interrupt Handler
</p>

<p>
As shown in Table 16, the ISR register is read in variable isr. Any further 
demultiplexing of interrupts is the interrupt handler's job. If we
receive TxOK, TxErr, or RxErr, we update necessary statistics. Receiving
an RxOK interrupt means we have received a frame successfully, and the driver
has to process it. We read from the receiver buffer until we have read all
data. (loop while ((readb (ioaddr + CR) &amp; RxBufEmpty) == 0) does this
job.) First, we check if tp-&gt;cur_rx has gone beyond RX_BUF_LEN. If
that is case, we wrap it. The received frame contains 4 extra bytes at
the start of frame (appended by RTL8139), apart from packet contents and
other headers. The first two bytes indicate frame status and next two
bytes indicate frame length. (The length includes first 4 bytes, also.)
These values are always in little-endian order, and must be converted to
host order. Then, we allocate a skb for received packet, copy the frame
contents into skb, and queue the skb for later processing. Then, we update
CAPR (Current Address of Packet Read), to let the RTL8139 know about the next
write location. Note that we have already registered this interrupt
handler in function rtl8139_open. So far, we had a dummy definition;
now, we can replace that with this definition.  </p>

<p>
The last function we want to add is rtl8139_get_stats, which simply returns 
tp-&gt;stats.
</p>
<table border="1" bgcolor="#c0c0c0" align="center"> <tr><td>
<PRE >static struct net_device_stats* rtl8139_get_stats(struct net_device *dev)
{
  struct rtl8139_private *tp = dev-&gt;priv;
  return &amp;(tp-&gt;stats);
}</pre>
</td></tr></table>

<p>
Table 17: rtl8139_get_stats function
</p>

<p>
This ends our driver development. Compile and insert this again (you must 
unload earlier module using rmmod), and ping to another host. You should
be able to receive ping replies.  </p>

<p>
Although a professional-grade driver includes many more features than described
in this driver, the latter gives you a good insight into network drivers and
will help you understanding production drivers.  </p>

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:156/jangir.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/authors/jangir.jpg" class="bio">
</p>

<em>
<p>
Mohan Lal Jangir is working as Development Lead at Samsung India
 Software Operations, Bangalore, INDIA. He has a Masters in Computer
 Technology from IIT DELHI, and is keen interested in Linux, Networking
 and Network Security.
</p>



</em>

<br clear="all">


<!-- *** END author bio *** -->

<div id="articlefooter">


<p>
Copyright &copy; 2008, <a href="../authors/jangir.html">Mohan Lal Jangir</a>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication License</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>


<p>
Published in Issue 156 of Linux Gazette, November 2008
</p>

</div>
</div>


<div class="content lgcontent">

<a name="kapil"></a>
<h1>Not Screws and Bolts</h1>
<p id="by"><b>By <a href="../authors/kapil.html">Kapil Hari Paranjape</a></b></p>

</b>
</p>

<p>
<h3 id="introduction">Introduction</h3>

<p>The aim of these notes is to give you root access to a Debian
"lenny" installation on on your existing computer without
worrying about any hardware issues. To do this, you will not need
to re-boot your computer, and will only append to the existing
data on it.</p>

<p>The question of why<a href="#fn1" class="footnoteRef" id=
"fnref1" name="fnref1"><sup>1</sup></a> you may want to do this
is addressed in <a href="#why-and-eggs">the last section</a>,
along with various philosophical issues. You may want to read that
section, if you start wondering whether the steps described are
worth all the trouble.</p>

<p>The instructions will assume that you are in at least one of
the following categories of people:</p>

<ul>
  <li>experienced user of Debian GNU/Linux</li>

  <li>developer of software on GNU/Linux</li>

  <li>experienced developer of software</li>
</ul>

<p>The complexity of steps you need to carry out is directly
proportional to the "distance" between your existing computer
installation and Debian "lenny". The case when you are already
running Debian GNU/Linux with root access is the topic of
<a href="http://www.imsc.res.in/~kapil/goodies/schroot.html">another
article</a> (available <a href=
"http://linuxgazette.net/150/kapil.html">in <em>Linux Gazette</em></a>,
as well). So we deal with the following cases:</p>

<ul>
  <li>Your computer is running GNU/Linux, and you have root
  access.</li>

  <li>You are logged in as a non-root user on GNU/Linux.</li>

  <li>You are running some other operating/system on your
  computer.</li>
</ul>

<p>These three cases roughly correspond to the three categories
of users listed above in terms of skill required. In all cases, we
will make use of network access (though this can be avoided) so
your computer should have a reasonable speed link to the
Internet.</p>

<h3 id="contents">Contents</h3>

<ul type="none">
<li> 1&nbsp;&nbsp;&nbsp; <a href="#the-root-suite">The root suite</a>
<li> 1.1 <a href= "#doing-the-base-thing">Doing the base thing</a> 
<li> 2&nbsp;&nbsp;&nbsp; <a href="#root--less-explorer">Root-less explorer</a> 
<li> 2.1 <a href="#polishing-the-uml">Polishing the UML</a> 
<li> 3&nbsp;&nbsp;&nbsp; <a href="#birds-of-another-feather">Birds of another feather</a> 
<li> 3.2 <a href="#adding-some-nuts">Adding some nuts</a> 
<li> 4&nbsp;&nbsp;&nbsp; <a href="#why-and-eggs">Why and eggs</a>
</ul>

<h3 id="the-root-suite">The root suite</h3>

<p>Start by getting root access to a GNU/Linux system. We don't
really care how you do it, though we encourage you to do the
lawful thing at all times! This system should have
<code>wget</code>, <code>perl</code>, <code>bash</code>,
<code>ar</code>, <code>tar</code>, and GNU <code>coreutils</code>
installed.</p>

<p>You also need to have some block device with adequate space.
In what follows, we will assume that the <code>bash</code>
variable <code>BLK_DEV</code> contains the full path to this
block device.</p>

<p>If you have disk space but no free partition, then you can do
the following:</p>
<pre>
<code>     mkdir -p /var/lib/images
     dd if=/dev/zero bs=1M count=2000 of=/var/lib/images/loop.base
     BLK_DEV=$(losetup -f)
     losetup -f $BLK_DEV /var/lib/images/loop.base
</code>
</pre>

<h3 id="doing-the-base-thing">Doing the base thing</h3>

<p>Create a new file system on the block device:</p>
<pre>
<code>     mke2fs $BLK_DEV
     mount $BLK_DEV /mnt
     mkdir /mnt/root
     cd /mnt/root
</code>
</pre>

<p>Find the <a href="http://www.debian.org/mirrors.html">Debian
mirror</a> that is nearest to you (in terms of network
connectivity), and set the variable <code>DEBIAN_MIR</code> to
contain the URL of this mirror (including the trailing
<code>/debian</code>). Browse the sub-URL
<code>pool/main/d/debootstrap</code> under
<code>$DEBIAN_MIR</code> to locate a recent version of
<code>debootstrap</code>, and let <code>DEBOOTSTRAP_URL</code>
contain the full URL for this version.</p>

<p>Download and extract <code>debootstrap.deb</code> in
<code>/mnt/root</code>:</p>
<pre>
<code>     wget $DEBOOTSTRAP_URL -o debootstrap.deb
     ar xv debootstrap.deb
     tar xzf data.tar.gz
</code>
</pre>

<p>The next step is to set things up to run
<code>debootstrap</code>:</p>
<pre>
<code>     chmod +x /mnt/root/usr/sbin/debootstrap
     mkdir -p /usr/share
     DEBOOTSTRAP=/mnt/root/usr/sbin/debootstrap
     DEBOOTSTRAP_DIR=/mnt/root/usr/share/debootstrap
     export DEBOOTSTRAP_DIR
</code>
</pre>

<p>Finally, use this to install "lenny" in <code>/mnt</code>:</p>
<pre>
<code>     eval $DEBOOTSTRAP lenny /mnt $DEBIAN_MIR
</code>
</pre>

<p>Just a little clean up job at the end:</p>
<pre>
<code>     rm -rf /mnt/root/*
     cd /
</code>
</pre>

<p>You then have a brand-new shiny Debian lenny image in
<code>$BLK_DEV</code> mounted at <code>/mnt</code>. This can be
used in different ways, the simplest being something like:</p>
<pre>
<code>     umount /mnt
     mkdir -p /srv/chroot/lenny
     cat &gt;&gt; /etc/fstab &lt;&lt;EOF
$BLK_DEV /srv/chroot/lenny ext2 defaults 0 0
EOF
     mount /srv/chroot/lenny
</code>
</pre>

<p>The command to use this image will then be</p>
<pre>
<code>     DEB_ROOT_CMD="chroot /srv/chroot/lenny"
</code>
</pre>

<p>You could also use the image with schroot, vserver, openVZ,
kvm or Xen. The latter two will require the addition of an
appropriate Linux kernel in a manner similar to that in the
section on <a href="#adding-some-nuts">"Adding some
nuts"</a>.</p>

<h3 id="root-less-explorer">Root-less explorer</h3>

<p>When you do not have root access to your GNU/Linux machine (or
you have root access but do not want to use it), you must first
perform some preliminary steps.</p>

<p>The most crucial step is to get <a href=
"http://user-mode-linux.sourceforge.net/">User Mode Linux</a>
(UML) working on your GNU/Linux system. How easy this is will
depend on your distribution and on how much software is already
installed by your GNU/Linux system administrator. We will also
need to use networking with UML. The method that does not need
root intervention uses <a href=
"http://slirp.sourceforge.net">Slirp</a>; this is what the steps
outlined below use.</p>

<p>To check that your installation of this software is adequate
for our purposes, you should run the following test:</p>
<pre>
<code>     UML_CMD='linux root=/dev/root rootfstype=hostfs rootflags=/ \
       eth0=slirp,,slirp-fullbolt con0=fd:0,fd:1 \
       umid=mkimg init=/bin/bash'

     eval $UML_CMD
</code>
</pre>

<p>Of course, if you use something other than <code>slirp</code>
for networking, then you should use the appropriate
<code>eth0=</code> option.</p>

<p>This should give you a root prompt. You should check that
networking works, and then shut down your UML with <code>halt
-f</code>. To set up networking you run a sequence of commands
like the following (which are for <code>slirp</code>).</p>
<pre>
<code>     ifconfig eth0 up
     ifconfig eth0 10.0.2.15 netmask 255.255.255.0
     route add default dev eth0
</code>
</pre>

<p>Test it by trying to connect to some local service like ssh at
<code>10.0.2.2</code>, or to some Internet service like your
nearest Debian mirror.</p>

<p>Also, set the variable <code>UML_DIR</code> to the path that
contains the modules for your UML kernel.</p>

<p>At this point, you could skip the rest of this section and
install <code>rootstrap</code> by downloading the source from the
sub-directory <code>pool/main/r/rootstrap</code> of your nearest
Debian mirror. This can be configured to carry out the remaining
steps in this section automatically,</p>

<p>Proceeding manually, create a file to hold a file-system
image:</p>
<pre>
<code>     WKDIR=$HOME/uml
     mkdir -p $WKDIR
     dd if=/dev/zero bs=1M count=2000 of=$WKDIR/uml.img
</code>
</pre>

  <p>and boot the system with</p>
  <pre>
<code>     eval $UML_CMD udb0=uml.img
</code>
</pre>

  <p>You will get a root prompt in your UML.</p>

  <p>Start by setting up some important filesystems like
  <code>/proc</code>, <code>/dev</code>, <code>/sys</code>,
  <code>/tmp</code> and /verb/lib/modules. On a Debian system, this
  would be done by executing commands given below. Do the right
  thing for your system! (Hint: Look at what file systems are
  listed in <code>/proc/mounts</code>.)</p>
  <pre>
<code>     /etc/init.d/mountkernfs.sh start
     /etc/init.d/udev start
     mount --bind $UML_DIR /lib/modules/
     mount -t tmpfs tmpfs /tmp
</code>
</pre>

  <p>Also setup networking as outlined above. Next, create device
  node for <code>ubd0</code> and set it as the block device.</p>
  <pre>
<code>     mknod /tmp/ubd0 b 98 0
     BLK_DEV=/tmp/ubd0
</code>
</pre>

  <p>The final step is to setup the PATH variable if that is not
  set automatically:</p>
  <pre>
<code>     PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
     export PATH
</code>
</pre>

  <p>You are now in a position where you can follow the
  instructions in the section on <a href=
  "#doing-the-base-thing">"Doing the base thing"</a>. After that,
  some more steps need to be carried out to setup this image to
  boot as a UML image.</p>

  <h3 id="polishing-the-uml">Polishing the UML</h3>

  <p>If you have followed things so far, you should have used
  <code>debootstrap</code> to create a Debian lenny filesystem
  under <code>/mnt</code>.</p>

  <p>Enter the image using chroot</p>
  <pre>
<code>     mount -t proc proc /mnt/proc
     chroot /mnt
</code>
</pre>

  <p>Install <code>udev</code> which is what Debian uses for
  managing the <code>/dev</code> heirarchy.</p>
  <pre>
<code>     apt-get update
     apt-get install udev
</code>
</pre>

  <p>If you don't want to use <code>udev</code>, then you need to
  create the device nodes manually; in that case, don't forget to
  create <code>/dev/ubd*</code> for the filesystem-image-based
  block devices.</p>

  <p>Next, create an appropriate <code>/etc/fstab</code> file:</p>
  <pre>
<code>     cat &gt;&gt; /etc/fstab &lt;&lt;EOF
/dev/ubda /     ext2 defaults                           0 1
proc    /proc   proc    defaults                        0 0
tmpfs   /tmp    tmpfs   defaults,size=768M              0 0
EOF
</code>
</pre>

  <p>and the network configuration file:</p>
  <pre>
<code>     cat &gt;&gt; /etc/network/interfaces &lt;&lt;EOF
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet static
    address 10.0.2.15
    netmask 255.255.0.0
    up route add -net 0.0.0.0 dev eth0
    up route add -net 0.0.0.0 gw 10.0.2.2
EOF
</code>
</pre>

  <p>Then, exit the chroot, and copy the modules directory:</p>
  <pre>
<code>     cp -a $UML_MOD/. /mnt/lib/modules/.
</code>
</pre>

  <p>Finally, unmount <code>/mnt</code> and halt the UML
  system:</p>
  <pre>
<code>     umount /mnt/proc
     umount /mnt
     halt -f
</code>
</pre>

  <p>The command for entering the new system is:</p>
  <pre>
<code>     DEB_ROOT_CMD="linux root=/dev/ubda ubd0=$WKDIR/uml.img \
       eth0=slirp,,slirp-fullbolt \
       con0=fd:0,fd:1 con=pty \
       umid=lenny ro"
</code>
</pre>

  <p>This will attach <code>getty</code>s to your terminal and to
  a number of pseudo-ttys on your system. You can use any of these
  to login to your Debian "lenny" system; no root password is
  set.</p>

  <h3 id="birds-of-another-feather">Birds of another feather</h3>

  <p>The Qemu system is a way to run different systems inside
  another system. We will use it to run Debian "lenny".</p>

  <p>The critical step is to get <code>qemu</code> working along
  with some usable GNU/Linux disk image. For example, <a href=
  "http://www.imsc.res.in/~kapil/lenny-2008-10-26.tar.bz2">the
  archive</a> contains <code>vmlinuz</code>, <code>initrd</code>,
  <code>image</code>, which can be booted as follows:</p>
  <pre>
<code>     QEMU_CMD="qemu -hda image -snapshot -kernel vmlinuz -initrd initrd \
       -append ' root=/dev/hda quiet console=ttyS0 ro single' \
       -no-reboot -nographic"

     eval $QEMU_CMD
</code>
</pre>

  <p>At the prompt, you press Enter to get a root prompt.</p>

  <p>On the other hand, you may have a bootable disk image
  <code>hdimage</code> lying around, which you could test with some
  command like:</p>
  <pre>
<code>     $QEMU_CMD="qemu -hda hdimage -snapshot -boot c -no-reboot"

     eval $QEMU_CMD
</code>
</pre>

  <p>This image should have a working <code>bash</code>,
  <code>perl</code>, <code>tar</code> and GNU coreutils (at the
  very least). You should also have some way to transfer data from
  inside the Qemu to the outside.</p>

  <p>Note that the <code>-snapshot</code> option to
  <code>qemu</code> ensures that you do not write to your image
  file. After testing the image, you can halt the system, and it will
  not have written anything to your image.</p>

  <p>Now, create a qemu image to hold the file-system:</p>
  <pre>
<code>     WKDIR=$HOME/qemu
     mkdir -p $WKDIR
     cd $WKDIR
     qemu-img create -f qcow2 lenny.img 500M
</code>
</pre>

  <p>and boot the system with</p>
  <pre>
<code>     eval $QEMU_CMD -hdb lenny.img 
</code>
</pre>

  <p>At the root prompt, set <code>BLK_DEV=/dev/hdb</code>.</p>

  <p>You are now in a position where you can apply the instructions
  in the section on <a href="#doing-the-base-thing">"Doing the base
  thing"</a>. After that, you will need to carry out some more steps
  to make the image bootable under Qemu, as explained below.</p>

  <h3 id="adding-some-nuts">Adding some nuts</h3>

  <p>At this point you should be in <code>qemu</code> with
  <code>$BLK_DEV</code> mounted at <code>/mnt</code>. You need to
  add a kernel to your Debian "lenny" file-system, to get it ready
  to boot.</p>

  <p>First, enter it with <code>chroot</code>.</p>
  <pre>
<code>     mount -t proc proc /mnt/proc
     chroot /mnt
</code>
</pre>

  <p>and install an appropriate Linux kernel, according to your
  architecture:</p>
  <pre>
<code>     apt-get update
     apt-get install linux-image-2.6-686
</code>
</pre>

  <p>(Select the option to create an initrd image when prompted.)
  Next, create some required files on this file-system. The
  <code>/etc/fstab</code> file:</p>
  <pre>
<code>     cat &gt;&gt; /etc/fstab &lt;&lt;EOF
/dev/hda /     ext2 defaults                   0 1
proc    /proc   proc    defaults                        0 0
tmpfs   /tmp    tmpfs   defaults,size=768M              0 0
EOF
</code>
</pre>

  <p>and the network configuration file:</p>
  <pre>
<code>     cat &gt;&gt; /etc/network/interfaces &lt;&lt;EOF
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet static
    address 10.0.2.15
    netmask 255.255.0.0
    up route add -net 0.0.0.0 dev eth0
    up route add -net 0.0.0.0 gw 10.0.2.2
EOF
</code>
</pre>

  <p>We also setup the <code>/etc/inittab</code> to use serial port
  logins:</p>
  <pre>
<code>     sed -i -e '/^#T[01]/s/^#//' /etc/inittab
</code>
</pre>

  <p>You can now exit the chroot.</p>

  <p>The kernel and initrd need to be extracted from the image and
  put into the workdir <code>$WKDIR</code>, so that you can boot
  using them. For example, you could use the ssh client dropbear,
  which is on the image (if you used the downloadable one).</p>
  <pre>
<code>     cat /mnt/boot/vmlinuz* | \
       dbclient user@10.0.2.2 'cat &gt; $WKDIR/vmlinuz'
     cat /mnt/boot/initrd* | \
       dbclient user@10.0.2.2 'cat &gt; $WKDIR/initrd'
</code>
</pre>

  <p>Finally, you can unmount the image and halt the system:</p>
  <pre>
<code>     umount /mnt/proc
     umount /mnt
     halt -f
</code>
</pre>

  <p>The command for using the new system is:</p>
  <pre>
<code>     DEB_ROOT_CMD="qemu -hda $WKDIR/lenny.img \
       -kernel vmlinuz -initrd initrd \
       -append ' root=/dev/hda console=ttyS0 ro' \
       -no-reboot -nographic"
</code>
</pre>

  <p>You can add the <code>-snapshot</code> option to avoid
  overwriting the image by mistake while you are playing with this
  system.</p>

  <h3 id="why-and-eggs">Why and eggs</h3>

  <p>Why would one choose this method of installing Debian, when
  there is the new and revamped Debian installer that even has a
  graphical installer?</p>

  <p>This article was created primarily to help the people who
  belong to the categories listed in the introduction, and want to
  develop software for Debian. All such people need to have a
  nicely working Debian environment in which they can build and
  test their packages. They may not want to (or be able to) run the
  <a href="http://www.debian.org/releases/testing/">Debian
  "testing" distribution</a> directly on their hardware. The
  environment created in the article forms a base where they can
  install a collection of useful packages and start hacking on
  Debian.</p>

  <p>There is a more philosophical reason why I like this method of
  installing Debian. I appreciate the enormous amount of effort
  that people have put into getting all manners of diverse hardware
  to work with GNU/Linux. However, creating an installer that can
  be used by any new user of computers is only one way to achieve
  "World Domination".</p>

  <p>There are a number of creative people who could benefit by
  using Debian to create text, programs, music, graphics, video, but
  cannot/will not use it natively on their hardware because:</p>

  <ul>
    <li>They own a computer or hardware that is not yet supported
    by Debian.</li>

    <li>They have hardware that "just works" with some
    (pre-)installed software (which may be GNU/Linux or some other
    operating system).</li>

    <li>They work on computers that are maintained by others.</li>
  </ul>

  <p>Assuming some of these people actually want to use Debian
  to be creative, they represent a chicken-and-egg problem for
  those who advocate using Debian. I hope this article points one
  way out for them.</p>

  <p>There is likely to be some criticism that the methods
  described above will be very slow, and use a lot of use of network
  bandwidth. Indeed, using emulation does need good hardware and
  some tuning. Moreover, using graphics, audio, and video at near-native 
  speeds in such a sandboxed environment requires some work
  to set up, which should probably form the basis of a second
  article!</p>

  <div class="footnotes">
    <hr />

    <ol>
      <li id="fn1">
        <p>The great 20th century mathematician Andre Weil once
        said (in response to a request for motivation) something
        like: "I'm providing the mathematics. You can provide your
        own motivation." <a href="#fnref1" class="footnoteBackLink"
        title="Jump back to footnote 1" style="text-decoration:none">&#x21A9;</a></p>
      </li>
    </ol>
  </div>

<br clear="all" />

<script type='text/javascript'>
digg_url = 'http://linuxgazette.net/156/kapil.html';
digg_title = 'Not Screws and Bolts';
digg_bodytext = '<p>The aim of these notes is to give you root access to a Debian "lenny" installation on on your existing computer without worrying about any hardware issues. To do this, you will not need to re-boot your computer, and will only append to the existing data on it.</p> ';
digg_topic = 'linux_unix';
</script>
<script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:156/kapil.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<p>
<img align="left" alt="Bio picture" src="../gx/authors/kapil.jpg" class="bio">
<em>

Kapil Hari Paranjape has been a ``hack''-er since his punch-card days.
Specifically, this means that he has never written a ``real'' program.
He has merely tinkered with programs written by others. After playing
with Minix in 1990-91 he thought of writing his first program---a
``genuine'' *nix kernel for the x86 class of machines. Luckily for him a
certain L. Torvalds got there first---thereby saving him the trouble
(once again) of actually writing code. In eternal gratitude he has spent
a lot of time tinkering with and promoting Linux and GNU since those
days---much to the dismay of many around him who think he should
concentrate on mathematical research---which is his paying job. The
interplay between actual running programs, what can be computed in
principle and what can be shown to exist continues to fascinate him.

</em>
<br clear="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->

<div id="articlefooter">


<p>
Copyright &copy; 2008, <a href="../authors/kapil.html">Kapil Hari Paranjape</a>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication License</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>


<p>
Published in Issue 156 of Linux Gazette, November 2008
</p>

</div>
</div>


<div class="content lgcontent">

<a name="prestia"></a>
<h1>Joey's Notes: The Red Hat Linux Boot Process</h1>
<p id="by"><b>By <a href="../authors/prestia.html">Joey Prestia</a></b></p>

</b>
</p>

<p>
<img src="../gx/minilogos/joeys_notes.png" alt="Joey's Notes image" align="left" />

<p>
Understanding the Linux boot process is crucial for being able to
effectively troubleshoot a Linux system, when boot problems occur.  For
example, someone could have made some undocumented changes during the
previous shift to a critical file that affects the boot process. Now, it's
your shift, and you have to bring the machine down for a hardware upgrade.
Upon boot up, the system crashes, and you're stuck there until you solve
the issue. Learning the steps involved in the boot process, and knowing what
happens at each phase, will help you quickly diagnose any problems that come
up.
</p>

<p>
Many current Linux distributions mask the boot process from the user by
using a boot splash screen that can usually be bypassed by pressing the
&lt;ESC&gt; key or some key sequence when the splash screen is being
displayed, and may require removing &quot;<code>rhgb
quiet</code>&quot; (on Red Hat-based distributions) from the kernel line in
/boot/grub/grub.conf. Because there are so many different Linux
distributions, you will need to check the documentation for your distro for
the splashscreen bypass procedure, if you need one.
</p>

<p>
This cannot be stressed enough: you need to get familiar with the boot
process <strong>before</strong> problems arise. There are some key files
involved with the boot process; e.g., an error in /boot/grub/grub.conf,
/etc/fstab or /etc/inittab, and you're sure to have problems. So, in addition
to knowing the boot process, it's a good idea to really learn these files.
</p>

<p>Caution: if you do anything with /boot/grub/grub.conf, or any
critical configuration file, do it only on a machine that's a
practice computer (sandbox), until you fully understand the process. I
use Virtualbox virtualization software, to practice recovering from
various self-inflicted boot problems. 
</p>

<p class="editorial">[ When working with critical files - and doubly so
when you're not sure what you're doing - making backups will save you
again and again. At the very least, you should make a copy, or preferably a
series of copies of the file before changing it (e.g., "grub.conf.3.orig"
for "grub.conf"); there are times when critical errors can go unnoticed for
a while. -- Ben ]

<h3>Power-On Self Test</h3>

<p><img width="600" height="449" src="misc/prestia/post.png" alt="POST Screen">
</p>

<p>The first thing to occur in the boot process is the Power-On Self Test
(POST) that is performed by the compter's Basic Input/Output System (BIOS),
when it is powered on. This self test is just that -- an internal
check of the system's internal components. Other architectures may
use different ways to accomplish this, but the purpose is identical. This
checking normally involves the system RAM, CPUs, video card, hard drives,
and other motherboard components. Many other types of internal cards such
as RAID cards and various other types of controller cards perform their own
self-testing. If errors occur, some form of alert will be
generated or sent to a panel or console; the POST uses a series of beeps to
indicate the specific error encountered.  If all goes well, the
BIOS reads the master boot record on the hard disk and loads the program
that is found there into memory.
</p>

<h3>Master Boot Record</h3>

<p><img width="571" height="122" src="misc/prestia/mbr.jpg" alt="MBR Image">
</p>

<p>The Master Boot Record (MBR) is the first 512 bytes of the boot
drive that is read into memory by the BIOS. (This is assuming we are
using an x86 architecture.) The first 446 bytes of that 512 will
normally contain a low-level boot code that points to a boot loader
somewhere else on the disk - it can even point to another hard disk.
The next 64 bytes contain the partition table for the disk (four 16-byte
entries known as the IBM Partition Table Scheme). Finally, the remaining 2
bytes are the "Magic Number" (used for error detection).
</p>

<h3>Boot Loader</h3>

<p>The purpose of a bootloader is to load the operating system. Many
boot loaders are available; however, LILO and GRUB are the most
common for Linux. Windows has its own, called the New Technology
Loader (NTLDR). You may have at one time or another seen the message
&quot;NTLDR is missing&quot;; this is a Windows bootloader error.
</p>

<p>
Regardless of the bootloader being used, it is important to keep in mind
that bootloaders are very complex and easily rendered inoperative by
inexperienced users with root access. In my opinion, the best practice is
to explore their workings only on machines you are using as sandboxes or in
virtual machines to sharpen your skills. One slight typographical error
while working with, e.g., grub.conf, and you may be spending more time than
you anticipated trying to fix your error; however, this too, can be a great
learning experience, as long as it is on a sandbox and you can afford the
time. 
</p>

<h3>GRUB</h3>

<p><img width="600" height="448" src="misc/prestia/grub.png" alt="GRUB Menu">
</p>

<p>The most common bootloader program in use today for modern Linux
systems is the GRand Unified Bootloader (GRUB). This is the bootloader we
will be talking about, here. The GRUB bootloader is a program 
written to the master boot record and /boot partition of a hard drive
that loads the operating system. The bootloader code used to fit in the
first 446 bytes of the MBR, but, owing to progressively increasing complexity
of operating systems and the need to boot almost any operating system, it
has grown in size. Currently, a subset of the bootloader code is written to
the MBRi, and the remainder is written to the /boot partition. In addition,
the GRUB bootloader is modular in design and works in stages which
I will only cover briefly.
</p>

<p><strong>The stages of GRUB</strong> 
</p>

<p>GRUB works in stages called Stage1, Stage1_5, and Stage 2. I will
give a brief overview of what each stage does. 
</p>

<p><strong>Stage1</strong> 
</p>

<p>The stage1 code of GRUB is written within the 512 bytes of the
master boot record. Because of the limited size of the master boot record
area, GRUB stage1 will usually point to the next stage of GRUB,
stage1_5 or stage2. GRUB may or may not need to load stage1_5 depending on
the types of filesystems present. 
</p>

<pre class="code">
[root@localhost grub]# file stage1
stage1: x86 boot sector, code offset 0x48
</pre>

<p>
<strong>Stage1_5</strong> 
</p>

<p>Stage1_5 is the intermediate stage between stage1 and stage2.
If you look at your /boot/grub area, you should see various stage1_5
files with names of various types of filesystems. Stage1_5 deals with
specific types of filesystems, and is named after them. This code will
allow the filesystem to be interpreted appropriately. 
</p>

<p>These are the stage1_5 files located in my /boot/grub directory: 
</p>

<pre>
e2fs_stage1_5
fat_stage1_5
ffs_stage1_5
iso9660_stage1_5
jfs_stage1_5
minix_stage1_5
reiserfs_stage1_5
ufs2_stage1_5
vstafs_stage1_5
xfs_stage1_5
</pre>

<p><strong>Stage2</strong> 
</p>

<p>This is the main GRUB image, and will usually reside on the filesystem
in the /boot partition at /boot/grub/stage2. It reads the
/boot/grub/grub.conf file for configuration information that details how it
will load the kernel. It also has an interactive interface that will allow
you to troubleshoot, re-install, or modify how GRUB works. Stage2
will present the user with a graphical boot menu entry. If the appropriate
key is not pressed in the time allotted to enter the hidden menu, or nothing
is selected in the time frame allowed, GRUB will boot the default entry.
</p>

<p>
GRUB has a really helpful tab-completion feature that you can use to assist
you in getting your system up and running if, for example, you have a
non-bootable system due to a improperly specified line in your grub.conf
file. I have used it in this way many times to get unbootable systems
working again. 
</p>

<p><strong>/boot/grub/grub.conf</strong> 
</p>

<p>
This file specifies the kernel to load and the initrd image file with all
of the modules to load for your system. 
</p>

<p>Here is a typical grub.conf file for Red Hat Linux: 
</p>

<pre class="code">
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making changes to this file
# NOTICE:  You have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /boot/, eg.
#          root (hd0,0)
#          kernel /vmlinuz-version ro root=/dev/hdb9
#          initrd /initrd-version.img
#boot=/dev/hdb
default=0
timeout=5
splashimage=(hd0,0)/grub/splash.xpm.gz
hiddenmenu
title Red Hat Enterprise Linux Server   (2.6.18-53.el5)
        root (hd0,0)
        kernel /vmlinuz-2.6.18-53.el5 ro root=LABEL=/ rhgb quiet
        initrd /initrd-2.6.18-53.el5.img
</pre>

<p>
This file is fairly easy to edit; because of this, it is
a common location for errors. 
</p>

<pre class="code">
    GNU GRUB  version 0.97  (640K lower / 3072K upper memory)

 [Minimal BASH-like line editing is supported.  For the first word, TAB
   lists possible command completions.  Anywhere else, TAB lists the possible
   completions of a device/filename.]

grub&gt; 
</pre>

<p>
Nothing but a GRUB prompt - now what do we do? If you're making any changes
to this file, remember to print it out first, and make a backup copy; it may
save you if you make a typo. You can use the hardcopy to recall the options
necessary to boot your machine and fix your mistake. There are various
errors, and it pays to become familiar with some of the common ones such as
an incorrectly specified kernel name, or a root partition that is
improperly designated in this file. If you do see this GRUB prompt, ask
yourself this question, &quot;What do I do now to recover my system?&quot;
If you have no idea at this point, and you are managing Linux systems, it
would probably be a good idea to get on a practice box and create some
errors within the grub.conf, and get to know your bootloader. Here's what
could be done in the above situation - notice where I hit the &lt;TAB&gt;
key to view my options.
</p>

<p><strong>Booting manually with GRUB tab completion</strong> 
</p>

<pre class="code">
grub&gt; root (hd0,0)                               
 Filesystem type is ext2fs, partition type 0x83

grub&gt; kernel /<strong>&lt;TAB&gt;</strong>               
 Possible files are: lost+found grub initrd-2.6.18-8.el5.img System.map-2.6.18-
8.el5 config-2.6.18-8.el5 symvers-2.6.18-8.el5.gz vmlinuz-2.6.18-8.el5

grub&gt; kernel /vmlinuz-2.6.18-8.el5  ro root=LABEL=/                                                                                                                    
     [Linux-bzImage, setup=0x1e00, size=0x1ad054]

grub&gt; initrd /<strong>&lt;TAB&gt;</strong>                  
 Possible files are: lost+found grub initrd-2.6.18-8.el5.img System.map-2.6.18-
8.el5 config-2.6.18-8.el5 symvers-2.6.18-8.el5.gz vmlinuz-2.6.18-8.el5

grub&gt; initrd /initrd-2.6.18-8.el5.img
   [Linux-initrd @ 0xfe8a000, 0x15547c bytes]

grub&gt; boot               
</pre>

<p>
The &quot;<code>root (hd0,0)</code>&quot; specifies the first drive, and the
first partition on that drive. On the kernel line, you can type '/', hit
&lt;TAB&gt;, and view your options; after selecting one, type one or more
letters (whatever's necessary for a unique name) and let GRUB complete it
for you. The additional option of &quot;<code>ro root=LABEL=/</code>&quot;
came from my experience of working with Red Hat systems; yours may be
different - so you need to examine the options in your grub.conf file. The
same thing happens on the initrd line: after the /, hit &lt;TAB&gt; and let
GRUB do the work by listing your possible choices. You may also have to
further specify modules and additional options. 
</p>

<h3>Kernel</h3>

<p><img width="600" height="355" src="misc/prestia/kernel.png" alt="Kernel Booting">
</p>

<p>When GRUB transfers control to the kernel and the kernel is booting, you
may see a lot of text output.  On Red Hat-based systems, the line in
grub.conf specifying the kernel may have an &quot;<code>rhgb
quiet</code>&quot; appended to it that prevents this. It stands for "Red
Hat graphical boot quiet" and will suppress kernel boot messages.  When I
need to see boot messages, I interrupt the GRUB cycle by hitting the escape
key, hitting 'e' for edit (the procedure to modify the grub kernel
arguments is at the bottom of the GRUB screen), and editing the kernel
line. Removing the &quot;<code>rhgb quiet</code>&quot; allows me to see the
kernel messages so I can determine if any of them are relevant to, e.g., a
kernel panic or a similar problem.
</p>

<p>
What is actually going on at this time is that the kernel is probing your
hardware and configuring itself for your hardware. The kernel is also
loading modules in the initrd image that it needs to operate your hardware.
Note that the information will scroll very quickly up your screen - so,
if you believe your problem exists at the kernel level, be sure to watch
closely, as this is sure to give you a clue about where your problem
lies. Once the kernel is done with its initialization, it starts the
system's first process, which is /sbin/init.  </p>

<p class="editorial">[ Much, but not all, of the boot information is
available in the /var/log/dmesg file, once you've booted. -- Ben ]
</p>

<h3>INIT</h3>

<p><img width="600" height="382" src="misc/prestia/rc.sysinit.png" alt="INIT Starting">
</p>

<p>Init is the first process running on your system. It reads the
/etc/inittab file, executes /etc/rc.d/rc.sysinit, then boots into the
runlevel as defined in /etc/inittab. 
</p>

<p>
Init starts out with a Process ID (PID) of 1. In the image above, there's a
line saying &quot;INIT: version 2.86 booting&quot;; this is /sbin/init
taking over at this point in the boot process. On the line right after that
one, you see the messages being displayed by the /etc/rc.d/rc.sysinit shell
script; as a matter of fact, the entire screen contains messages from that
script, so you can get an idea of some of the functions it performs. Init
will also normally start several instances of /sbin/getty or /sbin/mingetty,
which are your virtual terminals. This is why you can hit &lt;Ctrl&gt; +
&lt;Alt&gt; + &lt; F1&gt; through &lt;F6&gt; and come up with a virtual
terminal.
</p>

<p>Next, we will look at the /etc/inittab file, specifically, at the
configuration file for Init: </p>

<pre class="code">
#
# inittab       This file describes how the INIT process should set up
#               the system in a certain run-level.
#
# Author:       Miquel van Smoorenburg, 
#               Modified for RHS Linux by Marc Ewing and Donnie Barnes
#

# Default runlevel. The runlevels used by RHS are:
#   0 - halt (Do NOT set initdefault to this)
#   1 - Single user mode
#   2 - Multiuser, without NFS (The same as 3, if you do not have networking)
#   3 - Full multiuser mode
#   4 - unused
#   5 - X11
#   6 - reboot (Do NOT set initdefault to this)
#
id:5:initdefault:

# System initialization.
si::sysinit:/etc/rc.d/rc.sysinit

l0:0:wait:/etc/rc.d/rc 0
l1:1:wait:/etc/rc.d/rc 1
l2:2:wait:/etc/rc.d/rc 2
l3:3:wait:/etc/rc.d/rc 3
l4:4:wait:/etc/rc.d/rc 4
l5:5:wait:/etc/rc.d/rc 5
l6:6:wait:/etc/rc.d/rc 6

# Trap CTRL-alt-DELETE
ca::ctrlaltdel:/sbin/shutdown -t3 -r now

# When our UPS tells us power has failed, assume we have a few minutes
# of power left.  Schedule a shutdown for 2 minutes from now.
# This does, of course, assume you have powerd installed and your
# UPS connected and working correctly.
pf::powerfail:/sbin/shutdown -f -h +2 &quot;Power Failure; System Shutting Down&quot;

# If power was restored before the shutdown kicked in, cancel it.
pr:12345:powerokwait:/sbin/shutdown -c &quot;Power Restored; Shutdown Cancelled&quot;


# Run gettys in standard runlevels
1:2345:respawn:/sbin/mingetty tty1
2:2345:respawn:/sbin/mingetty tty2
3:2345:respawn:/sbin/mingetty tty3
4:2345:respawn:/sbin/mingetty tty4
5:2345:respawn:/sbin/mingetty tty5
6:2345:respawn:/sbin/mingetty tty6

# Run xdm in runlevel 5
x:5:respawn:/etc/X11/prefdm -nodaemon
</pre>

<p>
Depending on what Init is doing, you may see typical Init script
verification messages getting printed to the screen, i.e., [ OK ] or
[Failed] to aid in troubleshooting. You may see a message like &quot;Press
'I' to enter interactive startup&quot; (on Red Hat-based systems);
this is an indication of rc.sysinit executing, and allows the operator a certain level
of control over the still-booting system. rc.sysinit ends
with your default runlevel (as defined in /etc/inittab) being
started. This is another common place for errors, because servers will
usually have the &quot;<code>id:5:initdefault:</code>&quot; line set
to 3, so the machine boots to runlevel 3 instead of runlevel 5.
Another common place for errors is the line pertaining to
&quot;<code>ca::ctrlaltdel:/sbin/shutdown -t3 -r now</code>&quot;
commented out to prevent the 3-finger salute (&lt;Ctrl&gt; + &lt;Alt&gt;
+ &lt;Del&gt;) from restarting the server. People are human and make
mistakes; I have seen typographical errors in both places that can
cause problems. Unlike the &quot;<code>mount -a</code>&quot;
command, which will alert you if errors exist in your mount points in
the /etc/fstab file, executing the command &quot;<code>init q</code>&quot;
will reread your /etc/inittab, but will not check for errors in
the runlevels themselves; the best way to know if errors exist is to learn
this file and to be very, very careful if you decide to modify any of the
/etc/rc*/* files. 
</p>

<h3>Runlevels</h3>

<p><img width="600" height="387" src="misc/prestia/runlevel3.png" alt="Runlevel Initializing">
</p>

<p>When you enter your runlevel, you will see further Init messages being
printed to the screen (depending if your machine is configured to do so),
again ending with a [ OK ] or [Failed] depending on whether it started
successfully or not. These are your startup services within your runlevels.
When you look at your /etc/inittab file, you will see a line like
&quot;<code>id:5:initdefault:</code>&quot;; this is your default runlevel.
The default runlevel on most servers will be set to 3; on desktops, of
course, it's set to 5, so we can have an X Window System session start
as soon as the system boots up.  </p>

<p>
To get an overview of what processes get started or stopped for any
particular runlevel, we should look within the /etc/rc<em>X</em>.d (where
<em>X</em> is your runlevel) directory. Inside these directories, you will
see symbolic links to the files in your /etc/init.d/ directory. The file
names will be prefixed with either a 'K' or an 'S' (signifying kill or
start) for the given daemon at that runlevel. The number immediately after
the letter positions the script in the start order, because the processes are
started alphabetically. With Red Hat-based systems, the
&quot;<code>chkconfig</code>&quot; command will alter the symbolic links to
start or stop the daemon in a desired runlevel; the 'S' or 'K' will change
appropriately and the number will most likely change as well. 
</p>

<h3>Login</h3>


<p>That sums up the outline of the boot process for a typical Linux
machine. At this point, you should have a better understanding of what
goes on up until the login prompt or dialog on your screen. Last of all, always
pay close attention to the details: the machine will most likely tell you what
is wrong if you're experiencing problems. 
</p>

<p><strong>Resources</strong> 
</p>

<ul>
	<li><a href="http://www.gnu.org/software/grub/manual/grub.html">GRUB manual</a> 
	<li><a href="http://www.comptechdoc.org/os/linux/startupman/linux_surcsysinit.html">Explanation of rc.sysinit</a> 
</ul>


<br clear="all" />

<script type='text/javascript'>
digg_url = 'http://linuxgazette.net/156/prestia.html';
digg_title = 'Joey\'s Notes: The Red Hat Linux Boot Process';
digg_bodytext = '<p> Understanding the Linux boot process is crucial for being able to effectively troubleshoot a Linux system, when boot problems occur.  For example, someone could have made some undocumented changes during the previous shift to a critical file that affects the boot process. Now, it\'s your shift, and you have to bring the machine down for a hardware upgrade. Upon boot up, the system crashes, and you\'re stuck there until you solve the issue. Learning the steps involved in the boot process, and knowing what happens at each phase, will help you quickly diagnose any problems that come up. </p> ';
digg_topic = 'linux_unix';
</script>
<script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:156/prestia.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/authors/prestia.jpg" class="bio">
</p>

<em>
<p>
Joey was born in Phoenix and started programming at the age fourteen on
 a Timex Sinclair 1000. He was driven by hopes he might be able to do
 something with this early model computer. He soon became proficient in
 the BASIC and Assembly programming languages. Joey became a programmer
 in 1990 and added COBOL, Fortran, and Pascal to his repertoire of
 programming languages. Since then has become obsessed with just about
 every aspect of computer science. He became enlightened and discovered
 RedHat Linux in 2002 when someone gave him RedHat version six. This 
 started off a new passion centered around Linux. Currently Joey is 
 completing his degree in Linux Networking and working on campus
 for the college's RedHat Academy in Arizona. He is also on the staff of
 the Linux Gazette as the Mirror Coordinator.
</p>



</em>

<br clear="all">


<!-- *** END author bio *** -->

<div id="articlefooter">


<p>
Copyright &copy; 2008, <a href="../authors/prestia.html">Joey Prestia</a>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication License</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>


<p>
Published in Issue 156 of Linux Gazette, November 2008
</p>

</div>
</div>


<div class="content lgcontent">

<a name="collinge"></a>
<h1>HelpDex</h1>
<p id="by"><b>By <a href="../authors/collinge.html">Shane Collinge</a></b></p>

</b>
</p>

<p>

<p>
<em>These images are scaled down to minimize horizontal scrolling.</em>
</p>

<a href="http://linuxgazette.net/124/misc/nottag/flash.html"><b>Flash problems?</b></a>
<br>

<div class="cartoon">

<object>
<embed src="misc/collinge/663laptop.swf" bgcolor="#ffffff" width="600" />
</object>

<a href="misc/collinge/663laptop.swf"><p>Click here to see the full-sized image</p></a>

</div>

<p> All HelpDex cartoons are at Shane's web site,
<a href="http://www.shanecollinge.com/">www.shanecollinge.com</a>.

<script src="http://www.google-analytics.com/urchin.js"
type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1204316-1";
urchinTracker();
</script>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:156/collinge.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<P>
<img ALIGN="LEFT" ALT="Bio picture" SRC="../gx/2002/note.png" class="bio">
<em>
Part computer programmer, part cartoonist, part Mars Bar. At night, he runs
around in his brightly-coloured underwear fighting criminals. During the
day... well, he just runs around in his brightly-coloured underwear. He
eats when he's hungry and sleeps when he's sleepy.
</em>
<br CLEAR="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->

<div id="articlefooter">


<p>
Copyright &copy; 2008, <a href="../authors/collinge.html">Shane Collinge</a>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication License</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>


<p>
Published in Issue 156 of Linux Gazette, November 2008
</p>

</div>
</div>


<div class="content lgcontent">

<a name="ecol"></a>
<h1>Ecol</h1>
<p id="by"><b>By <a href="../authors/malonda.html">Javier Malonda</a></b></p>

</b>
</p>

<p>
The Ecol comic strip is written for <a
href="http://escomposlinux.org">escomposlinux.org</a> (ECOL), the web site that
supports es.comp.os.linux, the Spanish USENET newsgroup for Linux.  The
strips are drawn in Spanish and then translated to English by the author.
<p>
<em>These images are scaled down to minimize horizontal scrolling.</em>
</p>


<div class="cartoon">
<a href="misc/ecol/tiraecol_en-282.png">
<img alt="[cartoon]" src="misc/ecol/tiraecol_en-282.png"><p>Click here to see the full-sized image</a>
</div>
<div class="cartoon">
<a href="misc/ecol/tiraecol_en-283.png">
<img alt="[cartoon]" src="misc/ecol/tiraecol_en-283.png"><p>Click here to see the full-sized image</a>
</div>

All Ecol cartoons are at
<a href="http://tira.escomposlinux.org/">tira.escomposlinux.org</a> (Spanish),
<a href="http://comic.escomposlinux.org/">comic.escomposlinux.org</a> (English) 
and
<a href="http://tira.puntbarra.com/">http://tira.puntbarra.com/</a> (Catalan).
The Catalan version is translated by the people who run the site; only a few
episodes are currently available.

<p> <small>These cartoons are copyright Javier Malonda.  They may be copied,
linked or distributed by any means.  However, you may not distribute
modifications.  If you link to a cartoon, please <a
href="mailto:jmr@escomposlinux.org">notify</a> Javier, who would appreciate
hearing from you.
</small>

<script src="http://www.google-analytics.com/urchin.js"
type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1204316-1";
urchinTracker();
</script>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:156/ecol.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<!-- P>
<img ALIGN="LEFT" ALT="Bio picture" SRC="../gx/2002/note.png" class="bio">
<em>
</em>
<br CLEAR="all" -->
<!-- *** END bio *** -->

<!-- *** END author bio *** -->

<div id="articlefooter">


<p>
Copyright &copy; 2008, <a href="../authors/malonda.html">Javier Malonda</a>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication License</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>


<p>
Published in Issue 156 of Linux Gazette, November 2008
</p>

</div>
</div>


<div class="content lgcontent">

<a name="xkcd"></a>
<h1>XKCD</h1>
<p id="by"><b>By <a href="../authors/munroe.html">Randall Munroe</a></b></p>

</b>
</p>

<p>

<p>

<div class="cartoon1">
<a href="misc/xkcd/alice_and_bob.png">
<img alt="[cartoon]" title="Yet one more reason I'm barred from speaking at crypto conferences.
" src="misc/xkcd/alice_and_bob.png"><p>Click here to see the full-sized image</a>
</div>

More XKCD cartoons can be found
<a href="http://xkcd.com">here</a>.


<script src="http://www.google-analytics.com/urchin.js"
type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1204316-1";
urchinTracker();
</script>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:156/xkcd.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/2002/note.png" class="bio">
</p>

<em>
<p>
I'm just this guy, you know? I'm a CNU graduate with a degree in
 physics. Before starting xkcd, I worked on robots at NASA's Langley
 Research Center in Virginia. As of June 2007 I live in Massachusetts. In
 my spare time I climb things, open strange doors, and go to goth clubs
 dressed as a frat guy so I can stand around and look terribly
 uncomfortable. At frat parties I do the same thing, but the other way
 around.
</p>
</em>

<br clear="all">


<!-- *** END author bio *** -->

<div id="articlefooter">


<p>
Copyright &copy; 2008, <a href="../authors/munroe.html">Randall Munroe</a>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication License</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>


<p>
Published in Issue 156 of Linux Gazette, November 2008
</p>

</div>
</div>


<div class="content lgcontent">

<a name="lg_launderette"></a>
<h1>The Linux Launderette</h1>

</b>
</p>

<p>

<!-- Thread anchor: This takes the cake --><a name='this_takes_the_cake'></a>
<h3>This takes the cake</h3>
<p>
<b><p>
Mike Orr [sluggoster at gmail.com]

</p>
</b><br />
<b>Fri, 24 Oct 2008 11:18:24 -0700</b>
</p>

<p>
This is officially the most ridiculous LG spam ever.  So Miss Suzee
Goodluck wants to go out with Linux Gazette.
</p>


<p>
---------- Forwarded message ----------
<pre>
From: Suzee Goodluck &lt;spammersuzee@/dev/null&gt;
Date: Fri, Oct 24, 2008 at 6:29 AM
Subject: Nice to meet you
To: spammersuzee@/dev/null
</pre>

<p>
Hello,
How are you and how is your work hope all is moving fine.i seek for
honest partner and i meet you on linuxgazette.net it was interesting
and attractive then i drop by to know who this was, i will like to
know more about you. if you wouldn't mind you can reply my mail.
i will be very glad to read your mail with all pleasure. it will be
nice to meet you and also read from you. please do honor my invitation
so that we can exchange our pictures and maybe become partner.
Remember the distance does not matter what matters is the love we
share with each other.
i wait to hear from you soon.
</p>

<p>
kiss regards Miss Suzee
</p>

<p>

</p>

<p><b>[  <a name="mb-this_takes_the_cake"></a> <a href="misc/lg/this_takes_the_cake.html">Thread continues here (6 messages/7.51kB)</a>  ]</b></p>
<hr />


<br clear="all" />

<script type='text/javascript'>
digg_url = 'http://linuxgazette.net/156/lg_launderette.html';
digg_title = 'The Linux Launderette';
digg_bodytext = '<p>In this month\'s Linux Gazette, \'The Linux Launderette\' covers the following topics:<br>This takes the cake<br></p>';
digg_topic = 'linux_unix';
</script>
<script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:156/lg_launderette.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
<!-- *** END author bio *** -->

<div id="articlefooter">


<p>
Published in Issue 156 of Linux Gazette, November 2008
</p>

</div>
</div>


<img src="../gx/tux_86x95_indexed.png" id="tux" alt="Tux"/>

<br />

<script src="http://www.google-analytics.com/urchin.js"
type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1204316-1";
urchinTracker();
</script>

</body>
</html>


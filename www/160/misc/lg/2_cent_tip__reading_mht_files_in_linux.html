<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
		 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' lang='utf-8' xml:lang='utf-8'>
<head>
<title>2-cent Tip: Reading MHT files in Linux</title>
<meta http-equiv='Content-Type; charset=utf-8' />
<link rel='stylesheet' type='text/css' href='../../../lg.css' />
</head>
<body>
<a href="../../../"><img alt="Linux Gazette" src="../../../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" /></a><img alt="Tux" src="../../../gx/tux_86x95_indexed.png" id="tux" /><p id="fun">...making Linux just a little more fun!</p><div class='content articlecontent'><a name="top"></a><h3>2-cent Tip: Reading MHT files in Linux</h3>
<p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Fri, 13 Feb 2009 20:08:48 -0500</b>
</p>

<p>
Just ran across Yet Another Proprietary Format from Micr0s0ft: .mht
files. Seems that Internet Explorer saves emails and HTML as an ugly
mess that somewhat resembles an email; according to Wikipedia, there's
no single standard, and the state of the state is best described as
'sauve qui peut' (which translates, at least in Redmond, as "all your
ass are belong to me!") Bleh.
</p>

<p>
Searching the Web shows that there are a lot of people - the
just-converted-to-Linux newbies, particularly - who have loads of these
things and don't know what to do with them. Some people recommend Opera
(I <strong>suppose</strong> a couple of hours of Kiri Te Kanawa is good for relieving
all kind of stress...); some have had luck with various conversion
utilities. I looked at it, and it looked something like a mangled email
header, soooo...
</p>

<p>
I didn't go searching for more than just the one file that I had, but
here's what worked fine for opening it:
</p>

<p>
<pre class='code'>
# Convert line-ends to Unix format
flip -ub file.mht
# Prepend a standard 'From ' mail header to the file
sed -i '1i\'"$(echo From $USER $(date))" file.mht
# You should now be able to open it with your favorite MUA
mutt -f file.mht
</pre>

<p>
It worked fine for me.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href='http://LinuxGazette.NET'>http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-2_cent_tip__reading_mht_files_in_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Mulyadi Santosa [mulyadi.santosa at gmail.com]

</p>
</b><br />
<b>Sat, 14 Feb 2009 22:02:20 +0700</b>
</p>

<p>
On Sat, Feb 14, 2009 at 8:08 AM, Ben Okopnik &lt;ben@linuxgazette.net&gt; wrote:
</p>

<pre>
&gt; Just ran across Yet Another Proprietary Format from Micr0s0ft: .mht
&gt; files. Seems that Internet Explorer saves emails and HTML as an ugly
&gt; mess that somewhat resembles an email; according to Wikipedia, there's
&gt; no single standard, and the state of the state is best described as
&gt; 'sauve qui peut' (which translates, at least in Redmond, as "all your
&gt; ass are belong to me!") Bleh.
&gt;
&gt; Searching the Web shows that there are a lot of people - the
&gt; just-converted-to-Linux newbies, particularly - who have loads of these
&gt; things and don't know what to do with them. Some people recommend Opera
&gt; (I <strong>suppose</strong> a couple of hours of Kiri Te Kanawa is good for relieving
&gt; all kind of stress...); some have had luck with various conversion
&gt; utilities. I looked at it, and it looked something like a mangled email
&gt; header, soooo...
&gt;
&gt; I didn't go searching for more than just the one file that I had, but
&gt; here's what worked fine for opening it:
&gt;
&gt; ```
&gt; # Convert line-ends to Unix format
&gt; flip -ub file.mht
&gt; # Prepend a standard 'From ' mail header to the file
&gt; sed -i '1i\'"$(echo From $USER $(date))" file.mht
&gt; # You should now be able to open it with your favorite MUA
&gt; mutt -f file.mht
&gt; '''
&gt;
&gt; It worked fine for me.
</pre>

<p>
perhaps as the alternative of "flip", dos2unix could be used too here?
</p>

<p>
regards,
</p>

<p>
Mulyadi.
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-2_cent_tip__reading_mht_files_in_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas.adam22 at gmail.com]

</p>
</b><br />
<b>Sat, 14 Feb 2009 15:42:27 +0000</b>
</p>

<p>
2009/2/14 Mulyadi Santosa &lt;mulyadi.santosa@gmail.com&gt;:
</p>

<pre>
&gt; perhaps as the alternative of "flip", dos2unix could be used too here?
</pre>

<p>
Yes they could, but as I have said before in similar posts, "col" is
perhaps the most portable way, across almost all UNIX variants.
</p>

<p>
-- Thomas Adam
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-2_cent_tip__reading_mht_files_in_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Sat, 14 Feb 2009 11:23:09 -0500</b>
</p>

<p>
On Sat, Feb 14, 2009 at 03:42:27PM +0000, Thomas Adam wrote:
</p>

<pre>
&gt; 2009/2/14 Mulyadi Santosa &lt;mulyadi.santosa@gmail.com&gt;:
&gt; &gt; perhaps as the alternative of "flip", dos2unix could be used too here?
&gt; 
&gt; Yes they could, but as I have said before in similar posts, "col" is
&gt; perhaps the most portable way, across almost all UNIX variants.
</pre>

<p>
I've got to say, I've never been a fan of 'col' - the man page has
always confused the living hell out of me. What is a "half-reverse line
feed", anyway?
</p>

<p>
If you have any favorite recipes you like to use with it, please share.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href='http://LinuxGazette.NET'>http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-2_cent_tip__reading_mht_files_in_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Jimmy O'Regan [joregan at gmail.com]

</p>
</b><br />
<b>Sun, 15 Feb 2009 15:10:55 +0000</b>
</p>

<p>
2009/2/14 Ben Okopnik &lt;ben@linuxgazette.net&gt;:
</p>

<pre>
&gt; On Sat, Feb 14, 2009 at 03:42:27PM +0000, Thomas Adam wrote:
&gt;&gt; 2009/2/14 Mulyadi Santosa &lt;mulyadi.santosa@gmail.com&gt;:
&gt;&gt; &gt; perhaps as the alternative of "flip", dos2unix could be used too here?
&gt;&gt;
&gt;&gt; Yes they could, but as I have said before in similar posts, "col" is
&gt;&gt; perhaps the most portable way, across almost all UNIX variants.
&gt;
&gt; I've got to say, I've never been a fan of 'col' - the man page has
&gt; always confused the living hell out of me. What is a "half-reverse line
&gt; feed", anyway?
&gt;
&gt; If you have any favorite recipes you like to use with it, please share.
</pre>

<p>
I just got this (the culprit shall remain nameless <img src="../gx/smile.png" alt=":)">
</p>

<pre>
 for i in `wc -l * | grep ' * 0 ' | sed 's/ 0 /@/g'  | cut -f2 -d'@'`;
do rm $i; done
</pre>

<p>
(but I think 'find . -size 0 -exec rm {} \;' is much easier to remember)
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-2_cent_tip__reading_mht_files_in_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Sun, 15 Feb 2009 10:52:46 -0500</b>
</p>

<p>
On Sun, Feb 15, 2009 at 03:10:55PM +0000, Jimmy O'Regan wrote:
</p>

<pre>
&gt; 2009/2/14 Ben Okopnik &lt;ben@linuxgazette.net&gt;:
&gt; &gt; On Sat, Feb 14, 2009 at 03:42:27PM +0000, Thomas Adam wrote:
&gt; &gt;&gt; 2009/2/14 Mulyadi Santosa &lt;mulyadi.santosa@gmail.com&gt;:
&gt; &gt;&gt; &gt; perhaps as the alternative of "flip", dos2unix could be used too here?
&gt; &gt;&gt;
&gt; &gt;&gt; Yes they could, but as I have said before in similar posts, "col" is
&gt; &gt;&gt; perhaps the most portable way, across almost all UNIX variants.
&gt; &gt;
&gt; &gt; I've got to say, I've never been a fan of 'col' - the man page has
&gt; &gt; always confused the living hell out of me. What is a "half-reverse line
&gt; &gt; feed", anyway?
&gt; &gt;
&gt; &gt; If you have any favorite recipes you like to use with it, please share.
&gt; 
&gt; I just got this (the culprit shall remain nameless <img src="../gx/smile.png" alt=":)">
&gt; 
&gt;  for i in `wc -l * | grep ' * 0 ' | sed 's/ 0 /@/g'  | cut -f2 -d'@'`;
&gt; do rm $i; done
</pre>

<p>
(Whoops. I meant "If you have any recipes using 'col'" - I guess I
didn't make it clear enough.)
</p>

<p>
Ye ghods, what a convoluted mess. 'find', as you point out, is the tool
that would come to my mind first; it would do recursive removals, which
the other one won't. If you just want to remove all the zero-length
files in the current dir, this is simple enough:
</p>

<pre>
ls -l|awk '$5~/^0$/{system("rm "$8)}'
</pre>

<p>
If you wanted to do it with shell tools, there's always
</p>

<pre>
for n in *; do [ -f $n -a ! -s "$n" ] &amp;&amp; rm "$n"; done
</pre>


<pre>
&gt; (but I think 'find . -size 0 -exec rm {} \;' is much easier to remember)
</pre>

<p>
Yep.
</p>

<p>
I've been doing the LPI certification stuff lately, and one of the
on-line study guides had some horribly convoluted tool kit stuff; a
really ugly "Identify which line will <strong>not</strong> sort a file by the third
word on a line" question. One of the examples went something like this:
</p>

<p>
<pre class='code'>
cut -d ' ' -f 2 file.txt|paste - file.txt|sort|cut -f 2-
</pre>

<p>
I guess this is part of the price I pay for knowing how to use "sort"
properly ("sort -k2", anyone?) - and even if I didn't, I would have just
used Perl or something. When stuff like this shows up... oh, the
suffering. Took me a while to get it.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href='http://LinuxGazette.NET'>http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-2_cent_tip__reading_mht_files_in_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Jimmy O'Regan [joregan at gmail.com]

</p>
</b><br />
<b>Sun, 15 Feb 2009 17:50:38 +0000</b>
</p>

<p>
2009/2/15 Ben Okopnik &lt;ben@linuxgazette.net&gt;:
</p>

<pre>
&gt; On Sun, Feb 15, 2009 at 03:10:55PM +0000, Jimmy O'Regan wrote:
&gt;&gt; 2009/2/14 Ben Okopnik &lt;ben@linuxgazette.net&gt;:
&gt;&gt; &gt; On Sat, Feb 14, 2009 at 03:42:27PM +0000, Thomas Adam wrote:
&gt;&gt; &gt;&gt; 2009/2/14 Mulyadi Santosa &lt;mulyadi.santosa@gmail.com&gt;:
&gt;&gt; &gt;&gt; &gt; perhaps as the alternative of "flip", dos2unix could be used too here?
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Yes they could, but as I have said before in similar posts, "col" is
&gt;&gt; &gt;&gt; perhaps the most portable way, across almost all UNIX variants.
&gt;&gt; &gt;
&gt;&gt; &gt; I've got to say, I've never been a fan of 'col' - the man page has
&gt;&gt; &gt; always confused the living hell out of me. What is a "half-reverse line
&gt;&gt; &gt; feed", anyway?
&gt;&gt; &gt;
&gt;&gt; &gt; If you have any favorite recipes you like to use with it, please share.
&gt;&gt;
&gt;&gt; I just got this (the culprit shall remain nameless <img src="../gx/smile.png" alt=":)">
&gt;&gt;
&gt;&gt;  for i in `wc -l * | grep ' * 0 ' | sed 's/ 0 /@/g'  | cut -f2 -d'@'`;
&gt;&gt; do rm $i; done
&gt;
&gt; (Whoops. I meant "If you have any recipes using 'col'" - I guess I
&gt; didn't make it clear enough.)
&gt;
</pre>

<p>
Misread that; I was just struck by the awfulness of that line -- he
also uses col in similarly evil ways
</p>

<p>
That was to work around the output of a script to grab Bible text for
a parallel corpus; it turned out to be unneccessary:
<a href='ftp://ftp.funet.fi/pub/doc/bible/texts/danish/dkbibel.txt.gz'>ftp://ftp.funet.fi/pub/doc/bible/texts/danish/dkbibel.txt.gz</a>
</p>

<p>
and a little perl to split it by book and chapter:
<pre class='code'>
#!/usr/bin/perl
 
use warnings;
use strict;
 
use open IN =&gt; ':encoding(iso-8859-1)';
use open OUT =&gt; ':encoding(utf8)';
 
my $reading=0;
my $sent;
my $file;
my $part;
my ($a, $b, $htoi);
 
while (&lt;&gt;)
{
	if (/^horn\@proinf.dk$/) {$reading=1; next;}
	next if $reading==0;
	next if (/^$/);
	if(/^\*([\d]+)\/[\W]/)
	{
		if ($sent)
		{
			print OUTF "$sent\n";
			$sent=""; # reset state on changing books
		}
		next;
	}
	if(/^\*([\d]*)\/([0-9]+).*$/)
	{
		$file=sprintf("book%02d.chapter%03d.txt",int($1),int($2));
		open (OUTF, "&gt;$file");
		next;
	}
	if(/^\*([\d]*)\/([a-f])([0-9]+).*$/)
	{
		$htoi=(hex($2)*10)+int($3);
		$file=sprintf("book%02d.chapter%03d.txt",int($1),$htoi);
		open (OUTF, "&gt;$file");
		next;
	}
	if (/[\W]?([\d]+)[\W]?(.*)$/)
	{
		print OUTF "$sent\n" if ($sent); #Last sentence
		$part=$2;
		chomp $part;
		$sent="$1" . $part;
		next;
	}
	if(/^[\W]+(.*)$/)
	{
		$part=$1;
		chomp $part;
		$sent.=" " . $part;
		next;
	}
}
</pre>

<p>
and we don't have to go fighting with someone's website.
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-2_cent_tip__reading_mht_files_in_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Mon, 16 Feb 2009 23:03:46 -0500</b>
</p>

<p>
On Sun, Feb 15, 2009 at 05:50:38PM +0000, Jimmy O'Regan wrote:
</p>

<pre>
&gt; 
&gt; That was to work around the output of a script to grab Bible text for
&gt; a parallel corpus; it turned out to be unneccessary:
&gt; <a href='ftp://ftp.funet.fi/pub/doc/bible/texts/danish/dkbibel.txt.gz'>ftp://ftp.funet.fi/pub/doc/bible/texts/danish/dkbibel.txt.gz</a>
&gt; 
&gt; and a little perl to split it by book and chapter:
</pre>

<p>
[snip]
</p>

<p>
I don't think that does what it's supposed to. I just tried it out, and
'book01.chapter001.txt' ends with a line numbered '30', while
'book01.chapter002.txt' starts with '31' followed by '1'.  Now, I am not
a Bible scholar by any means, but that numbering scheme just doesn't
seem right. <img src="../gx/smile.png" alt=":)">
</p>

<p>
How about this instead:
</p>

<p>
<pre class='code'>
#!/usr/bin/perl
use warnings;
use strict;
use open IN =&gt; ':encoding(iso-8859-1)';
use open OUT =&gt; ':encoding(utf8)';
 
my ($book, $chapter, $fn);
while (&lt;&gt;){
	if (m{^\*(\d\d)[/ ]([0-9a-f]\d)?}){
		close Fn if defined \*Fn;
		$book = $1;
		$chapter = defined $2 ? $2 : 1;
		$chapter =~ s/([a-f])(\d)/100 + (ord($1) - 97) * 10 + $2/e;
		$fn = sprintf "book%02d.chapter%03d.txt", $book, $chapter;
		open Fn, "&gt;$fn" or die "$fn: $!\n";
		next;
	}
	next unless defined $fn;
	print Fn;
}
close Fn;
</pre>

<p>
You might want to verify with a bit of spot-testing - that's a very
strange numbering scheme they used - but I think I've got it right.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href='http://LinuxGazette.NET'>http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-2_cent_tip__reading_mht_files_in_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Lew Pitcher [lew.pitcher at digitalfreehold.ca]

</p>
</b><br />
<b>Tue, 17 Feb 2009 12:39:29 -0500</b>
</p>

<p>
Well, I've just received four copies (one after another) of this email.
All four have
<pre>
  Date: Mon, 16 Feb 2009 23:03:46 -0500
</pre>
as their datestamp.
</p>

<p>
It looks like either
<pre>
a) Ben is trying to be /very/ emphatic about his perl script ( ;-) ), or
b) the LJ email server has hiccuped
</pre>

<p>
So, can we expect more copies?  &lt;grin&gt;
</p>

<pre>-- 
Lew Pitcher
 
Master Codewright &amp; JOAT-in-training | Registered Linux User #112576
<a href='http://pitcher.digitalfreehold.ca/'>http://pitcher.digitalfreehold.ca/</a>   | GPG public key available by request
----------      Slackware - Because I know what I'm doing.          ------
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-2_cent_tip__reading_mht_files_in_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]

</p>
</b><br />
<b>Tue, 17 Feb 2009 09:58:06 -0800</b>
</p>

<p>
Quoting Lew Pitcher (lew.pitcher@digitalfreehold.ca):
</p>


<pre>
&gt; It looks like either
&gt; a) Ben is trying to be /very/ emphatic about his perl script ( ;-) ), or
&gt; b) the LJ email server has hiccuped
</pre>

<p>
Temporary mail glitch.  I know how to break the cycle, and have done so.
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-2_cent_tip__reading_mht_files_in_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Jimmy O'Regan [joregan at gmail.com]

</p>
</b><br />
<b>Tue, 17 Feb 2009 18:40:40 +0000</b>
</p>

<p>
2009/2/17 Ben Okopnik &lt;ben@linuxgazette.net&gt;:
</p>

<pre>
&gt; On Sun, Feb 15, 2009 at 05:50:38PM +0000, Jimmy O'Regan wrote:
&gt;&gt;
&gt;&gt; That was to work around the output of a script to grab Bible text for
&gt;&gt; a parallel corpus; it turned out to be unneccessary:
&gt;&gt; <a href='ftp://ftp.funet.fi/pub/doc/bible/texts/danish/dkbibel.txt.gz'>ftp://ftp.funet.fi/pub/doc/bible/texts/danish/dkbibel.txt.gz</a>
&gt;&gt;
&gt;&gt; and a little perl to split it by book and chapter:
&gt;
&gt; [snip]
&gt;
&gt; I don't think that does what it's supposed to. I just tried it out, and
&gt; 'book01.chapter001.txt' ends with a line numbered '30', while
&gt; 'book01.chapter002.txt' starts with '31' followed by '1'.  Now, I am not
&gt; a Bible scholar by any means, but that numbering scheme just doesn't
&gt; seem right. <img src="../gx/smile.png" alt=":)">
&gt;
&gt; How about this instead:
&gt;
&gt; ```
&gt; #!/usr/bin/perl
&gt; use warnings;
&gt; use strict;
&gt; use open IN =&gt; ':encoding(iso-8859-1)';
&gt; use open OUT =&gt; ':encoding(utf8)';
&gt;
&gt; my ($book, $chapter, $fn);
&gt; while (&lt;&gt;){
&gt;        if (m{^\*(\d\d)[/ ]([0-9a-f]\d)?}){
&gt;                close Fn if defined \*Fn;
&gt;                $book = $1;
&gt;                $chapter = defined $2 ? $2 : 1;
&gt;                $chapter =~ s/([a-f])(\d)/100 + (ord($1) - 97) * 10 + $2/e;
&gt;                $fn = sprintf "book%02d.chapter%03d.txt", $book, $chapter;
&gt;                open Fn, "&gt;$fn" or die "$fn: $!\n";
&gt;                next;
&gt;        }
&gt;        next unless defined $fn;
&gt;        print Fn;
&gt; }
&gt; close Fn;
&gt; '''
&gt;
&gt; You might want to verify with a bit of spot-testing - that's a very
&gt; strange numbering scheme they used - but I think I've got it right.
</pre>

<p>
Weeell... as it happens, the source text has quite a number of other
glitches: the book of Daniel starts in the middle of chapter 1, verse
2, for example. The combination of both the errors in my script, and
the freeness of some bible translations has lead to a new research
topic for the guy I wrote it for: he's now studying ways to measure
when to drop candidate sentences from a bilingual corpus: 'The Spirit
of God moved over *the face of* the waters', is an example -- extra
junk thrown in to turn a better phrase is not productive in any kind
of machine translation, and yet there's been surprisingly little work
done in automating the process of removing it.
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-2_cent_tip__reading_mht_files_in_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas.adam22 at gmail.com]

</p>
</b><br />
<b>Tue, 17 Feb 2009 18:46:17 +0000</b>
</p>

<p>
2009/2/17 Ben Okopnik &lt;ben@linuxgazette.net&gt;:
</p>

<pre>
&gt; How about this instead:
</pre>

<p>
Works better here.
</p>


<pre>
&gt;                $chapter = defined $2 ? $2 : 1;
</pre>

<p>
I'm fortunate to not be affected by portability in perl, but I do much
prefer that check above to perl's 5.10's "//" operator.  I can't not
parse that as some weird regexp operator.  ;)
</p>

<p>
-- Thomas Adam
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-2_cent_tip__reading_mht_files_in_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Sat, 14 Feb 2009 11:17:52 -0500</b>
</p>

<p>
On Sat, Feb 14, 2009 at 10:02:20PM +0700, Mulyadi Santosa wrote:
</p>

<pre>
&gt; On Sat, Feb 14, 2009 at 8:08 AM, Ben Okopnik &lt;ben@linuxgazette.net&gt; wrote:
&gt; &gt; Just ran across Yet Another Proprietary Format from Micr0s0ft: .mht
&gt; &gt; files. Seems that Internet Explorer saves emails and HTML as an ugly
&gt; &gt; mess that somewhat resembles an email; according to Wikipedia, there's
&gt; &gt; no single standard, and the state of the state is best described as
&gt; &gt; 'sauve qui peut' (which translates, at least in Redmond, as "all your
&gt; &gt; ass are belong to me!") Bleh.
&gt; &gt;
&gt; &gt; Searching the Web shows that there are a lot of people - the
&gt; &gt; just-converted-to-Linux newbies, particularly - who have loads of these
&gt; &gt; things and don't know what to do with them. Some people recommend Opera
&gt; &gt; (I <strong>suppose</strong> a couple of hours of Kiri Te Kanawa is good for relieving
&gt; &gt; all kind of stress...); some have had luck with various conversion
&gt; &gt; utilities. I looked at it, and it looked something like a mangled email
&gt; &gt; header, soooo...
&gt; &gt;
&gt; &gt; I didn't go searching for more than just the one file that I had, but
&gt; &gt; here's what worked fine for opening it:
&gt; &gt;
&gt; &gt; ```
&gt; &gt; # Convert line-ends to Unix format
&gt; &gt; flip -ub file.mht
&gt; &gt; # Prepend a standard 'From ' mail header to the file
&gt; &gt; sed -i '1i\'"$(echo From $USER $(date))" file.mht
&gt; &gt; # You should now be able to open it with your favorite MUA
&gt; &gt; mutt -f file.mht
&gt; &gt; '''
&gt; &gt;
&gt; &gt; It worked fine for me.
&gt; 
&gt; perhaps as the alternative of "flip", dos2unix could be used too here?
</pre>

<p>
Sure; so could "sed -i 's/\r//' file" and "tr -d '\015' &lt; file", etc.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href='http://LinuxGazette.NET'>http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-2_cent_tip__reading_mht_files_in_linux">Back</a><hr width="50%" align="left" /><p><br /></p></div>
</body>
</html>
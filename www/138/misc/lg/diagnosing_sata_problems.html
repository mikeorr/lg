<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>Diagnosing SATA problems</title>
<link rel="stylesheet" type="text/css" href="../../../lg.css" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body>
<a href="../../../"><img alt="Linux Gazette" src="../../../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" /></a><img alt="Tux" src="../../../gx/tux_86x95_indexed.png" id="tux" /><p id="fun">...making Linux just a little more fun!</p><div class='content articlecontent'><a name="top"></a><h3>Diagnosing SATA problems</h3>
<p>
<b><p>
Neil Youngman [ny at youngman.org.uk]
</p>
</b><br />
<b>Sun, 1 Apr 2007 19:10:45 +0100</b>
</p>

<p>
On or around Tuesday 23 January 2007 16:46, Benjamin A. Okopnik reorganised a 
bunch of electrons to form the message:
</p>

<pre>
&gt; On Mon, Jan 22, 2007 at 09:23:58PM +0000, Neil Youngman wrote:
&gt; &gt;
&gt; &gt; The lack of any errors suggests to me that the problem is not with the
&gt; &gt; disk; hence the thought that I should replace the controller. Is this a
&gt; &gt; reasonable conclusion from the data available?
&gt; &gt;
&gt; &gt; I have tried reseating the controller card and cables and moved the SATA
&gt; &gt; cable to the secondary port on the SATA controller.
&gt; &gt;
&gt; &gt; Is there anything else I should be trying?
&gt;
&gt; Coming at it from the hardware end, I'd say that you have the right
&gt; idea: throwing in a different controller would be a pretty good test.
&gt; Shotgunning <em>does</em> make sense as a troubleshooting technique, when the
&gt; possible number of affected parts is low.
</pre>

<p>
I've finally got round to putting in a new SATA controller, and it seems to 
have helped; it may even have solved the problem. Previously, trying to copy 
large amounts of data to the SATA disk would bring the system to a complete 
halt. The last time I tried to copy a 1.5GB file to the SATA disk, it died 
after 60MB. Now, I can copy the same file without any obvious problems. 
</p>

<p>
There are still SATA errors on boot, which are a cause for concern, so I'll 
want to run for a while with that disk as my main disk before I'm totally 
confident.
</p>

<p>
The errors on boot look like 
</p>

<pre>
ata2.00: exception Emask 0x0 SAct 0x0 SErr 0x0 action 0x2 frozen
ata2.00: tag 0 cmd 0xb0 Emask 0x2 stat 0x50 err 0x0 (HSM violation)
ata2: soft resetting port
ata2: SATA link up 1.5 Gbps (SStatus 113 SControl 310)
ata2.00: configured for UDMA/133
ata2: EH complete
</pre>
and that repeats a dozen times. It doesn't mean much to me, so I guess I'll 
need to spend some time with Google.
</p>

<p>
Neil
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-diagnosing_sata_problems">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
René Pfeiffer [lynx at luchs.at]
</p>
</b><br />
<b>Sun, 1 Apr 2007 21:11:10 +0200</b>
</p>

<p>
On Apr 01, 2007 at 1910 +0100, Neil Youngman appeared and said:
</p>

<pre>
&gt; On or around Tuesday 23 January 2007 16:46, Benjamin A. Okopnik reorganised a
&gt; bunch of electrons to form the message:
&gt; &gt; [...]
&gt; &gt; Coming at it from the hardware end, I'd say that you have the right
&gt; &gt; idea: throwing in a different controller would be a pretty good test.
&gt; &gt; Shotgunning <em>does</em> make sense as a troubleshooting technique, when the
&gt; &gt; possible number of affected parts is low.
&gt;
&gt; I've finally got round to putting in a new SATA controller, and it seems to
&gt; have helped; it may even have solved the problem. Previously, trying to copy
&gt; large amounts of data to the SATA disk would bring the system to a complete
&gt; halt. The last time I tried to copy a 1.5GB file to the SATA disk, it died
&gt; after 60MB. Now, I can copy the same file without any obvious problems.
&gt;
&gt; There are still SATA errors on boot, which are a cause for concern, so I'll
&gt; want to run for a while with that disk as my main disk before I'm totally
&gt; confident. [...]
</pre>

<p>
Do you happen to have a Western Digital disk in your computer? A couple
of days ago, I stumbled upon the description of a server outage and its
story. They reference to a bug in the firmware of Western Digital
drives:
</p>

<p>
<a href="http://www.voip-info.org/wiki/view/The+Great+Ides+of+March+VOIP-Info+Outage">http://www.voip-info.org/wiki/view/The+Great+Ides+of+March+VOIP-Info+Outage</a>
</p>

<p>
<p class="editorial">
[[[  I've changed René's original URL for this (from the Western
Digital site) to a tinyurl, for convenience. -- Kat  ]]]
</p>

<a href="http://preview.tinyurl.com/yrusj3">http://preview.tinyurl.com/yrusj3</a>
</p>

<p>
Best wishes,
René.
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-diagnosing_sata_problems">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Neil Youngman [ny at youngman.org.uk]
</p>
</b><br />
<b>Sun, 1 Apr 2007 20:38:24 +0100</b>
</p>

<p>
On or around Sunday 01 April 2007 20:11, René Pfeiffer reorganised a bunch of 
electrons to form the message:
</p>

<pre>
&gt; On Apr 01, 2007 at 1910 +0100, Neil Youngman appeared and said:
&gt; &gt; There are still SATA errors on boot, which are a cause for concern, so
&gt; &gt; I'll want to run for a while with that disk as my main disk before I'm
&gt; &gt; totally confident. [...]
&gt;
&gt; Do you happen to have a Western Digital disk in your computer? A couple
&gt; of days ago, I stumbled upon the description of a server outage and its
&gt; story. They reference to a bug in the firmware of Western Digital
&gt; drives:
</pre>

<p>
Interesting. Yes it is a Western Digital disk.
<pre>
  Vendor: ATA       Model: WDC WD2000JD-22H  Rev: 08.0
  Type:   Direct-Access                      ANSI SCSI revision: 05
</pre>
That firmware bug appears to apply to WD1600YS, WD2500YS, WD4000YS, and 
WD5000YS and it isn't one of those, but I need to have a look around and see 
if there's a firmware update for this drive.
</p>

<p>
Thanks
</p>

<p>
Neil
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-diagnosing_sata_problems">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Martin J Hooper [martinjh at blueyonder.co.uk]
</p>
</b><br />
<b>Sun, 01 Apr 2007 20:52:52 +0100</b>
</p>

<p>
Neil Youngman wrote:
</p>

<pre>
&gt; That firmware bug appears to apply to WD1600YS, WD2500YS,
&gt; WD4000YS, and WD5000YS and it isn't one of those, but I need
&gt; to have a look around and see if there's a firmware update for
&gt; this drive.
</pre>

<p>
Didn't know you could flash HD firmware...  I know you can flash
BIOS and DVD drives. I guess it's the same way of doing it, yes?
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-diagnosing_sata_problems">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
René Pfeiffer [lynx at luchs.at]
</p>
</b><br />
<b>Sun, 1 Apr 2007 23:14:47 +0200</b>
</p>

<p>
On Apr 01, 2007 at 2052 +0100, Martin J Hooper appeared and said:
</p>

<pre>
&gt; Neil Youngman wrote:
&gt; &gt; That firmware bug appears to apply to WD1600YS, WD2500YS,
&gt; &gt; WD4000YS, and WD5000YS and it isn't one of those, but I need
&gt; &gt; to have a look around and see if there's a firmware update for
&gt; &gt; this drive.
&gt;
&gt; Didn't know you could flash HD firmware...  I know you can flash
&gt; BIOS and DVD drives. I guess it's the same way of doing it, yes?
</pre>

<p>
A lot of things come with firmware these days. For me, this trend is a
bit disturbing, since most firmware is proprietary and rather
inaccessible for inspection or bug fixing. I've seen firmware images for
routers, VoIP phones, cell phones, DVD-/CD burners, DVD-/CD-ROMs, DVD
players, satellite equipment, modems, all kinds of I/O controllers, the
various BIOS images of mainboards, and now we have HDs.
</p>

<p>
Usually, the vendor of the hardware offers a binary that can be used to
update the firmware. This binary is often tailored for a DOS variant or
MS Windows. In case of networked equipment, you can sometimes use DHCP
and TFTP or a similar construct.
</p>

<p>
Best,
René.
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-diagnosing_sata_problems">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Neil Youngman [ny at youngman.org.uk]
</p>
</b><br />
<b>Mon, 2 Apr 2007 21:23:52 +0100</b>
</p>

<p>
On or around Sunday 01 April 2007 22:14, René Pfeiffer reorganised a bunch of 
electrons to form the message:
</p>

<pre>
&gt;
&gt; A lot of things come with firmware these days. For me, this trend is a
&gt; bit disturbing, since most firmware is proprietary and rather
&gt; inaccessible for inspection or bug fixing. I've seen firmware images for
&gt; routers, VoIP phones, cell phones, DVD-/CD burners, DVD-/CD-ROMs, DVD
&gt; players, satellite equipment, modems, all kinds of I/O controllers, the
&gt; various BIOS images of mainboards, and now we have HDs.
</pre>

<p>
I find the fact that most things come with firmware neither surprising,
nor worrying in itself. I believe the alternative to firmware in peripheral 
devices of all kinds is hard coded logic, which turns a bug into a permanent 
feature. 
</p>

<p>
While I concur with your preference for free software, the use of firmware at 
least allows for updates. While the firmware may not be free, there is at 
least the possibility of replacing it with free software.
</p>

<p>
Neil
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-diagnosing_sata_problems">Back</a><hr width="50%" align="left" /><p><br /></p></div>
</body>
</html>

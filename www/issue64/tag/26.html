<!--startcut ======================================================= -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<META NAME="generator" CONTENT="lgazmail v1.3E.q">
<TITLE>The Answer Gang 64: qmail pain</TITLE>
</HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"
	LINK="#3366FF" VLINK="#A000A0">
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<P> <hr> 
<CENTER>
<!-- *** BEGIN navbar *** -->
<!-- *** END navbar *** -->
</CENTER>
</p>
<P> <hr> <P>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<center>
<H1><A NAME="answer">
	<img src="../../gx/dennis/qbubble.gif" alt="(?)" 
		border="0" align="middle">
	<font color="#B03060">The Answer Gang</font>
	<img src="../../gx/dennis/bbubble.gif" alt="(!)" 
		border="0" align="middle">
</A></H1> 
<BR>
<H4>By Jim Dennis, Ben Okopnik, Dan Wilder, 
	the Editors of Linux Gazette... 
	and You!
<br>Send questions (or interesting answers) to
	<a href="mailto:tag@lists.linuxgazette.net">tag@lists.linuxgazette.net</a>
</H4>
</center>

<p><hr><p>
<!--  endcut ======================================================= -->
<!-- begin 26 -->
<H3 align="left"><img src="../../gx/dennis/qbubble.gif" 
	height="50" width="60" alt="(?) " border="0"
	>qmail pain</H3>


<p><strong>From Mic Nowland  
</strong></p> 
<p align="right"><strong>Answered By Dan Wilder 
<br></strong></p>

<!-- sig -->

<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
G'day there,
</STRONG></P>
<P><STRONG>
I have a couple of machines named Lin and winy on my local network myplace.net.au connected to my RH6.1 NAT/Firewall, samba server, squid cache with caching DNS and using a part-time dialup connectin to my ISP myisp.com.au
</STRONG></P>
<P><STRONG>
Local2remote works fine, Qmail will rewrite the domain in From: field by setting QMAILHOST=myisp.com.au and QMAILINJECT=f in my enviroment no probs.
</STRONG></P>
<P><STRONG>
Emails from <em
	>Lin@myplace.net.au</em> addressed to <em
	>winy@myplce.net.au</em>  get sent,noprobs there either.
However, I cannot get qmail to rewrite the From: field to <em
	>Lin@myisp.com.au</em> when I send email from either Lin or winy to say <em
	>billsux@microsloth.com</em> it remains Lin or winy @myplace.net.au, which is wrong.
</STRONG></P>
<P><STRONG>
Do I need to use mess822 (gulp) or what ?   Please help, I am at my wits end.
Michael
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Dan]
There's probably a way to do it using Qmail, but sad to say, I haven't
a clue, as my relationship with Qmail lasted only about two weeks.
</BLOCKQUOTE>
<BLOCKQUOTE>
You might consider asking your MUA (Mail User Agent, your email client)
to use correct "From:" headers in the first place.  Most MUAs now
are able to adapt to working on private networks, where email headers
should <EM>always</EM> reflect reachable addresses, not private ones.
</BLOCKQUOTE>
<BLOCKQUOTE>
Another possibility would be switching over to Postfix.  In my
admittedly limited experience, Postfix is <EM>much</EM> easier to configure
than Qmail, and it will certainly do any reasonable header rewrite
you might need.
</BLOCKQUOTE>
<BLOCKQUOTE>
Postfix will do the particular rewrite in question if you add
the following line to <TT>/etc/postfix/main.cf:</TT>
</BLOCKQUOTE>
<BLOCKQUOTE><BLOCKQUOTE><code>
masquerade_domains = $mydomain
</code></BLOCKQUOTE></BLOCKQUOTE>
<BLOCKQUOTE>
The line is taken from <TT>/etc/postfix/sample-rewrite.cf</TT>, installed
by "make install".
</BLOCKQUOTE>
<BLOCKQUOTE>
This simplicity is typical of Postfix configuration.
</BLOCKQUOTE>
<BLOCKQUOTE>
P.S. Postfix does Maildir delivery quite nicely, if you ask it to.
</BLOCKQUOTE>

<!-- sig -->


<!-- end 26 -->
<!--startcut ======================================================= -->
<P> <hr> </p>
<!-- *** BEGIN copyright *** -->
<H5 align="center">This page edited and maintained by the Editors
        of <I>Linux Gazette</I>
<a href="http://www.linuxgazette.net/copying.html"
        >Copyright &copy;</a> 2001
<BR>Published in issue 64 of <I>Linux Gazette</I> March 2001</H5>
<H6 ALIGN="center">HTML script maintained by
        <A HREF="mailto:star@starshine.org">Heather Stern</a> of
        Starshine Technical Services,
        <A HREF="http://www.starshine.org/">http://www.starshine.org/</A>
</H6>
<!-- *** END copyright *** -->
<P> <hr> 
<!-- begin tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::-->
<p align="center">
<table width="100%" border="0"><tr>
<td align="right" valign="center" rowspan="3"
	><IMG ALT="" SRC="../../gx/navbar/left.jpg"
        WIDTH="14" HEIGHT="45" BORDER="0" ALIGN="middle" border="0">
<A HREF="../lg_answer64.html"
	><IMG SRC="../../gx/dennis/answertoc.jpg" align="middle"
              ALT="[ Answer Guy Current Index ]" border="0"></A></td>
<td align="center" valign="center"><A HREF="../lg_answer64.html#greeting"><img align="middle"
	src="../../gx/dennis/smily.gif" alt="greetings" border="0"></A> &nbsp;
  <A HREF="1.html">1</A> &nbsp;
  <A HREF="2.html">2</A> &nbsp;
  <A HREF="3.html">3</A> &nbsp;
  <A HREF="4.html">4</A> &nbsp;
  <A HREF="6.html">6</A> &nbsp;
  <A HREF="7.html">7</A> &nbsp;
  <A HREF="9.html">9</A></td>
<td align="left" valign="center" rowspan="3"><A HREF="../../tag/kb.html"
	><IMG SRC="../../gx/dennis/answerpast.jpg" align="middle"
              ALT="[ Index of Past Answers ]" border="0"></A>
<IMG ALT="" SRC="../../gx/navbar/right.jpg" align="middle"
        WIDTH="14" HEIGHT="45" BORDER="0"></td></tr>
<tr>
<td align="center" valign="center"><A HREF="11.html">11</A> &nbsp;
  <A HREF="12.html">12</A> &nbsp;
  <A HREF="15.html">15</A> &nbsp;
  <A HREF="16.html">16</A> &nbsp;
  <A HREF="18.html">18</A></td>
</tr><tr>
<td align="center" valign="center"><A HREF="20.html">20</A> &nbsp;
  <A HREF="22.html">22</A> &nbsp;
  <A HREF="24.html">24</A> &nbsp;
  <A HREF="25.html">25</A> &nbsp;
  <A HREF="26.html">26</A> &nbsp;
  <A HREF="28.html">28</A> &nbsp;
  <A HREF="29.html">29</A></td>
</tr></table>
</p>
<!-- end tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::::-->
<P> <hr> 
<CENTER>
<!-- *** BEGIN navbar *** -->
<!-- *** END navbar *** -->
</CENTER>
</p>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
</BODY></HTML>
<!--endcut ========================================================= -->

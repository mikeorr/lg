<!--startcut ======================================================= -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html><head>
<META NAME="generator" CONTENT="lgazmail v1.1pre9c">
<TITLE>The Answer Guy 31: 
Bad Cluster 
</TITLE> 
<!-- ORIGINAL SUBJECT:
Bad Cluster 
JTD SUBTITLE:

-->
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#A000A0"
ALINK="#FF0000">
<H4>"Linux Gazette...<I>making Linux just a little more fun!</I>"
</H4>
<P> <hr> <P>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<H1 align="center"><A NAME="answer">
	<img src="../gx/dennis/qbubble.gif" alt="" border="0" align="middle">
	<a href="./index.html">The Answer Guy</a>
	<img src="../gx/dennis/bbubble.gif" alt="" border="0" align="middle">
</A></H1> 
<BR>
<H4 align="center">By James T. Dennis,
	<a href="mailto:tag@lists.linuxgazette.net">tag@lists.linuxgazette.net</a>
	<BR>Starshine Technical Services, <A HREF="http://www.starshine.org/">http://www.starshine.org/</A> 
</H4>
<p><hr><p>
<!--endcut ========================================================= -->
<H3><img src="../gx/dennis/qbub.gif" alt="(?)"width="50" height="28"
	align="left" border="0">Bad Cluster </H3>
<p><strong>From Ron Bautista on 13 Jul 1998 
 in the</strong> 
	<a href="news:comp.unix.questions">comp.unix.questions</a>
	<strong>newsgroup</strong></p>

<!-- begin body -->

<p><strong>Hi..
</strong></p>

<p><strong>I have a 
<a href="http://www.toshiba.com/">toshiba</a> laptop...1.2gig. has like 10 
bad cluster.  Do I have to say goodbye to this one, and buy a new one If 
not--- what software or downloadable app can I get to get it fix.... I would
very much appreciate your help.
</strong></p>


<p><strong>
Thank you,
Ron Bautista
</strong></p>


<BLOCKQUOTE><IMG SRC="../gx/dennis/bbub.gif" ALT="(!)" width="50" height="28" border="0" lign="bottom"
>I thought I answered this awhile ago. But I don't find it
in my archives and I do find it in my inbox.  So,
</blockquote>


<BLOCKQUOTE>
You usually can't "fix" bad clusters --- though you can
instruct your OS to "map them out" (refuse to use them).
There used to be a software package for MS-DOS called
Spinrite (Gibson Software?) which would do surface analysis
of many types of drives and might be able to restore 
bad clusters to use (although it was never recommended). 
</blockquote>


<BLOCKQUOTE>
There used to also be procedures for many ST-506 (MFM and RLL)
hard drives and some SCSI drives which would allow the 
user to do a "low level format" of the drive.  However with
modern IDE and SCSI drives this option is generally unavailable
--- some drives will let you sent the low-level format command
to them, and their electronics will blithely ignore your command
and send a "success" signal back (I've even heard that some will
use a suitable delay factor).
</blockquote>


<BLOCKQUOTE>
The point is that modern drives are much more sophisticated than
the old ST-506 drives.  Their electronics usually already 
manage a number of extra blocks per track (cylinder) and 
automatically map the extra blocks into use.  Thus you usually
don't see any bad blocks on a modern drive until you have enough
errors on some of the tracks that the are no extras for them.
</blockquote>


<BLOCKQUOTE>
Thus, when you see "10" back blocks on a drive, it might be that
there are many more that have been automatically mapped out by
the drives electronics (and are thus not visible to the OS, even
at the device driver layer).
</blockquote>


<BLOCKQUOTE>
For using such a drive with Linux you simply use the 
-c option to '<tt>mke2fs</tt>' when you make (format) new filesystems.
This will call the '<tt>badblocks</tt>' program and make the 
appropriate adjustments to the filesystems tables.  I think
these adjustments amount to permanently marking those blocks
as unavailable by adding them to a special 'inode' that's
maintained by the fs --- they'll never appear in the free list.
</blockquote>


<BLOCKQUOTE>
To add more/new bad blocks you can use the <tt>-c</tt> option to 
<tt>e2fsck</tt>.  You can also run '<tt>badblocks</tt>' by hand, save it's
output/report to a file, and use that as input to e2fsk's
<tt>-l</tt> switch.
</blockquote>


<BLOCKQUOTE>
That's about all there is to say about bad blocks under Linux.
</blockquote>

<blockquote>Obviously you want to maintain good backup procedures
--- and knowing that you have bad blocks on this drive
may encourage you to be extra careful about your data
on that system.
</blockquote>
<!-- end body -->

<!--================================================================-->
<P> <hr> <P>
<H5 align="center"><a href="http://www.linuxgazette.net/copying.html"
	>Copyright &copy;</a> 1998, James T. Dennis <BR>
Published in <I>Linux Gazette</I> Issue 31 August 1998</H5>
<P> <hr> <P>
<!--================================================================-->
<table width="98%"><tr valign="center" align="center">
<td rowspan="3"><A HREF="../lg_answer31.html"><IMG
        SRC="../gx/dennis/answernew.gif"
        ALT="[ Answer Guy Index ]"></A></td>
  <td><A HREF="tag_backup.html">backup</A></td>
  <td><A HREF="tag_uidgid.html">uidgid</A></td>
  <td><A HREF="tag_connect.html">connect</A></td>
  <td><A HREF="tag_95slow.html">95slow</A></td>
  <td><A HREF="tag_badblock.html">badblock</A></td>
  <td><A HREF="tag_trident.html">trident</A></td>
  <td><A HREF="tag_sound.html">sound</A></td>

</tr><tr valign="center" align="center">
  <td><A HREF="tag_kernel.html">kernel</A></td>
  <td><A HREF="tag_solprint.html">solprint</A></td>
  <td><A HREF="tag_idescsi.html">idescsi</A></td>
  <td><A HREF="tag_distrib.html">distrib</A></td>
  <td><A HREF="tag_modem.html">modem</A></td>
  <td><A HREF="tag_NDS.html">NDS</a></td>
  <td><A HREF="tag_rpm.html">rpm</A></td>

</tr><tr valign="center" align="center">
  <td><A HREF="tag_guy.html">guy</A></td>
  <td><A HREF="tag_maildns.html">maildns</A></td>
  <td><A HREF="tag_memleak.html">memleak</a></td>
  <td><A HREF="tag_multihead.html">multihead</A></td>
  <td><A HREF="tag_cdr.html">cdr</A></td>
</tr></table>
<P> <hr> <P>
<!--================================================================-->
<A HREF="./index.html"><IMG SRC="../gx/indexnew.gif"
        ALT="[ Table Of Contents ]"></A>
<A HREF="../index.html"><IMG SRC="../gx/homenew.gif"
        ALT="[ Front Page ]"></A>
<A HREF="lg_bytes31.html"><IMG SRC="../gx/back2.gif"
        ALT="[ Previous Section ]"></A>
<A HREF="./searls.html"><IMG SRC="../gx/fwd.gif"
        ALT="[ Next Section ]"></A>
<!--startcut =======================================================  -->
</body>
</html>
<!--endcut =========================================================  -->



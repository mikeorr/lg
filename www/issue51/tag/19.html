<!--startcut ======================================================= -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<META NAME="generator" CONTENT="lgazmail v1.3C.e">
<TITLE>The Answer Guy 51: Weird Mount Permissions &amp; Where's a Word Processor</TITLE>
</HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"
	LINK="#3366FF" VLINK="#A000A0">
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<H4>"The Linux Gazette...<I>making Linux just a little more fun!</I>"</H4>
<P> <hr> <P>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<center>
<H1><A NAME="answer">
	<img src="../../gx/dennis/qbubble.gif" alt="(?)" 
		border="0" align="middle">
	<font color="#B03060">The Answer Guy</font>
	<img src="../../gx/dennis/bbubble.gif" alt="(!)" 
		border="0" align="middle">
</A></H1> 
<BR>
<H4>By James T. Dennis,
	<a href="mailto:tag@lists.linuxgazette.net">tag@lists.linuxgazette.net</a><BR>
	LinuxCare,
	<A HREF="http://www.linuxcare.com/">http://www.linuxcare.com/</A> 
</H4>
</center>

<p><hr><p>
<!--  endcut ======================================================= -->
<!-- begin 19 -->
<H3 align="left"><img src="../../gx/dennis/qbubble.gif" 
	height="50" width="60" alt="(?) " border="0"
	>Weird Mount Permissions &amp; Where's a Word Processor</H3>


<p><strong>From Ilan Tal  on Sun, 23 Jan 2000  
</strong></p>
<!-- ::
Weird Mount Permissions &amp; Where's a Word Processor
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
:: -->
<P><STRONG>
Hi Jim,
</STRONG></P>
<P><STRONG>
This morning your answer on getting started with Samba was the
best thing I've seen to date on Linux. It answered the questions I
didn't know how to ask. I still haven't implemented it, but at
least now I know which direction to go.
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Glad it helped.  I have no idea which comment on
Samba you're referring to --- after three years and
over a thousand questions answered on this column
they tend to all be a blur.
</BLOCKQUOTE>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
I have another couple questions which you might be able to
answer. I have a multiple boot machine with win95, win98, win2k
and Linux 6.1. Naturally I want Linux to talk to EVERYTHING,
including across the LAN (the Samba part).
</STRONG></P>
<P><STRONG>
I have hooked up win95 (fat16) and win98 (fat32), but each time when I boot
up and look in the <TT>/mnt</TT> folder I see both icons with a red band around them
(meaning that I can't open the folder).
</STRONG></P>
<P><STRONG>
I go into the terminal, open up a super user and do: <tt>ls -ld win98</tt>. The
result I get back is <tt>d----w-w-</tt>. That explains why I can't open them. 
Then I
do a umount win98 and immediately mount it back again. Now <tt>ls -ld win98</tt>
gives me <tt>drwxrwxr-x</tt>, and I can open the folders. Under linuxconf I have
myself as the owner.
</STRONG></P>
<P><STRONG>
The problem is if I reboot, it again goes into the mode where I can't open
the folder. My question is: what do I have to do to convince it to boot up
with drwxrwxr-x and NOT <tt>d---w-w-</tt>?
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Well that is odd.  The initial (boot time) mount fails in
a way that marks the permissions absurdly and a remount
succeeds and shows sane permissions.
</BLOCKQUOTE>
<BLOCKQUOTE>
The diagnostics you're giving are pretty sparse.  The
most useful information in this case would be:
</BLOCKQUOTE>

<blockquote><ul><li>Relevant excerpt from your <tt>/etc/fstab</tt>
<li>Output of the '<tt>mount</tt>' and '<tt>df</tt>' commands
		   before and after the failure.
<li>Output of the '<tt>lsmod</tt>'command before and
		   afer the failure.
</ul></blockquote>
<BLOCKQUOTE>
I suspect that the problem is related to your
loadable kernel modules and your kmod (kernel module
autoloading subsystem).  It could be that there is
something subtly wrong with your start up sequence
so that the <tt>vfat.o</tt>, <tt>msdos.o</tt>, and related modules are
not properly loading.
</BLOCKQUOTE>
<BLOCKQUOTE>
Tracking down the problem could be interesting.  Basically
you'd read through the <TT>/etc/rc.d/*</TT> scripts to find out
where kmod is activated (<TT>/etc/rc.d/rc.sysinit?</TT>) and
where your filesystems are mounted (<tt>find /etc/rc.d | xargs
grep "mount.*-a"</tt>).
</BLOCKQUOTE>
<BLOCKQUOTE>
This is made somewhat more entertaining by the amount of
cruft that's accumulated in the 
<A HREF="http://www.redhat.com/">Red Hat</A> rc scripts.  Some of
the other distributions have somewhat cleaner, more elegant
rc scripts and some of them have it even worse.  When I
teach classes in Linux administration, I spend about a half
day on <TT>/etc/inittab</TT> and the <tt>rc*</tt> scripts.
</BLOCKQUOTE>
<BLOCKQUOTE>
Read those after digesting _Learning_the_bash_Shell_ (*) by
Cameron Newham and Bill Rosenblatt (O'Reilly and Associates)
and you'll be well prepared to troubleshoot most Linux
configuration problems.
</BLOCKQUOTE>
<BLOCKQUOTE><UL><LI>
(<A HREF="http://www.oreilly.com/catalog/bash2"
	>http://www.oreilly.com/catalog/bash2</A>)
</UL></BLOCKQUOTE>
<BLOCKQUOTE>
A workaround might be easier than a real fix.  One work
around would be to simply add the commands:
</BLOCKQUOTE>

<blockquote><pre>		umount /mnt/win98 ; mount /mnt/win98
		umount /mnt/win95 ; mount /mnt/win95
</pre></blockquote>
<BLOCKQUOTE>
... to your <TT>/etc/rc.d/rc.local</TT> script.  If that
doesn't work try using something like:
</BLOCKQUOTE>

<blockquote><pre>		( sleep 120
		umount /mnt/win98 ; mount /mnt/win98
		umount /mnt/win95 ; mount /mnt/win95
		) &amp;
</pre></blockquote>
<BLOCKQUOTE>
This encapsulates the previous commands into a
subshell (the parentheses), inserts a two minute
delay at the beginning of that subshell, and runs
the subshell in the background (the ampersand).
</BLOCKQUOTE>
<BLOCKQUOTE>
The overall effect of this would be that the
troublesome mount would be left alone for a couple
of minutes, and then cleared up in the background.
Obviously, your win '9x filesystems wouldn't be
available until after that delay.
</BLOCKQUOTE>
<BLOCKQUOTE>
As I say.  This is a WORKAROUND.  Normally installations
should NOT have to do this.
</BLOCKQUOTE>
<BLOCKQUOTE>
Another approach would be to ensure that the modules
are loaded BEFORE the mount command occurs.  Usually
the kmod automatic module loading system is reliable
enough.  However, we can always add our own '<tt>insmod</tt>'
or '<tt>modprobe</tt>' commands commands to <TT>/etc/rc.d/rc.sysinit</TT>
or to some other point in the rc scripts.  Indeed we
could even insert a custom rc invocation into the
<TT>/etc/inittab</TT> file --- which would run before ALL of the
other rc scripts.
</BLOCKQUOTE>
<BLOCKQUOTE>
Yet another approach is to link the requisite modules
statically into your kernel.  You don't have to do this
with all of the modules you use (and that might result in
kernels that are two big for LILO to use).  However, you
should statically link in your primary disk controller,
primary filesystem, any ethernet driver and then the
other drivers that you really care about.  This is
done by simply building a new kernel from sources.
</BLOCKQUOTE>
<BLOCKQUOTE>
(Which segues into one of your other questions).
</BLOCKQUOTE>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
The other question has to do with hooking up to win2k with NTFS. I
understand that I have to recompile my kernel, which is a bit
scary. My question is: is there a good source of directions on how
to do this? If there is something similar to what you showed me
for Samba, it would be great!
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Well the usual answer for this is to head over to
"The Linux Kernel HOWTO" at
</BLOCKQUOTE>
<BLOCKQUOTE>
<A HREF="http://www.linuxdoc.org/HOWTO/Kernel-HOWTO.html"
	>http://www.linuxdoc.org/HOWTO/Kernel-HOWTO.html</A>
</BLOCKQUOTE>
<BLOCKQUOTE>
... and if that seems to shoot over your head then
go back to basics by reading the "Installation and
Getting Started" guide by Matt Welsh et al:
</BLOCKQUOTE>
<BLOCKQUOTE><DL><DT>
The Linux Documentation Project Works
<DD><A HREF="http://www.linuxdoc.org/docs.html#guide"
	>http://www.linuxdoc.org/docs.html#guide</A>
</DL></BLOCKQUOTE>
<BLOCKQUOTE>
... this guide is the first link in the guides section
of the LDP (the Linux Documentation Project).
</BLOCKQUOTE>
<BLOCKQUOTE>
Of course every Linux user should start with the LDP
guides and HOWTOs.  Every general purpose Linux distribution
should have links to the LDP <A HREF="http://www.linuxdoc.org"
	>http://www.linuxdoc.org</A> web site
prominently evident on their own web sites, in their
documentation and installation scripts, in the sample
HTML that's installed on any localhost web server, etc.
</BLOCKQUOTE>
<BLOCKQUOTE>
(Incidentally the Linux Gazette is a part of the LDP.
This is relatively obscured by the fact that we run
completely autonomously).
</BLOCKQUOTE>
<BLOCKQUOTE>
If the "Installation and Getting Started" doesn't seem
to be quite enough then I'd suggest looking at
Henry White's "Basic Linux Training"
(<A HREF="http://basiclinux.hypermart.net/info-basic.html"
	>http://basiclinux.hypermart.net/info-basic.html</A>)
</BLOCKQUOTE>
<BLOCKQUOTE>
That's a highly structured online class.  Although it
requires registration (and a password) to access the
content of this course --- the registration seems to be
free.  This class uses the Getting Started guide as
a text book.
</BLOCKQUOTE>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Another question is: where can I obtain a decent word processor
for Linux?  The Redhat 6.1 didn't have anything on the CD. There
are all sorts of editors, and even a spread sheet, but no word
processor. It is difficult for me to return to the dark ages where
I had no control over the font size, or which font I was using,
which are the minimum goodies for a word processor.
</STRONG></P>
<P><STRONG>
Thanks,
<br>Ilan
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
There are several word processors for Linux.  However,
I should note that the whole word processor paradigm is
not the only way to have control over font size and
selection.   It's also important to understand that
word processors existed for years before GUIs and "WYSIWIG"
(what you see is what you (hope to) get) were feasible.
</BLOCKQUOTE>
<BLOCKQUOTE>
One of the earliest uses of UNIX was document preparation
and typesetting using the roff (nroff, and troff) system.
This is still the format used by Linux and UNIX man pages,
and some people still create and maintain their resumes
in troff.  A troff document consists of text with embedded
"dot commands" which identify the document parts (titles,
headings, sections, etc) and desired typesettings (font,
face, weight, etc).
</BLOCKQUOTE>
<BLOCKQUOTE>
Another typesetting system which is geared for technical
publications and academic work (particularly for
dissertations in mathematics, physics, Klingon linguistics,
etc) is Donald Knuth's TeX system (pronounced "tech" as in
"tau epsilon chi").  TeX is a typesetting language.
Many TeXnicians actually use the LaTeX macro package which
is built around "plain" TeX.  There are hundreds of packages
which plug into LaTeX and dozens of TeX alternatives to it.
</BLOCKQUOTE>
<BLOCKQUOTE>
You can learn far more than you ever wanted to know
about this approach to document preparation by browsing
around the TUG (TeX Users Group) website <A HREF="http://www.tug.org"
	>http://www.tug.org</A>
and by perusing the CTAN (Comprehensive TeX Archive Network)
website at <A HREF="http://www.ctan.org"
	>http://www.ctan.org</A>.
</BLOCKQUOTE>
<BLOCKQUOTE>
(If you need to typeset a dissertation comparing
Elvish, Goblinoid, and Klingon literature, perhaps with
diagrams of their respective approachs to chess, and
perhaps you want to have barcode footnotes of your
bibliographic references --- if you need that then
CTAN is the place to go!)
</BLOCKQUOTE>
<BLOCKQUOTE>
I've never written anything in *roff.  However I do
like LaTeX, and I did use it to write my first book.
It does represent a significant learning curve, but you
do get very good control over the project as a whole.
</BLOCKQUOTE>
<BLOCKQUOTE>
So, I suggest that you look back into the "dark ages"
a bit and see what arcane wisdom might be found thereby.
</BLOCKQUOTE>
<BLOCKQUOTE>
Now, back to your question:
</BLOCKQUOTE>
<BLOCKQUOTE>
The most obvious commercial and closed source choices
for your word processing needs are:
</BLOCKQUOTE>
<BLOCKQUOTE><DL><DT>
Word Perfect by Corel software
<DD><A HREF="http://www.corel.com"
	>http://www.corel.com</A>
</DL></BLOCKQUOTE>
<BLOCKQUOTE>
(I'd give a more specific URL, but they use
nasty Javascript redirections to access their
products listings so you'll just have to
hunt for it yourself).
</BLOCKQUOTE>
<BLOCKQUOTE>
Star Office by Star Division at
<A HREF="http://www.stardivision.com"
	>http://www.stardivision.com</A> which was purchased by
Sun Microsystems <A HREF="http://www.sun.com"
	>http://www.sun.com</A> last year
</BLOCKQUOTE>
<BLOCKQUOTE><DL><DT>
Applixware for Linux
<DD><A HREF="http://www.applix.com/applixware/linux/main.cfm"
	>http://www.applix.com/applixware/linux/main.cfm</A>
</DL></BLOCKQUOTE>
<BLOCKQUOTE>
... note that you might want to wait a couple
weeks for their upcoming release of 5.0
</BLOCKQUOTE>
<BLOCKQUOTE>
(Then again you might want to also have another
word processor handy for that first couple of
months after you get Applixware 5.x --- since it
is a major commercial sofware release and a ".0"!).
</BLOCKQUOTE>
<BLOCKQUOTE>
I've used Applix (a couple of minor versions ago) and
StarOffice.  In fact I decided to install the Sun release
of StarOffice 5.1 while I was writing this message.
(I'd had a small stack of the free CDs that were given out
at some LUG around here sitting next to my computer for
about two months, and one of those was sitting in my
workstation's CD tray for the last couple of weeks).
</BLOCKQUOTE>
<BLOCKQUOTE>
So, it's copying files now ... done.
</BLOCKQUOTE>
<BLOCKQUOTE>
StarOffice does install pretty easily.  This workstation
(canopus) is on a <A HREF="http://www.debian.org/">Debian</A> (Potato) distribution.   Here's
how:
</BLOCKQUOTE>
<BLOCKQUOTE><ol>
<li> mount the CD
<li> startx as root
<li> open an xterm
<li> changed to the <TT>/mnt/cdrom/linux/office51</TT> directory
<li> run '<TT>./setup</TT> <TT>/net</TT>'
<li> follow the on screen instructions;
<br> especially: select an installation path.
(I used <TT>/opt/StarOffice51/</TT>)
</ol></BLOCKQUOTE>
<BLOCKQUOTE>
... this creates the base system installation (about 150Mb).
</BLOCKQUOTE>
<BLOCKQUOTE>
Then each local user who intends to use the package must:
</BLOCKQUOTE>
<BLOCKQUOTE><ol>
<li> login
<li> startx (if necessary)
<li> cd to a (site dependant) directory such as
	/opt/StarOffice51/bin
<li> run <TT>./setup</TT> (without the <TT>/net</TT> option)
<li> follow the instructions and fill out the
	forms; pick a personal installation path
	(I used ~/.Office51/)
</ol></BLOCKQUOTE>
<BLOCKQUOTE>
(Note: the CD doesn't seem to be required for the user
installations).
</BLOCKQUOTE>
<BLOCKQUOTE>
This seems to install about 3Mb under my home directory.  It
seems to me that quite a bit of that could be replaced with
symlinks but...
</BLOCKQUOTE>
<BLOCKQUOTE>
Anyway, StarOffice comes with word processing, spreadsheet,
database, scheduler, presentation, and drawing programs.  It
also seems to have some features for accessing your Palm
Pilot PDA.
</BLOCKQUOTE>
<BLOCKQUOTE>
Overall I think the whole StarOffice suite works O.K.  but
is a bit too cluttered.  There are too many tool bars, icon
ribbons, rulers, scroll bars, menu bars, status lines etc.
Some, possibly most of that could be configured away, but it
is not clear how you access those functions without having
the various widgets constantly in your face and taking up
valuable screen real estate.
</BLOCKQUOTE>
<BLOCKQUOTE>
When you start StarOffice it creates one window/frame into
which all of the others must fit.  Thus your document,
dialog, spread sheet and other windows don't float on your
desktop co-existing with your other X applications.  They
are "boxed in" and visually isolated from the rest of your
desktop.  This isn't much of a problem to me.  I tend to
give each application its own virtual screen in my window
manager (mostly I've been using icewm recently --- it's very
modest and mostly unobtrusive).  So I have no objection to
sizing StarOffice to "full screen" and let it take over
almost all of my screen.  I just leave my icewm menu bar at
the bottom (taking up valuable screen real estate) and I use
it's little screen buttons to switch to my xterm screen
(O.K., I cheat!  I have a couple of xterms open on that
one), my Navigator screen, or to my "other" (xdvi, gv,
whatever) screens.
</BLOCKQUOTE>
<BLOCKQUOTE>
Of course one of my xterms has a copy of 'screen' (the text
mode terminal multiplexer) running in it.  This is running
my copy of xemacs, with my mailer and most of my other
editing buffers.  Other screen sessions have shell prompts,
root shell prompts, and my lynx sessions.  I regularly
detach this screen session, yanking it over to whichever
terminal session I happen to be on.  So it makes rounds from
text console, to xterm, to ssh session as I keep
re-attaching from various locations and under various modes.
(Understanding how I work my help you decide that you don't
want to listen to my advice about GUI programs).
</BLOCKQUOTE>
<BLOCKQUOTE>
Anyway, I consider StarOffice to be acceptable, and
certainly no worse then what I've seen of MS Office.
</BLOCKQUOTE>
<BLOCKQUOTE>
There is a free alternative. StarOffice is free as in "beer"
not free as in "speech" -- you can use it around the house
without paying any money but you can get the sources (yet),
modify it, or redistribute it without a license from Sun).
</BLOCKQUOTE>
<BLOCKQUOTE>
Abiword is the premier GPL'd GUI word processor.  The
current version is 0.7.7.
</BLOCKQUOTE>
<BLOCKQUOTE>
Since you're a Red Hat user you can download the RPM file
from the AbiSource web site:
</BLOCKQUOTE>
<BLOCKQUOTE><DL><DT>
AbiSource -- Linux <TT>/</TT> Intel Install
<DD><A HREF="http://www.abisource.com/dl_linux_intel.phtml"
	>http://www.abisource.com/dl_linux_intel.phtml</A>
</DL></BLOCKQUOTE>
<BLOCKQUOTE>
You can learn lots more about this project and the company
that's undertaken it at:
</BLOCKQUOTE>
<BLOCKQUOTE><BlockQuote>
<A HREF="http://www.abisource.com"
	>http://www.abisource.com</A>
</BlockQuote></BLOCKQUOTE>
<BLOCKQUOTE>
Under Debian you could install the latest Abiword using the
command:
</BLOCKQUOTE>
<BLOCKQUOTE><BlockQuote><Code>
apt-get install abiword
</Code></BlockQuote></BLOCKQUOTE>
<BLOCKQUOTE>
... assuming you have your <TT>/etc/apt/sources.list</TT> configured
correctly.  Debian will then handle all of the downloading,
installation and dependency resolution for you.
</BLOCKQUOTE>
<BLOCKQUOTE>
I've played with Abiword and it is pretty nice.  However it
is missing some fairly key pieces (such as the dialogs to
control your margins and page layout.  It does seem less
cluttered than StarOffice's "writer" and when you use the
option to turn of the "ruler" display then you can still
find all the options it offered on the pull down menus.
(Now if they just offered options to display the display of
the tool and menu bars and offered options to pop those up
with middle and "other" mouse buttons on the main text
display, then we might have a really clean interface).
</BLOCKQUOTE>
<BLOCKQUOTE>
One of the most aggressive projects to create a new office
suite for Linux is KOffice (<A HREF="http://koffice.kde.org"
	>http://koffice.kde.org</A>) by the
<A HREF="http://www.kde.org/">KDE</A> folks.  I haven't gotten this running yet. I did try to
grab the RPMs and use alien to install pre-compiled binaries
in the background as I was writing this message --- but I'm
missing a few libraries that it wants, so I'll have to get
the sources and build it all in order to test it. That will
have to happen later.
</BLOCKQUOTE>
<BLOCKQUOTE>
There are lots of other word processing packages for Linux.
Some are under development, others are commercial, some seem
to be half done and abandonned projects (like Maxwell, and
Papyrus).  Here's a couple of URLs to browse some of them:
</BLOCKQUOTE>
<BLOCKQUOTE><DL><DT>
[freshmeat] X11/Office Applications
<DD><A HREF="http://www.freshmeat.net/appindex/x11/office%20applications.html"
	>http://www.freshmeat.net/appindex/x11/office%20applications.html</A>
</DL></BLOCKQUOTE>
<BLOCKQUOTE><DL><DT>
Christopher B. Browne's Linux Word Processing
<DD><A HREF="http://www.hex.net/~cbbrowne/wp.html"
	>http://www.hex.net/~cbbrowne/wp.html</A>
</DL></BLOCKQUOTE>
<BLOCKQUOTE><DL><DT>
Goob:Software:Office
<DD><A HREF="http://www.linuxlinks.com/Software/Office"
	>http://www.linuxlinks.com/Software/Office</A>
</DL></BLOCKQUOTE>
<BLOCKQUOTE>
(This last one appears as "Goob" in my book marks
file --- so I think that is a historical name for the site).
</BLOCKQUOTE>
<em><p>[ Yes, it used to be called "Linux Links by Goob!" and
	I always assumed it started life as his personal bookmarks.
<br>-- Heather ]</p></em>

<BLOCKQUOTE>
That should keep you busy for awhile.
</BLOCKQUOTE>

<!-- sig -->


<!-- end 19 -->
<!--              . . . . . . . . . . . . . . . . . . .              -->
<HR WIDTH="40%" ALIGN="center">
<!-- begin 19 -->
<H3 align="left"><img src="../../gx/dennis/qbubble.gif" 
	height="50" width="60" alt="(?) " border="0"
	>thanks</H3>


<p><strong>From Ilan Tal  on Sun, 30 Jan 2000  
</strong></p>
<P><STRONG>
Hi Jim,
</STRONG></P>
<P><STRONG>
The diagnostics are pretty sparse because I don't know what I'm
doing!
</STRONG></P>
<P><STRONG>
I'm coming from the Windows world, but I'm in unfamiliar territory
with Linux.
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Don't feel bad.  When I was supporting MS Windows users
full time I often got sketchy symptomology.
</BLOCKQUOTE>
<BLOCKQUOTE>
The thing that makes it more frustrating these days
is that I'm doing it via e-mail.  So the questions I
want to ask and the data I need to gather in order
to treat the problem involve long delays in both
directions.
</BLOCKQUOTE>
<BLOCKQUOTE>
As Linux increases in popularity there will be many
people in the same boat with you.  I'll have to refer
more people to interactive phone support (which is
NOT free).  Sometimes that will be the only sane
approach.
</BLOCKQUOTE>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
It will take me a few days to digest your letter. I will look into
the problem and see if I can solve it, with the hopes of learning
something along the way. If I can't solve it, then I'll go for a
work around. In any case, I hope to learn something in the process
- and maybe as a result next time my diagnostics won't be quite so
sparse.
</STRONG></P>
<P><STRONG>
I VERY much appreciate all the effort you put into your
answer. Now I've got to digest it by trying out all the things you
suggested.
</STRONG></P>
<P><STRONG>
Thanks again,
Ilan
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Many people feel a bit overwhelmed by my responses.
I'm used to it.  Obviously you are motivated and
interested in learning more.
</BLOCKQUOTE>

<!-- sig -->


<!-- end 19 -->
<!--              . . . . . . . . . . . . . . . . . . .              -->
<HR WIDTH="40%" ALIGN="center">
<!-- begin 19 -->
<H3 align="left"><img src="../../gx/dennis/qbubble.gif" 
	height="50" width="60" alt="(?) " border="0"
	>More on Strange Mount Permissions</H3>


<p><strong>From Ilan Tal  on Sun, 30 Jan 2000  
</strong></p>
<!-- ::
More on Strange Mount Permissions
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
:: -->
<P><STRONG>
Hi Jim,
</STRONG></P>
<P><STRONG>
I don't want to bother you without doing my homework, but I have run into a
couple of questions which I just don't know how to solve. You answered my
question about the weird file permissions when I log on, which become normal
when I umount and then mount again.
</STRONG></P>
<P><STRONG>
First of all, my fstab is:
</STRONG></P>

<pre><strong>/dev/hda6               /                       ext2    defaults        1 1
/dev/cdrom              /mnt/cdrom              iso9660 noauto,owner,ro 0 0
/dev/hda5               swap                    swap    defaults        0 0
/dev/fd0                /mnt/floppy             ext2    noauto,owner    0 0
none                    /proc                   proc    defaults        0 0
none                    /dev/pts                devpts  gid=5,mode=620  0 0
/dev/hda4 /mnt/win98 vfat exec,dev,suid,rw,conv=auto,uid=500,gid=500,umask=755 1 1
/dev/hda1 /mnt/win95 msdos exec,dev,suid,rw,conv=auto,uid=500,gid=500,umask=755 1 1
</strong></pre>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Doh! [self: slaps forehead!]
</BLOCKQUOTE>
<BLOCKQUOTE>
I should have guessed!
</BLOCKQUOTE>
<BLOCKQUOTE>
Your problem is with those UMASK settings.  I see
what you intended but that not how the UMASK works.
UMASK is a list of the bits to strip OFF (mask away from)
the default 666 file creation permissions (777 for
directories).
</BLOCKQUOTE>
<BLOCKQUOTE>
So a UMASK of 022 is actually what you want!
</BLOCKQUOTE>
<BLOCKQUOTE>
Basically consider each of the digits in the permissions
set to be an octal value (three binary bits).  To get
the sequence rwx you have to use 4 + 2 + 1 (or
1 * 2 ^ 2 + 1 * 2 ^ 1 + 1 * 2 ^ 0 if you were to look at
the binary exponents).  777 in octal is 111 111 111, and
022 is 000 010 010. The complement of your UMASK (each
bit is inverted) is 111 101 101.  If you and that against
your default permissions (777 for directories and 666
for files) then you "strip out" the write permissions for
groups and "others."
</BLOCKQUOTE>
<BLOCKQUOTE>
I know that this is confusing.  It's one of those things
that makes perfect sense to the programmers who used
UNIX early one; and is something that many sysadmins and
UNIX users just learn (umasks of 022 or 027 are good,
most others are bad) without really understanding the
underlying bit manipulations.
</BLOCKQUOTE>
<BLOCKQUOTE>
The easy way to calculate the effects of a
umask are to subtract the desired permissions (755)
from 777.  That you can do in your head: 777 - 755 = 022.
</BLOCKQUOTE>
<BLOCKQUOTE>
Anyway, just change those 755's to 022 and everything
should be fine.
</BLOCKQUOTE>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
The other thing which I noticed about the ls -ld win98 with d----w-w- is
that the owner is ilan. After I umount and mount again the owner is root.
Your message actually gave me a very important clue. If, in fact, I do a
simple
</STRONG></P>
<P><STRONG>
umount <TT>/mnt/win98;</TT> mount <TT>/mnt/win98</TT>
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Of course that wouldn't work.  The mount command has been
working right all along.  It's doing exactly what the
options in the fstab are saying.
</BLOCKQUOTE>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
then nothing good happens! I am still stuck with the same garbage
permissions. However if I mount as: mount <TT>/dev/hda4</TT> <TT>/mnt/win98</TT>, THEN the
permissions are OK (and the owner is root, not ilan).
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Of course.  When you specify the device and the mount
point then the 'mount' command doesn't perform a lookup
in the <TT>/etc/fstab.</TT>  It just mounts the filesystem according
to your arguments and its compiled in defaults.
</BLOCKQUOTE>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
I tried to extend your command (find <TT>/etc/rc.d</TT> | xargs grep "mount. *-a") to
something to find the mount win98 string, but I couldn't make it work
correctly. What I tried was find <TT>/etc</TT> | xargs grep "mount. win98", but aside
from telling me that every entry was a directory, I didn't get anything
useful. Thus I don't know where or how it mounts win98.
</STRONG></P>
<P><STRONG>
While I'm at such questions, I tried sending you the output of the commands
(like ls -ld win98). What I found for redirection was rather complicated:
</STRONG></P>
<P><STRONG><BlockQuote>
(command) 2&gt;&amp;1 | tee (output file)
</BlockQuote></STRONG></P>
<P><STRONG>
I did all that, but each new command erased the output file. In the DOS
days, I used to use (command) &gt; (output file), or (command) &gt;&gt; (output file)
to append to an existing file. I'm sure there must be something similar in
Linux.
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
You can use the &gt;&gt; operator under Linux.  (Actually the
operators are part of the syntax of your shell, bash, or
tcsh.  Theoretically someone could write a UNIX/Linux
shell that used completely different syntax).
</BLOCKQUOTE>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Finally I tried recompiling the kernel to accommodate NTFS (read only). Your
suggested source helped a lot in adding information to what I had from the
official Linux documentation. Still it keeps coming back at me, at the
compile stage, telling me the kernel is too big and it can't compile it.
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Use the 'make bzImage' option rather than the 'make zImage'
choice.  This is a bit of a historical artifact.
</BLOCKQUOTE>
<BLOCKQUOTE>
You can read the Linux Kernel Mailing List (LKML) FAQ
at Tux.org (<A HREF="http://www.tux.org/lkml"
	>http://www.tux.org/lkml</A>) for more on that.
</BLOCKQUOTE>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
I suspect that this is a red herring, so I simply had to ask your opinion. I
have 926 Mbyte on my Linux partition, of which no less than 95% is in use!
This blew my mind, and I have 41 Mbyte free. I suspect that the real problem
may be that the disk space just isn't big enough.
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
No.  That's now a problem.  You should clear up
some space but that's now causing the symptoms you've
described to me.
</BLOCKQUOTE>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
If this be the case, either I have to somehow exploit my win98 disk, which
has loads of free space, or I need to figure out what I can dump from my
Linux partition.
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
You can symlink your home and <TT>/usr/src/linux</TT> directories
into directories on one of your MS Windows partitions,
though you should use the uvfat filesystem type rather
than just vfat.  That will impose some UNIX/Linux semantics
on your MS FAT filesystems using some hidden files that
the Linux uvfat filesystem driver will transparently create
and maintain for you.
</BLOCKQUOTE>
<BLOCKQUOTE>
You might want to hunt around for information on uvfat and
it's predecessor/ancestore UMSDOS.  I haven't used these in
years and haven't read about them recently.
</BLOCKQUOTE>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Another very useful suggestion in your letter was to sign up for the Linux
course. This I did yesterday. Hopefully it may fill in some of the huge
holes in my background. Knowing Windows just isn't enough, not by a long
shot!
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
I just saw an interesting link to Linux training providers
at:
</BLOCKQUOTE>
<BLOCKQUOTE><DL><DT>
LinTraning:
<DD><A HREF="http://www.lintraining.com"
	>http://www.lintraining.com</A>
</DL></BLOCKQUOTE>
<BLOCKQUOTE>
... which is currently just a redirection to:
</BLOCKQUOTE>
<BLOCKQUOTE><DL><DT>
LinSight: Training
<DD><A HREF="http://training.linsight.com"
	>http://training.linsight.com</A>
</DL></BLOCKQUOTE>
<BLOCKQUOTE>
I'm just mentioning that for the benefit of my other
readers, though you can check it out if you want to
shop around.
</BLOCKQUOTE>
<BLOCKQUOTE>
I thought about referring you to <A HREF="http://www.linuxcare.com/">Linuxcare</A> (which does
do some training).  Howevever I see from our web site
that we don't currently have any classes for individuals
scheduled.  Our focus at Linuxcare is more on training
the instructors of the training facilities, and on
corporate training.  So we only occasionally offer
classes to the general public.
</BLOCKQUOTE>
<BLOCKQUOTE>
(Many of the facilities listed in LinTraining are
coming to Linuxcare for their materials).
</BLOCKQUOTE>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Thanks,
Ilan
</STRONG></P>

<!-- sig -->


<!-- end 19 -->
<!--              . . . . . . . . . . . . . . . . . . .              -->
<HR WIDTH="40%" ALIGN="center">
<!-- begin 19 -->
<H3 align="left"><img src="../../gx/dennis/qbubble.gif" 
	height="50" width="60" alt="(?) " border="0"
	>100% correct!</H3>


<p><strong>From Ilan Tal  on Mon, 21 Feb 2000  
</strong></p>
<!-- ::
100% correct!
~~~~~~~~~~~~~
:: -->
<P><STRONG>
Hi Jim,
</STRONG></P>
<P><STRONG>
It took me a couple of days before I could get rid of my Windows obligations
and return to the fun stuff of Linux. In any case I must report to you that
YOU are right and the Linux documentation is WRONG. I am referring to your
letter:
</STRONG></P>

<pre><strong>&gt;&gt;&gt; /dev/hda4 /mnt/win98 vfat &gt;&gt;&gt;	exec,dev,suid,rw,conv=auto,uid=500,gid=500,umask=755 1 1
&gt;&gt;&gt; /dev/hda1 /mnt/win95 msdos &gt;&gt;&gt;	exec,dev,suid,rw,conv=auto,uid=500,gid=500,umask=755 1 1
</strong></pre>
<P><STRONG><FONT COLOR="#000066"><EM>
Doh! [self: slaps forehead!]
</EM></FONT></STRONG></P>
<P><STRONG><FONT COLOR="#000066"><EM>
I should have guessed!
</EM></FONT></STRONG></P>
<P><STRONG><FONT COLOR="#000066"><EM>
Your problem is with those UMASK settings.  I see
what you intended but that not how the UMASK works.
UMASK is a list of the bits to strip OFF (mask away from)
the default 666 file creation permissions (777 for
directories).
</EM></FONT></STRONG></P>
<P><STRONG>
Where in hell would I know what permissions to use? I must have read it
somewhere, because I know NOTHING. First of all I took your suggestion, went
into linuxconf and changed 755 to 22. That solved my problem COMPLETELY! No
more problems with logging on, IT WORKS!
</STRONG></P>
<P><STRONG>
The next problem was to figure out where I got the bum steer. I went to the
Linux documentation, "Getting started". I wanted to get started, right?
There is a section about mounting Windows devices. That is what I needed,
right? Well it says to use 755, so that is what I did. I didn't know nothin'
about any UMASK, and I didn't change any UMASK. I took YOUR suggestion (in
linuxconf) about using 22, and guess what? It works!
</STRONG></P>
<P><STRONG>
Someone should either fix linuxconf, or they should fix the documentation.
One of them is simply wrong. Without your telling me where the problem was,
I didn't have the chance of a snowball in hell of finding it.
</STRONG></P>
<P><STRONG>
Thanks,
Ilan
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Hmm.  If you could find the passage in "Installation and
Getting Started" to which you are referring, we could
look up the current maintainer of that LDP guide and suggest
a clarification.
</BLOCKQUOTE>
<BLOCKQUOTE>
Matt Welsh, the original author of GS, knows at least as
much about UNIX as I do (probably more).  So if the
passage was incorrect, it was probably an accident in the
wording, or something confusing about the sentence
structure.   I presume that he was trying to say that you
should set your umask value such that the resulting
directories end up with mode 755.
</BLOCKQUOTE>
<BLOCKQUOTE>
As for linuxconf, don't get me started about it.  I've tried
it a couple of times and it just does things WRONG!  I
refuse to use it on my systems.  I'd like a mode in
linuxconf that would just "edit the files"  and show me
what needs to be put where.  In other words it would be nice
if it had interactive help, and forms to put the right stuff
into the right places in things like zone, hosts, passwd,
and other files.  Some of these conf files can be pretty
picky.
</BLOCKQUOTE>
<BLOCKQUOTE>
(I once let crackers create directories on a public FTP site
and upload "warez" --- pirated software --- all because I
had a space following a common in a WU-FTPd ftpaccess file;
I was saved by some other settings that prevented them and
their ilk from get back into to retrieve the warez --- but
that's still a slightly spooking experience).
</BLOCKQUOTE>
<BLOCKQUOTE>
I suppose I should quit my kvetching and get in there to fix
it, or to help with the COAS 
(<A HREF="http://www.caldera.com/">Caldera</A> Open Admin System).
One problem with UNIX and Linux is that those of us who get
good at managing the system with text conf. files have
little interest in or incentive to make easier interfaces
for those who don't know that a man page that specifies
a syntax of "<tt>opt1,opt2,opt3...</tt>" really MEANS that there
should be no spaces after those commas, etc.
</BLOCKQUOTE>
<BLOCKQUOTE>
Anyway, if you can find the places that lead you astray,
please feel free to e-mail the maintainers of those
documents and packages (linuxconf included) and let them
know.
</BLOCKQUOTE>

<!-- sig -->


<!-- end 19 -->
<!--startcut ======================================================= -->
<P> <hr> <P>
<H5 align="center"><a href="http://www.linuxgazette.net/copying.html"
	>Copyright &copy;</a> 2000, James T. Dennis 
<BR>Published in <I>The Linux Gazette</I> Issue 51 March 2000</H5>
<H6 ALIGN="center">HTML transformation  by
	<A HREF="mailto:star@tuxtops.com">Heather Stern</a> of
	Tuxtops, Inc.,
	<A HREF="http://www.tuxtops.com/">http://www.tuxtops.com/</A> 
</H6>
<P> <hr> <P>
<!-- begin tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::-->
<TABLE WIDTH="95%"><TR VALIGN="center" ALIGN="center">
<TD colspan="2" rowspan="2"><A 
	HREF="../lg_answer51.html"
	><IMG SRC="../../gx/dennis/answernew.gif"
              ALT="[ Answer Guy Current Index ]"></A>
<TD colspan="2" rowspan="2"><A 
	HREF="../../tag/kb.html"
	><IMG SRC="../../gx/dennis/answertoc.gif"
              ALT="[ Index of Past Answers ]"></A></td>
  <TD WIDTH="11%"><A HREF="../lg_answer51.html#greeting"><img
	src="../../gx/dennis/smily.gif" alt="greetings" border="0"></A></TD>
  <TD WIDTH="11%"><A HREF="1.html">1</A></TD>
  <TD WIDTH="11%"><A HREF="2.html">2</A></TD>
  <TD WIDTH="11%"><A HREF="3.html">3</A></TD>
  <TD WIDTH="11%"><A HREF="4.html">5</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="11%"><A HREF="5.html">5</A></TD>
  <TD WIDTH="11%"><A HREF="6.html">6</A></TD>
  <TD WIDTH="11%"><A HREF="7.html">7</A></TD>
  <TD WIDTH="11%"><A HREF="8.html">8</A></TD>
  <TD WIDTH="11%"><A HREF="9.html">9</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="10%"><A HREF="10.html">10</A></TD>
  <TD WIDTH="10%"><A HREF="11.html">11</A></TD>
  <TD WIDTH="10%"><A HREF="12.html">12</A></TD>
  <TD WIDTH="10%"><A HREF="13.html">13</A></TD>
  <TD WIDTH="11%"><A HREF="14.html">14</A></TD>
  <TD WIDTH="11%"><A HREF="15.html">15</A></TD>
  <TD WIDTH="11%"><A HREF="16.html">16</A></TD>
  <TD WIDTH="11%"><A HREF="17.html">17</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="10%"><A HREF="18.html">18</A></TD>
  <TD WIDTH="10%"><A HREF="19.html">19</A></TD>
  <TD WIDTH="10%"><A HREF="20.html">20</A></TD>
  <TD WIDTH="10%"><A HREF="21.html">21</A></TD>
  <TD WIDTH="11%"><A HREF="22.html">22</A></TD>
</TR></TABLE>
</TR><TR VALIGN="center" ALIGN="center">
<!-- end tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::::-->
<P> <hr> <P>
<!-- begin lgnav ::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<A HREF="../index.html"
	><IMG SRC="../../gx/indexnew.gif" ALT="[ Table Of Contents ]"></A>
<A HREF="../../index.html"
	><IMG SRC="../../gx/homenew.gif" ALT="[ Front Page ]"></A>
<A HREF="../lg_bytes51.html"
	><IMG SRC="../../gx/back2.gif" ALT="[ Previous Section ]"></A>
<A HREF="../../faq/index.html"
	><IMG SRC="../../gx/dennis/faq.gif"
              ALT="[ Linux Gazette FAQ ]"></A>
<A HREF="../lg_tips51.html"
	><IMG SRC="../../gx/fwd.gif" ALT="[ Next Section ]"></A>
<!-- end lgnav ::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
</BODY></HTML>
<!--endcut ========================================================= -->

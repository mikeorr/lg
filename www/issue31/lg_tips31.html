<!--startcut ==========================================================-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN"> 
<html>
<head>
<title>More 2 Cent Tips & Tricks LG #31</title>
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#A000A0"
ALINK="#FF0000">
<!--endcut ============================================================-->
<H4>"Linux Gazette...<I>making Linux just a little more fun!</I>"
</H4>
<P> <hr> <P> 

<!-- QUICK TIPS SECTION ==================================================  -->
<center>
<H1><A NAME="tips"><IMG ALIGN=MIDDLE ALT="" SRC="../gx/twocent.gif">
More 2&#162; Tips!</A></H1> <BR>
Send Linux Tips and Tricks to <A HREF="mailto:gazette@linuxgazette.net">
gazette@linuxgazette.net
</A></center>

<p><hr><p>
<H3>Contents:</H3>
<ul>
<li><a HREF="./lg_tips31.html#brindle">
RE: Photogrammetry tools for Linux? in Issue 30</A> 
<li><a HREF="./lg_tips31.html#esser">
Re: Suggestion for Article, simultaneous versions of Kernels</A> 
<li><a HREF="./lg_tips31.html#reith">
Secondary IDE interface CDROM detection/automounting tip</A> 
<li><a HREF="./lg_tips31.html#hornby">
Re ext2 partitions</A> 
<li><a HREF="./lg_tips31.html#hegbloom">
pdf resumes: pdflatex</A> 
<li><a HREF="./lg_tips31.html#mitchell">
Re: CHAOS</A> 
<li><a HREF="./lg_tips31.html#leon">
Re: 3com network cards</A> 
<li><a HREF="./lg_tips31.html#rudder">
ext2 Partitions</A> 
<li><a HREF="./lg_tips31.html#lussier1">
RE: Searching (somewhat in vain) for sources on shell scripting</A> 
<li><a HREF="./lg_tips31.html#lussier2">
Re: $.02 tips on ext2 Partitions </A> 
<li><a HREF="./lg_tips31.html#huggie">
LG30 ext2 Partition tip</A> 
<li><a HREF="./lg_tips31.html#np">
Modem Connecting Speed</A> 
<li><a HREF="./lg_tips31.html#carlson">
Short Article on upgrading to SMP</A> 
<li><a HREF="./lg_tips31.html#gushee">
Cross-platform Text Conversions</A> 
</ul>

<P> <hr> <P> 
<!--================================================================-->

<a name="brindle"></a>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
RE: Photogrammetry tools for Linux? in Issue 30
</H3>
Date: Wed, 29 Jul 1998 10:01:14 -0500<BR> 
From: John Prindle, <A HREF="mailto:jprindle@mail.eden.com">
jprindle@mail.eden.com</A> <BR> 
<P> 
In the July 1998 issue of LG, this message was listed in the "Help Wanted"
section.
<blockquote> <font color="navy">
From: Maurizio Ferrari, Maurizio.Ferrari@tin.it <BR> 
I am looking for a Linux program to do some close-range photogrammetry.
Close range photogrammetry is a technique that enables to reconstruct 3D
images from a series
of 2D pictures. There are a few powerful (and relatively inexpensive)
tools for Windows but none so far for Linux, that I know of. There was
something once upon a time
called Photo4D. Despite my massive Internet search, any occurrence of
Photo4D seems to have been wipe erased from the face of earth. It is
listed in SAL but all the links
fail. 
I don't want to resort to buy and use Windows software for this. Help,
anyone? 
</font></blockquote> 
I have tried to e-mail the user back at his given address with some info
found on the company and product, but the address given is not valid.
So, here it is:
<P> 
CompInt <BR> 
712 Seyton Drive <BR> 
Nepean, Ontario K2H 9R9 <BR> 
Canada <BR> 
General e-mail : <A HREF="mailto:compint@igs.net">compint@igs.net</A> <BR> 
<A HREF="http:/www.igs.net/~compint/">http:/www.igs.net/~compint/ </A><BR> 
This page updated 8/15/97 at 5:45:19 AM ET. <BR> 
<P> 
I found this article about the product on Computer Graphics World's site.
<P> 
<A HREF="http://www.cgw.com/cgw/Archives/1996/09/09prod1_05.html">
http://www.cgw.com/cgw/Archives/1996/09/09prod1_05.html</A> 
<P> 
Product Spotlight<BR> 
New Motion-Capture Tool <BR> 
CGW Magazine - September 1996 <BR> 
<P>
With CompInt's Photo4D-Pro, animators can now capture 2D and 3D
motion based on video recordings. The Windows 95/NT-based program,
available for $490, features auto-detection and auto-marking tools which
use pattern recognition technology to automatically detect and mark similar
feature points in images, making it possible to effectively digitize a large
number of points. The software enables users to capture accurate 3D
motion from multiple video recordings of a subject by tracking the feature
points in videos and computing their x, y, and z coordinates in each frame.
Furthermore, its advanced algorithms can synchronize recorded videos to
sub-frame accuracy, allowing the use of low-cost home video cameras. 
<P>
Coinciding with this product launch, the company is also releasing
Photo4D-Lite V2.0, a $99 product designed for users who require only
3D digitizing and modeling capabilities. Both products will be available on
Windows 95/NT, SGI, Sun, HP, and Linux platforms. (Nepean, Ontario;
613-721-1643) 
<P>
The web page that is listed is not valid, but hopefully this may help
people trying to locate this product.
<P>
John


<P> <hr> <P> 
<!--================================================================-->

<a name="esser"></a>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
Re: Suggestion for Article, simultaneous versions of Kernels
</H3>
Date: Wed, 01 Jul 1998 10:39:21 +0100<BR> 
From: Hans-Georg Esser, <A
HREF="mailto:esser@i2.informatik.rwth-aachen.de">
esser@i2.informatik.rwth-aachen.de</A>
<P>
<blockquote> <font color="navy">
From: Renato Weiner, reweiner@yahoo.com <BR> 
Recently I was looking at the Gazette and I think I have a good suggestion of an
article that will be very useful for the Linux community. 
I have had some technical difficulties of having two simultaneous versions of Kernels in my system. I mean a stable one and a developing one.
I searched the net looking for information of how to co-exist both but it's completely fragmented. 
If somebody more experienced could put all this information together, it will certainly help a lot of people from kernels developers to
end-users. 
</font></blockquote> 
Let me state the following:
<P>
HOW TO HAVE COEXISTING KERNELS
<P>
First let me assume that, with "coexisting kernels", you meant to have several different
kernels (with different kernel numbers such as 2.0.34 and 2.1.101) each of which can
be chosen at boot time to be started. (The point is: I suppose, you don't want to
simultaneously __run__ different kernels, which of course is impossible.)
<P>
So, all you have to do is this:
<P>
For each kernel you want to use, get the kernel sources, e.g. as .tgz file, cd to 
/usr/src, do a
<PRE> 
  tar xzf ../where/ever/it/is/package.tgz
</PRE> 
then cd to /usr/src/linux-2.0.34  (e.g.)
and do the ordinary kernel configuration / compilation, i.e. 
<PRE> 
  make config  (or menuconfig or xconfig, whatever you like)
  make zImage modules modules_install
  cp arch/i386/boot/zImage /linux-2.0.34  (e.g.)
</PRE> 
The last bit of the make will generate a directory /lib/modules/2.0.34 (e.g.) where
the modules are put.
<P>
Then edit the /etc/lilo.conf. Copy the parts that configure your "normal" system
start and change the name of the configuration. Also change the name of the 
kernel binary to /linux-2.0.34 (e.g.).
<P>
Then proceed with the next kernel in identic behaviour. Nothing can be overwritten
during this process, because all of the kernel compilation is done in its separate
directory /usr/src/linux-2.x.y, and all the generated modules will be put in a
separate directory /lib/modules/2.x.y, and your zImage copy (residing in /) will
have a new name, as you have used an other kernel version.
<P>
When you're through with all your kernel versions and have added the last portion
to the /etc/lilo.conf file do a 
<PRE> 
  lilo
</PRE> 
at the prompt which will make lilo reinstall the boot manager with the changed
values. Now reboot, press [TAB] at the LiLo prompt and choose a kernel to use.
If you followed these steps, you will not have deleted your original entry in
/etc/lilo.conf, so if none of your newly compiled kernels can boot properly, you
can still boot the old kernel.
<P>
Hope it helps,
<P>
H.-G. Esser

<P> <hr> <P> 
<!--================================================================-->

<a name="reith"></a>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
Secondary IDE interface CDROM detection/automounting tip
</H3>
Date: Wed, 1 Jul 1998 14:09:24 -0400<BR> 
From: Jim Reith, <A HREF="mailto:reith@racores.com">reith@racores.com</A> 
<blockquote> <font color="navy">
In the Linux Gazette #28 the question was asked:<BR> 
Hello.I have the Linux Slackware 2.0.30 Walnut Creek.I installed it on
a Pentium 200 MMX with a 24x CD-ROM. During the installation I had to
write "ramdisk hdd=cdrom" for reading the CD-ROM, but after the
installation Linux doesn't see the CD-ROM. I have an atapi CD-ROM,
and when I tried to compile my kernel another time, I saw that atapi is
the default !!! So I don't understand where is the problem . What can I do?
</font></blockquote> 
I ran into this same problem on my home machine. I found that the rc.cdrom
script wasn't checking for my drive properly. It couldn't find /dev/hdc and
 I had to change/add in /dev/hd1a in order to get the master on the
secondary IDE interface. Once I put that in the list it worked fine. I
would suspect you should use /dev/hd1b for the slave?
<P>
Jim Reith
reith@racores.com

<P> <hr> <P> 
<!--================================================================-->

<a name="hornby"></a>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
Re ext2 partitions
</H3>
Date: Thu, 2 Jul 1998 21:25:27 +0100<BR> 
From: Alex Hornby, <A HREF="mailto:ahornby@plasma.ddns.org">
ahornby@plasma.ddns.org</A> 
<P>
A much simpler solution to Albert T. Croft's file finding troubles of
only wanting to look at ext2 drives so as to exclude the vfat
partitions is:
<PRE> 
find . -fstype ext2 -name foo
</PRE> 
Replacing foo with whatever you are looking for.
<P>
Cheers,
Alex.

<P> <hr> <P> 
<!--================================================================-->

<a name="hegbloom"></a>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
pdf resumes: pdflatex
</H3>
Date: 04 Jul 1998 11:42:17 -0700<BR> 
From: Karl M. Hegbloom, <A HREF="mailto:karlheg@inetarena.com">
karlheg@inetarena.com</A> 
<P>
 Dave Cook, the man who wrote the 2cent tip about createing a .pdf
 file of a resume, must not have the latest TeTeX installed.  Either
 that, or he's not explored it much.  ;-)
<P>
 There is a `pdflatex' now, that creates .pdf files directly.  It
 works really well.  There is also `pdftex', and `pdftexinfo'.  You
 can typeset texinfo documents with `info2pdf' now.
<P>
 Last time I tried it, there was an off by one bug, apparently...
 When you click a section heading in the table of contents panel, it
 would jump to one section lower than the one you click.  The bug has
 been reported to the Debian bug tracking system.
<P>
Karl

<P> <hr> <P> 
<!--================================================================-->

<a name="mitchell"></a>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
Re: CHAOS
</H3>
Date: Fri, 03 Jul 1998 16:07:14 +0100<BR> 
From: Dom Mitchell, <A HREF="mailto:dom@phmit.demon.co.uk">
dom@phmit.demon.co.uk</A> 
<P>
A point to note:  the IP addresses used for the network should probably
be modified to be in one of the ranges set aside in RFC 1918.  In
summary, they are:
<PRE> 
     10.0.0.0        -   10.255.255.255  (10/8 prefix)
     172.16.0.0      -   172.31.255.255  (172.16/12 prefix)
     192.168.0.0     -   192.168.255.255 (192.168/16 prefix)
</PRE> 
These addresses are guaranteed to not be in use on the Internet, should
you get connected later.  See the RFC for the full rational.
<P> 
Dom Mitchell

<P> <hr> <P> 
<!--================================================================-->

<a name="leon"></a>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
Re: 3com network cards
</H3>
Date: Fri, 03 Jul 1998 20:33:13 +1000<BR> 
From: leon, <A HREF="mailto:leon@desiin.com">leon@desiin.com</A> 
<P>
Re: complaint about 3com network card being slow
in 2c tips.
<P>
3com 3c590  3c900 and 3c905 cards have a
setting stored into them.
Unlike traditional settings like
IO port , Interrupt, or media type, these cards
just take one setting ...
<P>
They actually have a setting that slows down
the card so that the  CPU time isnt chewed up
with a flood of network traffic.
<P>
There is also a  maximum throughput setting
and a medium setting.
<P>
leon

<P> <hr> <P> 
<!--================================================================-->

<a name="rudder"></a>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
ext2 Partitions
</H3>
Date: Thu, 2 Jul 1998 17:58:32 -0700 (PDT)<BR> 
From: David Rudder, <A
HREF="mailto:drig@noses.org">drig@noses.org</A> 
<P>
In your 30th issue, Albert Croft wrote in with a script to search only 
ext2 partitions.  I believe you can do the same thing by using
<PRE> 
find / -fstype ext2
</PRE> 
David Rudder

<P> <hr> <P> 
<!--================================================================-->

<a name="lussier1"></a>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
RE: Searching (somewhat in vain) for sources on shell scripting 
</H3>
Date: Mon, 06 Jul 1998 12:37:05 -0400<BR> 
From: "Paul L. Lussier", <A HREF="mailto:plussier@BayNetworks.COM">
plussier@BayNetworks.COM</A> 
<P>
Well, my 2 sec search turned this up.  In addition, www.oreilly.com is the
only site you need for the definitive source on anything related to Unix.
<P>
	Unix Shell Programming Revised Ed.<BR>
	Kochan, Stephen G.; Wood, Patrick H.<BR>
	0-672-48448-X<BR>
	Hayden Books<BR>
<P>
	Korn Shell Programming Tutorial<BR>
	Rosenberg, Barry<BR>
	0-201-56324-X<BR>
	Addison Wesley<BR>
<P>
	AWK Language Programming; A User's Guide for GNU AWK<BR>
	Robbins, Arnold D.<BR>
	1-882114-26-4<BR>
	Free Software Foundation<BR>
<P>
	Learning Perl, 2nd Edition<BR>
	2nd Edition July 1997<BR>
	Randal L. Schwartz & Tom Christiansen Foreword by Larry Wall<BR>
 	1-56592-284-0<BR>
	302 pages, $29.95<BR>
<P>
	Programming Perl, 2nd Edition<BR>
	Larry Wall, Tom Christiansen & Randal L. Schwartz<BR>
	2nd Edition September 1996<BR>
	1-56592-149-6<BR>
	670 pages, $39.95<BR>
<P>
	Advanced Perl Programming<BR>
	By Sriram Srinivasan<BR>
	1st Edition August 1997<BR>
	1-56592-220-4<BR>
	434 pages, $34.95<BR>
<P>
Paul

<P> <hr> <P> 
<!--================================================================-->

<a name="lussier2"></a>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
Re: $.02 tips on ext2 Partitions 
</H3>
Date: Mon, 06 Jul 1998 13:23:42 -0400<BR> 
From: "Paul L. Lussier", <A HREF="mailto:plussier@BayNetworks.COM">
plussier@BayNetworks.COM</A> 
<blockquote> <font color="navy">
In the July 1998 issue of Linux Gazette, Albert T. Croft said:<BR> 
We knew the files we were looking for would only be on the ext2 partitions.
We tried writing a batch file, using grep and gawk to get the mount points
for the ext2 partitions and handing them to find. This proved unworkable if
we were looking for patterns, such as h2*. We then tried to write just a find 
command, using gawk and grep to get the mount points. This was somewhat
better, but using a print statement in gawk to get the names of the mount
points wouldn't work. Some help came with remembering that gawk has a printf
statement,allow. 
Our final product, which we found quite useful and now have in our .bashrc >
files as linuxfind, is the following:<BR> 
<tt>
find `mount|grep ext2|gawk '{printf "%s ", $3}'` -name
</tt>
</font></blockquote> 
A quick perusal of the mount man page would have revealed the -t flag
obviating the necessity of the grep and gawk in the above command.
Therefore the command could have been shortened to:
<PRE> 
	find `mount -t ext2` -name
</PRE> 
Also, the "locate" command is also available on linux (and has been documented
within the pages of LG and LJ a number of times).  From the man page:
<blockquote> 
	locate searches one or more databases of file names
	and displays the file names that contain the pattern.
</blockquote> 
In addition, one could use 'which', 'whence' and 'whereis' to assist in the
location of files.
<P>
Paul

<P> <hr> <P> 
<!--================================================================-->

<a name="huggie"></a>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
LG30 ext2 Partition tip
</H3>
Date: Fri, 10 Jul 1998 21:31:03 +0100 (BST)<BR> 
From: Simon Huggins, <A HREF="mailto:huggie@dial.pipex.com">
huggie@dial.pipex.com</A> 
<P>
Thanks for your tip which I saw in the Linux Gazette.
<P>
I think you may want to add the -mount switch to your command line though.
<P>
That way find won't go onto other filesystems except those listed.
<P>
Since on my system, / is ext2 and /hdd/c is vfat, without the mount switch,
find *WOULD* search the vfat partitions too. The mount switch limits it to
those partitions which you list with your grep/gawk combination
<P>
Hope that helps.

<P> <hr> <P> 
<!--================================================================-->

<a name="np"></a>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
Modem Connecting Speed
</H3>
Date: Wed, 22 Jul 1998 23:06:27 +0000<BR> 
From: NP, <A HREF="mailto:np@cableinet.co.uk">np@cableinet.co.uk</A> 
<P>
What speed is my modem connecting at ?
<P>
Got a new 56K modem and wondering how it's doing ?
Fed up with seeing "115200" ?
<P>
(This assumes Red Hat 5.0)...
<P>
Edit /etc/sysconfig/network-scripts/chat-ppp1
(or whatever chat file you use)
Insert a line:
<PRE> 
'REPORT' 'CONNECT'
</PRE> 
Edit /etc/sysconfig/network-scripts/ifup-ppp
<P>
Change this line:
<PRE> 
connect "/usr/sbin/chat $chatdbg -f $CHATSCRIPT"
</PRE> 
to:
<PRE> 
connect "/usr/sbin/chat $chatdbg -f $CHATSCRIPT" 2>/dev/console
</PRE> 
- to log to the console,
or:
<PRE> 
connect "/usr/sbin/chat $chatdbg -r /var/log/modem-speed -f $CHATSCRIPT"
</PRE> 
- to log to a file /var/log/modem-speed
<P>
You'll see entries like:
<PRE> 
chat:  Jul 22 22:31:06 CONNECT 52000/ARQ/V90/LAPM/V42BIS
</PRE> 
(If you're lucky!)
<P> 
NP

<P> <hr> <P> 
<!--================================================================-->

<a name="carlson"></a>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
Short Article on upgrading to SMP
</H3>
Date: Mon, 27 Jul 1998 16:06:08 -0500 (CDT)<BR> 
From: Andy Carlson, <A HREF="mailto:andyc@andyc.carenet.org">
andyc@andyc.carenet.org</A> 
<P> 
My son and I upgraded to an SMP machine this last weekend.  We
encountered some problems, and thought it might make an interesting
short article.  Use it if you can :). 
<P> 
About a month ago, I acquired two 4.3GB UW SCSI drives from IBM.  At the time, I was running an old Adaptec 1542 SCSI card (with no problems I might add), but it does not support Ultra Wide, and it was an ISA card.  In the process of looking at PCI Ultra Wide SCSI Cards (I was going to purchase an Adaptec 2940UW since I had some experience with them), I came across a Micronics W6-LI motherboard, dual Pentium Pro, with builtin Adaptec AIC7880 SCSI UW chip.  This is the story of that project.
<P>
My son and I started at 8:00 Saturday morning.  We took my existing ATX machine, which housed an Intel VS440 motherboard, 2GB IDE drive, 2GB SCSI drive, and SCSI cdrom apart.  We removed everything - Motherboard, Drives, Powersupply, etc.  This is because the Micronics board is big, and we wanted as few obstructions as possible while we put the motherboard in.  We put the motherboard, two 4.3GB UW drives, CDROM, and powersupply back in.  I only needed the data from the IDE drive, so we hooked that up also, but did not install it in the case.  We booted into the bios, and set a few things, including setting it to use the MP1.4 spec.  We inserted the Slackware 3.4 boot and root disks, and it booted just fine.  The hardware portion was a snap.
<P>
We set up the partitions on the two UW drives, and copied the data from the IDE drive to a partition on the frist UW drive.  We then started the installation of Linux.  We installed the Slackware 3.4, with kernel 2.0.30.  This went well.  We booted, and this came up.  We were anxious to try SMP, so we compiled a kernel with SMP, and this was where the problems started.  The machine would hang after running about a minute in SMP mode.  We decided to download a newer kernel, so we tried 2.0.34.  There is apparently a nasty bug in 2.0.34 on SMP machines.  The SCSI chip could not be reset, and was looping trying to do this.  We also tried 2.0.35, with no luck.  This behaviour happened whether we compiled for single or multiple processor.  The next step was to try a development kernel (this was the first time for me).  We downloaded 2.1.107, and installed it.  We also found that to use this kernel, we need updated binutils, modutils, libc, ld.so, procps, procinfo, and mount.  The upshot of this was, that 17 hours after we started, we had a running multiprocessor machine.
<P>
Some things to keep in mind:
<ul>
<li>SMP is turned on by uncommenting the SMP=1 line in the kernel Makefile (this was unnecessary in the developement kernel - it was on by default)
<li>Have as many things downloaded as you can think of.  It never occurred to me that it would be handy to have some newer kernels already on the hard drive.
<li>Read the doc for the development kernels carefully - we missed some of the software that needed to be upgraded.
<li>Starting with 2.1.102 development kernel, IP Masquerading was changed.  The doc for the new IPCHAINS program is at http://www.adelaide.net.au/~rustcorp/ipfwchains
</ul>

<P> <hr> <P> 
<!--================================================================-->

<a name="gushee"></a>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
Cross-platform Text Conversions
</H3>
Date: Thu, 30 Jul 1998 14:28:37 +0900<BR> 
From: Matt Gushee, <A HREF="mailto:matt@it.osha.sut.ac.jp">
matt@it.osha.sut.ac.jp</A> 
<P> 
Well, I had some text files that I needed to convert from UNIX to DOS
format. Downloaded the 'unix2dos' program ... and discovered to my
horror that it was an A.OUT BINARY! Thought they'd purged all of those 
from the archives ;-) But seriously, I couldn't run the program, so I
came up with a Tcl script to do the job. It can convert text files in
any direction between UNIX, DOS and Mac formats. It has only been
tested w/ Tcl 8.0, but since it's very simple, I imagine it'll work
with earlier versions too. It has a small bug: when converting from
DOS format, it adds one extra newline at the end of the file.
<P> 
Why Tcl? Well ...
<ul>
<li>I'm sure it's possible to do these conversions with sed or even
bash; it might even be simple once you know the trick. But after
several hours of reading man pages and experimenting, I couldn't
figure out how.

<li>Didn't feel like dusting off my old Perl book.

<li>Tcl is cool.

<li>It turned out to be really easy to do this in Tcl.
</ul>
To use the script, you should:
<ol>
<li>If necessary, edit the pathname for tclsh.

<li>Save it wherever you want to, with any name (I call it
textconv.tcl), and make it executable.

<li>symlink it to any or all of the following names, depending on which 
conversions you want to do, in a directory in $PATH: 
<pre>
d2m	d2u	m2d	m2u	u2d	u2m
</pre>
These names must be exactly as shown in order for the script to work.

<li>To use, type the appropriate command with a source file and
destination file as arguments. For example, to convert a Mac text file 
to UNIX format:
<pre>
$ m2u macintosh.txt unix.txt
</PRE> 
</ol>
That's it! Hope you find it useful.

<pre>
------ cut below this line ------------------------------
#!/usr/bin/tclsh

# capture the command name that invoked us and the
# source and destination filenames
set convtype $argv0
set infile [lindex $argv 0]
set outfile [lindex $argv 1]

set inchannel [open $infile "r"]
set outchannel [open $outfile "w"]

# according to the command name, set the end-of-line
# and end-of-file characters to the appropriate values
switch -glob -- $convtype {

    *2d {
	fconfigure $outchannel -translation "crlf" -eofchar "\x1a"
    }

    *2m {
	fconfigure $outchannel -translation cr
    }

    *2u {
 	fconfigure $outchannel -translation lf -eofchar ""
    }

    default {
	error "Invalid command name. This script must be \n\
invoked through a symbolic link with\n one of the following \
names:\n d2m, d2u, m2d, m2u, u2d, or u2m."
    }
    
}

while {[gets $inchannel line] &gt;= 0} {

    # if converting from DOS, lose the end-of-file character
    if {[string match "*d2*" $convtype]} {
	set line [string trimright $line "\x1a"]
    }

    puts $outchannel $line

}

close $inchannel
close $outchannel
#------------ end Tcl script--------------------------------
</pre>

Matt Gushee
Oshamanbe, Hokkaido, Japan



<P> <hr> <P> 
<!--================================================================-->
<center>Published in <I>Linux Gazette</I> Issue 31, August 1998</center>
<P> <hr> <P> 
<!--================================================================-->
<A HREF="./index.html"><IMG SRC="../gx/indexnew.gif" ALT="[ TABLE OF 
CONTENTS ]"></A> <A HREF="../index.html"><IMG SRC="../gx/homenew.gif" 
ALT="[ FRONT PAGE ]"></A> <A HREF="./lg_mail31.html"><IMG SRC="../gx/back2.gif" ALT=" Back "></A>
<A HREF="./lg_bytes31.html"><IMG SRC="../gx/fwd.gif" ALT=" Next "></A>

<P> <hr> <P>
<H5>This page maintained by the Editor of <I>Linux Gazette</I>,
<A HREF="mailto:gazette@linuxgazette.net">gazette@linuxgazette.net</A><BR> 
Copyright &copy; 1998 Specialized Systems Consultants, Inc. </H5> 
<P> 
<!--startcut ==========================================================-->
</body> 
</html>
<!--endcut ============================================================-->



<html>
<head>
<link href="../lg.css" rel="stylesheet" type="text/css" media="screen, projection" />
<title>
Linux Gazette : February 2006 (#123) 
</title>

<style type="text/css" media="screen, projection">
<!--

.twdtarticle {
	width: 84%;
	/* margin:0px;
	left:0px; */
}

#twdtbody {
/*
	margin-left:0px;
	margin-right:0px;
*/
}

.twdtarticle h1 {
	font-size:19px;
	text-align:center;
}

.lgcontent {
        width: 84%;
        margin-top: 30px;
        /* left:0px; */
}

-->
</style>


</head>

<body id="twdtbody">


<img src="../gx/2003/newlogo-blank-200-gold2.jpg" alt="Linux Gazette" id="twdtlogo"/>
<p id="fun">...making Linux just a little more fun!</p>




<div class="content lgcontent">

<h2>February 2006 (#123):</h2>

<ul>


	<li><a href="#lg_mail">The Mailbag</a>

	<li><a href="#bechtel">Re-compress your gzipp'ed files to bzip2 using a Bash script (HOWTO)</a>, by <i>Dave Bechtel</i></li>

	<li><a href="#jesslyn">uClinux on Blackfin BF533 STAMP - A DSP Linux Port</a>, by <i>Jesslyn Abdul Salam</i></li>

	<li><a href="#smith">A Short Tutorial on XMLHttpRequest()</a>, by <i>Bob Smith</i></li>

	<li><a href="#vishnu">Configuring Apache for Maximum Performance</a>, by <i>Vishnu Ram V</i></li>

	<li><a href="#collinge">HelpDex</a>, by <i>Shane Collinge</i></li>

	<li><a href="#lg_launderette">The Linux Launderette</a>

	<li><a href="#lg_backpage">The Backpage</a>, by <i>Ben Okopnik</i></li>

</ul>

</div>




<br />


<div class="content lgcontent">

<a name="lg_mail"></a>
<h1>The Mailbag</h1>


</b>
</p>


<p>
<HR>
<center>
<BIG><STRONG><FONT COLOR="maroon">HELP WANTED : Article Ideas</FONT></STRONG></BIG>
<BR>
<STRONG>Submit comments about articles, or articles themselves (after reading <a href="../faq/author.html">our guidelines</a>) to <A HREF="mailto:gazette@linuxgazette.net">The Editors of <i>Linux Gazette</I></A>, and technical answers and tips about Linux to <A HREF="mailto:tag@linuxgazette.net">The Answer Gang</A>. 
</STRONG>
</center><HR>
<UL>
<!-- index_text begins -->
<li><A HREF="#wanted.1"
	><strong>Running Apache and AOLServer Together</strong></a>
<li><A HREF="#wanted.2"
	><strong>Ultra-cool</strong></a>
<li><A HREF="#wanted.3"
	><strong>public ntp time server clusters</strong></a>
<li><A HREF="#wanted.4"
	><strong>tput cwin question</strong></a>
<!-- index_text ends -->
</UL>
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="wanted.1"></A><HR WIDTH="75%" ALIGN="center"> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/envelope.gif">
<FONT COLOR="navy">Running Apache and AOLServer Together</FONT></H3>
Sun, 15 Jan 2006 18:25:11 +0000
<BR>Martin O'Sullivan (<a href="mailto:tag@linuxgazette.net?cc=jimregan@o2.ie&amp;cc=martin_osullivan@vodafone.ie&amp;subject=%20Re%3A%20%5BLG%20123%5D%20help%20wanted%20%231">martin_osullivan from vodafone.ie</a>)

<BLOCKQuote>
<STRONG>
Hi Jimmy
<br>this sounds like something you would know the answer to.
</STRONG></BLOCKQuote>
<P>
Short answer, no. I'm cc:ing the Answer Gang -- someone might have done
something similarly insane once 
<IMG SRC="../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
</P>
<P><STRONG>
Running <A HREF="http://www.apache.org/">Apache</A> and AOLServer Together
</STRONG></P>
<P><STRONG>
I want to do the following
<br>Run two web sites off one server using two different http daemons
</STRONG></P>
<P><STRONG>
1 Apache listening on port 80
<br>2 AOLServer listening on port 8080
</STRONG></P>
<P><STRONG>
The apache server will be accessed by using url <A HREF="http://s1.com"
	>http://s1.com</A>
<br>The AOLServer will be accessed by using url <A HREF="http://s2.com"
	>http://s2.com</A>
</STRONG></P>
<P><STRONG>
The Names s1.com and s2.com are pointing at the same IP Address.
</STRONG></P>
<P><STRONG>
If apache gets a request for www.s1.com it deals with it.
<br>If apache gets a request for www.s2.com it says not for me and
Reads its proxy entry, which tells it go to AOLServer on port 8080
</STRONG></P>
<P><STRONG>
The Proxy stuff is working on apache.
</STRONG></P>
<P><STRONG>
Problem apache won't do this for me (I not sure if this scenario is even
possible)
<br>My entry in the apache conf file is as follows.
</STRONG></P>

<pre><strong>ProxyRequests Off
&lt;Proxy *&gt;
    Order deny,allow
    Allow from all
&lt;/Proxy&gt;
ProxyPass /s1.com http://s1.com:80/
ProxyPass /s2.com http://s2.com:8080/
</strong></pre>
<P><STRONG>
Why such a ridiculous set-up (Very long story)
<br>I know about apache Virtual Hosting option but can't use it in this
situation.
Can anyone help?
<A HREF="http://forums.openhosting.com/viewtopic.php?t=105"
	>http://forums.openhosting.com/viewtopic.php?t=105</A>
</STRONG></P>
<P><STRONG>
It has been posted to the following forum
<A HREF="http://www.openacs.org/forums/message-view?message%5fid=361728"
	>http://www.openacs.org/forums/message-view?message%5fid=361728</A>
<A HREF="http://forums.openhosting.com/viewtopic.php?t=105"
	>http://forums.openhosting.com/viewtopic.php?t=105</A>
</STRONG></P>
<P><STRONG>
Martin O'Sullivan
web: <A HREF="http://martinri.freeshell.org"
	>http://martinri.freeshell.org</A>
E-mail <A HREF="mailto:martin_osullivan@vodafone.ie"
	>martin_osullivan@vodafone.ie</A>
</STRONG></P>

<!-- end 1 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="wanted.2"></a><HR WIDTH="75%" ALIGN="center"> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/envelope.gif">
<FONT COLOR="navy">Ultra-cool</FONT></H3>
Tue, 3 Jan 2006 05:55:54 -0500
<BR>Benjamin A. Okopnik (<a href="mailto:tag@linuxgazette.net?cc=tag@lists.linuxgazette.net&amp;cc=ben@linuxgazette.net&amp;subject=%20Re%3A%20%5BLG%20123%5D%20help%20wanted%20%232"><em>LG</em> Editor</a>)


<blockquote><font color="#000066">
	[Heather] Encountering anything that you find is such a cool Thing To Have (if
you're a linux sort) that you just wish you had three of it for your birthday?
Actually, hearing that somebody not only got some new
at-the-fringe-of-linuxing thing like this, and how they got to using it,
could indeed <EM>Make Linux Just A Little More Fun</EM> - check out our
Author's FAQ and then send article ideas to articles@ where our articles
team can take a look.
</font></blockquote>
<P>
In the "not (yet) Linux" category: this is <em>  the  </em> cool gadget of the year
- tablet computing on paper. I see some very, very interesting possibilities
in the future for this thing if it gets into the mainstream.
</P>
<P>
<A HREF="http://www.mobilityguru.com/2005/12/19/pentop_computing_is_more_than_a_kids"
	>http://www.mobilityguru.com/2005/12/19/pentop_computing_is_more_than_a_kids</A>
<A HREF="http://www.flypentop.com"
	>http://www.flypentop.com</A>
</P>
<P>
* Ben Okopnik
</P>
<HR width="10%" align="center">
<blockquote><font color="#000066">
	[Heather] From the awwwwwwwwwwwwwwwwwwwwww 
<IMG SRC="../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle"> 
<IMG SRC="../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle"> 
<IMG SRC="../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle"> department:
</font></blockquote>
<P>
"This project provides 'executables' that enable you to make your own
soft-toy Linux penguin. To put it straight: You can find sewing
patterns and a community to sew your own soft toy or stuffed Linux
Tux penguin here."
</P>
<P>
<A HREF="http://www.free-penguin.org"
	>http://www.free-penguin.org</A>
</P>
<HR width="10%" align="center"><P>
Saw this here: <A HREF="http://www.tenslashsix.com/?p=102"
	>http://www.tenslashsix.com/?p=102</A> -- scroll down to the
picture of the gadget sitting beside a beer bottle -- another USB
powered mini-server.
</P>
<P>
It's a Blackdog (<A HREF="http://www.projectblackdog.com"
	>http://www.projectblackdog.com</A>), and uses the
Linux-USB Gadget stuff (<A HREF="http://www.linux-usb.org/gadget"
	>http://www.linux-usb.org/gadget</A>) to do Ethernet
over USB and USB Mass Storage. It also comes with XMing
(<A HREF="http://freedesktop.org/wiki/Xming"
	>http://freedesktop.org/wiki/Xming</A>) so you can use X from Windows.
</P>

<blockquote><font color="#000066">
	[Heather] Anybody wanna try putting a USB gadget-computer inside of Tux and then
using one of those odd pens as a real data entry tool to take good bits
back to your penguin?  Glory awaits!
</font></blockquote>

<!-- end 2 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="wanted.3"></A><HR WIDTH="75%" ALIGN="center"><P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/envelope.gif">
<FONT COLOR="navy">public ntp time server clusters</FONT></H3>
Mon, 23 Jan 2006 11:56:41 -0500
<BR>Suramya Tomar (<a href="mailto:tag@linuxgazette.net?cc=tag@lists.linuxgazette.net&amp;cc=security@suramya.com&amp;subject=%20Re%3A%20%5BLG%20123%5D%20help%20wanted%20%233">The <em>LG</em> Answer Gang</a>)

<P>
Hi Everyone,
</P>
<P>
Found the following during my one of my aimless wandering sessions on
the web and thought that it was interesting enough to share with you all.
</P>
<P>
<A HREF="http://www.pool.ntp.org"
	>http://www.pool.ntp.org</A>: Public ntp time server for everyone
</P>
<P>
Quote from Site:
</P>

<TABLE WIDTH="95%" BORDER="1" BGCOLOR="#FFFFCC"><TR><TD>
<p align="center">...............</p>
<BLOCKQuote>
The pool.ntp.org project is a big virtual cluster of timeservers
striving to provide reliable easy to use NTP service for millions of
clients without putting a strain on the big popular timeservers.
</BLOCKQuote><p align="center">...............</p>
</TD></TR></TABLE>
<P>
I would have shared my ntp server if I was running one and since one of
the requirements is that your IP has to be a static IP I can't use my
home system to run one and share it (Its IP hasn't changed in a while
but its not static 
<IMG SRC="../gx/dennis/unsmily.gif" ALT=":(" 
		height="24" width="20" align="middle"> ). But if any of you nice people feel like sharing
then please feel free to join the cluster. I think its a worthwhile project.
</P>
<P>
Well this is all for now. Hope you found this useful.
</P>
<P>
Thanks,
<BR>Suramya
</P>

<!-- end 3 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="wanted.4"></A><HR WIDTH="75%" ALIGN="center"> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/envelope.gif">
<FONT COLOR="navy">tput cwin question</FONT></H3>
Sun, 5 Feb 2006 22:12:36 -0700
<BR>Mike Wright (<a href="mailto:tag@linuxgazette.net?cc=tag@lists.linuxgazette.net&amp;cc=mike.wright@mail.com&amp;subject=%20Re%3A%20%5BLG%20123%5D%20help%20wanted%20%234">mike.wright from mail.com</a>)

<P>
Hi, I have been trying to figure out exactly what the 'cwin' option to the tput
command really means.
</P>
<P>
What I'm hoping that it will let me do is to create another window in the
current terminal using a section of the screen to output listings from
different commands that will be executed from numbered menu options. And if the
output is several screens then it can be presented a few lines at a time to the
user with the option to page down through the many screens of output while not
disturbing the menu options at the top of the screen nor the status bars at the
bottom of the screen.
</P>
<P>
If you could provide an example of how to use the 'cwin' option and 'wingo'
option to the tput command I would be so happy. And I would appreciate it very
much. I've read all of the documentation that I have been able to find and
either the documentation for these two options doesn't exist or nobody uses
these two options.
</P>
<P>
Any help that you can provide with this will be greatly appreciated.
</P>
<P>
Here is an example of how the screen would look if I could do what I wanted to
do.
</P>

<blockquote><pre>
Please make your selection:



1. List all VxVM Volumes

2. List all VxVM Disk Groups

3. List all VxVM Disks

4. Quit


Output of command selection # 2
******************************************************************************

*
datadg
*

*
syslogsdg
*

*
inventorydg1
*

*
inventorydg2
*

*
inventorydg3
*

* [ Press the space bar to page down ]                                        *

******************************************************************************


Current Time: 3:19 AM   Hostname: server1



F1 DiskSuite                     F2 VxVM                        F3 Exit

</pre></blockquote>

<blockquote><font color="#000066">
	[Heather] Your kindly editor suspects the borders of this screen have been mangled
by our mailreaders, nonetheless ... it's genuinely interesting stuff.  I
recall that a long while back the text form of YaST (SuSE's installer
and admin tool) used tput, but I don't know if this is still the case.
</font></blockquote>
<blockquote><font color="#000066">If anyone would like to tackle an article demystifying tput - or even
modern curses programming, for that matter - drop us a line!
</font></blockquote>
<P>
Thank you.
</P>
<P>
Sincerely,
</P>
<P>
Stale Ruffles
</P>

<!-- end 4 -->
<HR>
<center>
<BIG><STRONG><FONT COLOR="maroon">GENERAL MAIL</FONT></STRONG></BIG>
<BR>
</center><HR>
<UL>
<!-- index_text begins -->
<li><A HREF="#mailbag.1"
	><strong>reader comments to articles</strong></a>
<li><A HREF="#mailbag.2"
	><strong>KUDOS - 1st TIME READER, IMPRESSED!</strong></a>
<li><A HREF="#mailbag.3"
	><strong>Slashdotted!</strong></a>
<li><A HREF="#mailbag.4"
	><strong>Re: "Stepper motor driver for your Linux Computer" (Sreejith</strong></a>
<!-- index_text ends -->
</UL>
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="mailbag.1"></A> <HR WIDTH="75%" ALIGN="center"><P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/envelope.gif">
<FONT COLOR="navy">reader comments to articles</FONT></H3>
Tue, 23 Jan 2006 23:38:07 -0500
<BR>Edgar_Howell (<a href="mailto:gazette@linuxgazette.net?subject=%20Re%3A%20%5BLG%20123%5D%20mailbag%20%231">Edgar_Howell from web.de</a>)

<P>
Greetings,
</P>
<P>
Once again a couple of readers have responded with very useful
comments, well worth making available to other readers.
</P>
<P>
1. CUPS Password
</P>
<P>
A reader who didn't want public mention let me know that the
following command takes care of my problem with the CUPS password:
</P>

<blockquote><pre>   lppasswd -a root -g sys
</pre></blockquote>
<P>
He suggests entering root's password, when asked.
</P>
<P>
2. Installation Software on External Media
</P>
<P>
And Dennis Kibbe of the Phoenix Linux Users Group pointed out
that for an additional $10 Dell will in fact provide the WinXP
Installation CD.
</P>
<P>
To be honest I don't know whether that isn't an option on this
side of the pond or I just didn't know about it.  Windows
awareness is not one of my strengths.
</P>
<P>
Ignoring philosophical and ethical considerations, that certainly
is a far more pragmatic approach and I almost certainly would
have coughed up the $10.
</P>
<P>
3. Installation Software, part 2
</P>
<P>
Recently a colleague gave me an article dealing with the problem
of installation media and the suggestion in it might be of interest
to anyone in a similar situation, although how long this might
remain valid is anyone's guess.  Note that this addresses the
operating system only, not any other software the manufacturer
of the hardware might have included.
</P>
<P>
Basically the premise is that all that is needed is the branch "i386"
from either some partition on the hard drive or a "recovery CD".
Inside this directory is a DOS executable, <TT>"WINNT.EXE</TT>", that installs
the operating system from the other contents of that directory.
</P>
<P>
Aparently there are complications in the boot process such that
one needs a particular boot program, available on the CDs with earlier
versions, which I of course don't have, so no way to make a
bootable installation medium.
</P>
<P>
It was also mentioned that this directory should be over 420 MB in
size and contain close to 6000 files.  What I found was almost
800 MB and that clearly wouldn't fit on a CD.  So I tar'd it
together and pushed it over the network onto another machine.
</P>
<P>
There I blew away everything under '98 that didn't look like DOS,
changed into the directory "i386" and then started the installer,
<TT>WINNT.EXE.</TT>  This produced a DOS-style screen with the heading
"Windows XP Setup" and a question about the installation directory,
which I left as it was.  Another screen or two later it complained
about not finding 593 MB of free disk space and broke off the
installation.  But that was really all I wanted to see -- I have
no use for this software anywhere else.
</P>
<P>
I don't wish on anyone the headache of trying to teach Windows some
manners.  But should co-existence become necessary for you, I hope
this information might be of help for however long that situation
may last.  And best wishes for a quick recovery.
</P>
<P>
*** DISCLAIMER ***
</P>
<P>
This procedure may be illegal where you live!
</P>
<P>
Here, in Germany, many years ago the courts decided that there is
no inherent relation between software and hardware and that one
can sell a used software license as legitimately as used hardware.
This requires, of course, retaining <EM>no</EM> copies of the software.
</P>
<P>
From this it seems reasonably to follow that one may move any
software from any hardware to any other, as long as at no time
the number of valid licenses is exceeded.  But prudent data
processing practice dictates at least one back-up copy of all
data and software.  However, since over-riding copy-protection and
encryption is a violation of the law here, it almost certainly is
illegal to do this with software so protected.
</P>
<P>
I'm not a lawyer.  You need to know the rules on your own turf.
</P>
<P>
ech
</P>

<!-- end 1 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="mailbag.2"></A> <HR WIDTH="75%" ALIGN="center"><P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/envelope.gif">
<FONT COLOR="navy">KUDOS - 1st TIME READER, IMPRESSED!</FONT></H3>
Fri, 3 Feb 2006 05:07:29 -0600
<BR>rion (<a href="mailto:gazette@linuxgazette.net?subject=%20Re%3A%20%5BLG%20123%5D%20mailbag%20%232">rion from mchsi.com</a>)

<P>
for the text, your pages d/l quick!  
<IMG SRC="../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
most "help sites" sugar too much..
</P>
<P>
i found:
issue76/tag/9.html  ;p
sigkill 13 &amp; the 'local' runs only in a func..
i remember reading that man, earlier
</P>
<P>
..hmm latenight bragging time!
</P>

<blockquote><font color="#000066">
	[Heather] Some not linuxy things, snipped.
</font></blockquote>
<P>
moreover..
<A HREF="http://linuxgazette.net/issue60/issue60.html#tag/10"
	>http://linuxgazette.net/issue60/issue60.html#tag/10</A>
is down..  
<IMG SRC="../gx/dennis/unsmily.gif" ALT=":(" 
		height="24" width="20" align="middle"> ..i had a question bout gpm &amp; blocks of solid color invading my
screen..!!! well, i ctrl-key it, but it makes..  hulk smash.. :sigh:
</P>
<BLOCKQuote>
:Turns the channel:
</BLOCKQuote>
<P>
i think ill go grab some flashgames or something..  later!
</P>
<P>
chris
</P>

<blockquote><font color="#000066">
	[Heather] Thanks Chris, for taking a moment to write!  Have fun gaming!
</font></blockquote>

<!-- end 2 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="mailbag.3"></A><HR WIDTH="75%" ALIGN="center"><P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/envelope.gif">
<FONT COLOR="navy">Slashdotted!</FONT></H3>
Fri, 06 Jan 2006 22:35:16 +0000
<BR>Jimmy O'Regan (<a href="mailto:gazette@linuxgazette.net?subject=%20Re%3A%20%5BLG%20123%5D%20mailbag%20%233">The <em>LG</em> Answer Gang</a>)

<P>
<A HREF="http://linux.slashdot.org/linux/06/01/06/1539235.shtml?tid=198&amp;tid=106"
	>http://linux.slashdot.org/linux/06/01/06/1539235.shtml?tid=198&amp;tid=106</A>
</P>
<P>
"From the some-of-this-content-may-be-inappropriate-for-young-readers dept."
</P>
<P>
Yes, "Benchmarking Linux Filesystems Part II" got us back onto <A HREF="http://www.slashdot.org/">Slashdot</A>,
to a page almost entirely filled with comments bitching about how the
benchmarks were done. (But, it wouldn't be Slashdot...)
</P>

<!-- end 3 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="mailbag.4"></A><HR WIDTH="75%" ALIGN="center"> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/envelope.gif">
<FONT COLOR="navy">Re: "Stepper motor driver for your Linux Computer" (Sreejith</FONT></H3>
Sat, 14 Jan 2006 09:04:43 -0500
<BR>Jan-Benedict Glaw (<a href="mailto:gazette@linuxgazette.net?subject=%20Re%3A%20%5BLG%20123%5D%20mailbag%20%234">jbglaw from lug-owl.de</a>)
<BR>Question by The Answer Gang , sreejithsmadhavan@yahoo.com (tag from lists.linuxgazette.net)

<P>
[Ben] Hi, Jan-Benedict!
</P>
<P>
I'm going to CC this to the author and The Answer Gang
</P>
<P><STRONG>
Hi!
</STRONG></P>
<P><STRONG>
I've read that article (<A HREF="http://linuxgazette.net/122/sreejith.html"
	>http://linuxgazette.net/122/sreejith.html</A>) and
I wonder who reviewed that one.
</STRONG></P>
<P>
[Ben] Well, David S. Richardson and I both proofed it for grammatical and
stylistic errors, but unfortunately, I don't think we have anyone on the
proofing team who can do good technical review for C: my own C-relevant
experience, for example, was back in the days of _DOS._ Want to
volunteer? 
<IMG SRC="../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
</P>
<P><STRONG>
Uhm, yes, I think so.
</STRONG></P>

<blockquote><font color="#000066">
	[Heather] Hooray!
</font></blockquote>
<P>
[Ben]
Great! I'll contact you off-list, then.
</P>
<P><STRONG>
The wiring diagrams and timing diagrams for a stepper motor are indeed
correct and helpful, but the module's source code isn't, for numerous
reasons. Even the minimalistic module is plain wrong--nowadays.
</STRONG></P>
<P><STRONG>
Let's look at the source:
</STRONG></P>
<BLOCKQuote><STRONG>
* "#define MODULE"
</STRONG></BLOCKQuote>
<P><STRONG>
You realized that this is 2.2.x material? We're at 2.6.x right
now!
</STRONG></P>
<P>
[Ben]
I note that he did specify that this was for a 2.4.24 kernel. That's
why, when I tried to compile the code and it failed (I'm at 2.6.13.3,
myself), I let it go.
</P>
<P><STRONG><FONT COLOR="#000066"><EM>
* "#include &lt;asm/uaccess.h&gt;"
</EM></FONT></STRONG></P>
<P><STRONG>
We're driving a 8255, that's not rocket science. There's
absolutely no need to write just another driver for a normal PC
parport: there is one already. To be exact, there's a complete
framework to drive anything that has a DB-25 parport connector
outside at the box, irrelevant by what kind of chip this is driven
(thing SGI machines, Amigas, PowerPC, ...). This module would only
work on a PeeCee, nothing else.
</STRONG></P>
<P><STRONG><FONT COLOR="#000066"><EM>
* static int pattern[2][8][8]
</EM></FONT></STRONG></P>
<P><STRONG>
...isn't even initialized fully. Also, some macros could probably
help making all the numbers readable...
</STRONG></P>
<P><STRONG>
* MOD_INC_USE_COUNT <TT>/</TT> MOD_DEC_USE_COUNT
Again, this is 2.2.x material and should be dead since long ago.
</STRONG></P>
<P><STRONG><FONT COLOR="#000066"><EM>
* Port access to the 8255
</EM></FONT></STRONG></P>
<P><STRONG>
This module doesn't register its I/O space, so it could fuck up a
already loaded parport driver.
</STRONG></P>
<P><STRONG>
* Last but not least: it doesn't even work!
...because it doesn't actually access the hardware at all!
</STRONG></P>

<blockquote><font color="#000066">
	[Heather] As noted later, it does work for Sreejith, for a limited case, which
alas, you readers probably don't have.
</font></blockquote>
<P><STRONG>
If this had been published some 6 years ago, it would probably fall
under the "this is a quick'n'dirty hack" rule, but today, I guess
something like that shouldn't be published at all, because it aims
towards quite a wrong direction. Not to imagine that anybody might
think this is good programming style...
</STRONG></P>
<P>
Well... if you can show a better way to do this, I'm sure that our
readers would appreciate it - and we'd be glad to publish it as a
followup to the article. Otherwise, I don't know that there's anything
we can do to improve the situation.
</P>
<P>
Regards,<br>
* Ben Okopnik *
</P>
<P>
[jra]
Publish his response, and put a tag pointing to it on the original
article?
</P>
<P>
[thomas]
Well, yes.  This is something we've always done.  
<IMG SRC="../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
</P>
<P>
[Ben]
Yeah, but that's not a <EM>fix</EM> - just a problem description. I'm trying
for both. Ya know: LG, all about reader participation... 
<IMG SRC="../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
</P>
<P>
[jra]
True.  But even a total failure can always serve as a bad example.  
<IMG SRC="../gx/dennis/smily.gif" ALT=":-)" 
		height="24" width="20" align="middle">
</P>
<P><STRONG>
I've got some code around to access the ppdev API. With this, the
module isn't needed at all and thus the resulting application only
consists of simple and portable userland code.
</STRONG></P>
<P>
[Ben] I think that, even though the implementation is broken, the underlying
premise of Sreejith's article is valid; our readers would, in my
opinion, find it interesting to see a simple introduction on accessing
hardware by writing a module. Do you think that the article is
salvageable as it is (i.e., is it possible to make the code work -
regardless of whether another tool for it exists or not), or is it just
broken from the start?
</P>
<P><STRONG>
@Sreejith: <A HREF="http://lug-owl.de/~jbglaw/software/steckdose/steckdose.c"
	>http://lug-owl.de/~jbglaw/software/steckdose/steckdose.c</A> is
some code using the ppdev API to access the parport lines. Maybe you
want to have a look at that? I'd try to write some code driving a
stepper motor in full-step mode, but since I don't have one handy
right now, you'd need to test that.
</STRONG></P>
<P><STRONG>
The code mentioned above drives a shift register connected to a
parport (It is driving some home-made hardware; at the parallel
outputs of the shift register, there are relays switching my computers
on and off. That way I don't need to go down into the cellar to switch
a machine on or off 
<IMG SRC="../gx/dennis/smily.gif" ALT=":-)" 
		height="24" width="20" align="middle">
</STRONG></P>
<P><STRONG>
It is quite simple:
</STRONG></P>

<pre><strong>for (each bit to be pushed serially into the shift register) {
	put_one_bit_on_the_serial-in_data_line();
	rise_clock_line();
	lower_clock_line();
}
move_shift-state_into_output_latches();
</strong></pre>
<P><STRONG>
Because shift registers output their falling-out bit at the end, this
can be fed into the next shift register. That way, I can cascade a
dozens of these chips to control 100 lines.
</STRONG></P>
<P><STRONG>
Maybe something like that could even be presented as an article, but
to date I haven't production-level PCBs, but only hand-made ones.
</STRONG></P>
<P><STRONG>
MfG, JBG
</STRONG></P>
<P>
Jan-Benedict Glaw       <A HREF="mailto:jbglaw@lug-owl.de"
	>jbglaw@lug-owl.de</A>
</P>
<HR width="10%" align="center">
<blockquote><font color="#000066">
	[Heather] Ben gets an answer from the article author, with a bit of after-the-fact
concern about the original reasoning, and maybe a bit of self-abashment
about accepting it too close to deadline.
</font></blockquote>
<P>
On Wed, Jan 18, 2006 at 02:54:43AM -0800, Sreejith Nair wrote:
</P>
<P><STRONG>
Hello sir,
I noticed those serious mistakes in my article.
</STRONG></P>
<P>
[Ben] I would have appreciated it if you had said something about them when
submitting it rather than presenting them as useful code, then.
</P>
<P><STRONG>
Actually i did
this experiment as my Mini project in the 4th semester of my B Tech course(June
2003). At that time i was using 2.2 kernel and i learned the basics in the
same. But now i am working with Fedora core 1 (2.4.22 -1.2115.nptl). So what
happened is, i just modified the code for the new kernel and rectified the
compilation errors. And now i see....its a mixture of 2.2 and 2.4 things.
</STRONG></P>
<P><STRONG>
But it is a working code. I can control my toy stepper motor
with this code.
</STRONG></P>
<P>
[Ben] Unfortunately, it doesn't compile for me - even after I've taken out the
hard-coded kernel location in the INCLUDE line:
</P>

<blockquote><pre>ben@Fenrir:/tmp$ make
cc -O2 -DMODULE -D__KERNEL__ -W -Wall -I/usr/src/linux/include   -c -o stepper.o stepper.c
stepper.c:1:1: warning: "MODULE" redefined
&lt;command line&gt;:1:1: warning: this is the location of the previous definition
In file included from /usr/src/linux/include/linux/bitops.h:77,
                 from /usr/src/linux/include/linux/thread_info.h:20,
                 from /usr/src/linux/include/linux/spinlock.h:12,
                 from /usr/src/linux/include/linux/capability.h:45,
                 from /usr/src/linux/include/linux/sched.h:7,
                 from /usr/src/linux/include/linux/module.h:10,
                 from stepper.c:3:
/usr/src/linux/include/asm/bitops.h: In function 'find_first_bit':
/usr/src/linux/include/asm/bitops.h:339: warning: comparison between signed and unsigned

[ ~150 similar lines elided ]

make: *** [stepper.o] Error 1
</pre></blockquote>
<P><STRONG>
For testing, i was just printing the hex value to the console instead of
writing to
parallel port. For controlling stepper motor, the -printf("%d\n",pattern[i][j]
[k]); -
statement should be replaced with - outb(pattern[i][j][k],LPT_BASE); . Anyway
this is
a serious mistake and I deeply regret and apologize for that.
</STRONG></P>
<P>
[Ben] Well, we'll let our readers know not to expect this code to work, then;
publishing this exchange should do it. Fortunately, every cloud has a
silver lining: Jan-Benedict Glaw, who noticed the problem initially, has
agreed to review future C code for us so that this kind of thing doesn't
happen again.
</P>
<P><STRONG>
Nowadays, because of my workload, i am not able to explore
"The Linux World" that MUCH!... My intention was not to develop a professional
stepper motor driver as i know that there already exists a parallel port driver
in Linux. I just wanted to share the basics of device driver coding through an
example.
</STRONG></P>
<P>
[Ben] Sreejith, may I ask why you wrote this article in the first place?
</P>
<P>
Actually, never mind: the above question is best treated as rhetorical.
Instead, I'll just pretend that I'm having this exchange with
$AVERAGE_AUTHOR - a fellow who just wrote an article that failed in the
same way as yours did, and from whom I got the same above excuse when I
asked him about it (and to whom, unbeknownst to him, I've slipped a
bunch of truth serum in his morning tea.)
</P>

<blockQuote><ul>
<LI>Me: So, why'd you write this thing?

<LI>AA: So I could get recognition and respect for being a Cool
	   Kernel-Hacking Dude, of course! <EM>Then</EM> I'd be able to get all the
	   chicks! Oooh, look at the pretty colors...

<LI>Me: (making a note to decrease the dosage the next time) So what do
	   you think is going to happen NOW, after it's become obvious that
	   your code doesn't work?

<LI>AA: (in a mild panic) Umm, maybe I can make some really good excuses?
	   Maybe people who believe them will still think I'm cool...

<LI>Me: Uh-huh. And what do you think will happen when your excuses fall
 	   through, and people discover that you not only made a mistake,
	   but tried to cover it up?

<LI>AA: (full-blown panic, RUN AWAY!!!)
</ul></blockQuote>
<P>
Does this scenario look familiar?
</P>
<P>
The problem is that there's a "best effort" clause hidden in doing any
kind of work for the Open Source community. The coin of Open Source is
<em> respect  </em> - and when you put out less than your best effort, then that
coin might not only be a bit slow in coming, but might not appear at all
- and will disappear instantly when that respect is discovered to be
unearned. Note that I didn't say "will disappear when a mistake is
discovered" - everyone makes mistakes. The deciding factor is in how you
<EM>handle</EM> having made the mistake: making excuses such as "my intention
was not to develop a professional [application]" destroys the last
possibility of getting paid in that coin, whereas - for example -
admitting the error honestly and taking a few minutes to produce working
code that could be published as a corrective note the following month
would have salvaged some of the credit.
</P>
<P>
The staff here at LG put out their best effort to edit, format, and
publish the material that is submitted to us; I can guarantee you that
all of it is hard work, but despite that, excuses like "well, it's not a
professional publication" don't have much currency here.
</P>

<blockquote><font color="#000066">
	[Heather] We've grown increasingly towards professional traits over the years,
cover art and so on.  But we've had a formal editor ever since Marjorie
took over from John Fisk many years ago.  Sometimes we <EM>fail</EM> to edit
as professionally as we'd like - and sometimes what we are aiming for is
a homey, at a real person's desk kind of feeling - and we do it for love
of linux and not the money - but that shouldn't make the best effort a
sad one.
</font></blockquote>
<P>
[Ben] By that same
exact token, we expect that our authors - especially those submitting
code - have made <em>  their  </em> best effort to make sure that their code works
in the current Linux environment, and have done at least some minimal
testing.  Perhaps that assumption was unwarranted in this case, for
which I personally apologize to our readers (since I was the one who
accepted the article for publication); however, that <EM>is</EM> our default
expectation. I don't see how ANY interaction based on respect can imply
anything else.
</P>
<P>
Just as a relevant technical note, by the way: the 2.6 kernel has been
available for download since 17-Dec-2003 (according to the timestamp of
<A HREF="http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.0.tar.bz2"
	>http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.0.tar.bz2</A>) - I see
no reason why an article directed at kernel-related coding would cover
the 2.4 kernel as its primary target.
</P>

<blockquote><pre>* Ben Okopnik * Editor-in-Chief, Linux Gazette * http://linuxgazette.net *
</pre></blockquote>

<!-- end 4 -->
<HR>
<center>
<BIG><STRONG><FONT COLOR="maroon">GAZETTE MATTERS</FONT></STRONG></BIG>
<BR>
</center><HR>
<UL>
<!-- index_text begins -->
<li><A HREF="#gaz.1"
	><strong>Our Editor In Chief is now married!</strong></a>
<li><A HREF="#gaz.2"
	><strong>How to get linux gazette in pdf or ps format</strong></a>
<li><A HREF="#gaz.3"
	><strong>Talkback links</strong></a>
<!-- index_text ends -->
</UL>
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="gaz.1"></A><HR WIDTH="75%" ALIGN="center"> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/envelope.gif">
<FONT COLOR="navy">Our Editor In Chief is now married!</FONT></H3>
Sat, 28 Jan 2006 15:17:00 -0800
<BR>Heather Stern (<a href="mailto:gazette@linuxgazette.net?subject=%20Re%3A%20%5BLG%20123%5D%20gazette%20matters%20%231">The Answer Gang's Editor Gal</a>)

<P>
I'm very pleased to announce that our Editor In Chief, Ben Okopnik, has
married his dear Kat.
</P>
<P>
The wedding was delightful (give or take getting lost on the way there),
the music was fun, the food was fine, and the nearby outdoor gardens were
pretty, too.  Those of us present who did not immediately have to leave
again joined the happy pair afterwards at a nearby restaurant whose chef
is, in my not so humble opinion, rightly famous.
</P>
<P>
It was great.  Go see the <a href="lg_backpage.html">Back Page</a> for
a picture of the happy pair.
</P>
<P>
Rumors that his biggest client paid for the honeymoon turn out to be
halfway well founded in that they invited him to go for pay to the kind
of place that he and his bride would have been <EM>delighted</EM> to go to
anyway.  Smiles from the universe are always appreciated 
<IMG SRC="../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
</P>

<!-- end 1 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="gaz.2"></A><HR WIDTH="75%" ALIGN="center"> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/envelope.gif">
<FONT COLOR="navy">How to get linux gazette in pdf or ps format</FONT></H3>
Tue, 03 Jan 2006 17:49:18 +0530
<BR>Shirish Agarwal (<a href="mailto:gazette@linuxgazette.net?subject=%20Re%3A%20%5BLG%20123%5D%20gazette%20matters%20%232">shirishag75 from gmail.com</a>)

<P><STRONG>
Hi all,
</STRONG></P>
<P><STRONG>
I saw that one can get LG either as a single html or group of
html pages, I would like to have them in a self-contained ps, pdf or
even an openoffice document. The simple reason is that one can do this
off-line more easily. I did try to get this answer from the various
knowledge bases which u have mentioned on the site but wasn't able to
get even close to that. Hope u can help here &amp; maybe also update the
same in the knowledge base for future. Thanx in advance.
</STRONG></P>
<P>Shirish Agarwal
<br>Life is a dream Enjoy it!
<br>Creative Commons, Attribution
<br>Non-commercial, non-derivative
</P>
<DL><DT>[Rick Moen]
Well, I notice upon a quick search that you can use:
<DD><A HREF="http://directory.fsf.org/print/misc/html2pdf.html"
	>http://directory.fsf.org/print/misc/html2pdf.html</A>
</DL>

<P>[K.-H.]
<br>There is a little commandline tool named "html2ps" which will fetch e.g.
the TWDT page and convert it into a ps file.
for the current linuxgazette this would be:
<br><tt>html2ps -o test.ps -U <A HREF="http://linuxgazette.net/121/TWDT.html"
	>http://linuxgazette.net/121/TWDT.html</A></tt>
</P>
<P>
-U is supposed to generate the colored background (e.g. code) but
doesn't do it for me, and -D would generate DSC info so you can go back
and forward.
</P>
<P>
Using ps2pdf you can convert it again into a pdf file.
</P>
<P>
Otherwise there is always the print-to-file in your browser which
generates postscript as well (at least in Linux).
</P>
<P>
Hope that helps you along....
</P>

<!-- end 2 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="gaz.3"></A><HR WIDTH="75%" ALIGN="center"> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/envelope.gif">
<FONT COLOR="navy">Talkback links</FONT></H3>
Sat, 14 Jan 2006 09:17:00 -0500
<BR>Benjamin A. Okopnik (<a href="mailto:gazette@linuxgazette.net?subject=%20Re%3A%20%5BLG%20123%5D%20gazette%20matters%20%233"><em>LG</em> Editor</a>)
<BR>with a few replies by The Answer Gang (tag from lists.linuxgazette.net)

<P><STRONG>
Hey, everyone:
</STRONG></P>
<P><BLOCKQuote><STRONG>
What do you think of the idea of "Talkback" links at the top of each
article? Perhaps something like this:
</STRONG></BLOCKQuote></P>

<pre><strong>&lt;a href="mailto:tag@lists.linuxgazette.net?subject='Talkback:&lt;article_name&gt;'"&gt;
Discuss this article with The Answer Gang
&lt;/a&gt;
</strong></pre>
<P><STRONG>
It works on several different levels, I think.
</STRONG></P>
<P>
[Thomas]
This was trialed for a while when LG was at SSC.  It worked relatively
well for some articles, except that it tended to be abused by some (c.f.
my posting to TAG some years ago about someone wanting to know how to
change the oil in their car.)
</P>
<P><STRONG><CODE>
.
</CODE></STRONG></P>
<P>
[Rick]
How <em>do</em> you change the oil in your car?  
<IMG SRC="../gx/dennis/smily.gif" ALT=";-&gt;"
		height="24" width="20" align="middle">  
</P>
<P>
I think it's worth trying, Ben.
</P>
<P><STRONG>
Yeah, some clueless
people might use it to piggyback their own question into TAG, but they
can be pointed right back out (i.e., 'read "Asking Questions of The
Answer Gang" at &lt;<A HREF="http://linuxgazette.net/tag/ask-the-gang.html"
	>http://linuxgazette.net/tag/ask-the-gang.html</A>&gt;!'), and
anyone wanting to comment on a specific article can do so easily.
</STRONG></P>
<P><STRONG>
Thoughts?
</STRONG></P>
<P>
It wouldn't hurt to try, I suppose.  What's the worst that could happen?
At the moment, any specific article feedback is often forwarded to TAG
-- since a lot of it gets sent to the author directly.  So yeah... try
it.
</P>
<P>
-- Thomas Adam
</P>
<P>
[Pedro Fraile, one of the Answer Gang]
</P>
<P>
"Talkback" content at the old site did not go to the TAG list, and so
was lost when the site was transformed. With Ben's suggestion, any
useful comment or correction would appear in next month's issue and
would so be preserved.
</P>
<P>
Yes, I like it.
</P>

<blockquote><font color="#000066">
[Heather] Do you like it too?  Let us know!  Ok, so it may be a kind of skewed
sample, only people who bother to read all the way to the bottom of the
mailbag are going to answer.  But it's a fair question - will it be more
fun to have a fast link at the top?  That's what it's all about after
all - <EM>Making Linux Just A Little More Fun</EM> 
<IMG SRC="../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
</font></blockquote>

<!-- end 3 -->
<hr>
<CENTER><Font face="Helvetica"><STRONG>
This page edited and maintained by the Editors of <I>Linux Gazette</I><br>HTML script maintained by <A HREF="mailto:star@starshine.org">Heather Stern</a> of Starshine Technical Services, <A HREF="http://www.starshine.org/">http://www.starshine.org/</A>
</STRONG></Font></CENTER>
<hr>

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:123/lg_mail.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
<!-- *** END author bio *** -->




<div id="articlefooter">




<p>
Published in Issue 123 of Linux Gazette, February 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="bechtel"></a>
<h1>Re-compress your gzipp'ed files to bzip2 using a Bash script (HOWTO)</h1>
<p id="by"><b>By <A HREF="../authors/bechtel.html">Dave Bechtel</A></b></p>


</b>
</p>


<p>
<!-- <p>
Hi. :)  This is my first attempt at an article for The One True Linux Gazette
(.net, folks!), so please be gentle.
</p> -->

<p>
If you were incredibly lucky (like me), perhaps you received an external USB
hard drive for Christmas.  Or perhaps you have one lying around already,
with plenty of free space.  And perhaps you also read the <a
href="http://it.slashdot.org/article.pl?sid=05/12/26/1625225&amp;tid=185&amp;tid=218">recent
Slashdot article about compression software</a> and have lots of fairly
sizable gzipped files laying about.
</p>

<p>
After reading the comments in that article, I was dismayed to learn that my
favorite compression tool of choice (gzip) has no error-correction
capabilities.  While I deem it to be the best all-around for quick backups
with a decent compression ratio, gzip will choke if it gets a data error on
restore - and there's something to be said for data integrity.
</p>

<p>
So, having this nice shiny new USB external drive and some time on my hands, I
wrote a Bash utility script to re-compress gzip files to bzip2, using the
external drive.  It takes an order of magnitude longer to compress, but at
least I'll save some space and have a hope of recovering the compressed data
if things go wrong... Right??
</p>

<p>
My particular external drive is a 120-gig that came factory-formatted as a
single FAT32 partition.  Now, any Linux guru worth their salt knows that this
thing practically <strong>begs</strong> to be customized, since Fat32 has a
2GB(Linux) or 4GB(Windows) filesize limit - depending on who's writing to
it.
</p>

<p>
So, I fired up my Knoppix HD install and repartitioned it. 
Nothing fancy, just good old fdisk.
</p>

<p>Here's how it looks now:</p>

<pre>
$ fdisk -l /dev/sdb

Disk /dev/sdb: 255 heads, 63 sectors, 14593 cylinders
Units = cylinders of 16065 * 512 bytes

   Device Boot    Start       End    Blocks   Id  System
/dev/sdb1   *         1         1      8032   83  Linux
/dev/sdb2             2     14593 117210240    f  Win95 Ext'd (LBA)
/dev/sdb5             2        18    136552   82  Linux swap
/dev/sdb6            19      4999  40009882    c  Win95 FAT32 (LBA)
/dev/sdb7          5000      5622   5004247   83  Linux
/dev/sdb8          5623     14593  72059557   83  Linux
</pre>

<p>
(I did make a note of the fact that the factory-default was one big type "c",
in case I needed to go back to that.)
</p>

<p>
Notice the 40GB Fat32 partition.  In my other life (sssshhh!) I run Windows
2000 Professional - and was forcibly reminded that everything after Windows
ME has a 32GB partition size limit for formatting Fat32.  Note that the
limitation is on <strong>formatting</strong> - not
<strong>accessing</strong> - this is by design, and Microsoft has
publically admitted it.
</p>

<p>
After going through several free Windows tools for formatting and repartitioning
(and running into a brick wall), I eventually gave up on Windows 2000 formatting the
thing.  The vendor has a utility on their website to restore the drive to
factory-default partitioning, but that doesn't really help my intended use of
the drive.  I could have formatted it in Windows 98, but that's no fun - and it
would need a separate driver for the OS to recognize the drive.
</p>

<p>
So, rather than give up a perfectly usable 8GB, good old Linux to the rescue
again:
</p>

<pre>
$ mkdosfs -F 32 -v -n wdfat40 /dev/sdb6
</pre>

<p>
and reboot.
</p>

<p>
Presto!  Windows 2000 recognizes the drive just fine now, and it passes all the
chkdsk tests.  And for all you dual-booters out there, a wonderful utility
exists called Ext2IFS ( <a
href="http://www.fs-driver.org/">http://www.fs-driver.org/</a> ).  This
allows NT-based systems like Windows 2000 to access ext2/ext3 partitions just
like a regular drive - read/write, so no need for NTFS!
</p>

<p>
The Linux partitions were formatted like so:
</p>

<pre>
mke2fs -j -c -m1 -v /dev/sdbX
</pre>

<p>
Here are the /etc/fstab entries I created for the drive, BTW:
</p>

<pre>
/dev/sdb6  /mnt/wdfat40  auto
defaults,noauto,noatime,user,suid,noexec,uid=dave 0 0
/dev/sdb7  /mnt/wdlinux  ext3 defaults,noauto,noatime,rw 0 0
/dev/sdb8  /mnt/wdvast  ext3 defaults,noauto,noatime,rw 0 0
</pre>

<p>
Note the "uid=dave" in that first line.  That's so my non-root user account
will have write access to the drive by default.
</p>

<p>
Now onto the good part - the "<a
href="misc/bechtel/rezip.txt"><tt>rezip</tt></a>" <code>Bash</code> script.
</p>

<p>
At first, I started out by writing a fairly basic script with a simple
function call and manually-entered filenames.  Then I sat down and took
another look at it - and practically rewrote it from scratch, with some
features that occurred to me after several test runs.
</p>

<p>
<code>rezip</code> Currently Features:

<ul>
<li> Uses a simple text file of paths and filenames for input -- so you can save
the results of "find" to a file, run rezip, and the files will be
re-compressed one at a time, with a running log and no user intervention (as
long as there's free space on the destination drive.)  Example:

<pre>
$ find /mnt/bkps -name \*.gz &gt; ~/rezipp-files.txt &amp;&amp; rezip
</pre>

<li> Automatically sorts the files to process by size, so the biggest files are
last.  This allows more work to get done up front.  (Believe me, this is a
consideration when your fastest computer is a 900MHz AMD Duron)

<li> Skips files less than 50MB in size (user defined)

<li> Recreates existing directory structure on the external drive and leaves the
original .gz file in place

<li> By default, does not overwrite existing .bz2 files so previous work doesn't
get run over.  This feature was added after I found a bug where ^C won't stop
the script right away, and several hours of .bz2 output were lost. :(

<p>
<strong>Note</strong>: if you abort the script and then re-run it, you have to manually
delete the last (partial) .bz2 file it was working on, or that will be skipped
as well.  This is where the log comes in handy. :)
</p>

<li> Heavily commented and fairly easy-to-understand (I hope!) source code

<li> Generates a log file, including start/end times per-file

<li> ...And last but not least, rezip is released under a GPL license. :)
</ul>

<p>
-- KNOWN BUG(s):
</p>

<ul>
<li> The PROPER way to kill "rezip" when it is running, is to press Ctrl-Z, then
type

<pre>
$ kill %jobnumber
</pre>

-- Example:

<pre>
 ^Z
[1]+  Stopped                 rezip
'  kill %1 '
 [1]+  Terminated              rezip
</pre>

<br>
If you DON'T do it that way, trust me - wacky things can happen.  I.e., it will
skip to the next file, and gzip/bzip2 will still be running in the background.
Don't use ^C. 

<li> The logger function (logecho) has trouble echoing stars (" * "), even when
they are quoted.

<li> The log file can get fairly large after several runs.  If you want to reset
it, either "rm" it or

<pre>
$ &gt;rezip.log
</pre>

will reset it to 0 length.

<br>
<strong>WARNING</strong>: If .gz files that were listed in rezipp-files.txt
are deleted/moved between runs, you MUST re-do the "find" before
re-running.  Otherwise, unexpected results will probably occur.

<li> Tried adding a feature to log if a recompress failed, after a test run
encountered a bad .gz file.  (This was a pain, and required several re-runs
with a short, known-bad gzip file, looking up things in the bash man page, and
much experimentation.  It logs the error now, but fails to notify the user
that the job failed.)

<li> To create a known-bad .gz file of your own to test:

<pre>
$ dd if=any-gz-file-more-than-20MB.gz of=KNOWNBAD.gz bs=1M count=21
</pre>

and redo your "find" to include it.
<br>

This creates a .gz file that is a <em>partial</em> copy of the complete
one, and will cause gzip to abend with "Unexpected end of file." Set the
"skipsize" variable to 20000 and run rezip, and it should log the error.
If you can fix the script so that it notifies the user as well, let me
know. ;-)
</ul>

<p>
During the course of writing the script, I had hard-coded most of the
defaults, such as the size of files to skip, the log file name, etc.  These
were eventually changed to be variables before the script was published for LG
- so that you, the end-user, can have More Control (TM) over its actions. ;-)
</p>

<p>
I encourage everyone to READ THE SOURCE CODE before running rezip.  You may
find it handy to view it in an editor that colorizes or highlights executable
syntax, such as ' mcedit ' or ' jstar '.
</p>

<p>
Comments, feature requests, bug reports, etc., are welcome.
</p>

<p>
( Don't forget to ' chmod +x rezip ' and put it somewhere in your $PATH -
/usr/local/bin is suggested. )
</p>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:123/bechtel.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/authors/bechtel.jpg" class="bio">
</p>
<em>

<p>
Bio: Born in 1972, Dave Bechtel grew up programming in Basic with Apple ][e's,
TI99 4/A, IBM PC (640K!) and a Tandy 1000SX, none of which actually had hard
drives -- 360K floppy only.  And we LIKED IT! ;-)
</p>

<p>
Eventually left BASIC behind, and moved on to programming in REXX and Bash.
</p>

<p>
Got interested in Linux around 1997.  Started with Red Hat and went on to
SuSE, tried several other distros and a *BSD or two, and has now settled on
Knoppix/Debian/Ubuntu, in roughly that order.  Currently living in Lake
Zurich, IL.
</p>

<p>
Likes: Computers, motorcycles, Linux, reading and watching sci-fi (currently
Star Trek TOS, Stargate, and Battlestar Galactica)
</p>

</em>
<br clear="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/bechtel.html">Dave Bechtel</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 123 of Linux Gazette, February 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="jesslyn"></a>
<h1>uClinux on Blackfin BF533 STAMP - A DSP Linux Port</h1>
<p id="by"><b>By <A HREF="../authors/jesslyn.html">Jesslyn Abdul Salam</A></b></p>


</b>
</p>


<p>
<p> Intel and Analog Devices Inc. (ADI) jointly developed the Micro Signal
Architecture (MSA) core and introduced it in December of 2000. ADI's
Blackfin processor functions as a DSP and a microcontroller. This device is
currently used for multimedia applications.</p>

<p> This article provides an introduction to programming the BF533
STAMP board and is intended for readers with some experience in Linux as
well as with embedded devices. It contains a basic description
of using the board for embedded programming as I have done without any
problem. </p>


<h3>BF533 STAMP</h3>
<p>
<img src="misc/jesslyn/image001.jpg" align="left">
The STAMP board features:</p>

<ul>
<li>ADSP-BF533 500 MHz Blackfin Processor
<li>128 MB SDRAM
<li>4 MB FLASH memory
<li>10/100 Ethernet Controller
<li>RS232 Serial Interface
<li>JTAG interface for debugging and flash programming
<li>I/O connectors for Blackfin Peripherals:
	<ul>
	<li>PPI
	<li> SPORT0 &amp; SPORT1
	<li> SPI
	<li> TIMERS
	<li> IRDA
	<li>TWI 
	</ul>
</ul>

<p> The BF533 STAMP runs uClinux - a Linux port for embedded
devices. It has soft real-time capabilities, meaning that it cannot
guarantee a specific interrupt or scheduler latency.</p>

<p> The STAMP board has been specifically designed to support the
development and porting of open source uClinux applications and includes
the full complement of memory along with serial and network interfaces. The
STAMP uClinux Kernel Board Support Package (BSP) includes a CD with a recent
copy of the open source development tools, the uClinux kernel, and the
documentation. For more details visit <a
href="http://blackfin.uclinux.org">http://blackfin.uclinux.org</a>.</p>


<h3>uClinux</h3>
<p> The uClinux kernel provides a hardware abstraction layer. The uClinux
Application Programming Interface (API) is identical for all processors
which support uClinux, allowing code to be easily ported to a different
processor core. When porting an application to a new platform, programmers
only need to address the areas specific to a particular processor -
normally, this means only the device drivers.</p>


<h3>Getting Started</h3>
<p> We have to note the following components of our development board:</p>

<ul>
<li>an Ethernet controller ( with an RJ45 Ethernet jack )
<li>a serial port ( DB9 serial connector - female ) 
<li>a power jack
</ul> 

<p> The development workstation is essentially a Linux box which should have</p>

<ul>
<li>an available serial port 
<li>terminal emulator software 
<li>an Ethernet card
</ul>

<p> There are two potential interconnections between the workstation and the target:</p>

<ul>
<li>the 10 Mbps Ethernet connection
<li>the RS232 serial interface
</ul>


<h4>Connecting the Hardware</h4>
<ol>
<li>Connect the serial port to your host computer from the STAMP board
<li> Connect the Ethernet cable to your network card of your Linux box (
use a straight cable with no cross connections )
<li> Start the terminal emulation program. Minicom is an example of such a
program, and is included in most Linux distributions. At the bash prompt
type the following command as root:

<pre>
bash# minicom -m -s /dev/ttyS0
</pre>

<p> From the configuration menu within Minicom, set the serial port connection to</p>

<ul>
<li>57600 baud
<li>8 data bits
<li>Parity none
<li>1 stop bit
<li> H/W flow control off
</ul>

<p> Now Save the configuration and choose Exit.</p>

<li>Connect the DC power cord and power up the board
<li>After the STAMP board powers up, you should see a U-boot start-up screen
in your terminal window. At this stage, if you allow the boot timer to count
down, the board will load the uClinux kernel from flash memory and boot it,
finally resulting in a command prompt.
</ol>


<h3>GNU/Linux tool chain for the Blackfin devices</h3>
<p> Install the binutils and the GCC tools on your machine:</p>

<p class="editorial">[ Note: 'rpm' is RedHat-specific. Use the appropriate
package manager for your distribution to install the latest 'bfin-gcc'
version; if your distribution does not have one, use the 'alien' utility to
convert this RPM to your required format. -- Ben ]
</p>

<pre>
bash# rpm -ivh bfin-gcc-3.4-4.1.i386.rpm
</pre>

<p> You may not find the same version of GCC tools on the CD. I had to
download the latest version since the one provided with CD
did not contain the required tools (e.g., the C compiler for building
programs on uClinux.) You may download the RPM from <a
href="http://blackfin.uclinux.org/frs/download.php/598/bfin-gcc-3.4-4.1.i386.rpm">here</a>.
Or you can visit the Blackfin <a
href="http://blackfin.uclinux.org/frs/?group_id=18">website</a> to download
the toolchain yourself.</p>

<p> In user mode, export the path for the tools:</p>

<code>bash# export PATH=/opt/uClinux/bfin-elf/bin:/opt/uClinux/bfin-uclinux/bin:$PATH</code>

<h3>Installing the uClinux Kernel</h3>
<p>
<ol>
<li>Copy the kernel source from the CD to your work directory 
<li>Uncompress the Kernel source<br><br>
<code>bash# bunzip2 uClinux-dist.tar.bz2<br>
tar -xvf uClinux-dist.tar</code>
</ol>

Now that the kernel is uncompressed in the work directory, you are ready
to start building your own uClinux kernel for the Blackfin processor.
</p>

<h3>Simple 'Hello World' Application</h3>
<p> Traditionally, development environments and programming languages have
always begun with the 'Hello World' program; we'll follow the precedent.</p>

<p>Copy the following into a file called 'hello.c':</p>

<pre class="code">
#include&lt;stdio.h&gt;

int main() {
	printf("Hello, Welcome to Blackfin uClinux!!\n");
	return 0;
}
</pre>

<p> The next step is to compile 'hello.c' on you host PC:</p>

<pre>
bash# bfin-uclinux-gcc -Wl,elf2flt hello.c -o hello
</pre>

<p> The resulting executable is named <b>hello</b>.</p>

<p> Note that the <b>bfin-uclinux-gcc</b> compiler is used; this compiler
is used to compile programs that run on the uClinux operating system. It
automatically links our program with the uClinux run time libraries, which
in turn call the uClinux operating system when required ( for example ) to
print to the console. The compiler collection for the Blackfin processor
also includes another compiler, <b>bfin-elf-gcc</b>, which is used to
compile the actual uClinux operating system and uses a different set of
libraries.  If you want to try porting other RTOSs to Blackfin, you will
have to use <b>bfin-elf-gcc</b>.</p>

<p> Now we need to set up the Ethernet port on the Linux box; we'll set its
IP address to 192.168.0.2. After booting the uClinux kernel on the STAMP
board, you will have to configure its Ethernet interface as well; at the
bash prompt of the STAMP, type the following:</p>

<pre>
root:~&gt;# ifconfig eth0 192.168.0.15 up
</pre>

<p> At this point, the Ethernet link should be up. We can use FTP to
upload the 'hello' program from the host to the board. At the bash shell
prompt of the linux workstation type the following:</p>

<pre>
bash# ftp 192.168.0.15
</pre>

<p> Give the username and password as <i>root</i> and <i>uClinux</i>. Send
the 'hello' executable to the STAMP board.</p>

<p> Now modify the permissions and run:</p>

<pre>
root:~&gt; chown 777 hello
root:~&gt; ./hello
Hello, Welcome to Blackfin uClinux!!
</pre>


<h3>Segmentation faults</h3>
<p> The Blackfin processor does not have an MMU, and does not provide any
memory protection for programs. This can be demonstrated with a simple
program:</p>

<pre class="code">
// test.c
int main ()
{
	int *p;
	*p=5;
}
</pre>

<p> Compile 'test.c' using our native C compiler. Try to run the resulting
executable, and you'll end up with a segmentation fault.</p>

<p> Now, compile the program using 'bfin-uclinux-gcc' as I described above.
Send the executable to the STAMP board using FTP, change the file
permissions, and run it.</p>

<p> This time, it should run without a segmentation fault. Due to this, an
unprivileged process can cause an address error, can corrupt kernel code,
and result is obvious. This is not a limitation of the Blackfin
architecture, but simply demonstrates that uClinux is designed to support
devices without an MMU.</p>

<h3>End of Part I</h3>
<p> This is all I know well about uClinux on Blackfin. I have to look
deeper into uClinux and I shall try to include more next time!</p>

<h3>References</h3>
<p> For more information, please visit <a href="http://blackfin.uclinux.org">http://blackfin.uclinux.org</a>.</p>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:123/jesslyn.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/authors/jesslyn.jpg" class="bio">
</p>
<p>
<em>

I'm currently doing my final semester as a Btech in Computer Science and
Engineering in MES College of Engineering, Kuttipuram, Kerala, India. I am
really fond of everything about Linux operating systems, maybe because I
want to know more about it, and I spend most of the time on my PC for the
same. My other areas of interest include reading, web surfing, and
listening to music. 

</em>
</p>
<br clear="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/jesslyn.html">Jesslyn Abdul Salam</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 123 of Linux Gazette, February 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="smith"></a>
<h1>A Short Tutorial on XMLHttpRequest()</h1>
<p id="by"><b>By <A HREF="../authors/smith.html">Bob Smith</A></b></p>


</b>
</p>


<p>
<a name="Intro"></a><h3>Introduction</h3>
<p>
This tutorial will show you how to build a web page that responds to
asynchronous events.  In five simple exercises, we'll show you the core of
an Asychronous JavaScript And XML (AJAX) application.  You'll have to learn
a little JavaScript, but there's no requirement to learn anything about
XML. Our goal is to show you how to build a responsive web application with
a minimum investment of time.
</p>

<p>
<b>What you should already know:</b>  You should be familiar with basic web
page creation and have a general idea of the client/server nature of web
page requests. You should also understand how CGI programs work and 
have some experience with CGI programming; we use a few lines of PHP in
our exercises, but you can replace this with C or Perl if you wish.
</p>

<p>
<b>Requirements for the examples:</b>  To do the exercises in this
tutorial, you will need a browser with JavaScript enabled.  JavaScript is
on by default in most browsers, so this shouldn't require any action
on your part unless you prevously disabled it. You will also need to have
a web server that supports PHP and CGI, and the ability to upload web pages
to it. You should be ready to go if you already have Apache and PHP
installed on your PC; in fact, our exercises assume that you're using your
PC for the web server.
</p>


<a name="Overview"></a> <h3>Application Overview</h3>
<p>
To illustrate the need for AJAX, let's consider a real-world example:
we've built a <a href="../120/smith.html">telephone answering machine</a>
and we want the caller ID information to be presented on a web page, which
we can view while we are at home or at work.  The data flow in our
application looks something like this:

<pre class="code">
  (answering_machine -&gt; syslog -&gt; fifo -&gt; Apache -&gt; web_page)
</pre>

Our answering machine will log caller ID information via syslog using
LOG_LOCAL3, a facility not used by any other applications on our
system, and a syslog rule in '/etc/syslog.conf' will direct messages
with this facility to a FIFO located in the Apache document directory.
In this tutorial, we will deal with getting the strings from that FIFO to
display on a web page. Writing to a FIFO is the asynchronous part of our
sample application.
</p>


<a name="Start"></a> <h3>Getting Started</h3>
<p>
In the first exercise, we are going to test the development
environment by running a simple PHP application.  Save <a
href="misc/smith/getfifo.php.txt">the following program</a> as
<i>getfifo.php</i> in the document directory of your web server:

<pre class="code">
&lt;?php
  $fp = fopen("ajaxfifo", "r");
  if ($fp) {
    $ajaxstring = fgets($fp, 128);
    fclose($fp);
  }

  header("Content-Type: text/html");
  print($ajaxstring);
?&gt;
</pre>

Now, create a fifo in the same directory:

<pre class="code">
mkfifo ajaxfifo
</pre>

Try to view <i>getfifo.php</i> using your web browser; it
should hang, waiting for the read of 'ajaxfifo' to complete. Write some
data to the FIFO before the browser times out:

<pre class="code">
echo "Hello, World" &gt; ajaxfifo
</pre>

The text that you entered should appear in your browser window.
Continue on to the next exercise if the data was displayed properly.
If the data did not appear, go back and verify that the web server
and PHP are installed and working properly.
</p>


<a name="DOM"></a> <h3>DOM in Two Lines of Code</h3>
<p>
JavaScript is an object-oriented language and treats a displayed web page
as an object.  The Document Object Model, or DOM, describes the objects,
properties, and verbs (or <i>methods</i>) available within JavaScript.
By using the DOM, you can name different parts of a web page and can then
perform different actions on those parts. 
</p>

<p>
The following exercise verifies that JavaScript is enabled in your
browser by creating a named region on a web page, and putting some
text into that named region. Copy the <a
href="misc/smith/hello.html">following program</a> to <i>hello.html</i> in
the document directory of your web server:

<pre class="code">
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Exercise 2: Use DOM to Test JavaScript&lt;/title&gt;

&lt;script language=javascript type="text/javascript"&gt;
&lt;!-- Hide script from non-JavaScript browsers

  // SayHello() prints a message in the document's "hello" area
  function SayHello() {
    document.getElementById("hello_area").innerHTML="Hello, World";
    return;
  }

--&gt;
&lt;/script&gt;
&lt;/head&gt;

&lt;body onload="SayHello()"&gt;
&lt;h3&gt;&lt;center&gt;Exercise 2:  Use DOM to Test JavaScript&lt;/center&gt;&lt;/h3&gt;
&lt;/p&gt;
&lt;div id="hello_area"&gt;This text is replaced.&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

The above code defines a section of the web page as "hello_area"
and uses the subroutine <i>SayHello()</i> to put text in that
section.  Load <i>hello.html</i> and verify that your browser's
JavaScript displays "Hello, World" on the web page.
</p>

<a name="Callbacks"></a> <h3>Callbacks in JavaScript</h3>
A callback is a subroutine that is called when a particular event
occurs. JavaScript has a fairly complete set of events to which you
can attach a callback. The following program starts a timer using a
callback that is invoked when the page is loaded,  and a callback
associated with the timer displays a counter and restarts itself.
Copy <a href="misc/smith/callback.html">this program</a> to
<i>callback.html</i> in your server's document directory, and verify that
the count is updated in your browser window every two seconds.

<pre class="code">
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Exercise 3: A JavaScript Callback Demo&lt;/title&gt;

&lt;script language=javascript type="text/javascript"&gt;
&lt;!-- Hide script from non-JavaScript browsers
  var count;
  count = 0;

  // Put the current count on the page
  function DisplayCount() {
    // Put current time in the "count" area of the web page
    document.getElementById("count_area").innerHTML=
      "The count is: " + count++;

    // Schedule next call to DisplayCount
    setTimeout("DisplayCount()", 2000);
    return;
  }
--&gt;
&lt;/script&gt;
&lt;/head&gt;

&lt;body onload="DisplayCount()"&gt;
&lt;h3&gt;&lt;center&gt;Exercise 3: A JavaScript Callback Demo&lt;/center&gt;&lt;/h3&gt;
&lt;div id="count_area"&gt;This text is replaced.&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
</p>

<a name="XNMHttpRequest"></a> <h3>How to use XMLHttpRequest()</h3>
<p>
XMLHttpRequest is a JavaScript subroutine that lets you make an
HTTP request and attach a callback to the response.  Since the
response has a callback, the browser is free to continue responding
to user input.  In a way, XMLHttpRequest is to JavaScript what
select() is to C - a way to wait for an event. XMLHttpRequest() is
what puts the 'A' in AJAX.
</p>

<p>
The following exercise adds only XMLHttpRequest() to the previous
examples. We request the data from <i>getfifo.php</i> using
XMLHttpRequest(), and tie a callback to the arrival of the
response. The response callback displays the data using a named
division per the DOM. Copy the <a href="misc/smith/async.html">following
code</a> into <i>async.html</i>:

<pre class="code">
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Exercise 4: An XMLHttpRequest() Demo&lt;/title&gt;

&lt;script language=javascript type="text/javascript"&gt;
&lt;!-- Hide script from non-JavaScript browsers

  var req_fifo;

  // GetAsyncData sends a request to read the fifo.
  function GetAsyncData() {
    url = "getfifo.php";

    // branch for native XMLHttpRequest object
    if (window.XMLHttpRequest) {
      req_fifo = new XMLHttpRequest();
      req_fifo.abort();
      req_fifo.onreadystatechange = GotAsyncData;
      req_fifo.open("POST", url, true);
      req_fifo.send(null);
    // branch for IE/Windows ActiveX version
    } else if (window.ActiveXObject) {
      req_fifo = new ActiveXObject("Microsoft.XMLHTTP");
      if (req_fifo) {
        req_fifo.abort();
        req_fifo.onreadystatechange = GotAsyncData;
        req_fifo.open("POST", url, true);
        req_fifo.send();
      }
    }
  }

  // GotAsyncData is the read callback for the above XMLHttpRequest() call.
  // This routine is not executed until data arrives from the request.
  // We update the "fifo_data" area on the page when data does arrive.
  function GotAsyncData() {
    // only if req_fifo shows "loaded"
    if (req_fifo.readyState != 4 || req_fifo.status != 200) {
      return;
    }
    document.getElementById("fifo_data").innerHTML=
      req_fifo.responseText;

    // Schedule next call to wait for fifo data
    setTimeout("GetAsyncData()", 100);
    return;
  }

--&gt;
&lt;/script&gt;

&lt;/head&gt;
&lt;body onload="GetAsyncData()"&gt;
&lt;h3&gt;Exercise 4: An XMLHttpRequest() Demo&lt;/h3&gt;&lt;p&gt;
&lt;div id="fifo_data"&gt; &lt;/div&gt;

&lt;/body&gt;
&lt;/html&gt;
</pre>

Load <i>async.html</i> and, if all has gone well, everything sent
to <i>ajaxfifo</i> will appear in the browser window.  For example:

<pre class="code">
echo "Hello, AJAX" &gt; ajaxfifo
</pre>

<div style="text-align: center">
<img src="misc/smith/asyncdemo.png" alt="Sample screen for Exercise 4" border="2">
</div>
<br clear="all">
</p>


<a name="Appliance"></a> <h3>An Appliance Web UI</h3>
<p>
If you were building an appliance (such as our answering machine),
you'd want your web UI to respond to events occuring in the appliance; the
exercises above show how to do this.  But you might also want your
appliance UI to have some controls available to the user.  The final
exercise below adds code to the previous exercise to show you how to tie
buttons in a web form to JavaScript subroutines.  This exercise
demonstrates that a web UI can wait for asynchronous events and still
be interactive.
</p>

<p>
Copy <a href="misc/smith/async.html"><i>async.html</i></a> to a file called
<i>webui.html</i> and add the following subroutine to the JavaScript
code:

<pre class="code">
// setColor updates the "color_area" with the color specified
  function setColor(new_color) {
    color_text = "&lt;table border=2 bgcolor=";
    if ("Blue" == new_color) {
      color_text += "\"Blue\"&gt;"
    }
    else if ("Red" == new_color) {
      color_text += "\"Red\"&gt;"
    }
    else {       // shouldn't get here
      color_text += "\"Green\"&gt;"
    }
    color_text += "&lt;tr&gt;&lt;td&gt;A little color&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;";
    document.getElementById("color_area").innerHTML=color_text;
  }
</pre>

Add a form to the HTML part of <i>webui.html</i>:

<pre class="code">
&lt;body onload="GetAsyncData()"&gt;
&lt;h3&gt;Exercise 5: A Trivial Web UI&lt;/h3&gt;&lt;p&gt;
&lt;div id="fifo_data"&gt; &lt;/div&gt;
&lt;p&gt;
&lt;div id="color_area"&gt;No color yet.&lt;/div&gt;&lt;p&gt;
&lt;form&gt;
&lt;input type=button value="Blue" onClick="setColor('Blue')"&gt;
&lt;input type=button value="Red" onClick="setColor('Red')"&gt;
&lt;/form&gt;
&lt;/body&gt;
</pre>

</p>


<a name="Summary"></a> <h3>Summary and Notes</h3>
<p>
In this short tutorial, we've explored the fundamentals for building
responsive, interactive web interfaces using JavaScript and
XMLHttpRequest(). In order to focus on the core concepts, we've ignored
many important details, such as error handling and return codes. Hopefully,
you can add the techniques shown in this article to your web toolbox.  
</p>

<p>
<b>FIFO versus /dev/fanout:</b> Open two browser windows displaying
<i>async.html</i> and write some data into the FIFO; notice that the data
that you write will appear in only one window. This is because the FIFO
passes the data to only one of the readers.  In a real application, we
would want to use a fanout device so that the data is written to all
readers.  Fanout is described in a <a
href="http://linuxgazette.net/122/smith.html">previous Linux Gazette
article</a> as well as on the <a
href="http://www.linuxtoys.org/fanout/fanout.html">author's home page</a>.
</p>

<p>
<b>XML:</b> If you are getting only a single piece of data from your
web server, you can use the code in this article.  As soon as you ask
for more than one piece of data, you should switch to XML.  It does
not need to be difficult.
</p>

<p>
As an example, let's say that you've modified <i>getfifo.php</i> to use the
caller ID to look up the time and duration of the last time you spoke with
the caller, and you want to return this information along with the
caller ID string. The PHP code to build an XML response for the three
pieces of data might look like this:

<pre class="code">
&lt;?php
  header("Content-Type: text/xml");
  print("&lt;?xml version=\"1.0\" ?&gt;\n");
  print("&lt;caller_info&gt;\n");
  printf("&lt;caller_id&gt;%s&lt;/caller_id&gt;\n",       "Mary");
  printf("&lt;lastcalltime&gt;%s&lt;/lastcalltime&gt;\n", "10:24 am");
  printf("&lt;lastcalldur&gt;%s&lt;/lastcalldur&gt;\n",   "12:05");
  print("&lt;/caller_info&gt;\n");
?&gt;
</pre>

Instead of using <i>req_fifo.responseText</i> to get the whole
body of the reply, you would use the following to extract each
of the three fields you want:

<pre class="code">
  callid = req_fifo.responseXML.getElementsByTagName("caller_id");
  calltm = req_fifo.responseXML.getElementsByTagName("lastcalltime");
  calldur = req_fifo.responseXML.getElementsByTagName("lastcalldur");
  callid[0].childNodes[0].nodeValue;

  document.getElementById("caller_data").innerHTML=
    callid[0].childNodes[0].nodeValue;
  document.getElementById("lastcalltime").innerHTML=
    calltm[0].childNodes[0].nodeValue;
  document.getElementById("lastcalldur").innerHTML=
    calldur[0].childNodes[0].nodeValue;
</pre>

There are simpler and better ways to do this, but the above code
should give you an idea of what to expect.
</p>

<p>
<b>Further reading:</b>  The Apple developer's web site has a
good article on XMLHttpRequest().  You can find it here:
<br>
<a href="http://developer.apple.com/internet/webcontent/xmlhttpreq.html">
http://developer.apple.com/internet/webcontent/xmlhttpreq.html</a>
</p>

<p>
You may find the tutorials at the JavaScript Kit web site to be a big
help if you'd like to expand on the knowledge you've gained from this
article. You can find their tutorials here:
<br>
<a href="http://www.javascriptkit.com/javatutors/">
http://www.javascriptkit.com/javatutors/</a>
</p>

<p>
The IBM DeveloperWorks web site has some great articles on AJAX
and XML.  We found this one particularly useful:
<br>
<a href="http://www.ibm.com/developerworks/web/library/wa-ajaxintro1.html">
http://www.ibm.com/developerworks/web/library/wa-ajaxintro1.html</a>
</p>

<p>
Finally, you might be interested in the low cost answering machine
that's at the heart of this author's appliance:
<br>
<a href="http://www.linuxtoys.org/answer/answering_machine.html">
http://www.linuxtoys.org/answer/answering_machine.html</a>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:123/smith.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<p>

<img align="left" alt="[BIO]" src="../gx/authors/smith.jpg" class="bio">

</p>
<p>
<em>

Bob is an electronics hobbyist and Linux programmer.  He
is one of the authors of "Linux Appliance Design" to be
published by No Starch Press.


</em>
</p>
<br clear="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/smith.html">Bob Smith</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 123 of Linux Gazette, February 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="vishnu"></a>
<h1>Configuring Apache for Maximum Performance</h1>
<p id="by"><b>By <A HREF="../authors/vishnu.html">Vishnu Ram V</A></b></p>


</b>
</p>


<p>
<h3>1 Introduction</h3>
<p>
Apache is an open-source HTTP server implementation. It is the most
popular web server on the Internet; the December 2005 Web Server Survey
conducted by Netcraft [<a href="vishnu.html#NET">1</a>] shows that
about 70% of the web sites on Internet are using Apache.
</p>

<p>
Apache server performance can be improved by adding additional
hardware resources such as RAM, faster CPU, etc. But most of the time,
the same result can be achieved by custom configuration of the server.
This article looks into getting maximum performance out of Apache with
the existing hardware resources, specifically on Linux systems. Of course,
it is assumed that there is <em>enough</em> hardware resources - especially
enough RAM that the server isn't swapping frequently. First two sections
look into various Compile-Time and Run-Time configuration options. The
Run-Time section assumes that Apache is compiled with <a
href="http://httpd.apache.org/docs/2.2/mod/prefork.html">prefork</a> MPM.
HTTP compression and caching is discussed next. Finally, using separate
servers for serving static and dynamic contents is covered. Basic
knowledge of compiling and configuring Apache and Linux are assumed.
</p>

<h3>2 Compile-Time Configuration Options</h3>
<h4>2.1 Load only the required modules:</h4>
<p>
The Apache HTTP Server is a modular program where the administrator can
choose the functions to be included in the server by selecting a set of
modules [<a href="vishnu.html#DSO">2</a>]. The modules can be compiled either
statically as part of the 'httpd' binary, or as Dynamic Shared Objects
(DSOs). DSO modules can either be compiled when the server is built, or
added later via the <a
href="http://httpd.apache.org/docs/2.2/programs/apxs.html">apxs</a>
utility, which allows compilation at a later date. The 
mod_so module must be statically compiled into the Apache core to
enable DSO support.
</p>

<p>
Run Apache with only the required modules. This reduces the memory
footprint, which improves the server performance. Statically compiling
modules will save RAM that's used for supporting dynamically loaded
modules, but you would have to recompile Apache to add or remove a module.
This is where the DSO mechanism comes handy. Once the mod_so module is
statically compiled, any other module can be added or dropped using the
'LoadModule' command in the 'httpd.conf' file. Of course, you will have to
compile the modules using 'apxs' if they weren't compiled when the server
was built.
</p>

<h4>2.2 Choose appropriate MPM:</h4>
<p>
The Apache server ships with a selection of Multi-Processing Modules (MPMs)
which are responsible for binding to network ports on the machine,
accepting requests, and dispatching children to handle the requests [<a
 href="vishnu.html#MPM">3</a>]. Only one MPM can be loaded into the
server at any time.
</p>

<p>
Choosing an MPM depends on various factors, such as whether the OS
supports threads, how much memory is available, scalability versus
stability, whether non-thread-safe third-party modules are used, etc.
</p>

<p>
Linux systems can choose to use a threaded MPM like <a
 href="http://httpd.apache.org/docs/2.2/mod/worker.html">worker</a> or
a non-threaded MPM like <a
 href="http://httpd.apache.org/docs/2.2/mod/prefork.html">prefork</a>:
</p>

<p>
The <em>worker</em> MPM uses multiple child processes. It's multi-threaded within
each child, and each thread handles a single connection. Worker is fast
and highly scalable and the memory footprint is comparatively low. It's
well suited for multiple processors. On the other hand, worker is less
tolerant of faulty modules, and a faulty thread can affect all the
threads in a child process.
</p>

<p>
The <em>prefork</em> MPM uses multiple child processes, each child handles one
connection at a time. Prefork is well suited for single or double CPU
systems, speed is comparable to that of worker, and it's highly tolerant
of faulty modules and crashing children - but the memory usage is high,
and more traffic leads to greater memory usage.
</p>

<h3>3 Run-Time Configuration Options</h3>
<h4>3.1 DNS lookup:</h4>
<p>
The HostnameLookups directive enables DNS lookup so that hostnames can
be logged instead of the IP address. This adds latency to every request
since the DNS lookup has to be completed before the request is
finished. HostnameLookups is Off by default in Apache 1.3 and above.
Leave it Off and use post-processing program such as <a
 href="http://httpd.apache.org/docs/2.2/programs/logresolve.html">logresolve</a>
to resolve IP addresses in Apache's access logfiles. Logresolve
ships with Apache.
</p>

<p>
When using 'Allow from' or 'Deny from' directives, use an IP address
instead of a domain name or a hostname. Otherwise, a double DNS lookup
is performed to make sure that the domain name or the hostname is not
being spoofed.
</p>

<h4>3.2 AllowOverride:</h4>
<p>
If AllowOverride is not set to 'None', then Apache will attempt to open
the .htaccess file (as specified by AccessFileName directive) in each
directory that it visits. 
For example:

<pre class="code">
DocumentRoot /var/www/html
&lt;Directory /&gt;
AllowOverride all
&lt;/Directory&gt;
</pre>
</p>

<p>
If a request is made for URI /index.html, then Apache will attempt
to open /.htaccess, /var/.htaccess, /var/www/.htaccess, and
/var/www/html/.htaccess. These additional file system lookups add to
the latency. If .htaccess is required for a particular directory, then
enable it for that directory alone.
</p>

<h4>3.3 FollowSymLinks and SymLinksIfOwnerMatch:</h4>
If FollowSymLinks option is set, then the server will follow symbolic
links in this directory. If SymLinksIfOwnerMatch is set, then the
server will follow symbolic links only if the target file or directory
is owned by the same user as the link.
</p>

<p>
If SymLinksIfOwnerMatch is set, then Apache will have to issue
additional system calls to verify whether the ownership of the link and
the target file match. Additional system calls are  also needed
when FollowSymLinks is NOT set.<br>
For example:

<pre class="code">
DocumentRoot /var/www/html
&lt;Directory /&gt;
Options SymLinksIfOwnerMatch
&lt;/Directory&gt;
</pre>

For a request made for URI /index.html, Apache will perform lstat()
on /var, /var/www, /var/www/html, and /var/www/html/index.html. These
additional system calls will add to the latency. The lstat results are
not cached, so they will occur on every request.
</p>

<p>
For maximum performance, set FollowSymLinks everywhere and
never set SymLinksIfOwnerMatch. Or else, if SymLinksIfOwnerMatch is
required for a directory, then set it for that directory alone.<br>
</p>

<h4>3.4 Content Negotiation:</h4>
<p>
Avoid content negotiation for fast response. If content negotiation is
required for the site, use type-map files rather than Options
MultiViews directive. With MultiViews, Apache has to scan the directory
for files, which adds to the latency.
</p>

<h4>3.5 MaxClients:</h4>
<p>
The MaxClients sets the limit on maximum simultaneous requests that can
be supported by the server; no more than this number of child
processes are spawned. It shouldn't be set too low; otherwise, an
ever-increasing number of connections are deferred to the queue and
eventually time-out while the server resources are left unused. Setting
this too high, on the other hand, will cause the server to start swapping
which will cause the response time to degrade drastically.  The appropriate
value for MaxClients can be calculated as:
<br>
<br>
[<a href="vishnu.html#MAXCLI">4</a>] 
MaxClients = Total RAM dedicated to the web server / Max child process size
<br>
<br>
The child process size for serving static file is about 2-3M. For
dynamic content such as PHP, it may be around 15M. The RSS column <br>
in
"<code>ps -ylC
httpd --sort:rss</code>" shows non-swapped physical memory usage by
Apache processes in kiloBytes.
</p>

<p>
If there are more concurrent users than MaxClients, the requests will
be queued up to a number based on ListenBacklog directive. Increase
ServerLimit to set MaxClients above 256.<br>
</p>

<h4>3.6 MinSpareServers, MaxSpareServers, and StartServers:</h4>
<p>
MaxSpareServers and MinSpareServers determine how many child processes
to keep active while waiting for requests. If the MinSpareServers is too low
and a bunch of requests come in, Apache will have to spawn additional child
processes to serve the requests. Creating child processes is relatively
expensive. If the server is busy creating child processes, it won't be able
to serve the client requests immediately.  MaxSpareServers shouldn't be set
too high: too many child processes will consume resources unnecessarily.
</p>

<p>
Tune MinSpareServers and MaxSpareServers so that Apache need
not spawn more than 4 child processes per second (Apache can
spawn a maximum of 32 child processes per second). When more than 4
children are spawned per second, a message will be logged in the
ErrorLog.
</p>

<p>The StartServers directive sets the number of child server
processes created on startup. Apache will continue creating child
processes until the MinSpareServers setting is reached. This doesn't have
much effect on performance if the server isn't restarted frequently. If
there are lot of requests <em>and</em> Apache is restarted frequently, set
this to a relatively high value.<br>
</p>

<h4>3.7 MaxRequestsPerChild:</h4>
<p>
The MaxRequestsPerChild directive sets the limit on the number of
requests that an individual child server process will handle. After
MaxRequestsPerChild requests, the child process will die. It's set to 0
by default, the child process will never expire. It is appropriate to set
this to a value of few thousands. This can help prevent memory leakage,
since the process dies after serving a certain number of requests. Don't
set this too low, since creating new processes does have overhead.
</p>

<h4>3.8 KeepAlive and KeepAliveTimeout:</h4>
<p>
The KeepAlive directive allows multiple requests to be sent over the
same TCP connection. This is particularly useful while serving HTML
pages with lot of images. If KeepAlive is set to Off, then for each
images, a separate TCP connection has to be made. Overhead due to
establishing TCP connection can be eliminated by turning On KeepAlive.
</p>

<p>KeepAliveTimeout determines how long to wait for the next request. Set
this to a low value, perhaps between two to five seconds. If it is set
too high, child processed are tied up waiting for the client when they
could be used for serving new clients.
</p>

<h3>4 HTTP Compression &amp; Caching<br></h3>
<p>
HTTP compression is completely specified in HTTP/1.1. The server
uses either the gzip or the deflate encoding method to the response payload
before it is sent to the client. Client then decompresses the payload.
There is no need to install any additional software on the client side
since all major browsers support these methods. Using compression will save
bandwidth and improve response time; studies have found a mean 
gain of %75.2 when using compression [<a href="vishnu.html#COMPRS">5</a>].
</p>

<p>
HTTP Compression can be enabled in Apache using the <a
href="http://httpd.apache.org/docs/2.2/mod/mod_deflate.html">mod_deflate</a>
module. Payload is compressed only if the browser requests compression,
otherwise uncompressed content is served. A compression-aware browser
inform the server that it prefer compressed content through the HTTP
request header - "<code>Accept-Encoding: gzip,deflate</code>". Then the
server responds with compressed payload and the response header set to
"<code>Content-Encoding: gzip</code>".
</p>

<p>
The following example uses telnet to view request and
response headers:

<pre class="code">
bash-3.00$ telnet www.webperformance.org 80
Trying 24.60.234.27...
Connected to www.webperformance.org (24.60.234.27).
Escape character is '^]'.
HEAD / HTTP/1.1
Host: www.webperformance.org
Accept-Encoding: gzip,deflate

HTTP/1.1 200 OK
Date: Sat, 31 Dec 2005 02:29:22 GMT
Server: Apache/2.0
X-Powered-By: PHP/5.1.1
Cache-Control: max-age=0
Expires: Sat, 31 Dec 2005 02:29:22 GMT
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 20
Content-Type: text/html; charset=ISO-8859-1
</pre>

In caching, a copy of the data is stored at the client or in a proxy server
so that it need not be retrieved frequently from the server. This will save
bandwidth, decrease load on the server, and reduce latency.  Cache control
is done through HTTP headers. In Apache, this can be accomplished through
<a
href="http://httpd.apache.org/docs/2.2/mod/mod_expires.html">mod_expires</a>
and <a
href="http://httpd.apache.org/docs/2.2/mod/mod_headers.html">mod_headers</a>
modules. There is also server side caching, in which the most
frequently-accessed content is stored in memory so that it can be served
fast. The module <a
href="http://httpd.apache.org/docs/2.2/mod/mod_cache.html">mod_cache</a>
can be used for server side caching; it is production stable in Apache
version 2.2.
</p>

<h3>5 Separate server for static and dynamic content</h3>
<p>
Apache processes serving dynamic content take from 3MB to 20MB of RAM.
The size grows to accommodate the content being served and never decreases
until the process dies. As an example, let's say an Apache process grows to
20MB while serving some dynamic content. After completing the request, it is
free to serve any other request. If a request for an image comes in, then
this 20MB process is serving static content - which could be served just as
well by a 1MB process. As a result, memory is used inefficiently.
</p>

<p>
Use a tiny Apache (with minimum modules statically compiled) as the
front-end server to serve static contents. Requests for dynamic content
should be forwarded to the heavy-duty Apache (compiled with all required
modules). Using a light front-end server has the advantage that the static
contents are served fast without much memory usage and only the dynamic
contents are passed over to the big server.
</p>

<p>
Request forwarding can be achieved by using <a
href="http://httpd.apache.org/docs/2.2/mod/mod_proxy.html">mod_proxy</a>
and <a
href="http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html">mod_rewrite</a>
modules. Suppose there is a lightweight Apache server listening to port
80 and a heavyweight Apache listening on port 8088. Then the
following configuration in the lightweight Apache can be used to
forward all requests (except requests for images) to the heavyweight server:<br>

[<a href="vishnu.html#LSH">9</a>]<br>
<pre class="code">
ProxyPassReverse / http://%{HTTP_HOST}:8088/
RewriteEngine on                                            
RewriteCond  %{REQUEST_URI} !.*\.(gif|png|jpg)$
RewriteRule ^/(.*) http://%{HTTP_HOST}:8088/$1 [P]
</pre>

All requests, except for images, will be proxied to the backend server.
The response is received by the frontend server and supplied to
the client. As far as client is concerned, all the responses seem
to come from a single server.
</p>

<h3>6 Conclusion</h3>
<p>
Configuring Apache for maximum performance is tricky; there are no hard
and fast rules. Much depends on understanding the web server requirements
and experimenting with various available options. Use tools like <a
 href="http://httpd.apache.org/docs/2.2/programs/ab.html">ab</a> and <a
 href="http://www.hpl.hp.com/research/linux/httperf/">httperf</a> to
measure the web server performance. Lightweight servers such as <a
 href="http://www.redhat.com/docs/manuals/tux/">tux</a> or <a
 href="http://www.acme.com/software/thttpd/">thttpd</a> can also be used as
the front-end server. If a database server is used, make sure it is
optimized so that it won't create any bottlenecks. In
case of MySQL, <a href="http://sourceforge.net/projects/mtop">mtop</a>
can be used to monitor slow queries.  Performance of PHP scripts
can be improved by using a PHP caching product such as <a
 href="http://sourceforge.net/projects/turck-mmcache/">Turck MMCache</a>.
It eliminates overhead due to compiling by caching the PHP scripts in a
compiled state.
</p>


<h4>Bibliography</h4>
<p>  
<a name="NET"></a>1. <a href="http://news.netcraft.com/archives/web_server_survey.html">http://news.netcraft.com/archives/web_server_survey.html</a><br>
<a name="DSO"></a>2. <a href="http://httpd.apache.org/docs/2.2/dso.html">http://httpd.apache.org/docs/2.2/dso.html</a><br>
<a name="MPM"></a>3. <a href="http://httpd.apache.org/docs/2.2/mpm.html">http://httpd.apache.org/docs/2.2/mpm.html</a><br>
<a name="MAXCLI"></a>4. <a href="http://modperlbook.org/html/ch11_01.html">http://modperlbook.org/html/ch11_01.html</a><br>
<a name="COMPRS"></a>5. <a href="http://www.speedupyoursite.com/18/18-2t.html">http://www.speedupyoursite.com/18/18-2t.html</a><br>
6. <a href="http://www.xs4all.nl/%7Ethomas/apachecon/PerformanceTuning.html">http://www.xs4all.nl/~thomas/apachecon/PerformanceTuning.html</a><br>
7. <a href="http://www.onlamp.com/pub/a/onlamp/2004/02/05/lamp_tuning.html">http://www.onlamp.com/pub/a/onlamp/2004/02/05/lamp_tuning.html</a><br>
8. <a href="http://httpd.apache.org/docs/2.2/misc/perf-tuning.html">http://httpd.apache.org/docs/2.2/misc/perf-tuning.html</a><br>
<a name="LSH"></a>9. Linux Server Hacks by Rob Flickenger<br>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:123/vishnu.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/2002/note.png" class="bio">

<!-- 
If the author has sent his pic, save it to the right directory, delete the
line above, and uncomment the line below.

<img align="left" alt="[BIO]" src="../gx/authors/pic.jpg" class="bio">

-->
</p>
<p>
<em>

<p>
I'm an MTech. in Communication Systems from the IIT Madras. I joined Poornam
Info Vision Pvt Ltd. in 2003 and have been working for Poornam since then.
</p>

<p>
My area of interest are performance tuning, server monitoring, and
security. In my free time I practice Karate, read books and listen to music.
</p>

</em>
</p>
<br clear="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/vishnu.html">Vishnu Ram V</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 123 of Linux Gazette, February 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="collinge"></a>
<h1>HelpDex</h1>
<p id="by"><b>By <A HREF="../authors/collinge.html">Shane Collinge</A></b></p>


</b>
</p>


<p>
<p>
<em>These images are scaled down to minimize horizontal scrolling.</em>
<p>

<p>

<div class="cartoon">

<object>
<embed src="misc/collinge/503czombie.swf" bgcolor="#ffffff" width="600" />
</object>

<a href="misc/collinge/503czombie.swf"><p>Click here to see the full-sized image</p></a>.

</div>
<div class="cartoon">

<object>
<embed src="misc/collinge/505credits.swf" bgcolor="#ffffff" width="600" />
</object>

<a href="misc/collinge/505credits.swf"><p>Click here to see the full-sized image</p></a>.

</div>


<p> All HelpDex cartoons are at Shane's web site,
<a href="http://www.shanecollinge.com/">www.shanecollinge.com</a>.

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:123/collinge.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<P>
<img ALIGN="LEFT" ALT="[BIO]" SRC="../gx/2002/note.png" class="bio">
<em>
Part computer programmer, part cartoonist, part Mars Bar. At night, he runs
around in his brightly-coloured underwear fighting criminals. During the
day... well, he just runs around in his brightly-coloured underwear. He
eats when he's hungry and sleeps when he's sleepy.
</em>
<br CLEAR="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/collinge.html">Shane Collinge</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 123 of Linux Gazette, February 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="lg_launderette"></a>
<h1>The Linux Launderette</h1>


</b>
</p>


<p>
<!-- BEGIN message -->
<h3>Contents:</h3>
<dl><!-- index_text begins -->
<dt><a href="#nottag.1"><img src="../gx/dennis/qbub.gif" height=
"28" width="50" alt="(?)" border="0"><strong>Unauthori[sz]ed
Practice of Law statutes</strong></a></dt>
<dt><a href="#nottag.2"><img src="../gx/dennis/qbub.gif" height=
"28" width="50" alt="(?)" border="0"><strong>Yet another "case
study" (RadioShack Saves Millions of Dollars by Choosing Windows
over Linux)</strong></a></dt>
<dt><a href="#nottag.3"><img src="../gx/dennis/qbub.gif" height=
"28" width="50" alt="(?)" border="0"><strong>RadioShack... and
ferrets?</strong></a></dt>
<dt><a href="#nottag.4"><img src="../gx/dennis/qbub.gif" height=
"28" width="50" alt="(?)" border=
"0"><strong>Google</strong></a></dt>
<dt><a href="#nottag.5"><img src="../gx/dennis/qbub.gif" height=
"28" width="50" alt="(?)" border="0"><strong>Everything you ever
wanted to know about C types, Part 1: What's in a
type?</strong></a></dt>
<dt><a href="#nottag.6"><img src="../gx/dennis/qbub.gif" height=
"28" width="50" alt="(?)" border="0"><strong>Open Source cuddly
penguins</strong></a></dt>
<dt><a href="#nottag.7"><img src="../gx/dennis/qbub.gif" height=
"28" width="50" alt="(?)" border="0"><strong>Ultra-cool
gadgetry</strong></a></dt>
<dt><a href="#nottag.8"><img src="../gx/dennis/qbub.gif" height=
"28" width="50" alt="(?)" border="0"><strong>The usual brilliant
Redmond strategy: checkmate in two moves</strong></a></dt>
<dt><a href="#nottag.9"><img src="../gx/dennis/qbub.gif" height=
"28" width="50" alt="(?)" border="0"><strong>3 Cyrillic
spams</strong></a> 

<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<a name="nottag.1"></a></dt>
<dd>
<hr width="75%" align="center"></dd>
<dt><!-- begin 1 --></dt>
<dd>
<h3 align="left"><img src="../gx/dennis/qbubble.gif" height="50"
width="60" alt="(?) " border="0">Unauthori[sz]ed Practice of Law
statutes</h3>
<p><small>Sat, 31 Dec 2005</small></p>
<p><strong>From Predrag Ivanovic</strong></p>
<p align="right"><strong>Answered By: Rick Moen</strong></p>
<p><strong>Rick, does <a href=
"http://www.holtmann.org/linux/bluetooth/devices.html">this</a>
qualify?</strong></p>
<p><strong>He had to remove list of Linux compatible Bluetooth
devices from the site, because "[undisclosed] registered member of
the Bluetooth SIG complained about the non-qualified use of
Bluetooth products on this page and the features document." Altough
the BlueZ protocol stack is <a href=
"http://www.bluez.org/qualification.html">now qualified as a
Bluetooth subsystem,</a> the list is still not there.</strong></p>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Rick] Pedja, thank you for the
suggestion.</blockquote>
<blockquote>I did follow that at the time that it was a current
news item, The sum and substance seems to be that the (unnamed)
Bluetooth Qualification Administrator asserted (repeating the
allegations of a third party) that Holtzmann had been distributing
information about not-yet-certified software or hardware products
("non-qualified products") that had been entrusted to him under
nondisclosure (the "Bluetooth License Agreement") as a member of
the private Bluetooth SIG. Or alternatively that Holzmann was
violating his agreement by asserting that his BlueZ protocol stack
was "Bluetooth" compatible, when it had not passed the required
certification steps at that time. Or both. Or something
similar.</blockquote>
<p><strong><img src="../gx/dennis/qbub.gif" alt="(?)" height="28"
width="50" border="0"> Well,according to <a href=
"http://web.archive.org/web/20050309091636/www.holtmann.org/linux/bluetooth/devices.html">
this</a> all he did is list drivers which are needed for some BT
device to work with Linux. I couldn't find anywhere "Device $foo is
certified by Bluetooth authority as working."</strong></p>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Rick] I don't want to make it seem as if
I'm making excuses for the unnamed Bluetooth Qualification
Administrator, but Holzmann may have agreed in his "Bluetooth
License Agreement" to use the term "Bluetooth" only in relation to
certified products. It's not entirely clear, what their objection
was.</blockquote>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Rick] The problem is that the complaint may
have been justified. We don't have enough information to decide one
way or the other.</blockquote>
<blockquote>But it's very common to tie trademark-licensing rights
to compliance with an industry-controlled certification suite. I
can easily imagine Holzmann getting caught in one of those pitfalls
-- and no actual malfeasance being visited upon him by the industry
consortium.</blockquote>
<p><strong><img src="../gx/dennis/qbub.gif" alt="(?)" height="28"
width="50" border="0"> So, device is BT-compliant ONLY if it passed
official certification, and since BlueZ was not certified at the
time, listing products that work with it is considered a violation
of some sort, right? And Holzmann received a slap on the wrist for
doing that, so it seems. If that's the situation, based on info I
have and your analysis, this is just another case of $institution
enforcing strict regulations. I thought that only
federal/government agencies (FAA,FCC etc.) are that
strict.</strong></p>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Rick] Well, this is claimed to be based in
some contractual agreement.</blockquote>
<blockquote>Contract violation isn't punishable in the way
<em>crimes</em> are -- the former being merely civil disputes
between parties. In retrospect, I really do think this entire case
was about trademark rights, enforced with the aid of a rather
aggressively worded contract. Which Holzmann signed. We have no way
of knowing if he <em>actually</em> acted in violation of that
contract (neither side having published the terms in question), but
that's what's alleged.</blockquote>
<blockquote>An additional lesson is possible from noting that,
stipulating that Holzmann was caught violating some contract he had
agreed to, nonetheless the sky didn't fall. The parties just worked
out the complaint, and moved on.</blockquote>
<blockquote>As I've observed many times, many computerists have a
comical and self-destructive tendency to run shrieking in terror,
seeking permission to capitulate, the moment they see a paper (or
even e-mail!) demanding something, that looks as if it's been
breathed on by a lawyer. I can imagine that the idea of an actual
<em>tort</em> (such as violation of contract) would inspire them to
fainting spells.</blockquote>
<blockquote>A "tort" in the USA and other British-derived legal
systems is a civil wrong, i.e., a non-criminal action or failure to
act, that had the effect of making the person involved (the
"tort-feasor") fail an obligation towards someone else. The state
has no part in civil litigation, except to supply the courts and
judges: Each party pays his/her own legal expenses, and must
convince a judge that a wrong has been committed through a
"preponderance of the evidence". (Criminal cases, by contrast, must
be proved by the state per the much higher standard of evidence
being convincing "beyond any reasonable doubt".)</blockquote>
<blockquote>Generally speaking, all you can get if you win a civil
suit is either correction of the wrongful situation (a "remedy in
equity") or a money payment from the other side in compensation of
your loss (a "remedy in law"). <em>Sometimes ,</em> you can get an
order that the other side pay your legal expenses. For a minority
of torts in which the plaintiff is able to show particular
recklessness, plaintiff can get "special" or "exemplary" damages to
deter other people from being screw-ups in that way, in the
future.</blockquote>
<blockquote>But that's really about it.</blockquote>
<blockquote>Now, people justly fear being sued (hauled into civil
litigation) simply because of expense of legal representation, but
that is a sword that cuts both ways (not to mention that "Discovery
should prove interesting" threat I cited earlier). Therefore, most
civil conflicts never go to court, even in the much-too-litigious
USA, and even in cases where sundry <em>threats</em> of litigation
have flown back and forth.</blockquote>
<blockquote>People go to court because either they're crazy, or
because the other side refuses to compromise and plaintiff thinks
he/she can win big enough to merit the time and expense.
Fortunately for our sanity, that happens rarely.</blockquote>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Rick] One lesson is: Be careful what
contracts you agree to. If the "Bluetooth License Agreement"
stipulates that you may not use a certain trademark-encumbered term
without passing the associated certification suite, then either
decline the agreement or be prepared to live with its
restrictions.</blockquote>
<p><strong><img src="../gx/dennis/qbub.gif" alt="(?)" height="28"
width="50" border="0"> Excelent advice. "Always read the fine
print" and "Use your common sense".</strong></p>
<!-- end 1 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<a name="nottag.2"></a>
<hr width="75%" align="center">
<!-- begin 2 -->
<h3 align="left"><img src="../gx/dennis/qbubble.gif" height="50"
width="60" alt="(?) " border="0">Yet another "case study"
(RadioShack Saves Millions of Dollars by Choosing Windows over
Linux)</h3>
<p><small>Wed, 04 Jan 2006</small></p>
<p><strong>From Predrag Ivanovic</strong></p>
<p><strong>If TAG isn't place for this,I'm sorry,but I just had to
share few quotes from this...case study[1]. URL says it all,
really...</strong></p>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Jason] Heh heh. Just skimming it, one thing
is obvious: They're scared.</blockquote>
<p><strong><img src="../gx/dennis/qbub.gif" alt="(?)" height="28"
width="50" border="0"> "Benefits that the company expects to
realize by choosing Windows include a lower total cost of
ownership, simplified system management and deployment of software
updates, reduced staffing and training requirements, improved
system reliability and security, and... reduced exposure to the
risk of intellectual property infringement claims."</strong></p>
<p><strong>[...]</strong></p>
<p><strong>"Highly skilled resources for the Windows platform cost
significantly less than similarly skilled resources for Linux,"
says Cook. "Had we selected Linux, I'm sure that we would have
incurred significant additional staffing costs."</strong></p>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Jason] Hey kids! Get your A+ Certification,
so you can work for less than a *NIX admin! <img src=
"../gx/dennis/smily.gif" alt=":)" height="24" width="20" align=
"middle"></blockquote>
<p><strong><img src="../gx/dennis/qbub.gif" alt="(?)" height="28"
width="50" border="0"> [..]</strong></p>
<p><strong>"Unlike many Linux vendors, Microsoft provides its
customers with strong indemnification against patent, copyright,
trade secret, and trademark infringement claims without a monetary
limit--part of its commitment to ensuring that licensing issues and
questions of intellectual property do not present problems for
customers."</strong></p>
<p><strong>[1] <a href=
"http://www.microsoft.com/windowsserversystem/facts/casestudies/CaseStudy.aspx?CaseStudyID=17131">
http://www.microsoft.com/windowsserversystem/facts/casestudies/CaseStudy.aspx?CaseStudyID=17131</a></strong></p>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Ben] So they bought^Wfound themselves a
supporter at Radio Shack who, in his own words, is "a strong
advocate of Wind0ws XP Embedded" (note that he's the <em>only</em>
one they quote throughout the entire "case study".) Everyone here
is shocked - shocked, I tell you - what an unusual tactic for
Micr0s0ft!</blockquote>
<blockquote>I stopped being outraged, or even bothered by this a
long, long time ago. If you're going to read this kind of stuff, I
suggest that you adopt the same attitude; let them make the noise,
and we'll keep on producing the better OS. <img src=
"../gx/dennis/smily.gif" alt=":)" height="24" width="20" align=
"middle"> Those who are swayed by empty claims will do their thing;
the people and companies who actually have to watch their bottom
line instead of engaging in managerial dicksize wars will do
theirs. And Linux will keep growing just as it has. Quietly, and
regardless of Micr0s0ft "case studies".</blockquote>
<blockquote>
<dl>
<dt><img src="../gx/dennis/bbub.gif" alt="(!)" height="28" width=
"50" border="0"> [Jason]</dt>
<dd><a href=
"http://en.wikipedia.org/wiki/David_Zamos">http://en.wikipedia.org/wiki/David_Zamos</a></dd>
</dl>
</blockquote>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Rick] Which links to a "Cleveland Scene"
article that's the most entertaining read I've had in a long
time.</blockquote>
<blockquote>Short version: Zamos was a 21-year-old impoverished
student who couldn't use the XP educational copy he bought, tried
to return it under Microsoft's return policy and was rather
unscrupulously denied, tried to sell it on eBay, had his auction
questionably cancelled by a Microsoft flack, recertified his
auction as lawful and then sold the copy, was sued by Microsoft on
ridiculous copyright and trademark charges, countersued on several
charges while proving in court (represented only by himself) that
the lawsuit was bogus and the company's actions repeatedly in bad
faith, got international publicity for the lopsided court fight
that he seemed poised to win, insisted on a jury trial, and
eventually accepted a settlement that included a gag
agreement.</blockquote>
<blockquote>All his countersuit had requested was an apology and
reimbursement for his $60 product cost. Microsoft refused, and thus
ended up being taken to the cleaners -- in front of the entire
world -- by a 21-year-old pro-se litigant with a $3,500 annual
gross income.</blockquote>
<!-- end 2 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<a name="nottag.3"></a>
<hr width="75%" align="center">
<!-- begin 3 -->
<h3 align="left"><img src="../gx/dennis/qbubble.gif" height="50"
width="60" alt="(?) " border="0">RadioShack... and ferrets?</h3>
<p><small>Wed, 04 Jan 2006</small></p>
<p><strong>From Predrag Ivanovic</strong></p>
<p><strong><img src="../gx/dennis/qbub.gif" alt="(?)" height="28"
width="50" border="0"> "Unlike many Linux vendors, Microsoft
provides its customers with strong indemnification against patent,
copyright, trade secret, and trademark infringement claims without
a monetary limit--part of its commitment to ensuring that licensing
issues and questions of intellectual property do not present
problems for customers."</strong></p>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Sluggo] Regarding the last one... Microsoft
is allowing you to pay them off to avoid a problem they themselves
caused?</blockquote>
<blockquote>Isn't that what Ben used to do for the KGB? I thought
it was called "Extortion" though.</blockquote>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Ben] You keep missing it, Mike. What I used
to do is take people who called it extortion - even those who
_didn't_ capitalize the word - stuff'em in a sack with hungry
ferrets on crack, and toss'em into a large dryer. Cost me $2.50
each time, but it was worth it.</blockquote>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Jimmy] Now... that's just kind. I would use
crack-addicted hungry ferrets, but I'd make sure they were going
through withdrawal... mainly just to see if they'd eat'em or
smoke'em.</blockquote>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Ben] Jimmy, from here on, I'll leaving the
<em>design</em> of these things to you. I'm obviously getting
behind the times, getting old and weak and decrepit... I'll just do
the knee-smashing, the spine-breaking, and the skull-cracking, and
you can do the hard bits.</blockquote>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Ben] Say... how's your mustelid quotient
these days? Need to be upped any? 'Cause, y'know, I have low
friends in high places; we can oblige.</blockquote>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Jimmy] I'm just amused by the mental
picture I have of a ferret holding a pipe. In a sack,
obviously.</blockquote>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Ben] I'd imagine that you could bribe
Heather and get a JPG. <img src="../gx/dennis/smily.gif" alt=":)"
height="24" width="20" align="middle"></blockquote>
<!-- end 3 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<a name="nottag.4"></a>
<hr width="75%" align="center">
<!-- begin 4 -->
<h3 align="left"><img src="../gx/dennis/qbubble.gif" height="50"
width="60" alt="(?) " border="0">Google</h3>
<p><small>Tue, 24 Jan 2006</small></p>
<p><strong>From Mike Orr</strong></p>
<p><strong><a href=
"http://slashdot.org/articles/06/01/24/1726241.shtml">http://slashdot.org/articles/06/01/24/1726241.shtml</a></strong></p>
<p><strong>'Google's product development pipeline runs at such a
fast rate that it's very difficult for any company, Microsoft or
Yahoo! to catch up.'</strong></p>
<p><strong>That couldn't be because they leverage and support open
source, could it?</strong></p>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Rick] You know, these stories, are, like,
too spazzed out unless you run them through the Valspeak
filter:</blockquote>
<blockquote>
<blockquote><a href=
"http://www.80s.com/cgi-bin/valley.cgi?url=slashdot.org/articles/06/01/24/1726241.shtml">
http://www.80s.com/cgi-bin/valley.cgi?url=slashdot.org/articles/06/01/24/1726241.shtml</a></blockquote>
</blockquote>
<p><strong><img src="../gx/dennis/qbub.gif" alt="(?)" height="28"
width="50" border="0"> That's great!</strong></p>
<pre class="code">
<strong>Yahoo! Like, oh my gawd! gives up quest for scope dominance</strong><br>
Yahoo! Like, oh my gawd! Inc., one of the first Network for, like, total
spazzes scope companies, totally has capitulated to Google Inc. in the
battle for market dominance.
"We totally don't think it's reasonable to assume we're going to gain a lot
of share from Google," Chief Financial Officer Susan Decker said in an
interview. "It's not our goal to be No. 1 in Network for, like, total
spazzes search. We would be very happy to maintain our market
share."
</pre>
<p><strong>I hope Thomas isn't getting a heart attack.</strong></p>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Thomas] I'm like, "no way".</blockquote>
<!-- end 4 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<a name="nottag.5"></a>
<hr width="75%" align="center">
<!-- begin 5 -->
<h3 align="left"><img src="../gx/dennis/qbubble.gif" height="50"
width="60" alt="(?) " border="0">Everything you ever wanted to know
about C types, Part 1: What's in a type?</h3>
<p><small>Thu, 05 Jan 2006</small></p>
<p><strong>From Jimmy O'Regan</strong></p>
<blockquote><a href=
"http://www-128.ibm.com/developerworks/power/library/pa-ctypes1/?ca=dgr-lnxw02CTypesP1">
http://www-128.ibm.com/developerworks/power/library/pa-ctypes1/?ca=dgr-lnxw02CTypesP1</a></blockquote>
<table width="95%" border="1" bgcolor="#FFFFCC">
<tr>
<td>
<p align="center">...............</p>
<p>"It is also possible to provide an incomplete definition of a
structure or union type, providing the tag name but not the
contents. Such an incomplete type cannot be directly used, but
pointers to such a type can be used (but not dereferenced). You can
use this to provide a level of encapsulation many people don't
realize is possible in C.</p>
<p>Listing 3. Encapsulation in C.</p>
<blockquote>
<pre>
       /* foo.h */
        struct foo_hidden;
        typedef struct foo_hidden *foo;
        extern foo new_foo();
        extern void delete_foo(foo);

        /* foo.c */
        struct foo_hidden {
                /* contents go here */
        };
</pre></blockquote>
... the &lt;stdio.h&gt; API never manipulates a FILE
object directly, only pointers to FILE objects. In fact, such
systems are entirely conforming. The humorous "Your stdio doesn't
appear very std." message that Perl's Configure script emits when
it can't figure out how to poke around inside a private structure
is simply false."
<p align="center">...............</p>
</td>
</tr>
</table>
<!-- end 5 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<a name="nottag.6"></a>
<hr width="75%" align="center">
<!-- begin 6 -->
<h3 align="left"><img src="../gx/dennis/qbubble.gif" height="50"
width="60" alt="(?) " border="0">Open Source cuddly penguins</h3>
<p><small>Wed, 04 Jan 2006</small></p>
<p><strong>From Jimmy O'Regan</strong></p>
<blockquote>"This project provides 'executables' that enable you to
make your own soft-toy Linux&reg; penguin. To put it straight: You
can find sewing patterns and a community to sew your own soft toy
or stuffed Linux&reg; Tux penguin here."</blockquote>
<blockquote><a href=
"http://www.free-penguin.org">http://www.free-penguin.org</a></blockquote>
<!-- end 6 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<a name="nottag.7"></a>
<hr width="75%" align="center">
<!-- begin 7 -->
<h3 align="left"><img src="../gx/dennis/qbubble.gif" height="50"
width="60" alt="(?) " border="0">Ultra-cool gadgetry</h3>
<p><small>Tue, 03 Jan 2006</small></p>
<p><strong>From Benjamin A. Okopnik</strong></p>
<blockquote>In the "not (yet) Linux" category: this is <em>the</em>
cool gadget of the year - tablet computing on paper. I see some
very, very interesting possibilities in the future for this thing
if it gets into the mainstream.</blockquote>
<blockquote><a href=
"http://www.mobilityguru.com/2005/12/19/pentop_computing_is_more_than_a_kids">
http://www.mobilityguru.com/2005/12/19/pentop_computing_is_more_than_a_kids</a></blockquote>
<blockquote><a href=
"http://www.flypentop.com">http://www.flypentop.com</a></blockquote>
<!-- end 7 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<a name="nottag.8"></a>
<hr width="75%" align="center">
<!-- begin 8 -->
<h3 align="left"><img src="../gx/dennis/qbubble.gif" height="50"
width="60" alt="(?) " border="0">The usual brilliant Redmond
strategy: checkmate in two moves</h3>
<p><small>Mon, 23 Jan 2006</small></p>
<p><strong>From Benjamin A. Okopnik</strong></p>
<p><strong>Yes, but for *whom?*</strong></p>
<p><strong><a href=
"http://www.gmtoday.com/news/technology/computers/topstory20.asp">http://www.gmtoday.com/news/technology/computers/topstory20.asp</a></strong></p>
<p><strong>Seems that Vista is going to require machines with more
resources than (my estimate) half the US population, and probably
95% of the people in the rest of the world, own.</strong></p>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Sluggo] It worked for Windows
95....</blockquote>
<blockquote>Just what I need, a 3-D word processor.</blockquote>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Thomas] DDD? No wait, that's a debugger.
Ah, I see now. <img src="../gx/dennis/smily.gif" alt=":)" height=
"24" width="20" align="middle"></blockquote>
<p><strong><img src="../gx/dennis/qbub.gif" alt="(?)" height="28"
width="50" border="0"></strong></p>
<pre class="code">
To be sure, Microsoft has said lesser computers will still be capable of
running Vista, just with some of the special features that differentiate
it from older versions of Windows automatically turned off.
</pre>
<p><strong>"Lesser" computers? I love it.</strong></p>
<pre class="code">
Dell has a section on its Web site, at www.dell.com/vista, which
highlights computers the company recommends for those planning to
upgrade to Vista. For models for the home and home office, the
recommended desktop is priced at $1,749. The laptop costs $2,699.
</pre>

<p><strong>Better and better, every day. Y'all ready to rush right
out and buy the top-buck gizmo of the day?</strong></p>
<p><strong>(*Don't* <em>anybody</em> <em>breathe</em>. If Micr0s0ft
actually falls for this one, we're home free.)</strong></p>
<!-- end 8 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<a name="nottag.9"></a>
<hr width="75%" align="center">
<!-- begin 9 -->
<h3 align="left"><img src="../gx/dennis/qbubble.gif" height="50"
width="60" alt="(?) " border="0">3 Cyrillic spams</h3>
<p><small>Wed, 25 Jan 2006</small></p>
<p><strong>From Rick Moen</strong></p>
<p><strong>Several spams got through over the last few days, in
fairly quick succession: I think I've now closed that hole. As a
reminder, this mailing list is a bit difficult to keep spam out of,
because of the open postings setting. (Posters aren't required to
subscribe.)</strong></p>
<blockquote><img src="../gx/dennis/bbub.gif" alt="(!)" height="28"
width="50" border="0"> [Jimmy] Oh. I thought you were giving us
holiday suggestions ("Winter in Egypt" <img src=
"../gx/dennis/smily.gif" alt=":)" height="24" width="20" align=
"middle"></blockquote>
<p><strong><img src="../gx/dennis/qbub.gif" alt="(?)" height="28"
width="50" border="0"> Essentially, although my mail server's most
effective antispam measure is the RFC-compliance tests carried out
during each attempted delivery (because most malware and other spam
doesn't even try to observe proper SMTP requirements), my MTA's
knack, a bit later, of vetting each posting through SpamAssassin is
pretty useful, too.</strong></p>
<p><strong>Anyhow, as it turns out, some particularly clever spams
insert SMTP headers intended to <em>disable SMTP-time SpamAssassin
checking</em> on the receiving host. Today, I've changed the SA
settings slightly, to make its semaphores a bit more difficult for
spammers to forge. (The two most recent spams got through because
I'd left that reconfiguration unfinished, with the effect,
ironically, of disabling SA checking entirely until I realised my
error.)</strong></p>
<!-- end 9 -->


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:123/lg_launderette.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
<!-- *** END author bio *** -->




<div id="articlefooter">




<p>
Published in Issue 123 of Linux Gazette, February 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="lg_backpage"></a>
<h1>The Backpage</h1>
<p id="by"><b>By <A HREF="../authors/okopnik.html">Ben Okopnik</A></b></p>


</b>
</p>


<p>

<h3>The Sound of Wedding Bells.mp3</h3>
<p>
<img alt="In the Japanese garden" src="misc/okopnik/In_the_Japanese_Garden.jpg" align="right" hspace="30">
It's been quite a tumultuous and busy month at LG, with some of the
challenges and the upheaval being personal as well as professional. For one
thing, your not-so-humble Editor-in-Chief just got married - and was lucky
enough to have many of his friends, including several LG staffers, present
at the ceremony. What a blast! My darling bride and I flew to Los Angeles
for our wedding (that being where most of our families and friends live)
and spent three days composed of high-speed driving, inventing solutions on
the spot, and plain old insanity (liberally mixed with laughter) to
substitute for anything resembling planning or preparation - since, in the
full-bore manner that seems to be the default dynamic between the two of
us, we had <strong>no</strong> time to prepare beforehand, other than
renting a hall for the event and arranging for an old friend of ours to
perform the ceremony.
</p>

<p>
This is certain to cause heart attacks among those who believe in having
The Perfect Wedding that takes several years to plan and an army of helpers
to execute (and in which a single broken fingernail signals the end of the
world), but we managed to figure out and assemble everything - what to
wear, what food to buy (and where), our vows (written the night before and
completed that morning!) and the ceremony - in about 80 hours total... it
all worked out without unreasonable amounts of stress, and even included
spending time with family and friends, as well as private time. Call it
amazing; we call it normal for the way the two of us do things. :)
</p>

<p>
To bring things back on topic - at least somewhat - the one constant factor
in making all of this happen was my old Acer laptop with a Verizon AirCard,
running Debian Linux. As I drove around L.A., taking corners on two wheels,
Kat mercilessly hammered the keys and ripped innocent packets out of the
air; in fact, if I stare hard enough - yes, the Acer has survived and is
even now being used to write this - I think I can see significant wear on
the keys used to spell 'maps.google.com'. To be sure, we relied on our
friends and family to help us (they all came through in magnificent style) -
but all the research, all the driving directions, all the options for
locations and style and food and even entertainment came from the Acer.
It was an amazingly geeky experience in the process... and a warm, loving,
unforgettable event as a result.
</p>

<p>
That's what I call technology at its finest.
</p>

<p><br></p>


<h3>In-house Happenings</h3>
<p>
In other news, the Linux Gazette is undergoing a little internal
rescheduling and re-arranging - please pardon the dust! As a result, The
Answer Gang column is absent from this issue (don't worry
- it'll be back next month.) Our Editor Gal (Heather Stern) and her helpers
(Thomas Adam and Jimmy O'Regan) need a break once in a while, too... the
most important rule for the LG staff is "Burnout Is Not Allowed". Among
this batch of friends, we often have to gently remind each other (although
sometimes, the meaning of 'gently' involves a large cluebat - I, for one,
have a thick skull) to sit back, have a beverage of choice, and Just
Breathe. If we're a column or an article short as a result for a given
month... well, that's the way it has to be. What it takes to keep LG
running is a bunch of willing, committed, and reasonably sane people - and
taking care of ourselves and each other is the first priority.
</p>

<p>
On the other hand, we have a couple of new volunteers: Howard Dyckoff, who
will be reviving our lapsed NewsBytes column, and Jan-Benedict Glaw, who
has agreed to review the C code submitted by our authors. I'm very happy to
welcome them aboard, and look forward to much pleasant cooperation in the
future.
</p>

<p>
Just as a reminder, while I'm on the topic - we're always looking for
volunteers, particularly proofreaders, editors, and technical reviewers. 
If you have some time and energy to contribute, the readership of LG will
appreciate it - and you'll be doing something that benefits thousands of
people, which is no small reward. If you're interested, please <a
href="mailto:editor@linuxgazette.net">contact me</a> and let me know in
what capacity you'd like to help - and don't forget that new ideas for
improving LG are always welcome.</p>


<p class="sig"><img src="../gx/okopnik_sig.png" alt="B. Okopnik"></p>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:123/lg_backpage.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<P>
<IMG ALT="picture" SRC="../gx/authors/okopnik.jpg" align="left"  hspace="10" vspace="10" class="bio">
Ben is the Editor-in-Chief for Linux Gazette and a member of The Answer Gang.

<em>
<p>
Ben was born in Moscow, Russia in 1962. He became interested in electricity
at the tender age of six, promptly demonstrated it by sticking a fork into
a socket and starting a fire, and has been falling down technological
mineshafts ever since. He has been working with computers since the Elder
Days, when they had to be built by soldering parts onto printed circuit
boards and programs had to fit into 4k of memory. He would gladly pay good
money to any psychologist who can cure him of the recurrent nightmares.

<p>His subsequent experiences include creating software in nearly a dozen
languages, network and database maintenance during the approach of a
hurricane, and writing articles for publications ranging from sailing
magazines to technological journals. After a seven-year Atlantic/Caribbean
cruise under sail and passages up and down the East coast of the US, he is
currently anchored in St. Augustine, Florida. He works as a technical
instructor for Sun Microsystems and a private Open Source consultant/Web
developer. His current set of hobbies includes flying, yoga, martial arts,
motorcycles, writing, and Roman history; his Palm Pilot is crammed full of
alarms, many of which contain exclamation points.

<p>He has been working with Linux since 1997, and credits it with his complete
loss of interest in waging nuclear warfare on parts of the Pacific Northwest.
</em>
<br CLEAR="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/okopnik.html">Ben Okopnik</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 123 of Linux Gazette, February 2006
</p>

</div>

</div>


<div id="navigation">

<a href="../index.html">Home</a>
<a href="../faq/index.html">FAQ</a>
<a href="../lg_index.html">Site Map</a>
<a href="../mirrors.html">Mirrors</a>
<a href="../mirrors.html">Translations</a>
<a href="../search.html">Search</a>
<a href="../archives.html">Archives</a>
<a href="../authors/index.html">Authors</a>
<a href="../contact.html">Contact Us</a>
</div>

<div id="breadcrumbs">

<a href="../index.html">Home</a> &gt;
<a href="index.html">February 2006 (#123)</a> &gt;
TWDT

</div>


<img src="../gx/tux_86x95_indexed.png" id="tux" alt="Tux"/>

<br />

</body>
</html>


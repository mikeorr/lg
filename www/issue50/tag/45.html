<!--startcut ======================================================= -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<META NAME="generator" CONTENT="lgazmail v1.3B.f">
<TITLE>The Answer Guy 50: Mystery Question</TITLE>
</HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"
	LINK="#3366FF" VLINK="#A000A0">
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<H4>"The Linux Gazette...<I>making Linux just a little more fun!</I>"</H4>
<P> <hr> <P>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<center>
<H1><A NAME="answer">
	<img src="../../gx/dennis/qbubble.gif" alt="(?)" 
		border="0" align="middle">
	<font color="#B03060">The Answer Guy</font>
	<img src="../../gx/dennis/bbubble.gif" alt="(!)" 
		border="0" align="middle">
</A></H1> 
<BR>
<H4>By James T. Dennis,
	<a href="mailto:tag@lists.linuxgazette.net">tag@lists.linuxgazette.net</a><BR>
	LinuxCare,
	<A HREF="http://www.linuxcare.com/">http://www.linuxcare.com/</A> 
</H4>
</center>

<p><hr><p>
<!--  endcut ======================================================= -->
<!-- begin 45 -->
<H3 align="left"><img src="../../gx/dennis/qbubble.gif" 
	height="50" width="60" alt="(?) " border="0"
	>Mystery Question</H3>


<p><strong>From Robert Polk  on Thu, 20 Jan 2000  
</strong></p>
<!-- ::
Mystery Question
~~~~~~~~~~~~~~~~
:: -->
<P><STRONG>
Hello,
</STRONG></P>
<P><STRONG>
Currently I am contracting for an LA based company.  We currently
have internal mail as well as a majority of users still using POP
mail from an ISP.
</STRONG></P>
<P><STRONG>
We'll say the domain name is <tt>z.com</tt>.  My question is in regard to
MX records.
</STRONG></P>
<P><STRONG>
Example:	<tt>domain z.com</tt>
</STRONG></P>

<pre><strong> MX preference 10 external.z.com
 MX preference 10 mail.z.com
</strong></pre>
<P><STRONG>
then it continues with 20, etc preferences.
</STRONG></P>
<P><STRONG>
Currently most users are still using this external mail for their
internet email (<tt>external.z.com</tt>). There are however, about 20
users internally that are only using the internal mail host for
their internet email (<tt>mail.z.com</tt>)=
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
I'm not sure what the question is.
</BLOCKQUOTE>
<BLOCKQUOTE>
There is a problem if you're using both of these hosts
(mail.z.com and external.z.com) as POP servers for the one
domain.  Unless you're doing some sort of address rewriting
or other mail routing on one or the other of these then any
piece of mail for z.com could land on either of these hosts.
Since each of them has equal MX values, and there are no
lower MX values for the z.com domain, the mail that lands on
one or the other will stay there.
</BLOCKQUOTE>
<BLOCKQUOTE>
In general you don't want to have this ambiguity.
The lowest MX for a given domain or subdomain should
lead to one unique host.  The secondaries and tertiaries
can be ambiguous since they will all relay their mail
to the lower MX hosts.
</BLOCKQUOTE>
<BLOCKQUOTE>
You can do scaling in a few ways at the MTA level.
For example you can have a big aliases file (DBM)
or a set of NIS/NIS+ maps or an LDAP server to
provide aliasing of recipients to specific POP
servers.  This can give provide a "flat" external
mail profile (everyone is @z.com) while allowing
you to scale to a much larger number of users
than you could support on a single POP server.
</BLOCKQUOTE>
<BLOCKQUOTE>
(This assumes also that you'll configure all
the mail hubs to re-write outgoing mail to
masquerade the From: and Return: addresses).
</BLOCKQUOTE>
<BLOCKQUOTE>
Maybe the question you were asking is how to
have your mail servers distinquish between
the internal and external users.  In that case,
just use aliases.  Mail that's <EM>addressed</EM> to
"external.z.com" will ignore the z.com MX record.
Likewise for any that's <EM>addressed</EM> to "mail.z.com"
</BLOCKQUOTE>
<BLOCKQUOTE>
To understand this you must note the distinction
between where hosts to which mail is SENT and those
to which it is ADDRESSED.  Mail is sent to a host
according to it's MX records.  What that host does
with it depends on how it is addressed.  If the
mail is addressed to any of the names that are on
on a hosts "whoami" list (the sendmail 'w' class)
then rewriting, aliasing, and local delivery are
performed.
</BLOCKQUOTE>
<BLOCKQUOTE>
(I'm shamelessly limiting the MTA terminology
here to that of 'sendmail' --- the various other
MTAs have similar features and concepts).
</BLOCKQUOTE>
<BLOCKQUOTE>
Anyway, I've said more than enough given that
I have no idea of what your question really is.
</BLOCKQUOTE>

</BLOCKQUOTE>
<!-- sig -->


<!-- end 45 -->
<!--startcut ======================================================= -->
<P> <hr> <P>
<H5 align="center"><a href="http://www.linuxgazette.net/copying.html"
	>Copyright &copy;</a> 2000, James T. Dennis 
<BR>Published in <I>The Linux Gazette</I> Issue 50 February 2000</H5>
<H6 ALIGN="center">HTML transformation  by
	<A HREF="mailto:star@starshine.org">Heather Stern</a> of
	Starshine Technical Services,
	<A HREF="http://www.starshine.org/">http://www.starshine.org/</A> 
</H6>
<P> <hr> <P>
<!-- begin tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::-->
<TABLE WIDTH="95%"><TR VALIGN="center" ALIGN="center">
<TD colspan="2" rowspan="2"><A 
	HREF="../lg_answer50.html"
	><IMG SRC="../../gx/dennis/answernew.gif"
              ALT="[ Answer Guy Current Index ]"></A>
<TD colspan="2" rowspan="2"><A 
	HREF="../../tag/kb.html"
	><IMG SRC="../../gx/dennis/answertoc.gif"
              ALT="[ Index of Past Answers ]"></A></td>
  <TD WIDTH="11%"><A HREF="../lg_answer50.html#greeting"><img
	src="../../gx/dennis/smily.gif" alt="greetings" border="0"></A></TD>
  <TD WIDTH="11%"><A HREF="1.html">1</A></TD>
  <TD WIDTH="11%"><A HREF="2.html">2</A></TD>
  <TD WIDTH="11%"><A HREF="3.html">3</A></TD>
  <TD WIDTH="11%"><A HREF="4.html">5</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="11%"><A HREF="5.html">5</A></TD>
  <TD WIDTH="11%"><A HREF="6.html">6</A></TD>
  <TD WIDTH="11%"><A HREF="7.html">7</A></TD>
  <TD WIDTH="11%"><A HREF="8.html">8</A></TD>
  <TD WIDTH="11%"><A HREF="9.html">9</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="10%"><A HREF="10.html">10</A></TD>
  <TD WIDTH="10%"><A HREF="11.html">11</A></TD>
  <TD WIDTH="10%">&nbsp;</TD>
  <TD WIDTH="10%"><A HREF="13.html">13</A></TD>
  <TD WIDTH="11%"><A HREF="14.html">14</A></TD>
  <TD WIDTH="11%"><A HREF="15.html">15</A></TD>
  <TD WIDTH="11%"><A HREF="16.html">16</A></TD>
  <TD WIDTH="11%"><A HREF="17.html">17</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="10%"><A HREF="18.html">18</A></TD>
  <TD WIDTH="10%"><A HREF="19.html">19</A></TD>
  <TD WIDTH="10%"><A HREF="20.html">20</A></TD>
  <TD WIDTH="10%"><A HREF="21.html">21</A></TD>
  <TD WIDTH="11%"><A HREF="22.html">22</A></TD>
  <TD WIDTH="11%"><A HREF="23.html">23</A></TD>
  <TD WIDTH="11%"><A HREF="24.html">24</A></TD>
  <TD WIDTH="11%">&nbsp;</TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="10%"><A HREF="26.html">26</A></TD>
  <TD WIDTH="10%"><A HREF="27.html">27</A></TD>
  <TD WIDTH="10%"><A HREF="28.html">28</A></TD>
  <TD WIDTH="10%"><A HREF="29.html">29</A></TD>
  <TD WIDTH="11%"><A HREF="30.html">30</A></TD>
  <TD WIDTH="11%"><A HREF="31.html">31</A></TD>
  <TD WIDTH="11%"><A HREF="32.html">32</A></TD>
  <TD WIDTH="11%"><A HREF="33.html">33</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="10%"><A HREF="34.html">34</A></TD>
  <TD WIDTH="10%">&nbsp;</TD>
  <TD WIDTH="10%"><A HREF="36.html">36</A></TD>
  <TD WIDTH="10%"><A HREF="37.html">37</A></TD>
  <TD WIDTH="11%"><A HREF="38.html">38</A></TD>
  <TD WIDTH="11%"><A HREF="39.html">39</A></TD>
  <TD WIDTH="11%"><A HREF="40.html">42</A></TD>
  <TD WIDTH="11%"><A HREF="41.html">41</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="10%"><A HREF="42.html">42</A></TD>
  <TD WIDTH="10%"><A HREF="43.html">43</A></TD>
  <TD WIDTH="10%"><A HREF="44.html">44</A></TD>
  <TD WIDTH="10%"><A HREF="45.html">45</A></TD>
  <TD WIDTH="11%"><A HREF="46.html">46</A></TD>
  <TD WIDTH="11%"><A HREF="47.html">47</A></TD>
  <TD WIDTH="11%"><A HREF="48.html">48</A></TD>
</TR></TABLE>
</TR><TR VALIGN="center" ALIGN="center">
<!-- end tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::::-->
<P> <hr> <P>
<!-- begin lgnav ::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<A HREF="../index.html"
	><IMG SRC="../../gx/indexnew.gif" ALT="[ Table Of Contents ]"></A>
<A HREF="../../index.html"
	><IMG SRC="../../gx/homenew.gif" ALT="[ Front Page ]"></A>
<A HREF="../lg_bytes50.html"
	><IMG SRC="../../gx/back2.gif" ALT="[ Previous Section ]"></A>
<A HREF="../../faq/index.html"
	><IMG SRC="../../gx/dennis/faq.gif"
              ALT="[ Linux Gazette FAQ ]"></A>
<A HREF="../lg_tips50.html"
	><IMG SRC="../../gx/fwd.gif" ALT="[ Next Section ]"></A>
<!-- end lgnav ::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
</BODY></HTML>
<!--endcut ========================================================= -->

<!--startcut ======================================================= -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<META NAME="generator" CONTENT="lgazmail v1.2M.j">
<TITLE>The Answer Guy 44: Copying boot partitiion</TITLE>
</HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"
	LINK="#3366FF" VLINK="#A000A0">
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<H4>"The Linux Gazette...<I>making Linux just a little more fun!</I>"</H4>
<P> <hr> <P>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<center>
<H1><A NAME="answer">
	<img src="../../gx/dennis/qbubble.gif" alt="(?)" 
		border="0" align="middle">
	<font color="#B03060">The Answer Guy</font>
	<img src="../../gx/dennis/bbubble.gif" alt="(!)" 
		border="0" align="middle">
</A></H1> 
<BR>
<H4>By James T. Dennis,
	<a href="mailto:tag@lists.linuxgazette.net">tag@lists.linuxgazette.net</a><BR>
	LinuxCare,
	<A HREF="http://www.linuxcare.com/">http://www.linuxcare.com/</A> 
</H4>
</center>

<p><hr><p>
<!--  endcut ======================================================= -->
<!-- begin 35 -->
<H3 align="left"><img src="../../gx/dennis/qbubble.gif" 
	height="50" width="60" alt="(?) " border="0"
	>Copying boot partitiion</H3>

<p><strong>From the Linux User Support Team (L.U.S.T) List  
	on Mon, 19 Jul 1999  </strong></p>

<P><STRONG><FONT COLOR="#000066"><EM><IMG 
	SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Hello all,
</EM></FONT></STRONG></P>
<P><STRONG><FONT COLOR="#000066"><EM>
I have a disk in a Redhat Linux 6.0 machine that has developed some
bad sectors, about 200 meg's worth.  Everything seems to be working
but I would like to replace the disk.  Is there a way I can copy the
whole partition to another disk and then just swap them.  I suppose I
can do something like mirroring the disks but I haven't a clue where
to start.
</EM></FONT></STRONG></P>
<P><STRONG><FONT COLOR="#000066"><EM>
Thanks for any help.
<br>Darren Pedley
</EM></FONT></STRONG></P>

<P><STRONG><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
I usually mount new disks under <TT>/mnt</TT>
after fdisk &amp; mke2fs to make it ext2fs
</strong></p>
<pre><strong>
mount /dev/newdrive /mnt
cd  /

for i in `\ls |grep -v  proc |grep -v  mnt`
do
cp -aRv  $i /mnt/
done
</STRONG></Pre>
<P><STRONG>
boot with boot stiffy &amp; rerun lilo
</STRONG></P>
<P><STRONG>
all done
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Ack!  So complicated.
</BLOCKQUOTE>
<BLOCKQUOTE>
If you have three partitions that you want  backup
to <TT>/mnt</TT> (let's say <TT>/</TT>, <TT>/usr</TT>, and 
<TT>/home</TT>) you could use something as simple as:
</BLOCKQUOTE>
<BLOCKQUOTE><BlockQuote><pre>
for i in / /usr /home; do
cp -pax $i /mnt
done
</pre></blockquote></BLOCKQUOTE>
<BLOCKQUOTE>
.... the <tt>-x</tt> will prevent the GNU cp command from
crossing over filesystem/mount boundaries.  Thus you
needn't worry about inadvertantly copying <TT>/proc</TT> or
recursing down into <TT>/mnt</TT>.
</BLOCKQUOTE>
<BLOCKQUOTE>
(Obviously to just get the root filesystem you'd
just use <TT>cp -pax / /mnt</TT>; to list all your currently
active filesystems just use the mount command with
no arguments; to list all the partitions/filesystems
on your system use the '<TT>fdisk -l</TT>' command).
</BLOCKQUOTE>
<!-- sig -->

<!-- end 35 -->
<!--startcut ======================================================= -->
<P> <hr> <P>
<H5 align="center"><a href="http://www.linuxgazette.net/copying.html"
	>Copyright &copy;</a> 1999, James T. Dennis 
<BR>Published in <I>The Linux Gazette</I> Issue 44 August 1999</H5>
<H6 ALIGN="center">HTML transformation  by
	<A HREF="mailto:star@starshine.org">Heather Stern</a> of
	Starshine Techinical Services,
	<A HREF="http://www.starshine.org/">http://www.starshine.org/</A> 
</H6>
<P> <hr> <P>
<!-- begin tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::-->
<TABLE WIDTH="98%"><TR VALIGN="center" ALIGN="center">
<TD ROWSPAN="2" COLSPAN="3" WIDTH="42%"><A 
	HREF="../lg_answer44.html"
	><IMG SRC="../../gx/dennis/answernew.gif"
              ALT="[ Answer Guy Index ]"></A></td>
  <TD WIDTH="14%"><A HREF="1.html">1</A></TD>
  <TD WIDTH="14%"><A HREF="4.html">4</A></TD>
  <TD WIDTH="14%"><A HREF="7.html">7</A></TD>
  <TD WIDTH="14%"><A HREF="9.html">9</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="14%"><A HREF="11.html">11</A></TD>
  <TD WIDTH="14%"><A HREF="12.html">12</A></TD>
  <TD WIDTH="14%"><A HREF="14.html">14</A></TD>
  <TD WIDTH="14%"><A HREF="17.html">17</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD><A HREF="18.html">18</A></TD>
  <TD><A HREF="19.html">19</A></TD>
  <TD><A HREF="20.html">20</A></TD>
  <TD><A HREF="21.html">21</A></TD>
  <TD><A HREF="24.html">24</A></TD>
  <TD><A HREF="25.html">25</A></TD>
  <TD><A HREF="26.html">26</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD><A HREF="28.html">28</A></TD>
  <TD><A HREF="29.html">29</A></TD>
  <TD><A HREF="30.html">30</A></TD>
  <TD><A HREF="31.html">31</A></TD>
  <TD><A HREF="32.html">32</A></TD>
  <TD><A HREF="33.html">33</A></TD>
  <TD><A HREF="34.html">34</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD><A HREF="35.html">35</A></TD>
  <TD><A HREF="36.html">36</A></TD>
  <TD><A HREF="37.html">37</A></TD>
  <TD><A HREF="38.html">38</A></TD>
  <TD><A HREF="39.html">39</A></TD>
  <TD><A HREF="40.html">40</A></TD>
  <TD><A HREF="41.html">41</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD><A HREF="42.html">42</A></TD>
  <TD><A HREF="43.html">43</A></TD>
  <TD><A HREF="44.html">44</A></TD>
  <TD><A HREF="45.html">45</A></TD>
  <TD><A HREF="46.html">46</A></TD>
  <TD><A HREF="47.html">47</A></TD>
  <TD><A HREF="48.html">48</A></TD>
</TR></TABLE>
<!-- end tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::::-->
<P> <hr> <P>
<!-- begin lgnav ::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<A HREF="../index.html"
	><IMG SRC="../../gx/indexnew.gif" ALT="[ Table Of Contents ]"></A>
<A HREF="/index.html"
	><IMG SRC="../../gx/homenew.gif" ALT="[ Front Page ]"></A>
<A HREF="../lg_bytes44.html"
	><IMG SRC="../../gx/back2.gif" ALT="[ Previous Section ]"></A>
<A HREF="../lg_tips44.html"
	><IMG SRC="../../gx/fwd.gif" ALT="[ Next Section ]"></A>
<!-- end lgnav ::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
</BODY></HTML>
<!--endcut ========================================================= -->



<html>
<head>
<link href="../lg.css" rel="stylesheet" type="text/css" media="screen, projection" />
<title>
Linux Gazette : August 2006 (#129) 
</title>

<style type="text/css" media="screen, projection">
<!--

.twdtarticle {
	width: 84%;
	/* margin:0px;
	left:0px; */
}

#twdtbody {
/*
	margin-left:0px;
	margin-right:0px;
*/
}

.twdtarticle h1 {
	font-size:19px;
	text-align:center;
}

.lgcontent {
        width: 84%;
        margin-top: 30px;
        /* left:0px; */
}

-->
</style>


</head>

<body id="twdtbody">


<img src="../gx/2003/newlogo-blank-200-gold2.jpg" alt="Linux Gazette" id="twdtlogo"/>
<p id="fun">...making Linux just a little more fun!</p>




<div class="content lgcontent">

<h2>August 2006 (#129):</h2>

<ul>


	<li><a href="#lg_tips">2-cent Tips</a>

	<li><a href="#lg_mail">Mailbag</a>

	<li><a href="#lg_talkback">Talkback</a>

	<li><a href="#appaiah">Making XMMS Effect plugins</a>, by <i>Kumar Appaiah</i></li>

	<li><a href="#dyckoff">Away Mission -- SEMTECH - The Semantic Web Technology Conference</a>, by <i>Howard Dyckoff</i></li>

	<li><a href="#okopnik">The Geekword Puzzle</a>, by <i>Ben Okopnik</i></li>

	<li><a href="#okopnik1">Low-Fat Linux - Now with Less Cruft!</a>, by <i>Ben Okopnik</i></li>

	<li><a href="#pitcher">A Prisoner of Windows</a>, by <i>Lew Pitcher</i></li>

	<li><a href="#saha">Issues In Concurrent Server Design on Linux Systems - Part I</a>, by <i>Amit Saha</i></li>

	<li><a href="#ecol">Ecol</a>, by <i>Javier Malonda</i></li>

</ul>

</div>




<br />


<div class="content lgcontent">

<a name="lg_tips"></a>
<h1>2-cent Tips</h1>


</b>
</p>


<p>

<div class="mb-2-cent-tips">
<hr />
<h2>2-Cent Tips</h2>
<a href="#2-cent-tips.01">2-cent tip: HTML conversion</a>
<br />
<a href="#2-cent-tips.02">2-cent tip: More HTML fun</a>
<br />
<a href="#2-cent-tips.03">2cent-tip: Disabling Javascript in Firefox with a blacklist</a>
<br />
<a href="#2-cent-tips.04">2-cent Tip: Randomizing a playlist</a>
<br />
<a href="#2-cent-tips.05">2 Cent Tip: vnc2swf - a cross-platform screen recording tool developed by Yusuke Shinyama</a>
<br />
<a href="#2-cent-tips.06">2 Cent Tip: Excel files</a>
<br />
 
</div><div class="mb-2-cent-tips"><hr />
<a name="2-cent-tips.01" />
<h3>2-cent tip: HTML conversion</h3>
 
 <p>Benjamin A. Okopnik (ben at linuxgazette.net) 
 <br /> 
 Tue Jul 11 08:05:03 PDT 2006</p> 
  
 
<p>
If you need to convert a plain-text file to HTML - particularly code
with nice highlighting thrown in for free - try the 'TOhtml' feature in
Vim.
</p>

<p>
All you have to do is open the file that you'd like to 'HTMLize' - if
it's code, make sure that 'syntax' is set to the correct language and is
turned on (e.g., ':set syntax=perl' and ':syntax on') - and enter ':TO'
in command mode. That's it. Vim will add the correct headers, footers,
and color tags to make it all look just the way you see it when editing
it in Vim.
</p>

<p>
There's much more to it - you can do this as XML, or with CSS instead of
physical formatting, etc. The documentation for this plugin can be seen
by entering ':help TO' from command mode.
</p>

 

</div><div class="mb-2-cent-tips"><hr />
<a name="2-cent-tips.02" />
<h3>2-cent tip: More HTML fun</h3>
 
 <p>Benjamin A. Okopnik (ben at linuxgazette.net) 
 <br /> 
 Tue Jul 11 08:35:53 PDT 2006</p> 
 <em>Followed up by:  Ben, Thomas</em> 
 
<p>
One of the annoyances of converting plain text to HTML is in having to
wrap every paragraph in a pair of '&lt;p&gt;&lt;/p&gt;' tags. This task can
be
mostly eliminated by using the substitution operator in Vim; just enter
</p>

<pre class="code">
:%s#\(\s*\n\)\{2,\}#\r&lt;/p&gt;&amp;&lt;p&gt;\r#g
:%s#\(.*\n\)*#&lt;p&gt;\r&amp;\r&lt;/p&gt;#g
</pre>
<p>
in command mode.
</p>

<p>
The first expression looks for more than two newlines (possibly followed
by white space) in a row - which is how paragraphs are usually defined -
and replaces them with a newline, a paragraph closure (&lt;/p&gt;, since
it's
the end of the previous paragraph), the content that was matched in the
expression (i.e., the newlines themselves), and a start-of-paragraph
marker (&lt;p&gt;) followed by another newline. The second expression just
takes care of the first and the last paragraph markers, since they're
not included in the first algorithm.
</p>

<p>
This can also be scripted as a Vim macro in your '~/.vimrc' file, e.g.
</p>

<pre class="code">
" Mark the file with HTML paragraphs
map \H :%s#\(\s*\n\)\{2,\}#\r&lt;/p&gt;&amp;&lt;p&gt;\r#g&lt;CR&gt;:%s#\(.*\n\)*#&lt;p&gt;\r&amp;\r&lt;/p&gt;#g&lt;CR&gt;
</pre>
<p>
After adding the above, simply typing '\H' in command mode will do all
the paragraphing for you. Note that the second expression can be easily 
modified to add an HTML header and footer to provide a browser-ready
HTML file - all in one pass!
</p>

<p>
[Thomas] - In Vim7, and with using omni-completion, it gets easier than
that.  Just press:
</p>

<blockquote>
<pre class="code">
^XO
</pre>
<p>
For a tag, and it will complete it.   There's lots of cool tricks like
that in Vim, but it for Vim7, which is certainly not de facto.
</p>
</blockquote>

<p>
[[Ben]] - The last time I tried to figure out ^X mode, I got a headache. Too
many 'if's. If I want tag completion, I'll just source my little 'html.vim'
file, which includes, in part:
</p>


<blockquote>
<pre class="code">
" Make HTML tag:
"	Insert mode		Command mode
"	tag^K			&lt;tag&gt;\n&lt;/tag&gt;
"	tag^L			&lt;tag&gt;
"	&lt;tag&gt;...^E		&lt;tag&gt;line&lt;/tag&gt; &lt;tag&gt;...&lt;/tag&gt;
"
imap &lt;C-k&gt; &lt;Esc&gt;yiwi&lt;&lt;Esc&gt;ea&gt;&lt;CR&gt;&lt;/&lt;C-r&gt;"&gt;&lt;Up&gt;&lt;End&gt;
imap &lt;C-l&gt;	&lt;Esc&gt;yiwi&lt;&lt;Esc&gt;ea&gt;
imap &lt;C-e&gt;	&lt;Esc&gt;T&lt;yiwA&lt;/&lt;C-r&gt;"&gt;
map &lt;C-e&gt;	m`T&lt;yiw``i&lt;/&lt;C-r&gt;"&gt;
</pre>
</blockquote>

 

</div><div class="mb-2-cent-tips"><hr />
<a name="2-cent-tips.03" />
<h3>2cent-tip: Disabling Javascript in Firefox with a blacklist</h3>
 
 <p>Jason Creighton (jcreigh at gmail.com) 
 <br /> 
 Wed Jul 12 19:22:28 PDT 2006</p> 
  
 
<p>
Hi,
</p>

<p>
I wanted to disable Javascript for one particular site, but the de facto
Javascript blocking extension, NoScript, works by whitelisting instead
of blacklisting. Undoubtedly better security practice, but I'm too lazy
to do that. It took me a bit of time to find the answer, so I thought
I'd post it here for posterity.
</p>

<p>
All you need to do is place the following incantation in your user.js:
</p>

<pre class="code">
user_pref("capability.policy.policynames", "nojs");
user_pref("capability.policy.nojs.sites", "http://site1.com http://site2.com");
user_pref("capability.policy.nojs.javascript.enabled", "noAccess");
</pre>
<p> ...with "http://site1.com" and "http://site2.com" replaced with the
actual sites for which you want to disable Javascript, of course. This
example was taken from
<a href="http://www.mozilla.org/projects/security/components/ConfigPolicy.html">http://www.mozilla.org/projects/security/components/ConfigPolicy.html</a>,
which has many other examples and information regarding setting security
policies in Firefox.  </p>

 

</div><div class="mb-2-cent-tips"><hr />
<a name="2-cent-tips.04" />
<h3>2-cent Tip: Randomizing a playlist</h3>
 
 <p>Benjamin A. Okopnik (ben at linuxgazette.net) 
 <br /> 
 Fri Jul 14 05:32:29 PDT 2006</p> 
  
 
<p>
Well, this isn't just for playlists - but that's what I'm playing around
with this morning, and I can't think of too many other reasons to
randomize a file (unless it's to scramble a political campaign speech;
it's very amusing to see them make just as much sense as they did
originally...)
</p>

<p>
In any case, this is one of those places where Perl comes in very useful
indeed:
</p>

<pre class="code">
perl -we 'print sort { int( rand 2 ) * 2 - 1 } &lt;&gt;' list.m3u &gt; random.m3u
</pre>
<p>
Conversely, for more features in your randomness, you could install Adam
Rosi-Kessel's 'randomplay':
</p>

<p>
<a href="http://adam.rosi-kessel.org/weblog/free_software/code/randomplay.html">http://adam.rosi-kessel.org/weblog/free_software/code/randomplay.html</a>
</p>

<p>
(If you use Debian, it's already available as a package.)
</p>

 

</div><div class="mb-2-cent-tips"><hr />
<a name="2-cent-tips.05" />
<h3>2 Cent Tip: vnc2swf - a cross-platform screen recording tool developed by Yusuke Shinyama</h3>
 
 <p>Peter Knaggs (peter.knaggs at gmail.com) 
 <br /> 
 Thu Jul 20 20:20:16 PDT 2006</p> 
  
 
<p>
<a href="http://www.penlug.org/twiki/bin/view/Main/TightVNC#Welcome_to_Hollywood_Recording_y">http://www.penlug.org/twiki/bin/view/Main/TightVNC#Welcome_to_Hollywood_Recording_y</a>
</p>

<p>
vnc2swf is a cross-platform screen recording tool developed by Yusuke
Shinyama. It's a way to record your VNC session as an Adobe/Macromedia
Shockwave Flash animation format file (swf), so that you can later
play it back in Firefox, or using a standalone flash player e.g. gnash
or swfdec or gplflash. For Debian stable, to build vnc2swf proceed
something like this:
</p>

<pre class="code">
  sudo apt-get install libxmu-dev
  sudo apt-get install libxaw7-dev
  wget http://www.unixuser.org/~euske/vnc2swf/vnc2swf-0.5.0.tar.gz
  tar zxvf vnc2swf-0.5.0.tar.gz
  cd vnc2swf-0.5.0
  ./configure
  make
  ./vnc2swf -startrecording outfile.swf your_vnc_server:1 &gt; outfile.html
</pre>
<p>
This will bring up a VNC client which is recording everything from
your VNC server into the outfile.swf and once you quit by pressing F8
Q it will also build outfile.html which you can open in Firefox to
review your captured animation, or should I say your next blockbuster.
</p>

<p>
Update: The Python version of vnc2swf includes a nifty sliding search
bar at the bottom of your masterpiece, so that you can seek (and your
audience can skip over any less-than stellar segments of your
creation). For Debian stable, we can get it installed something like
this:
</p>

<pre class="code">
  sudo apt-get install python2.3-tk
  sudo apt-get install python-pygame
  wget http://www.unixuser.org/~euske/vnc2swf/pyvnc2swf-0.8.2.tar.gz
  tar zxvf pyvnc2swf-0.8.2.tar.gz
  cd pyvnc2swf-0.8.2
  ./vnc2swf.py
</pre>
<p>
This brings up a nice friendly dialog box, with a "Start" button,
which initiates the recording of the VNC server session, so you just
control the VNC session you're recording using your regular VNC
viewer.
</p>


 

</div><div class="mb-2-cent-tips"><hr />
<a name="2-cent-tips.06" />
<h3>2 Cent Tip: Excel files</h3>
 
 <p>Kapil Hari Paranjape (kapil at imsc.res.in) 
 <br /> 
 Thu Jul 27 04:25:46 PDT 2006</p> 
  
 
<p>
Hello,
</p>

<p>
If (like me) you have people who send you worthwhile information
as ".xls" (MS Excel) files <strong>and</strong> you want to handle everything in
"text mode", then read on.
</p>

<p>
1. Debian package "catdoc" contains the utility "xls2csv". <strong>xls2csv
file.xls &gt; file.csv</strong>	converts the file into "comma separated
values" format.  This is still not much use since people who use Excel
assume that you understand "spread sheets". <br>
2. Debian package "sc" contains the utilities "psc" and "sc". <strong>psc -L
-k -d',' &lt; file.csv &gt; file.sc</strong> converts this file into the
"sc" input format.  The "sc" text-mode spreadsheet can be used to edit it
("man sc" is your friend here). You can even save it to a LaTeX table.
</p>

<p>
Seems like too much work? I really have to get used to OpenOffice one
of these days!
</p>

 

</div>
</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:129/lg_tips.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
<!-- *** END author bio *** -->




<div id="articlefooter">




<p>
Published in Issue 129 of Linux Gazette, August 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="lg_mail"></a>
<h1>Mailbag</h1>


</b>
</p>


<p>

<div class="mb-mailbag">
<hr />
<h2>Mailbag</h2>
<a href="#mailbag.01">Adding a Broadcom NetXtreme Gigabit Ethernet Driver</a>
<br />
<a href="#mailbag.02">soundcard</a>
<br />
<a href="#mailbag.03">regarding simulation of ARP</a>
<br />
<a href="#mailbag.04">Problem in Linux FC5 Kernel recompiling</a>
<br />
<a href="#mailbag.05">Blue line</a>
<br />
<a href="#mailbag.06">Colouring $PS1...</a>
<br />
<a href="#mailbag.07">Adding bogofilter to Exim4: ""doesn't work"".</a>
<br />
<a href="#mailbag.071">Starting to explore the Linux kernel code</a>
<br />
<a href="#mailbag.08">Message sending failure</a>
<br />
 
</div><div class="mb-mailbag"><hr />
<a name="mailbag.01" />
<h3>Adding a Broadcom NetXtreme Gigabit Ethernet Driver</h3>
 
 <p>DR James (vas_an_nox at yahoo.com) 
 <br /> 
 Tue May 30 07:31:54 PDT 2006</p> 
 <em>Answered by:  Thomas</em> 
 
<strong>
<p>Greetings James,</p>
<p>How do you load a driver for an integrated network interface card in
RedHat 
  Enterprise? The driver is for a Broadcom NetXtreme Gigabit Ethernet
Driver.</p>
<p>Thank you!</p>
</strong>
<p>[Thomas] - It's been a while, clearly. We're a &quot;gang&quot; now.</p>
<blockquote>
  <p>You'd use &quot;modprobe&quot; like everyone else. Ascertaining the name 
    of the module to load is left as an exercise to yourself. :P</p>
</blockquote>
<p>[[DR James]] - Thanks Thomas!</p>
 

</div><div class="mb-mailbag"><hr />
<a name="mailbag.02" />
<h3>soundcard</h3>
 
 <p>(Jazzyjayne69 at aol.com) Jazzyjayne69 at aol.com 
 <br /> 
 Sat Jun 10 22:16:10 PDT 2006</p> 
 <em>Answered by:  Ben, Marty, Rick, Thomas</em> 
 
<strong><p>I need a soundcard for win 98 download free if possible...PLEASE
help me,</p>
    
<p>Jayne</p>
</strong>

<p>[Thomas] - No.  At least, you're out of luck here.  You randomly emailed
a group of us that answer questions about Linux.  Note that I assume you
mean a "driver" for A soundcard, since one doesn't download soundcards
directly on the Internet.  God forbid you should ask that exact question
anywhere else, but even the name of the soundcard would help.  </p>

<blockquote>
  <p>Good luck.  Your answer is anywhere but here.</p>
</blockquote>

<p>[[Marty]] - Maybe he wants the schematics?  ;-)
</p>

<p>[Ben] -
</p>

<pre>
--------------------------------------------------------------------------
* * * * * * * THESE ARE NOT THE DROIDS YOU'RE LOOKING FOR * * * * * * *

The address to which you have sent your query is that of The Answer Gang 
for the Linux Gazette. We answer questions related to the Linux operating
system. Unrelated questions are likely to get anything ranging from a 
polite answer to astonished laughter, with curmudgeonly replies being 
somewhat of a norm. Good karma points are awarded to those who tell us 
where they got our address and the reason they thought that we might help 
with fish identification, spaceship repair, or nude snowboarding. 

Spammers will be whacked with a dead trout; flames will be graded for 
content, laughed at, and sent to /dev/null; amusing bits may get shared 
with our readers.

Good luck with your search.
--------------------------------------------------------------------------
</pre>
<p>[Rick] - Volley:
</p>

<blockquote>
  <p>I need a source for good pastrami on the USA West Coast.</p>
</blockquote>

 

</div><div class="mb-mailbag"><hr />
<a name="mailbag.03" />
<h3>regarding simulation of ARP</h3>
 
 <p>senthil kumar (senthil_sma at yahoo.co.in) 
 <br /> 
 Wed Jun 28 02:36:53 PDT 2006</p> 
 <em>Answered by:  Ben</em> 
 
<strong>
<p>Respected sir, </p>

<p>I am senthilkumar from India, </p>

<p>My question or request is please send me a Cprogram for simulation
of ARP and RARP</p>
<p>thanking you
</p>
</strong>

<p>[Ben] - Sure, umm... senthilkumar from India. However, we first require
your professor's name and email address; when we do someone's homework for
them, we want the credit - and the degree or the certificate for the course
as well. If you wanted those, you'd be doing the work yourself; since
you're so kind as to offer them to us instead, we can do nothing less than
accept gratefully.</p>

<blockquote>
<p>Please send the information as soon as possible - I just
<strong>know</strong> everyone's fingers here are itching to start typing '<code>#include &lt;stdio.h&gt;</code>' and '<code>int main(int argc, char *argv[])</code>' right away!  </p>
</blockquote>

 

</div><div class="mb-mailbag"><hr />
<a name="mailbag.04" />
<h3>Problem in Linux FC5 Kernel recompiling</h3>
 
 <p>Deepak Mishra (mishradk at gmail.com) 
 <br /> 
 Mon May 29 04:58:06 PDT 2006</p> 
 <em>Answered by:  Deepak, John, Thomas</em> 
 <p> <strong>Hello, </strong></p>
<p><strong>I had a FC5 installation on my PC. now to enable RTAI i am going to 
  recompile the source code with the patch.</strong></p>
<p><strong> Now my question is when i do a &quot;make modules_install install&quot; 
  after compiling the kernel source, is it going to replace my old .ko files? 
  or my old modules will also be there?</strong></p>
<p><strong>If it is not going to replace my old .ko files then where it is going 
  to install the new modules and how it knows which module is for which version? 
  ( i have disabled version support)</strong></p>
<p><strong>and if it is going to replace my existing .ko files the how my old 
  kernel will start if i select the old kernel from grub menu while booting?</strong></p>
<p><strong>i have searched the Internet but did not get proper answer.</strong></p>
<p><strong>Hope to get some answer for this.  
  Regards  
  Deepak</strong></p>
<p>[Thomas] - [Quoting Deepak Mishra]:</p>
<blockquote>
<pre>
  &gt; Hello,  
  &gt; I had a FC5 installation on my PC. now to enable RTAI i am going to  
  &gt; recompile the source code with the patch. Now my question is when i do  
  &gt; a &quot;make modules_install install&quot; after compiling the kernel source, is  
  &gt; it going to replace my old .ko files? or my old modules will also be  
  &gt; there?
</pre>
  <p>Assuming you have a copy of this kernel already installed, the files will just 
  get installed over the top of it.</p>

<pre>
  &gt; If it is not going to replace my old .ko files then where it is going  
  &gt; to install the new modules and how it knows which module is for which  
  &gt; version? ( i have disabled version support)
</pre>
  <p>But by disabling &quot;version support&quot; that doesn't preclude the fact 
  that files are going to be installed to /lib/modules/$(uname -r).</p>

<pre>
  &gt; and if it is going to replace my existing .ko files the how my old  
  &gt; kernel will start if i select the old kernel from grub menu while  
  &gt; booting?
</pre>
  <p>Depends how you configure grub.</p>

  <p>I am not sure of what answer you're after, or indeed, why it matters.</p>
</blockquote>

<p>[[Deepak]] - Hi Thomas,<br>
  Thank you very much for answering my problem.. Actually i want to ask one thing 
  is that, I have already compiled a stable kernel. It is working fine.</p>

<blockquote> 
  <p> Now i have made changes in to some important parts. In my previous kernel 
    also I had compiled this code as a module and now after making some modifications 
    I am recompiling the kernel with a different version.</p>
  <p> I think after installing the new compiled kernel and its modules, it will 
    over write my my previous module. </p>
</blockquote>

<p>[[[Thomas]]] - Right. Well, the heuristic you're using is that if you're changing 
  some part of your kernel configuration which is for the same version as the 
  kernel you're currently using that you shift</p>

<blockquote> 
<pre>
 /lib/modules/$(uname -r)
</pre>
  <p>out of the way before you issue a &quot;make install&quot;.</p>
</blockquote>

<p>[[Deepak]] - After booting from my new kernel I found that my new module
is not working as per my requirement. At this point if I boot my system
with the previous kernel, can I go back to my old working stable setup? or
I have to recompile my code after removing my code?</p>
 
<p>[[[Thomas]]] - Assuming you do the above, it's generally safer to issue a
&quot;depmod -a&quot; command. This typically happens during startup. Note
that if what you're compiling is just modules for the current running
kernel, you theoretically only need install those modules, as in:</p>

<blockquote> 
<pre>
 sudo make modules_install sudo depmod -a modprobe some_module_name
</pre>
</blockquote>

<p>[[Deepak]] - I am new in this Linux kernel compilation. so please advice me.</p>

<p>[[[Thomas]]] - It's a topic that has come up before, and I believe the
<a href="http://kernelnewbies.org">kernelnewbies.org site</a> is quite good also.</p>

<p>[[[[Deepak]]]] - Thank You very much for your advice and suggestions.</p>

<p>[John] - I'm not 100% sure of it, but I think the following method will not 
  overwrite your existing modules:</p>

<blockquote>
  <p>- In the kernel configuration menu, choose &quot;General setup&quot;</p>

  <p>- Then &quot;Local version - append to kernel release&quot;</p>

  <p>- Input a string (64 char length max, but you'll probably want to make it quite 
  a bit shorter than that).</p>
  
  <p>Then after booting from that kernel, &quot;uname&quot; command will
  return the string you entered in the step above appended to the usual
  kernel version number. The modules corresponding to that kernel should be
  installed under /lib/modules/KVER-localVersion where localVersion is the
  string you entered during kernel configuration.</p>

  <p>I say I'm not 100% sure here because I haven't used that method since
  trying it once back in the days of kernel 2.0 or 2.2 at least 8 yrs ago,
  and my memory of it is a bit tenuous.</p>
</blockquote>

 

</div><div class="mb-mailbag"><hr />
<a name="mailbag.05" />
<h3>Blue line</h3>
 
 <p>Alice Perrault (aaperrault at adelphia.net) 
 <br /> 
 Tue May 30 17:04:31 PDT 2006</p> 
 <em>Answered by:  Ben, Brian, Dale, Thomas</em> 
 
<strong>
<p> Why do I sometimes get a vertical blue line on the left side of my message. 
Of course, it wouldn't happen this time, when I want it to show.
Many thanks for any answers you can give to me. ~~ Alice</p>
</strong>
<p> [Thomas] - In what? Email? Which client are you using? Is this blue line rendered 
  with the text you're reading? Is it some form of colourisation based on syntax? 
</p>
<blockquote>
  <p>You need to be much more specific -- you don't give us much to go on.</p>
</blockquote>
<p>[Dale] - Might be a form of quoting a previous message, as in a reply. As Mr. 
  Adam says, the answer is in no small measure dependent upon the context of your 
  question.</p>
<blockquote>
<p>On another note, when posting to a list like this one, it is generally considered 
  proper protocol (at least in my experience) to send the message as plain text. 
  Many folks use text-based mail clients like Mutt or Pine and Rich Text/HTML 
  messages can be inconvenient to deal with.</p>
</blockquote>
<p>[[Thomas]] - You can call me Thomas.</p>
<blockquote>
  <p>What's even better &quot;protocol&quot; is people learning NOT to top-post.</p>
</blockquote>
<p>[[[Dale]]] - Bad habit I picked up long ago.... sorry.</p>
<p>[Ben] - Alice, I'm going to take a wild guess and say that you're using 0utlook 
  under Wind0ws - which uses a blue line to denote quoted text. If this is the 
  case, I hope that the above answers your question, because we normally don't 
  answer Windows questions: The Answer Gang is a part of the Linux Gazette, and 
  answers questions about Linux.</p>
<blockquote>
  <p>If I've guessed wrong, then I invite you to read &quot;Asking Questions of 
    The Answer Gang&quot; at <a href="../tag/ask-the-gang.html">http://linuxgazette.net/tag/ask-the-gang.html</a> and 
    write us back - hopefully with your question rephrased as per the guidelines 
    (i.e., including sufficient information), and we'll see if we can help.</p>
</blockquote>
<p>[[Brian]] - I get a blue line for quoted text in Mozilla Thunderbird under Linux 
  when T'bird is being &quot;polite&quot; and rendering HTML email instead of 
  doing everything plaintext as I instruct it. To be more explicit, when I'm looking 
  at a reply to an HTML email in Mozilla Thunderbird in the message pane, the 
  bits that are quoted from prior espondent(s) are bordered on the left with a 
  vertical graphical line. The color of that line changes with depth of quoting...</p>
<blockquote>
  <p>For example, in a later message in this thread, where Dale quotes Thomas, 
    there is a blue line down the left side. Where Dale quotes Thomas quoting 
    Dale, there is a DarkRed line inside the blue line, indicating two levels 
    of quoting. In a plaintext message, I would instead see two greater-than symbols 
    (that is, '&gt;').</p>
  <p>It is most irksome to me that these lines don't revert to plaintext quoting 
    methods, even when I explicitly instruct T'bird to display the messages in 
    plaintext. The TLA &quot;WTF&quot; sproings to mind...</p>
</blockquote>

 

</div><div class="mb-mailbag"><hr />
<a name="mailbag.06" />
<h3>Colouring $PS1...</h3>
 
 <p>Mahesh Aravind (ra_mahesh at yahoo.com) 
 <br /> 
 Sat May 13 03:30:05 PDT 2006</p> 
 <em>Answered by:  Ben, Kapil, Martin, Thomas</em> 
 
<strong>
<p> Dear fellow Linuxers,</p>

<p>I had recently been fooling around with the colouring the bash(1) $PS1
variable for making $PS1 <em>really</em> colurful prompt. I found myself reading
the console_codes(4) man page (and the inevitable bash(1) man page, too)
from time to time.</p>

<p>This was a pain. As for a newbie, s/he can't quickly grasp the concept
of DEC escape codes, and differentiate VT220 codes from ECMA control codes.
So to help the newbies, I decided to code up a simple(?!) shell script from
which the desired colour codes could be looked up as X,Y coordinates.</p>

(Download script <a href="misc/mail/colors.sh">from here</a>.)

<p>This is no great hack. And I concentrated only on the `Normal' and
`Bold' category of codes, since `Underline' and `Blink' attributes couldn't
always be handled by all VCs (of course, some xterm(1x) could interpret
them).</p>

<p>In the script, the Y axis denotes the foreground colour ranges, and the
X axis denotes the background colour ranges.</p>

<p>Well, the standard disclaimer applies. Any suggestions and corrections
are welcome (all flames to /dev/null). I'm releasing this script as
GPL.</p>

<p>No worries,</p>

<p>Mahesh Aravind</p>

<p>PS: If you want any help, do an &quot;nl -ba colors.sh&quot;. ;-)</p>

</strong>

<p>[Ben] - Very nicely done, Mahesh! I wrote a similar function in my Bash tutorial; 
  I've tweaked it quite a lot since then. Yours is prettier, though, and includes 
  the 'bold' versions.</p>

<blockquote>
<pre class="code">
  colsel () # Color selector - iterates through a $TERM's color choices 
  { 
  trap 'reset' 0 # Reset on exit 
  n=47 # Max foreground color value 
  while [ &quot;$n&quot; -gt 39 ] 
  do 
  m=37 # Max background color value 
  while [ &quot;$m&quot; -gt 29 ] 
  do 
  [ `expr $m % 20` -eq 0 ] &amp;&amp; echo -e '\E[$40;1m|' 
  echo -en &quot;\E[$m;${n}m| $n $m \E[$40;1m&quot; 
  m=`expr $m - 1` 
  done 
  n=`expr $n - 1` 
  echo -e '\E[$40;1m|' 
  done 
  } 
</pre>
<p>Oh, and just because I can't resist:</p>

<pre class="code">
  perl -we'for$a(40..47){print&quot;\e[$a;${_}m$a $_|&quot;for 30..37;print&quot;\n&quot;}' 
</pre>
<p>[grin]</p>

  <p>Conversely, you could just use <a href="http://freshmeat.net/projects/color/">Moshe 
  Jacobson's &quot;color&quot; program</a>; it'll even show all the colors in much 
  the same sort of layout when invoked with the '--list' option.</p>

<pre>
  &gt; Well, the standard disclaimer applies. Any suggestions and corrections  
  &gt; are welcome (all flames to /dev/null).
</pre>
  <p>It may already be filled up; that's where we're sending ours...</p>
<pre>
  &gt; PS: If you want any help, do an &quot;nl -ba colors.sh&quot;. ;-)
</pre>
  <p>I've always found 'vi' to be just as useful. :)</p>
</blockquote>

<p>[[Thomas]] - I've always avoid the use of escape codes in favour of tput(1) 
  -- at least then it works remotely, too.</p>

<p>[[[Ben]]] - How would you use 'tput' to set colors? I've just run 'infocmp', and 
  it doesn't show anything related to doing so.</p>

<p>[[[[Thomas]]]] - tput(1) can query the terminal database, hence:</p>
<blockquote>
<pre class="code">
  tput setaf 1; echo this is red 
  tput setaf 2; echo this is green 
  tput setaf 0; echo now we are back in black 
</pre>
<p>etc...</p>
</blockquote>

<p>[[[[[Ben]]]]] - Ok, I got you. Even though &quot;tput&quot; options aren't
  listed anywhere near the &quot;tput&quot; man page (for anyone interested,
  they're in &quot;man 5 terminfo&quot;), and there is a huge number of them
  with mostly-cryptic explanations of what they do, this is still an
  excellent tip.</p>

<blockquote>
  <p>So -</p>
<pre class="code">
for n in `seq 0 7` 
do 
        for m in `seq 0 7` 
        do 
                tput setab $n    # Set background 
                tput setaf $m    # Set foreground 
                echo -n &quot;$m $n&quot; 
                tput op          # Reset to original color pair 
                echo -n &quot;|&quot; 
        done 
        echo 
done 
</pre>
  <p>The data displayed can be used with 'tput' invocations to set the colors
  shown, much like Mahesh's script, but would be term independent. Pretty
  sweet...</p>
</blockquote>

<p>[[Martin]] - Just to let you guys know that there is a BASH Prompt HOWTO
  at <a href="http://tldp.org">tldp.org</a> which gives you more info on colouring your
  prompts and putting other things in there too... ;)</p>

<p>[[[Ben]]] - I recall reading it a couple of years ago. Unless it's been
  updated, it uses escape codes - which, as Thomas pointed out, aren't
  necessarily term-independent.</p>

<p>[[[Mahesh]]]  - [Quoting Thomas]:</p>
<pre>
  &gt; I've always avoid the use of escape codes in favour of tput(1) -- at
  &gt; least then it works remotely, too.
</pre>
<blockquote> 
  <p>Yeah, but this was inspired by reading the console_codes(4) man page and 
    seq(1) info page. Combining the two resulted in a useful(?) script.</p>
</blockquote>

<p>[[[[Thomas]]]] - There's nothing wrong with it, but hard-coding escape codes
  is going to turn around and bite you on the arse before long. Some
  terminals don't/can't render escape codes properly.</p>

<p>[[[[[Mahesh]]]]]  - Just out of curiosity, how would a modified script using tput(1) 
  would be able to print the colour coordinates to the o/p?</p>

<p>[[[[[[Ben]]]]]] - Just like using escape codes does - except you don't use the
  escape codes. :) The point to 'tput' is that it actually queries the
  terminfo database and outputs the <em>correct</em> escape codes for a given
  terminal.  Using explicit escape codes will work much of the time - after
  all, many Un*x terminals use the same ones - but will fail miserably on
  terminals that use something different.  </p>

<blockquote>
  <p>If you're asking about an example, here's one:</p>

<pre class="code">
tput smso		# Turn on bold mode
echo This should print in bold
tput rmso		# Turn it off
</pre>
  <p>On the other hand, if you use these a lot, you're going to get tired of
  typing - so it makes sense to request them once and save them:</p>

<pre class="code">
a=`tput smso`
b=`tput rmso`
echo "${a}This should print in bold$b"
</pre>
</blockquote>

<p>[[[[[[Thomas]]]]]] - The o/p being what or whom? (Abbreviations, unless they're generally 
  well-recognised, are pretty much useless for communicative writing).</p>

<p>[[[[[[[Mahesh]]]]]]]  - Wow...  looks like you're in a hot mood! (uh, read:
  angry)</p>

<p>[[[[[[[[Thomas]]]]]]]] - Far from it.  Welcome to the ambiguity of email.</p>

<p>[[[[[[[[Ben]]]]]]]] - Nah. The last time Thomas got angry... well, you heard of what
  happened at Troy, right? When he gets angry, it's <strong>obvious</strong> (although the
  people to whom it's obvious may not have much time to regret it.) </p>

<blockquote>
  <p>In other words, don't worry about it. Unless you've already
  been slaughtered and buried in an unmarked grave - in which case, disregard
  everything I've said. :) </p>
</blockquote>

<p>[[[[[[[Mahesh]]]]]]]  - o/p == out put</p>

<p>[[[[[[[[Thomas]]]]]]]] - Ah, I see.  In the English language, "output" is all one
  word.</p>

<p>[[[[[[[[[Mahesh]]]]]]]]]  - Here's some more that I'll be (or someone else'll be) using
</p>

<pre>
	w/o == without
	h/w == hardware
	s/w == software
	s/o == Significant Other (*not* son of)
...
</pre>
<p>[[[[[[[[[[Kapil]]]]]]]]]] - Why not "son of"?  </p>

<blockquote>
  <p>Anyway, you seem to be missing the point. It is generally up
  to the communicator (in this case you) to ensure that abbreviations that
  you use are known to the communicatees (in this case not just Thomas or TAG
  but possibly other readers of LG).  </p>

  <p>Otherwise it is rather like sending an ogg file to someone who uses a
  Macintosh or a Word file to me. The recipient <strong>might</strong> be able to figure out
  what you are trying to say---but <strong>might</strong> press the delete button
  instead.</p>
</blockquote>

<p>[[[[[[[Mahesh]]]]]]]  - How do you get the colour coordinates using tput?</p>

<p>[[[[[[[[Thomas]]]]]]]] - Coordinates for what, or where?  All tput does is query the
  terminfo database.  </p>

<p>[[[[[[[[[Mahesh]]]]]]]]]  - Uh, ... fotget it!</p>

<p>[[[[[Mahesh]]]]]  - And how would you create (a hacked up version) of files like, say, 
  /etc/issue using tput w/o using hard coded escape codes?</p>

<p>[[[[[[Ben]]]]]] - Those are not <em>terminal</em> codes, they're 'getty'-specific escape
  codes; no relation between the two. Yes, it's possible to use ASCII escapes
  to create lots of special effects; heck, I used to do that myself, back in
  the early '80s for BBS "post-login" screens. I just seriously doubt that
  this hack from 25 year ago is still in any way "cool", or even interesting
  - and this is filtered through the fact that it's guaranteed to break on
  some percentage of terminals.  </p>

<blockquote>
  <p>As a side note, I suspect that 'getty' replicates a fair
amount of 'tput' functionality, since it has to deal with terminals at that
  level.</p> 
</blockquote>

<p>[[[[[[Thomas]]]]]] - You probably wouldn't, which is why the initscript in Gentoo
  and the like waste <strong>massive</strong> amounts of code in adding nice pretty colours
  which last for lesss than ten seconds on the screen, provide next to no
  manner in terms of usefulness and will fall over and die spectacularly on
  different terminals.  Is this gain worth it? Of course not.</p>

<p>[[[[[[[Mahesh]]]]]]]  - I was thinking of "private" use... in /etc/issue not
  /etc/issue.net?</p>

<p>[[[[[[[[Thomas]]]]]]]] - That depends on your distribution.  </p>

<p>[[[[[[[[[Mahesh]]]]]]]]]  - Arrgh!  I don't seem to get my idea thru to you. See, when
  you feel like creating an /etc/issue that'll emit your '\l' getty escape
  codes using so-called  hard-coded escape colour codes like
  "^[[33;1m\l^[[0m", how can tput come to the rescue?  Like you code up a
  shell script to o/p (err.. output, sorry) a /tmp/issue that'll have correct
  escape codes querried form the terminfo database.  </p>

<p>[[[[[[[[[[Kapil]]]]]]]]]] - As Ben pointed out you can indeed do that. For example, you
  can have /etc/default/issue which is used/parsed by
  /etc/init.d/generate_issue to generate the "real" /etc/issue by using the
  terminal settings appropriate to /dev/console (which may or may not be a
  serial console). Beware that this /etc/issue will break on some terminals
  that are "getty"-ed via serial line.  </p>

<p>[[[[[[[Mahesh]]]]]]]  - like it'd be useful to have ^[[31;1m\n^[[0m to see your hostname in
  bright red or something...  </p>

<p>[[[[[[[[Thomas]]]]]]]] - Again, can be achieved via tput (you've been shown examples
  of this.) </p>

<p>[[[[[[[[[Mahesh]]]]]]]]]  - Can tput escape codes be interpretted by getty?</p>

<p>[[[[[[[[[[Kapil]]]]]]]]]] - That "getty" only understands escape codes in /etc/issue
  instead of a generic description like that given by terminfo or slang is
  surely a fault of "getty"! Hack "getty" to fix this problem.  </p>

<p>[[[[[[[[Ben]]]]]]]] - If I was going to do that - which I would not - I would
  generate '/etc/issue' via a script, with escape sequences created by
  'tput'.  However, the overriding problem that can't be handled at this
  level of interaction is that the console from which the user <em>connects</em> to
  your system is completely arbitrary - so there's no way for you to know
  what their correct escape sequences are.  In other words, if (e.g.) a
  Solaris or a DOS user connects to you using a console that uses something
  different, all they're going to see is a bloody mess of square brackets and
  other line noise on their screen - and you can't prevent that from
  happening.  </p>

<blockquote>
<p>*This* is why it's a really bad idea to do those color tricks in
  '/etc/issue'. It's not because anybody's trying to prevent you from
  being cool; it's because you will inevitably make someone else's life
  harder by doing so.</p>
</blockquote>

<p>[[[[[Mahesh]]]]]  - I don't know, can u help?</p>

<p>[[[[[[Thomas]]]]]] - Nope, since I don't understand your question.</p>

<p>[[[[[[[Mahesh]]]]]]]  - Like finding the codes o/p'd (err, outputted) by tput (maybe
<em>you</em> wouldn't want  it, but it could be found, isn't it?  </p>


<p>[[[[[[[[Ben]]]]]]]] - Err, have you considered the word 'printed'? It's a perfectly
  good one, and causes no harm to anyone as far as I know.  </p>

<blockquote>
<p>[ In case you're still missing it: <strong>clarity</strong>, in a technical discussion,
is far more important than saving a few keystrokes. <strong>WRITE
OUT</strong> what you're trying to say to avoid confusion. ] </p>
</blockquote>

<p>[[[[[[[[[[Ben]]]]]]]]]] - [ TAG forcibly re-CC'd. Mahesh, <strong>please</strong> leave the list in the
  CCs when replying; not doing so is considered rude. ] </p>


<p>[[[[[[[[[Mahesh]]]]]]]]]  - Sorry, ed (warning: I may not be employed to <em>write</em> any
public-readable stuff) </p>

<blockquote><p>I wrote this, because I recently got a job offer from a
leading magazine in India, to work as an in-house Linux Technical writer.
</p> </blockquote> 

<p>[[[[[[[[[[Ben]]]]]]]]]] - <strong>Much</strong> more of a reason to communicate clearly, then!  Now,
  it's not just an adventure - it's your JOB...  </p>
 
<blockquote> 
  <p>(Not to carry the anvil too far, but some non-USians might miss it: the
  US Army's long-time advertising slogan was "It's not just a job - it's an
  adventure." These days, they've changed it to "An army of one" - presumably
  since anyone signing up these days will get <strong>ALL</strong> the "adventures" they
  never wanted.) </p>
</blockquote>

<p>[[[Mahesh]]]  - I even thought about fitting getopts in to select bold, underline, 
  blink, etc.</p>
  
<p>[[[[Thomas]]]] - Depends what you want out of your script. </p>

<p>[[[[[Mahesh]]]]]  - To help the newbies ease the complications...</p>

<p>[[[[[[Thomas]]]]]] - Pffft. Help them by <strong>teaching</strong> them, not dazzling their retenas 
  with colours.</p>
  
<p>[[[[[[[Mahesh]]]]]]]  - I was meaning those brainless twits who can't remeber all those 
  escape codes. ("dazzling their retenas" -- is that a problem with my script?) </p>

<p>[[[[[[[[Thomas]]]]]]]] - You seem to be under the impression that your script is
  somehow lacking and isn't working.  That's not true.  Your script does work
  -- for some terminals.  When you sent this script in to TAG, did think it
  was somehow not open for discussion?  Constructive criticism such as the
  advice myself and Ben have been giving you is there to aid you; and not to
  pick any holes in your script.  </p>

<p>[[[[[[[[[Mahesh]]]]]]]]]  - Thomas (if I can call you by ur first name), my primary
  intention of writing the  script was to find out the correct colour
  sequences to colour up the various getty control codes (\l, \m, \n) etc.,
  in /etc/issue and for ${PS1}.  </p>

<blockquote>
  <p>So I can take in <strong>any</strong> suggestions to make it more useful
  (beware, I'm working on v2.1 of the same) ...  </p>

  <p>useful, in the sense, anyone who feels like colouring their /etc/issue
  or /etc/motd can look up this script and decide on what to do (and what not
  to do.)</p>
</blockquote>

<p>[[[[[[[[[[Kapil]]]]]]]]]] - As far as "motd" is concerned there is no short cut. You
  need to hack at "login" itself to make sure that it "knows" terminfo or
  slang in order that it can put out a colourful message of the day
  regardless of which terminal a user logs in from.  </p>

<p>[[[Mahesh]]]  - True, tput would have made it portable (a portable shell
  script???!!!).</p>

<p>[[[[Thomas]]]] - Careful -- the shell script itself already isn't portable (you 
  use 'seq' which isn't on every system, think *BSD for instance), but it's portable 
  in the sense that tput(1) is always guaranteed to work, where hard-coding escape 
  sequences might not.</p>

<blockquote> 
  <p>There's nothing wrong with your script, I was merely pointing out that tput(1) 
    is by far the &quot;better&quot; choice when you wish to use colour for things 
    such as prompts and the like.</p>
</blockquote>

<p>[[[[[Mahesh]]]]]  - Hey, I think the escape codes are handled by Linux console drivers, 
  so how can they fail to work. At least thats what I understood after reading 
  the man pages.</p>

<p>[[[[[[Thomas]]]]]] - No, they're handled by terminals which read the terminfo and termcap 
  databases.</p>

<p>[[[[[[[Mahesh]]]]]]]  - I think I misinterpreted what was in console_codes(4), can u
  correct me? I thought it said something like the Linux display driver
  handled the escape codes. Thanks.</p>

<p>[[[[[[[[Thomas]]]]]]]] - No, it's the terminal that interprets them.  Note from
  console_codes(4):</p>

<pre class="code">
It  is  generally not good practice to hard-wire terminal controls
into programs.  Linux supports a terminfo(5) database of terminal
capabili- ties.   Rather than emitting console escape sequences by hand,
you will almost always want to use a terminfo-aware screen  library  or
utility such as ncurses(3), tput(1), or reset(1).
</pre>
<p>[[[[[[[[[Mahesh]]]]]]]]]  - Thanks, I might have missed it.</p>

<blockquote>
  <p>And one more thing, you don't mind me using this in my <strong>private</strong>
  /etc/issue, right?  At least, decapitation is not an option for someone
  using hard coded escape sequences!  </p>

 <p>Thanks for ur time...</p>
</blockquote>

<p>[[[[[Mahesh]]]]]  - does the Linux cosole drivers in anyway deal with the
  terminfo/termcap facilities?</p>

<p>[[Mahesh]]  - Ben, I'm happy I got a mail from LG. Thanks for mailing in..</p>

<blockquote> 
  <p>[Quoting Ben]:</p>

<pre>
  &gt; colsel () # Color selector - iterates through a $TERM's color choices 
  &gt; { 
  &gt; trap 'reset' 0 # Reset on exit
</pre>
  <p>I didn't think of a trap ... sue me ;-)</p>
</blockquote>

<p>[[[Ben]]] - I found that unless I used it, 'Ctrl-C'ing out of the script would 
  often leave the xterm in some weird color mode. NOT a desirable outcome. :)</p>

<p>[[Mahesh]]  - [Quoting Ben]:</p>
<pre>
  &gt; &gt; Well, the standard disclaimer applies. Any suggestions and corrections
  &gt; &gt; are welcome (all flames to /dev/null).
  &gt; 
  &gt; It may already be filled up; that's where we're sending ours...
</pre>
<p>I have written a script that will empty /dev/null the same way with /tmp at  
  each boot time!!! :-D </p>

<p>[[[Ben]]] - Let me guess: </p> 
<blockquote>
<pre>
  # Save the old one - just in case, y'know... 
  ext=0
  while [ -f foo.$ext ]; do ((ext+=1)); done;
  mv /dev/null /dev/null.$ext 

  # Who needs that weird 'mknod' thing, anyway?
  # And by the way, <strong>why</strong> is my root partition all filled up? 
  touch /dev/null 
</pre>
<p>:)</p>
</blockquote>

<p>[[Mahesh]]  - [Quoting Ben]:</p> 
<blockquote>
<pre>
    &gt; &gt; &gt; PS: If you want any help, do an &quot;nl -ba colors.sh&quot;. ;-) 
    &gt; &gt; 
	&gt; &gt; I've always found 'vi' to be just as useful. :)
</pre>
  <p>But do vi show line numbers (at default)</p>
</blockquote>

<p>[[[Ben]]] - It does if you've got 'set nu' in your .exrc file.</p>

<p>[Kapil] - The discussion on pretty-printing of files naturally led to
the discussion in the Unix-Hater's book (UHB) on how curses and terminfo
are "twisted" technologies. According to the UHB the "right" way is that
files should not be "streams of bytes" but should be "objects" which should
(in particular) encode all pretty-printing information.  </p>

<blockquote>
  <p>Interesting ... wonder if there is an implementation.</p> 
</blockquote>



<p>[[[[[[[[[Mahesh]]]]]]]]]  - PS: Ben, I shoulda said this earlier: I learnt (well, most
  of) shell scripting thru a guide someone printed occassionaly in LG (I
  think his name was Ben Okopnik or something).  It was a great guide.  So
  you know whom to blame for my shell mistakes (OK, not escape-sequence
  mistakes ;) ) </p>

<p>[[[[[[[[[[Ben]]]]]]]]]] - [laugh] My sins come back to haunt me. I'm glad that you found
  it useful, Mahesh (although I <em>specifically</em> remember using 'tput' in that
  series for "jazzing up" output in programs.) </p>

 

</div><div class="mb-mailbag"><hr />
<a name="mailbag.07" />
<h3>Adding bogofilter to Exim4: ""doesn't work"".</h3>
 
 <p>Thomas Adam (thomas at edulinux.homeunix.org) 
 <br /> 
 Fri Jun 2 06:03:09 PDT 2006</p> 
 <em>Answered by:  Ben, Neil, Rick, Thomas</em> 
 
<strong><p>Hello,</p>

<p>At the moment my anti-spam measures are sub-optimal.  The filtering of
spam happens at fetchmail time via procmail into ~/Mail/spam.  This used
to be OK a few years ago as my address was relatively unknown. But now I
must get at least anything between 40 - 80 spam emails a day.  It's
driving me nuts, so I figured it's time to do something at SMTP time.
</p>

<p>I'm running Exim4 from Debian stable (which by definition means it's the
Debianised configuration of Exim -- something I am still undecided as to
whether this is a good idea or not).  From my own knowledge about Exim and
how emails are relayed at SMTP time, I <strong>think</strong> I understand how this all
fits in, but I'll just make sure, as I don't understand why I get the
error I do, and whether there's anything else I ought to be doing.  (Rick,
this is surely one for you... :P)</p>

<p>I'm not using the whole "split-file" configuration thing which Debian
seems to like. Instead, if I want to make any changes, I just edit
/etc/exim4/exim4.conf.template . Now, into that file, I have added two
things. The first thing is the router. I suppose this ought to come
<strong>after</strong> the DNS stuff. Hence I added:
</p>
</strong>
<pre>
bogo_router:
 domains = +local_domains
 no_verify
 condition = ${if !eq {$received_protocol}{bogodone} {1}{0}}
 driver = accept
 transport = bogo_transport
</pre>
<strong><p>The corresponding transport for that, looks like:</p>
</strong>
<pre>
bogo_transport:
 driver = pipe
 command = /usr/sbin/exim4 -oMr bogodone -bS
 use_bsmtp = true
 headers_add = X-Bogofilterd: true
 transport_filter = /usr/bin/bogofilter -d /etc/bogofilter -l -p -e -u
 return_fail_output = true
 group = mail
 user = mail
 home_directory = "/tmp"
 current_directory = "/tmp"
 log_output = true
 return_path_add = false
</pre>
<strong><p>I've added that near the end of the template file -- I don't
believe the
position of the transport really matters.  Indeed, having done that and
running:</p>
</strong>
<pre>
sudo update-exim4.conf &amp;&amp; sudo /etc/init.d/exim4 reload
</pre>
<strong><p>... produces no errors.  However, sending a test email from my
gmail
account to ''thomas at edulinux.homeunix.org'' results in the following
error:</p>
</strong>
<pre>
2006-06-02 04:54:13 1Fm0jl-0006a4-8V ** thomas at edulinux.homeunix.org
R=bogo_router T=bogo_transport: Child process of bogo_transport transport
returned 2 from command: /usr/sbin/exim4
</pre>
<strong><p>... indeed, the above comes from running eximon.  Despite that
error
message eximon seems to think delivery has happened.  This may indeed be
the case but shortly after "delivery", the message is frozen, and the
MAILER-DAEMON helpfully sends me back an email to my gmail account
saying:</p>
</strong>
<pre>
An error was detected while processing a file of BSMTP input.
The error message was:

 500 Command unrecognized

The SMTP transaction started in line 0.
The error was detected in line 1.
The SMTP command at fault was:
</pre>
<strong><p>... so I've obviously balled something up, somewhere.  Googling
around a
bit seems to reveal the configuration as I have it at the moment works for
other people.  I can't see in this situation what's wrong.  I'm not even
sure I know/understand what "BSMTP" is.  I tried setting that to false in
the transport section for bogofilter, but that was, err, clearly the wrong
thing to do.</p>

<p>Can anyone else see what I've not done?</p>

<p>One of the reasons I'm not using the Exim-SA package or spamassassin in
general is because it's a pig of a program and reduces poor fluffy (a P166
that acts as the kitchen sink) to a mere crawl.  Since bogofilter
seems to work just fine on my workstation, and that other people have
seemingly integrated it into Exim makes me want to try the same. </p>

<p>Thanks in Advance.</p>

<p>-- Thomas Adam</strong>

<p>[Ben] - Good idea; I'm slightly envious, given Rick's detailed
expositions on it here. I can't implement the same thing due to lack of
good network connectivity; that is the one requirement I do not meet for
doing my my own SMTP.  </p>

<blockquote><p>I might have a little something to contribute, too - I've
never done what you're talking about, but I've played with Exim extensively
via its conffiles.  </p>

<p>First, I'd do some general troubleshooting as described in the Exim
manual (/usr/share/doc/exim/spec.txt.gz on my machine; I'm still using
Exim 3, though.) Section 4.15, "Testing", covers all the basics:
'exim -bV' for a static test, 'exim -v -bt &lt;localuser&gt;' for local and
'exim -v -bt &lt;remoteuser&gt;' for remote delivery, "SMTP conversation",
i.e.
</p>

<pre class="code">
  exim postmaster at your.domain
  From: user at your.domain
  To: postmaster at your.domain
  Subject: Testing Exim

  This is a test message.
  ^D
</pre>
<p>for a full delivery test, etc. Then there's my personal favorite, 
'exim -d9 -M &lt;message-id&gt;' - turning on max_debug and vgrepping through
<strong>lots</strong> of log messages... seriously, that could be very useful.
Especially if you turn it on in your transport section and try that
Gmail interaction again.
</p>

<p>Give it a shot and let's see what you get!
</p>
</blockquote>

<p>[[Thomas]] - Hey, Ben -- replying via webmail, since I'm leaving my exim process 
  on my server running in debug mode, and with the bogo stuff turned on, nothing 
  gets delivered. :P </p>

<p>[[[Ben]]] - That's the problem with mail problems - the thing with the
problem is the thing you <em>need</em> to fix the problem!</p>

<p>[[Thomas]] - I have heard rumours that Exim works quite well in disconnected 
  setups like yours, although I can't say how good/bad that is. </p>
<p>[[[Ben]]] - It works well WRT delivery, etc.; it's bloody awful if you want to 
  run SMTP-time checking - since that requires a reasonably fast network connection, 
  otherwise the per-mail processing time goes into orbit.</p>

<p>[[Thomas]] - Ok -- the static tests fail. In fact, <strong>any</strong> test with the bogo-filter 
  stuff enabled just barfs (same error as shown in the file in the URL quoted 
  further down, BTW). </p>
<p>[[[Ben]]] - Probably not an Exim configuration problem, then.</p>

<p>[[Thomas]] - [quoting Ben]
<pre>'exim -d9 -M &lt;message-id&gt;' - turning on max_debug and vgrepping through</pre></p>
<blockquote>
  <p>OK -- it seems that the "-d9" idea isn't applicable on Exim 4. Looking in 
    its manpage, there seems to be "-d all" which sounded promising, but which 
    just held up Exim and wouldn't do anything after that. So I used the following 
    command: </p>
<pre>
 sudo exim4 -d -M 1Fn2PM-0007BB-EV 2&lt;&amp;1 | tee /tmp/exim.out
</pre>
  <p>... that message ID is of an email I had sent on the localhost -- the `same 
    error happens from anywhere. I shan't paste the output from that command in 
    here directly. Instead you can see the output <a href="http://edulinux.homeunix.org/~n6tadam/exim.out">here</a>.</p>
</blockquote>
<p>[[[Ben]]] - I note a couple of questionable log messages there - e.g.,

<blockquote>
<pre class="code">
internal_search_find: file="/etc/aliases"
  type=lsearch key="n6tadam"
file lookup required for n6tadam
  in /etc/aliases
lookup failed
expanded: 
file is not a filter file
parse_forward_list: 
system_aliases router declined for n6tadam at edulinux.homeunix.org
</pre>
which may or may not be of concern for you; however, the important bits
are obviously toward the end:

<pre class="code">
calling bogo_router router
bogo_router router called for n6tadam at edulinux.homeunix.org
  domain = edulinux.homeunix.org
set transport bogo_transport
queued for bogo_transport transport: local_part = n6tadam
domain = edulinux.homeunix.org
  errors_to=NULL
</pre>
That last line should probably be redefined for better troubleshooting.

<pre class="code">
  domain_data=NULL localpart_data=NULL
routed by bogo_router router
  envelope to: n6tadam at edulinux.homeunix.org
  transport: bogo_transport
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
After routing:
  Local deliveries:
    n6tadam at edulinux.homeunix.org
</pre>
<p>So far, so good.
</p>

<pre class="code">
  Remote deliveries:
  Failed addresses:
  Deferred addresses:
search_tidyup called
&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; Local
deliveries &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
--------&gt; n6tadam at edulinux.homeunix.org &lt;--------
locking /var/spool/exim4/db/retry.lockfile
locked /var/spool/exim4/db/retry.lockfile
opened hints database /var/spool/exim4/db/retry: flags=0
dbfn_read: key=T:n6tadam at edulinux.homeunix.org
no retry record exists
search_tidyup called
changed uid/gid: local delivery to n6tadam &lt;n6tadam at
edulinux.homeunix.org&gt; transport=bogo_transport
  uid=8 gid=8 pid=28344
  auxiliary group list: &lt;none&gt;
  home=/tmp current=/tmp
set_process_info: 28344 delivering 1Fn2PM-0007BB-EV to n6tadam using
bogo_transport
direct command:
  argv[0] = /usr/bin/bogofilter
  argv[1] = -d
  argv[2] = /etc/bogofilter
  argv[3] = -l
  argv[4] = -p
  argv[5] = -e
  argv[6] = -u
direct command after expansion:
  argv[0] = /usr/bin/bogofilter
  argv[1] = -d
  argv[2] = /etc/bogofilter
  argv[3] = -l
  argv[4] = -p
  argv[5] = -e
  argv[6] = -u
</pre>
<p>Have you double-checked to make sure that
</p>

<pre>'/usr/bin/bogofilter -d /etc/bogofilter -l -p -e -u'</pre>

<p>actually works? I'd do it with the options spelled out, exactly as Exim
sees it.
</p>

<pre class="code">
bogo_transport transport entered
direct command:
  argv[0] = /usr/sbin/exim4
  argv[1] = -oMr
  argv[2] = bogodone
  argv[3] = -bS
direct command after expansion:
  argv[0] = /usr/sbin/exim4
  argv[1] = -oMr
  argv[2] = bogodone
  argv[3] = -bS
</pre>
<p>Ditto here. Obviously, these two are hooked up via a pipe - so that's
the manual process to try.
</p>

<pre class="code">
Writing message to pipe
writing data block fd=10 size=13 timeout=3600
writing data block fd=10 size=40 timeout=3600
writing data block fd=10 size=5 timeout=3600
process 28347 running as transport filter: write=11 read=12
added header line(s):
X-Bogofilterd: true---
process 28348 writing to transport filter
copying from the filter
set_process_info: 28346 reading output from |/usr/sbin/exim4 -oMr bogodone
-bS
</pre>
<p>Just for grins... what does Exim return when run that way? '$?' should
tell you.
</p>

<pre class="code">
writing data block fd=11 size=2252 timeout=3600
waiting for filter process
filter process returned 3
waiting for writing process
end of filtering transport writing: yield=0
errno=-24 more_errno=3
</pre>
<p>Whoops. I wonder what <em>that</em> means. You might want to Google for it...
incidentally, I just noticed that my '/usr/share/doc/exim' directory
contains a discussion of filters and how to use them. Again, this is
Exim3 - but you might have a parallel document that describes the
specifics, and might be worth checking out.
</p>

<pre class="code">
search_tidyup called
bogo_transport transport returned PANIC for n6tadam at
edulinux.homeunix.org
post-process n6tadam at edulinux.homeunix.org (9)
LOG: MAIN
  &lt;n6tadam at edulinux.homeunix.org&gt;: bogo_transport transport
output: An
error was detected while processing a file of BSMTP input.
LOG: MAIN PANIC
  == n6tadam at edulinux.homeunix.org &lt;thomas at
edulinux.homeunix.org&gt;
R=bogo_router T=bogo_transport defer (-24): Filter process failure
2006-06-05 01:17:30 1Fn2PM-0007BB-EV == n6tadam at edulinux.homeunix.org
&lt;thomas at edulinux.homeunix.org&gt; R=bogo_router T=bogo_transport
defer
(-24): Filter process failure
2006-06-05 01:17:30 1Fn2PM-0007BB-EV == n6tadam at edulinux.homeunix.org
&lt;thomas at edulinux.homeunix.org&gt; R=bogo_router T=bogo_transport
defer
(-24): Filter process failure
exim: could not open panic log - aborting: see message(s) above
</pre>
<p>Hmm, looks like another place where you could get troubleshooting info.
Do you have a '/var/log/exim/paniclog' file on your system?
</p>

<p>So, I'd run through all of the above stuff and see what shakes out. If
you don't get definitive results from the above (and I'm sorta betting
on testing the piped progs), then feel free to describe what you've got
and we'll bang on it some more. :)
</p>

</blockquote> 
<p>[[Thomas]] - I'm not turning up many hits on Google which sheds much light on 
  this -- despite triple checking the existing filter for bogo_filter matches 
  the general concensus which purportedly works on other's machines; and it does 
  match.</p>
<p>[Neil] - [Quoting Thomas]:</p>
<blockquote>
<pre>
  &gt; 2006-06-02 04:54:13 1Fm0jl-0006a4-8V ** thomas at edulinux.homeunix.org 
  &gt; R=bogo_router T=bogo_transport: Child process of bogo_transport transport 
  &gt; returned 2 from command: /usr/sbin/exim4
</pre>
  <p>Someone else had the same problem. I'm not sure that the answer he got was 
    very useful :-( </p>
  <p><a href="http://www.exim.org/mail-archives/exim-users/Week-of-Mon-20030811/msg00247.html">http://www.exim.org/mail-archives/exim-users/Week-of-Mon-20030811/msg00247.html</a></p>
  <p>FWIW according to http://bogofilter.sourceforge.net/man_page.shtml return 
    values are &quot;0 for spam; 1 for non-spam; 2 for unsure ; 3 for I/O or other 
    errors.</p>
  <p>If both -p and -e are used, the return values are: 0 for spam or non-spam; 
    3 for I/O or other errors.&quot; </p>
  <p>It's interesting that you seem to be using -p and -e, but still get a return 
    value of 2. </p>
  <p>According to <a href="http://exim.org/exim-html-4.62/doc/html/spec_html/ch29.html#id2641142">http://exim.org/exim-html-4.62/doc/html/spec_html/ch29.html#id2641142</a>: 
    &quot;If the command exits with a non-zero return code, the delivery is deemed 
    to have failed, unless either the ignore_status option is set (in which case 
    the return code is treated as zero), or the return code is one of those listed 
	in the temp_errors option, which are interpreted as meaning &#8220;try
	again later&#8221;.&quot;</p>
  <p>So the problem would appear to be the return code of 2 from bogofilter, which 
    AFAICS you should not be getting. </p>
</blockquote>
<p>[Rick] - [Quoting Thomas]: 
<blockquote>
<pre>
  &gt; I'm running Exim4 from Debian stable (which by definition means it's the 
  &gt; Debianised configuration of Exim -- something I am still undecided as to 
  &gt; whether this is a good idea or not).
</pre>
  <p>My middle initial "A" honestly doesn't stand for "Ambivalent", but I
have ongoing doubts about that too -- and I rely on it.  ;-&gt;
</p>
<pre>
  &gt; From my own knowledge about Exim and 
  &gt; how emails are relayed at SMTP time, I <strong>think</strong> I understand how this all 
  &gt; fits in, but I'll just make sure, as I don't understand why I get the 
  &gt; error I do, and whether there's anything else I ought to be doing. 
  &gt; (Rick, this is surely one for you... :P) 
</pre>
  <p>OK, but I'm a bit of a seat-of-my-pants flier, when it comes to MTA
configuration.  I've never had a machine set up for experimentation;
anything I attempt is on a production mail system, where people call and
scream at me if I break anything.  Accordingly, opportunities for
tinkering have been few, and cautious.
</p>
<pre>
  &gt; I'm not using the whole "split-file" configuration thing which Debian 
  &gt; seems to like. Instead, if I want to make any changes, I just edit 
  &gt; /etc/exim4/exim4.conf.template  .
</pre>
  <p>That's one of the things on which I have greatest ambivalence, actually. 
The split-file option is best for long-term maintenance, in that the
system can incrementally upgrade the parts you haven't touched, while
leaving alone others.  On the other hand, the single-file option's 
significantly easier to grok.
</p>

<pre>
  &gt; Now, into that file, I have added two 
  &gt; things. The first thing is the router. I suppose this ought to come 
  &gt; <strong>after</strong> the DNS stuff. Hence I added: 
    
  &gt;   bogo_router: 
  &gt;   domains = +local_domains 
  &gt;   no_verify 
    
  &gt;   condition = ${if !eq {$received_protocol}{bogodone} {1}{0}} 
  &gt;   driver = accept 
  &gt;   transport = bogo_transport 
</pre>
<p>Hmm, there used to be a third-party modification for Exim4 called
Exiscan (<a href="http://duncanthrax.net/exiscan-acl/">http://duncanthrax.net/exiscan-acl/</a>).  I see that it's now
merged into Exim4 mainline code -- but you might double-check that your
chosen Debian package includes that functionality.  E.g., it might be that
package exim4-daemon-light doesn't, but exim4-daemon-heavy does.
</p>

<p>The Exiscan patch added support for a broad range of content-scanning
(virus, spam, other), while Marc Merlin's SA-Exim patch is specialised
for SpamAssassin integration and (I think) SA-specific.  Exiscan's most
recent versions (dubbed Exiscan-ACL) work by adding additional functions
to Exim4's DATA ACL, while also providing an entirely new ACL
(acl_smtp_mime) called for each MIME part in a message.  You might want
to look into that approach, rather than attempting to hack transports
and routers.
</p>

<pre>
  &gt; One of the reasons I'm not using the Exim-SA package or spamassassin in 
  &gt; general is because it's a pig of a program and reduces poor fluffy (a P166 
  &gt; that acts as the kitchen sink) to a mere crawl.
</pre>
  <p>However, note that one of the key aims of an SA-Exim/SpamAssassin setup
is to use SA as little as possible.  If you start out (as I did) with
J.P. Boggis's EximConfig set of default ACLs / configuration files, most
of the heavy lifting is performed not by SA but rather by the Exim4 ACLs
that handle the mail first, and reject most of the junkmail.</p>
</p></blockquote>

 

</div><div class="mb-mailbag"><hr />
<a name="mailbag.071" />
<h3>Starting to explore the Linux kernel code</h3>
 
 <p>Deepak Mishra (mishradk at gmail.com) 
 <br /> 
 Thu Jun 8 15:05:15 PDT 2006</p> 
 <em>Answered by:  Deepak, John, Lew, Marty, Ramon, Rick, Thomas</em> 
 
<strong>
<p>
  Hello Everyone ( Answer Gang), I have gone through the basics of OS and
  now trying to explore and understand the linux kernel code.  I am
  confused from where I should start.  Just to make my life easier, I am
  thinking to to document the function calls from the login prompt to bash
  or any shell prompt.
</p>
 
<p>
  Then I want to go in reverse direction and find out how I came up to a
  log in prompt.
</p>
  
<p>
  As at log in prompt I see  &lt;hostname&gt; login: so I tried to grep for the
  "login:" in .c files. but really could not find the the proper location
  in the source code.  I have a 2.6.15-01.2054_FC5 source code.
</p>
  
<p>
  Am very very interested to understand this code. I understand C language
  quite well.
</p>
  
<p>
  I have 3 questions.<br>
  1. Is this approach to understand the linux kernel code all right?<br>
  2. If any one can give me some hint where I can find the login related
  code or where I should start .. I will be very glad.<br>
  3. Is there any documentation available which I can use as reference?
</p>
  
<p>
  thank you verry much.
  Regards
  Deepak
</p>
</strong>

<p>
[Ramon] - Although it sounds like a nice idea to start with linux kernel
  source code, logging in doesn't really use the kernel code much. (Or it
  does but in a very different way then you seem to assume)
</p>
 
<blockquote><p>
    You might want to start by having a look at the linux bootproces and
    understanding the role that the kernel fills in this proces.
  </p>
   
  <p>
    Recently someone published a nice overview of the boot process on the
    <a href="http://www-128.ibm.com/developerworks/linux/library/l-linuxboot/?ca=dgr-lnxw06LinuxBoot">ibm
  developerworks site</a>
  </p>
   
  <p>
    Additionally I always found the linux from scratch project an excellent
    resource on the ecosystem that the linux kernel + the (GNU) userland
  tools
    &amp; programs really is.
  </p>
  
  <p>
    You can find it here: <a href="http://www.linuxfromscratch.org/">http://www.linuxfromscratch.org/</a>
  </p>
  
<pre>
  &gt; I have 3 questions.
  &gt; 1. Is this approach to understand the linux kernel code all right?
</pre>
  <p>
  No, see above. Basically the kernel handles access to the hardware
  resources in an uniform way and offers hooks for user-space programs to
  get access to these resources. You will find that the login process is
  handled by a program that calls the kernel to get access to the
  appropriate resource (filesystem, screen, keyboard, serial line, whatever)
  </p>
  
<pre>
  &gt; 2. If any one can give me some hint where I can find the login related
  &gt; code or where I should start .. I will be very glad.
  &gt; 3. Is there any documentation available which I can use as reference?
</pre>
  <p>
  See above.
  </p>
  
  <p>
  If you have a spare machine lying around somewhere that you can use I
  can really recommend linux from scratch. It will give you an excellent
  insight in how what most people refer to as linux is actually build from
  a number of different components, among them a kernel.
  It doesn't have to be a high-specced machine, I originally build a linux
  from scratch on an old intel 386 machine.
  </p>
  <p>
  Hope you enjoy the ride ;-)
  </p>
</blockquote> 

<p>
  [Lew] - You probably should read the 
  <a href="http://www.tldp.org/HOWTO/From-PowerUp-To-Bash-Prompt-HOWTO.html">"From PowerUp to Bash Prompt HOWTO"</a>
  which covers that topic quite well
</p>
 
<p>
  You might also want to read up on Operating System design and
  implementation, as the background will help you understand what's going on.
  A /really/ good book is "Operating Systems: Design and Implementation" by
  Andrew Tanenbaum and Albert Woodhull (ISBN: 0-13-142938-8, Prentice Hall).
  You might also want to study how Minix was built (Minix is a unix-like OS
  built as a teaching tool, and is documented in OSD&amp;I). That might
give
  you a good background on how things work in the Unix and Linux world, and
  where you might reasonably find the facilities and tools implemented.
</p>
 
<pre>
  &gt; As at log in prompt I see  &lt;hostname&gt; login:
  &gt; so I tried to grep for the "login:" in .c files. but really could not
  &gt; find the the proper location in the source code.
</pre>
<p>
  The login prompt isn't part of the OS kernel. It is actually generated by a 
  user program (getty, iirc). To see it, you would have to grep through the 
  code for getty.c, which I bet you haven't installed (since the userspace
  app source code is rarely installed on general machines).
</p>
 
  
<pre>
  &gt; I have a 2.6.15-01.2054_FC5 source code.
  &gt; 
  &gt; Am very very interested to understand this code. I understand C
  &gt; language quite well.
  &gt; 
  &gt; I have 3 questions.
  &gt; 1. Is this approach to understand the linux kernel code all right?
</pre>
<p>
  It is one way to do it. It might not be the best way if you don't already
  know what Unixish operating systems must do to start up.
</p>

<pre>
  &gt; 2. If any one can give me some hint where I can find the login related
  &gt; code or where I should start .. I will be very glad.
</pre>
<p>
  Look at the source code for the getty, login, and passwd user applications. 
  This will /not/ be in the Linux kernel source code libraries.
</p>
 
<pre>
  &gt; 3. Is there any documentation available which I can use as reference?
</pre>
<p>
  See above.
</p>

<p>
[John] - Just yesterday I found an online copy of the historical book by J.
Lions, "A Commentary on the Sixth Edition Unix Operating System".  The link
can be found under the heading "external links" on the wikipedia page for
"lions book".
</p>

<blockquote>
<p>
Although the material is quite dated, it is still highly regarded as a
reference for basic unix OS principles, so you might find it of interest. 
</p>
</blockquote>

<p>
[[Thomas]] - I still find the <a href="http://www.simson.net/ref/ugh.pdf">Unix
Haters</a> book a much "better" authority on the OS.  :P
</p>

<p>
[[[Deepak]]] - Thank you all for your valuable suggestions.  After listening
from you people i have started building my own Linux system based LFS.
</p>

<p>
[[[John]]] - Ah, just as I suspected - you <em>are</em> from the dark side ... :)
</p>

<p>
[[[Marty]]] - I found the UHG
</p>

<p>
[[[[Thomas]]]] - Was it good?  Did you read it?  I can't help but think there
was more to this email than just that sentence above, initially.  :P
</p>

<p>
[[[[[Rick]]]]] - If anyone hasn't yet read this 1994 collection of Unix
discontents, it's definitely worth the trouble, if only because the ranting
is sometimes inventive and literate:
<a href="http://research.microsoft.com/~daniel/unix-haters.html">http://research.microsoft.com/~daniel/unix-haters.html</a>
</p>

<blockquote>
<p>
Dennis Ritchie's comment in his "anti-forward" is worth noting:  "You
claim to seek progress, but you succeed mainly in whining."  That's 
the lesser problem with the book (particularly in the parts written by LISP
Machine and ITS fans whose preferred environments early Unix replaced):
It's just a miscellany of sundry people's personal piques and resentments.  
The larger problem is that those complaints, though they were sometimes
reasonable if (mostly) exaggerated at the time they were posted to the
unix-haters mailing list -- late 1980s to early 1990s -- just about all
seemed <em>already</em> quaint by the time of publication.
</p>

<p>
In fact, the key ingredient required for fixing those antique problems
was open-source licensing and source code access, which was arriving in
the form of the BSD family and Linux precisely as the book was being
published in 1994.
</p>

<p>
Chris Browne's review of the now-publicly-available text is here:
<a href="http://linuxfinances.info/info/unixhaters.html">http://linuxfinances.info/info/unixhaters.html</a>
</p>
</blockquote>

<p>
[[[Marty]]] - I found the Unix haters guide made some valid criticisms, but I
knew some of the people on the mailing list -- and found they're
vociferousness humorous.
</p>

<p>
[[[[John]]]] - Yes, most of it does seem to have been written in a humorous
vein, some of it very tongue-in-cheek.  I haven't yet read it entirely
though.
</p>

<p>
[[[Marty]]] - Their major criticism was "Unix is too complicated" which translates into 
Doug Gwyn's remarks (which are so true) "GUIs make simple things simple and
difficult things impossible".
</p>


<blockquote>
<p>
The criticism boils down to "I only want to do simple things, I can't learn
how to do complicated things".   If the GUI doesn't let me, I don't need
to...so this really means "I'd rather spend a week doing writing code to do
in awk/sed (back then) in 5 minutes..."
</p>
</blockquote>

<p>
[[[[John]]]] - A lot of it was written in the early days of history of the OS
family, with several mentions of Lisp Machines, etc.  It doesn't seem to
reflect a lot of the advances made during the past 12 years or so:
</p>

<blockquote>
<pre>
    Did users want the operating system where bugs didn't get fixed? Not
    likely. Did users want the operating system with a terrible tool set?
    Probably not. Did users want the OS without automatic command
    completion?  No. Did users really want the OS with a terrible and
    dangerous user interface?  No way. Did users want the OS without memory
    mapped files? No.  Did users want the OS that couldn't stay up more
    than a few days (sometimes hours) at a time? Nope. Did users want the
    only OS without intelligent typeahead? Indeed not. Did users want the
    cheapest workstation money could buy that supported a compiler and
    linker? Absolutely.  They were willing to make a few sacrifices.
</pre>
</blockquote>

<p>
[[[Marty]]] - BTW, the latest WSYSIWIG editor I enjoyed using was BravoX on the altos.
</p>



 

</div><div class="mb-mailbag"><hr />
<a name="mailbag.08" />
<h3>Message sending failure</h3>
 
 <p>Martin Hooper (martinjh at blueyonder.co.uk) 
 <br /> 
 Mon Jun 19 09:00:52 PDT 2006</p> 
 <em>Answered by:  Martin, Rick</em> 
 
<strong><p>Any reason this might have happened?  Not sure whether it could
be a problem at my ISP or at the other end..?
</p>

<p>If it could be my ISP then I'll mention on their support groups.
</p>
</strong>

<pre class="code">
-------- Original Message --------
Subject: Mail delivery failed: returning message to sender
Date: Mon, 19 Jun 2006 16:48:51 +0100
From: Mail Delivery System &lt;Mailer-Daemon at blueyonder.co.uk&gt;
To: martinjh at blueyonder.co.uk

This message was created automatically by mail delivery software.

A message that you sent could not be delivered to one or more of its
recipients. This is a permanent error. The following address(es) failed:

   tchung at fedoranews.org
     SMTP error from remote mail server after MAIL 
FROM:&lt;martinjh at blueyonder.co.uk&gt;:
     host fedoranews.org [64.34.165.170]: 550 5.7.1 Access denied

------ This is a copy of the message, including all the headers. ------

Return-path: &lt;martinjh at blueyonder.co.uk&gt;
Received: from [172.23.170.146] (helo=anti-virus03-09)
	by smtp-out5.blueyonder.co.uk with smtp (Exim 4.52)
	id 1FsLze-0003tl-GW
	for tchung at fedoranews.org; Mon, 19 Jun 2006 16:48:50 +0100
Received: from [62.30.33.77] (helo=[192.168.0.2])
	by asmtp-out2.blueyonder.co.uk with esmtp (Exim 4.52)
	id 1FsLzd-00033G-Ni
	for tchung at fedoranews.org; Mon, 19 Jun 2006 16:48:50 +0100
Message-ID: &lt;4496C760.8070803 at blueyonder.co.uk&gt;
Date: Mon, 19 Jun 2006 16:48:48 +0100
From: Martin Hooper &lt;martinjh at blueyonder.co.uk&gt;
User-Agent: Thunderbird 1.5.0.4 (Wind0ws/20060516)
MIME-Version: 1.0
To:  tchung at fedoranews.org
Subject: Fedora Security Bulletins
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Tom,

Having returned to Fedora after having used Kubuntu for a while I was
wondering if there was a security update announce list I could subscribe
to??

Keep up the good work on Fedora News...

Martin

</pre>
<p>[Rick] - Cutting to the chase and answering your question, the "reject"
DSN
(Delivery Status Notification) you received was reported by host
fedoranews.org, IP 64.34.165.170, your intended destination, which for
not-very-well-explained reasons has turned surly and is declining mail
(yours, at least; probably others', as well).  However, let's trace the
progress of your message, so you can see how to interpret the DSN and 
the headers in your attached mail copy: 
</p>

<blockquote><p>First, consider the DSN text itself:
</p>

<pre class="code">
&gt;    tchung at fedoranews.org
&gt;      SMTP error from remote mail server after MAIL
&gt;      FROM:&lt;martinjh at blueyonder.co.uk&gt;:
&gt;      host fedoranews.org [64.34.165.170]: 550 5.7.1 Access denied
</pre>
<p>The "host fedoranews.org [64.34.165.170]" part identifies what machine
is notifying you.  It's declining mail you addressed to
"tchung at fedoranews.org".  The DSN payload, which are the error code and
explanatory text (for small values of "explanatory" in this particular
case) are the final bit:
</p>

<pre class="code">
&gt; 550 5.7.1 Access denied
</pre>
<p>Let's break that down.  It parses as:
</p>

o SMTP error code:  550
o SMTP extended error code:  5.7.1
o SMTP error text:  Access denied.

<p>"550" is the classic (most common) permanent-failure SMTP error code,
though there are others.  The 5xx category are permanent failure
reports, i.e. "this is definitive, so there's no point in re-attempting
delivery" -- in contrast to the 4xx temporary-failure errors you will
often see, such as those ending with "Warning: message still undelivered
after 4 hours.  Will keep trying until message is 5 days old", and the
2xx series that indicate successful delivery.
</p>

<p>I can't count the number of times people have telephoned me during my
mail server's scheduled downtime, complaining they got a "bounce
message" when they tried to mail me -- only to find out that the
diagnostic text, which they didn't bother to read, very clearly said
(paraphrasing) "I've been having some difficulty getting this message
through; it may be just a glitch, and there are still five days of
delivery attempts left, but I thought you should know."
</p>

<p>A fair amount of thought has gone into making (most) DSNs informative;
it's a pity so many people can't be bothered to read them _at all_.
</p>

<p>"550" and all the other SMTP error codes were defined in Jon Postel's 
classic RFC821 document, in 1982.  "550" is explained there as being
intended for "Requested action not taken: mailbox unavailable [E.g.,
mailbox not found, no access]" situations -- wording broad enough to
serve as a catch-all for most permanent delivery failures, other than
50x SMTP-command syntax errors, 551 "User not local" redirects, 552
"exceeded storage allocation" errors, 553 "mailbox syntax incorrect"
errors, and a vague-sounding 554 "transaction failed" that most often 
means "destination host is so overloaded that it's refusing some mail as
a coping strategy".
</p>

<p>But don't forget my larger point that you needn't know that, to read the
error messages:  Generally, you just read the error text, and the
reason's _right there_.
</p>

<p>"Access denied" in this case is, sadly, pretty delphic, and could mean
quite a lot of things, I suppose.
</p>

<p>That brings us to "5.7.1":  RFC1821's definition of the SMTP standard in
August 1982 was, by a decade and a half later, wildly successful by any
measure, but among its nagging design defects was the limitations in its 
set of error codes.  Many were just not specific enough, and there were
very few unassigned code numbers left to fill in gaps.  Therefore,
"subcodes" were defined in January 1996's RFC1893, and follow a three-part
numerical format: "class.subject.detail".  
</p>

<p>The leading "class" tuple uses the same numerical convention the earlier
SMTP error codes did:
</p>

<pre class="code">
2.X.X = success
4.X.X = temporary failure
5.X.X = permanent failure
</pre>
<p>Each of these is further specified by "subject" tuples for the middle
value:
</p>

<pre class="code">
X.0.X = this error concerns: other/undefined
X.1.X = this error concerns: sender or recipient address syntax/validity
X.2.X = this error concerns: recipient mailbox issues
X.3.X = this error concerns: recipient system problems
X.4.X = this error concerns: network or routing problems
X.5.X = this error concerns: failure somewhere in the mail delivery
protocol
X.6.X = this error concerns: failure involving content-handling
X.7.X = this error concerns: security or policy failures
</pre>
<p>I could give a complete listing of the "detail" permutations (the third
tuple), but it'd be a bit long -- 49 entries -- because meaning differs
based on what values the other two tuples have.  The full list is in
RFC1893, but the one relevant to your mail is:
</p>

<pre class="code">
X.7.1   Delivery not authorized, message refused

          The sender is not authorized to send to the destination.
          This can be the result of per-host or per-recipient
          filtering.  This memo does not discuss the merits of any
          such filtering, but provides a mechanism to report such.
          This is useful only as a permanent error.
</pre>
<p>So, basically, this string you got -- "550 5.7.1 Access denied" amounts
to:  fedoranews.org thinks that you, your ISP, or the particulars of
your message shouldn't not be allowed to use it to send mail to
mailbox "tchung", for reasons basically unspecified but vaguely security
or filtering-related.  Assuming you haven't done anything to get Tom
Chung's knickers into a bunch  ;-%gt; , possibly he has a misconfigured or
severely trigger-happy antivirus or antispam system?  Or there's bad
blood between fedoranews.com and Blueyonder?
</p>

<p>Along those lines, the error was triggered at exactly the point where
your ISP's outbound SMTP server said to fedoranews.org
</p>

<pre class="code">
    MAIL FROM:&lt;martinjh at blueyonder.co.uk&gt;
</pre>
<p>Looks like something at fedoranews.org doesn't like specifically <em>your</em>
mailbox -- or your ISP.  Either way, it seems a bit ill-tempered, at
best.
</p>


<p>You can follow the actual literal <em>progress</em> or your message, up to the
point where fedoranews.com rejected it, in the pair of Received
headers sent back to you:
</p>

&gt; Received: from [172.23.170.146] (helo=anti-virus03-09)
&gt;       by smtp-out5.blueyonder.co.uk with smtp (Exim 4.52)
&gt;       id 1FsLze-0003tl-GW
&gt;       for tchung at fedoranews.org; Mon, 19 Jun 2006 16:48:50 +0100
&gt; Received: from [62.30.33.77] (helo=[192.168.0.2])
&gt;       by asmtp-out2.blueyonder.co.uk with esmtp (Exim 4.52)
&gt;       id 1FsLzd-00033G-Ni
&gt;       for tchung at fedoranews.org; Mon, 19 Jun 2006 16:48:50 +0100


<p>Those are most-recent first, so you actually start reading at the bottom
and go up:
</p>

<p>1.  MTA "asmtp-out2.blueyonder.co.uk" (presumably, your ISP's outbound 
SMTP host) received a message stream from IP address 62.30.33.77
(presumably, your workstation), addressed to tchung at fedoranews.org
asmtp-out2 then passed the message along to the next phase.
</p>

<p>2.  That next phase is apparently some sort of additional outbound-SMTP
machine called "smtp-out5.blueyonder.co.uk" (maybe a Micr0s0ft-virus
stripper?), which does the actual delivery to a mail exchanger for the
"fedoranews.org" domain.
</p>

<p>How does it know where such mail should go?  We can simulate its
thinking processes using the "dig" command:  Mail should be dropped off
at a host indicated in the domain's "MX" DNS records.  If there are no
such records, it should be dropped off using the DNS "A" record for the
specified host+domain, as a fallback.
</p>

<pre class="code">
$ dig -t mx fedoranews.org +short
$
Null result on type "MX".  So, as mentioned, there's an automatic
fallback to "A" (regular forward lookup) records:

$ dig -t a fedoranews.org +short
64.34.165.170
</pre>
<p>3.  So, smtp-out5.blueyonder.co.uk attempted delivery to
"fedoranews.org" AKA IP address 64.34.165.170, where it ran into the
aforementioned security or policy-based refusal.
</p>

<p>There's no "Received" header for this third hop because, well, the mail
was refused, after all.
</p>


<p>Just as a word of caution, not all Received headers are honest:
Spammers, computer criminals, and some malware have been known to
attempt to inject bogus information or even one or more entirely
fraudulent Received headers, in an effort to deceive analysts trying to
track down responsible parties.  In general, any information in an SMTP
e-mail, including all Received headers, can be forged by any of the
prior machines that handled the mail, and must logically be subject to
doubt, except that the immediately prior MTA's IP address, before your
own, is known with certainty -- because it was recorded by <em>your</em> MTA
at the time of receipt.
</p>

<p>Thus, if you were the sysadmin of smtp5-out.blueyonder.co.uk, and
trusted your own machine (to not be root-compromised, etc.), then you
could rest assured that this mail really <em>did</em> come from IP address 
172.23.170.146 .
</p></blockquote>
<p>[Martin] - Thanks Rick - Very informative as usual... ;)
</p>

 

</div>
</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:129/lg_mail.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
<!-- *** END author bio *** -->




<div id="articlefooter">




<p>
Published in Issue 129 of Linux Gazette, August 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="lg_talkback"></a>
<h1>Talkback</h1>


</b>
</p>


<p>

<div class="mb-talkback">
<hr />
<h2>Talkback</h2>
<a href="#talkback.01">Talkback:104/kapil.html</a>
<br />
<a href="#talkback.02">Talkback:125/howell.html (2)</a>
<br />
<a href="#talkback.03">Talkback:125/howell.html (3)</a>
<br />
<a href="#talkback.04">Talkback:126/howell.html (2)</a>
<br />
<a href="#talkback.05">Talkback:127/kaushal.html</a>
<br />
<a href="#talkback.06">Talkback:127/lg_mail.html#mailbag.04</a>
<br />
<a href="#talkback.07">Talkback:128/adam.html</a>
<br />
<a href="#talkback.08">Talkback:128/howell.html</a>
<br />
 
</div><div class="mb-talkback"><hr />
<a name="talkback.01" />
<h3>Talkback:104/kapil.html</h3>

<p>[ In reference to  <a href="../104/kapil.html">How To Make a StereoGram with GIMP, Blender and StereoGraph</a> in LG#104 ]</p>

 
 <p>David Tansey (djtansey at gmail.com) 
 <br /> 
 Tue Jun 20 21:20:46 PDT 2006</p> 
 <em>Followed up by:  Kapil</em> 
 
<strong><p>Dear Kapil, 
</p>

<p>I just read your blender/gimp/StereoGraph tutorial. I am hoping to
create my own simple stereographs. I tried to create an image in the
gimp using the leopard patter that was 640x480 (though yours seemed much
thinner than that) and created another image in the gimp that was a
simple white and gray design with a black background saved in tga
format. When I tried to use the stereograph parameters you gave I got
the following output:
</p>

<pre>
initializing renderer...FAILED;
illegal parametre;
</pre>
<p>Is the texture image supposed to be 480 wide? Do I really have to use
blender? What I want to make is very simple...
</p>

<p>Thanks!
</p>
<p>-David
</p>
</strong>

<p>[Kapil] - 1. The texture should not be as wide as the image but much
narrower.  As per the man page of "stereograph" the texture should be about
100 pixels wide for a 640x480 stereogram. You can experiment with larger
sizes for larger images.  </p>

<blockquote><p>2. Since what you want to make is very simple you can
experiment with creating the image directly using a simple graphics editor.
However, the sensation of depth will depend significantly on how accurately
the height (in the 3D image) is mapped to the gray-level of your image.
</p>

<p>Hope this helps.
</p>
</blockquote>
 

</div><div class="mb-talkback"><hr />
<a name="talkback.02" />
<h3>Talkback:125/howell.html (2)</h3>

<p>[ In reference to  <a href="../125/howell.html">A Brief Introduction to IP Cop</a> in LG#125 ]</p>

 
 <p>Eric Scheitlin (Escheits at sbcglobal.net) 
 <br /> 
 Wed Jun 14 15:23:26 PDT 2006</p> 
 <em>Followed up by:  Thomas</em> 
 
<p> <strong>Is IPCop still actively being developed?</strong></p>

<p>[Thomas] - <a href="http://www.ipcop.org/">http://www.ipcop.org/</a> seems to indicate it is.</p>
 

</div><div class="mb-talkback"><hr />
<a name="talkback.03" />
<h3>Talkback:125/howell.html (3)</h3>

<p>[ In reference to  <a href="../125/howell.html">A Brief Introduction to IP Cop</a> in LG#125 ]</p>

 
 <p>TONY BOS (tbos at netvision.net.il) 
 <br /> 
 Sun Jun 18 09:15:38 PDT 2006</p> 
 <em>Followed up by:  Thomas</em> 
 
<strong><p>How does IP cop reac to VNC?</p>
<p>And how to configure?</p>
<p>Cheers</p></strong>

<p>[Thomas] - Woah! Hold back there. You've given us <em>way</em> too much
information.  It's going to take me a long time to sieve through it all.
</p>

<p>
Really -- do you <strong>honestly</strong> think that if it was me asking that question to
<strong>you</strong> that you would have any idea what I was asking? No -- you probably
wouldn't, and I daresay you'd want to have a lot more information than just
two very sporadic and disparate setences such as the ones you have used
above.</p>

<blockquote><p>If you're going to ask an actual question you ought to at
least read the following which will help you:</p>

<p><a href="../tag/ask-the-gang.html">http://linuxgazette.net/tag/ask-the-gang.html</a></p>

<p>I am at a loss as to what &quot;reac&quot; is supposed to mean. Do you
mean &quot;react&quot;? If so, that's probably not the right word either --
the two are not even related. You might have meant &quot;compare&quot;, but
again, the two don't compare since they do different things. So maybe
you're just interested in setting up VNC, and <strong>maybe</strong> making sure that any
ports it uses aren't firewalled?  If that's your actual question then
rephrase it as such with more pertinent information. Configuring VNC really
isn't that hard. Google for &quot;vnc howto&quot;, you'll get lots of hits
there.</p>

<p>Too vague? That's a shame. But then so was your question.
:P</p>
</blockquote>

 

</div><div class="mb-talkback"><hr />
<a name="talkback.04" />
<h3>Talkback:126/howell.html (2)</h3>

<p>[ In reference to  <a href="../126/howell.html">From Assembler to COBOL with the Aid of Open Source</a> in LG#126 ]</p>

 
 <p>steve donato (stevendonato at yahoo.com) 
 <br /> 
 Sat Jun 3 20:55:05 PDT 2006</p> 
  
 
<strong><p>I know of a mainframe (s/390, Z/OS) assembler to cobol
translator that works 100%.</p>

<p>anybody interested?</p>


<p>We just did a pilot project and converted a system of 13 assembler CICS
/ DB2 programs, to cobol.   The converted code worked without any manual
changes to the cobol code.</p>
</strong>

 

</div><div class="mb-talkback"><hr />
<a name="talkback.05" />
<h3>Talkback:127/kaushal.html</h3>

<p>[ In reference to  <a href="../127/kaushal.html">Review: amaroK (audio player for KDE)</a> in LG#127 ]</p>

 
 <p>Alejandro Araiza Alvarado (mebrelith at gmail.com) 
 <br /> 
 Fri Jun 2 18:16:10 PDT 2006</p> 
  
 
<p> <strong>Regarding the issue of being forced to switch to the context browser 
  on track change... this is the classical kde related complain. That is, people 
  complainin about something before even giving it a small effort at figuring 
  it out. Theres an option in the amaok config dialog-&gt;General section that 
  reads &quot;Switch to context browser on track change&quot; just uncheck it 
  and that's that.</strong></p>

 

</div><div class="mb-talkback"><hr />
<a name="talkback.06" />
<h3>Talkback:127/lg_mail.html#mailbag.04</h3>

<p>[ In reference to  <a href="../127/lg_mail.html#mailbag.04">The Mailbag</a> in LG#127 ]</p>

 
 <p>David Bl (dblas at rocketmail.com) 
 <br /> 
 Wed Jun 7 12:31:36 PDT 2006</p> 
 <em>Followed up by:  Ben</em> 
 
<p>
<strong>Quote:</strong>
</p>

<pre>
[Ben] - Well, first off, Unix doesn't have "Folders";
I presume that you're talking about directories.
</pre>
<strong><p>Is there a way to let Gnome know this.  I like the Bluefish
editor (GTK
toolbox) and it wants to look in my "Desktop" "Folder".  I don't have
either one of those on my box.</p>

<p>David</p>

<p>P.S. Perhaps there is a list of such gaffes available on the net.     If
could be very helpful.  Calling a disk drive "permanent memory" is one of
the worst bits of misinformation IMHO.  It is neither permanent nor
memory.</p>
</strong>

<p>[Ben] - That's one of the reasons that I'm not a big fan of KDE <em>or</em>
  GNOME; in some ways, I see them as replicating Micr0s0ft's "Do not fear,
  little human - Wind0ws(Linux) will not harm you" user interface dynamic.
  "Let's make Wind0ws users feel at home" is all fine and dandy - but not at
  the cost of injecting Wind0ws terminology into places in Linux where it
  doesn't belong, or trying to "soften the impact" of having to deal with a
  computer by pretending that it's only a fuzzy-wuzzy cuddly loveable version
  of your file cabinet, yes indeed! Bleh.  </p>

<blockquote>
  <p>Whoops - I appear to have left my 'rant' switch in the "maximum
  bugf*ck" position. [click] Sorry 'bout that... anyway, right.  </p> 
</blockquote>

<p>
[[David]]  - Honest, thought out positions against dumbing down the world
aren't a bad thing.  I first heard "permanent memory=hard disk" on a
computer talk show on the radio.  From a college professor!!
</p>
 
<p>
[[[Ben]]] - [cough] That's not anything to be surprised by, at least in my
experience. There are many college professors who know their subject and
their business (teaching), and are excellent at both. These, however,
are a rarity - I always treasured them whenever I was lucky enough to
have one. I guess I've done something right lately, because my current
professor is indeed one of this select group: at the age of 72, Ken Hyde
is an excellent welder, an amazing teacher, and a damn fine human being
overall.
</p>

<blockquote>
<p>
Expecting a college professor to be better acquainted with computers
than anyone else, well, I've given up on that one. :)
</p>
</blockquote>

<p>
[[David]]  - A Google for "permanent memory" "hard disk" yields among others:
</p>
 
<blockquote>
<pre>
"A hard drive is a memory storage drive disk drive that reads from and
writes to permanent memory."
</pre>
<p>
<a href="http://discover.edventures.com/functions/termlib.php?action=&amp;termid=2671&amp;alpha=h&amp;searchString=">http://discover.edventures.com/functions/termlib.php?action=&amp;termid=2671&amp;alpha=h&amp;searchString=</a>
</p>

<pre>
(A live CD) "can be run directly from the CD or DVD drive, without
installing into permanent memory, such as a hard drive."
</pre>
<p>
<a href="http://www.answers.com/topic/live-cd">http://www.answers.com/topic/live-cd</a>
</p>
 
<p>
You are now cursed.  You will now see it used in this way in way too many
places.
</p>
</blockquote>

<p>
[[[Ben]]] - [laugh]
</p>

<p>
[[David]]  - I always enjoy linuxgazette BTW.
</p>

<p>
[[[Ben]]] - Thanks, David! We try our best to produce good content for our
readers, and it's always nice to hear back.
</p>

 

</div><div class="mb-talkback"><hr />
<a name="talkback.07" />
<h3>Talkback:128/adam.html</h3>

<p>[ In reference to  <a href="../128/adam.html">How Fonts Interact with the X Server and X Clients</a> in LG#128 ]</p>

 
 <p>Bob van der Poel (bvdp at xplornet.com) 
 <br /> 
 Sun Jul 2 11:31:49 PDT 2006</p> 
 <em>Followed up by:  BobV, Faber, Thomas</em> 
 
<strong>

<p>Just reading this article on fonts and I find it interesting that the
  article refers to the font server port as unix/:7100. I'm using Mandriva
  2006 and it uses unix/:-1. Okay, so this is probably (??) the same as 65535
  ... but, if I check /etc/services there is no port 65535 (or anything past
  60179. AND, the fontserver port is 7100.  </p>

  <p>I can confirm the -1 by doing an 'xset q' as well as by looking that the
  xorg.conf file.  </p>

  <p>So, is there a significance to the value -1?  </p> 

</strong>


<p>[Thomas] - Early versions of Redhat (versions up to 6.0, IIRC) used to
  define the fontserver's address as unix/:-1 -- perfectly valid too, and
  caused no end of issues.</p>

<blockquote>
  <p>I never understood <em>why</em> Redhat used to insist on installing two font
  servers in the vaguest hope they were going to be any good -- they aren't,
  and commenting out that line entirely is the best course of action, since
  it's much more trouble than its worth. </p> 
</blockquote>

<p>[[BobV]] - I will have to try outcommenting that just to see. On the
  other hand, so long as it works I may leave well enough alone :) </p>


<p>[Thomas] - [Quoting BobV]:
<blockquote>
<pre>
&gt; I can confirm the -1 by doing an 'xset q' as well as by looking that
&gt; the xorg.conf file.
</pre>
</blockquote>

<p>What about:</p>

<blockquote>
<pre>
sudo netstat -apvn | grep -i xfs
</pre>
</blockquote>

[[BobV]] - 

<pre>
netstat -apvn | grep -i xfs
netstat: no support for `AF IPX' on this system.
netstat: no support for `AF AX25' on this system.
netstat: no support for `AF X25' on this system.
netstat: no support for `AF NETROM' on this system.
unix  2      [ ACC ]     STREAM     LISTENING     12007  5435/xfs /tmp/.font-unix/fs-1
unix  3      [ ]         STREAM     CONNECTED     2398890 5435/xfs /tmp/.font-unix/fs-1
unix  2      [ ]         DGRAM                    11994  5435/xfs
</pre>
<p>Translation?</p>

<p>[[[Thomas]]] - Without going into too much detail (it's boring) what that's
  saying is that the font server has a connection open (a socket, hence
  STREAM) and that the socket is used in a connectionless mode (i.e. a
  Datagram).  Essentially, the communication is established with the font
  server as and when it is needed, and isn't always there hanging to the
  local XServer.  This has to be the case, else the network traffic involved
  would be very high.  </p>

<p>[Thomas] - </p>

<blockquote>
<pre>
&gt; So, is there a significance to the value -1?
</pre>
<p>It's just another number -- God knows why they chose it, since serving
fonts on port 7100 has been normal now for many years.   </p>
</blockquote>

<p>[[BobV]] - Yes, but should the port number (in this case -1) show up in
/etc/services? Oh, wait ... my /etc/services does say: </p>

<blockquote>

  <pre>
	# The Dynamic and/or Private Ports are those from 49152 through 65535
  </pre>

  <p>so, I suppose that the -1 is a dynamic/private port?  </p>

</blockquote>

<p>[[[Thomas]]] - As far as I know, yes.</p>

<p>[Faber] - IIRC, the -1 says use unix sockets instead of unix ports.
</p>

<p>[[Thomas]] - Can you confirm that?  I thought this as well, but I can't
  find any documentation which says that.  </p>

 

</div><div class="mb-talkback"><hr />
<a name="talkback.08" />
<h3>Talkback:128/howell.html</h3>

<p>[ In reference to  <a href="../128/howell.html">A Brief Introduction to VMware Player</a> in LG#128 ]</p>

 
 <p>Richard Neill (rn214 at hermes.cam.ac.uk) 
 <br /> 
 Sat Jul 1 21:35:59 PDT 2006</p> 
 <em>Followed up by:  Edgar</em> 
 
<strong><p>Vmware is neat - but have you discovered Qemu yet?  </p>

<p>Qemu is very very similar, but it is Free software.  </p>

<p>Regards, </p>

<p>Richard </p>
</strong>


<p>[Edgar] - Hi Richard, </p>

<blockquote>

  <p>No, I haven't yet discovered Qemu, although I have seen references to
  it.  Is it perhaps a further development of DOSEMU?  Used to use that back
  in my CompuServe/Tapcis days.  </p>

  <p>At the moment I am playing with (I refuse to say "fighting") XEN, which
  also is free software.  Since non-proprietary it allows lots of tweaking
  which means lots of things can go wrong.  </p>

  <p>If you are comfortable enough with Qemu to recommend it, would you
  consider an article on it for Linux Gazette?  I would be interested in
  reading about it from someone who went through the process of getting it
  functional.  </p>

  <p>There is no one "right" way and often the sheer number of choices makes
  it difficult to decide, particularly for people new to Linux.  An article
  from someone who has been there can be a huge help.  </p>

</blockquote>

 

</div>
</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:129/lg_talkback.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
<!-- *** END author bio *** -->




<div id="articlefooter">




<p>
Published in Issue 129 of Linux Gazette, August 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="appaiah"></a>
<h1>Making XMMS Effect plugins</h1>
<p id="by"><b>By <A HREF="../authors/appaiah.html">Kumar Appaiah</A></b></p>


</b>
</p>


<p>
<p>Most of us will agree that though there are many audio players for
GNU/Linux and the BSDs, the most popular by far is XMMS. Not only is it
similar to Winamp, which eases things for people coming from Windows, it
is also simple and has all the features one would expect in a complete
multimedia player. Best of all, it is extensible with additional plugins
for added functionality, file support, visualization and, of course, sound
effects.</p>

<p>In this article, I will present an introduction to some functions
provided in the XMMS plugin library for developing our own effects, along
with some useful techniques. Using an example (a simple echo plugin), I
shall walk through the steps, introducing the functions one by one. The
only requirement is that you should know C, but you needn't be an audio
engineer (I'm not one!) to be able to churn out some simple effects.</p>

<p>Before we begin - an effect plugin, or, for that matter, any other
plugin for XMMS, is a shared object (.so) file. Make sure you have
gcc, make and other development tools on you machine, along with the
XMMS plugin development headers and libraries.</p>

<h3>Prerequisites</h3>

<p>Check if the XMMS plugin library is installed already on your
system. The presence of headers, /usr/include/xmms or
/usr/local/include/xmms, is a good indication of this. If it isn't,
install the xmms-devel (or equivalent) package from your
distribution.</p>

<h3>Technique</h3>

<p>Though this article should be only about writing XMMS plugins, I
also thought that it would be appropriate to mention a buffering
technique used <em>all the time</em> in audio processing, called
<strong>circular buffers</strong>. In our case, let us say we want to
make the echo sound, say 370 ms (0.37 seconds) later. If we are
working with data sampled at 44100 Hz, then the size of the buffer
required would be 0.37 * 44100 = 16317 elements each for left and
right (assuming you are providing separate echoes for the two
channels). Now, the obvious way to solve our problem is, as soon as we
get a new sample, we can retrieve the most delayed sample from the
buffer for the echo effect, then shift the contents of the buffer so
that the second element goes to the first place, third to second and
so on and push the new sample to the last position, just like a FIFO
queue. However, this would mean about 16317 memory read and write
operations have to be executed for every sample processed, which is
quite expensive when it comes to CPU use.</p>

<p>A simple solution to this problem is to treat the buffer as
<em>circular</em>. Here, we create an index or pointer to the element (or
an index) in the buffer which you mark as the last element to be read for
the delay, read that element for the echo effect, write the new sample into
the <em>same</em> memory location, and increment the index. If the pointer
or index reaches the end of the array, it just loops back to the first
element. The following picture should give you an idea.</p>

<p style="text-align: center; padding: 10px;"><img alt="Circular buffer picture" title="Circular buffer picture"
src="misc/appaiah/circbuf.png" border="1" /></p>

<p>With this, we have reduced the memory operations per sample to just
one read and write; many times more efficient than the previous
case. For more details, see the <a
href="http://en.wikipedia.org/wiki/Circular_buffer">Wikipedia
article</a> on this topic.</p>

<h3>Writing the Plugin</h3>

<p>Now, we start writing a minimal plugin that will create a fixed echo
effect. The full source is available in <a
href="misc/appaiah/exampleecho.c.txt">exampleecho.c</a>.</p>

<p>A plugin is registered with XMMS
using the following function:</p>

<pre>
EffectPlugin
*get_eplugin_info(void);
</pre>

<p>First, we create the buffers for the echo effect. I have chosen a
16384-sample delay, which is about 0.37 sec. Since we will use these as
circular buffers, we shall keep two integers to index the location in the
buffers.</p>

<pre class="code">
#define BUFFER_LENGTH 16384

static gfloat *buffer_left = NULL;
static gfloat *buffer_right = NULL;
static guint index_left = 0;
static guint index_right = 0;
</pre>

<p>Now, we observe the requirements of the <tt>EffectPlugin</tt>
structure, defined in <tt>/usr/include/xmms/plugin.h</tt>:</p>

<pre class="code">
typedef struct
{
	void *handle;		/* Filled in by xmms */
	char *filename;		/* Filled in by xmms */
	char *description;	/* The description that is shown in the preferences box */
	void (*init) (void);	/* Called when the plugin is loaded */
	void (*cleanup) (void);	/* Called when the plugin is unloaded */
	void (*about) (void);	/* Show the about box */
	void (*configure) (void);	/* Show the configure box */
	int (*mod_samples) (gpointer *data, gint length, AFormat fmt,
	gint srate, gint nch);	/* Modify samples */
	void (*query_format) (AFormat *fmt,gint *rate, gint *nch);
}
EffectPlugin;
</pre>

<p>Though most of the functions specified are optional and you can
just make them NULL, we see that we need to write some functions for
our plugin to be useful. I will call these <tt>query</tt>,
<tt>init</tt>, <tt>cleanup</tt>, <tt>configure</tt>, <tt>about</tt>
and <tt>mod_samples</tt>, though you can name them whatever you like. Of
these, we will first write <tt>about</tt>, since it seems to be the
easiest!</p>

<pre class="code">
static char *about_text = "Kumar's test reverberation plugin!";

void
about(void)
{
	static GtkWidget *about_dialog = NULL;
	if (about_dialog != NULL)
		return;
	about_dialog = xmms_show_message("About Example Echo Plugin",
					 about_text, "Ok", FALSE,
					 NULL, NULL);
	gtk_signal_connect(GTK_OBJECT(about_dialog), "destroy",
			   GTK_SIGNAL_FUNC(gtk_widget_destroyed),
			   &amp;about_dialog);
}
</pre>

<p>Next, we write the <tt>query</tt> function. The query function
informs XMMS what type of audio data we wish to process. This is a
good idea, because our plugin may not function as expected for data
with different attributes, such as a different sampling rate. To make
it more clear, let us say we want an echo after 0.1 seconds, that is
0.1 * 44100 samples later when 44100 Hz is the sampling rate. But it
should be changed to 0.1 * 22050 for a file with 22050 Hz sampling
rate. Yes, it can be done on the fly, but I leave such tricks for you
to try out.</p>

<p>We'll make our plugin work with 16 bit little-endian stereo data,
sampled at 44100 (stereo) samples per second.</p>

<pre class="code">
void
query(AFormat *afmt, gint *s_rate, gint *n_channels) {
	*afmt = FMT_S16_LE;
	*s_rate = 44100;
	*n_channels = 2;
}
</pre>

<p>The <tt>init</tt> function is used to initialize your plugin's settings,
and you may also want to initialize your audio buffers here. This function
is called the moment the plugin is <em>enabled</em>, or whenever the plugin
loads (like when XMMS is started). In our plugin, we use two audio buffers
to hold past left and right samples, which need to be zeroed initially to
avoid &quot;noise&quot;. Note that <tt>g_malloc0</tt> is a GLIB function.
In general, it is convenient to use GLIB functions and data types, and
there are no extra requirements because XMMS needs them and uses them
anyway.

<pre class="code">
void init(void)
{
	if (buffer_left == NULL) {
		buffer_left = g_malloc0(sizeof(gfloat) * BUFFER_LENGTH);
	}
	if (buffer_right == NULL) {
		buffer_right = g_malloc0(sizeof(gfloat) *
		BUFFER_LENGTH);
	}
}
</pre>

<p>The <tt>cleanup</tt>, as the name very well suggests, is to free
any resources you might have allocated and prepare for releasing the
plugin. It is called the moment the plugin is disabled, or when XMMS
exits, if the plugin remains enabled at that time. Here, we just free
the buffers that we have allocated.</p>

<pre class="code">
void
cleanup(void)
{
	g_free(buffer_left);
	buffer_left = NULL;
	g_free(buffer_right);
	buffer_right = NULL;
}
</pre>

<p>The <tt>configure</tt> function is used to allow the user to modify
some characteristics of the plugin. It is called when the user clicks
"Configure" for your plugin in the Preferences dialog box. In our
plugin, I have left it blank, since I wanted to avoid adding a lot of
GTK code. However, this is fairly simple, and left as an exercise for the
reader. I would suggest that you refer the source of the plugins which
come with XMMS for ideas.</p>

<p>Note that the <tt>xmms_cfg_*</tt> functions make the use of the
XMMS configuration extremely easy, with XMMS doing the dirty work of
reading and writing the configuration file. They are present in
<tt>/usr/include/xmms/configfile.h</tt></p>

<p>Finally, we come to the most important function of the effect
plugin, <tt>mod_samples</tt>, in which the samples are provided and
are to be appropriately modified. The declaration of this function is
as follows:</p>

<pre>
gint
mod_samples(gpointer * d, gint length, AFormat afmt, gint srate, gint nch);
</pre>

<p>Here, <tt>d</tt> is the pointer to the data (samples), and length is the
number of bytes of data provided to the function in a given instance. This
function is called again and again with successive data; that is, in one
pass, you are provided the first set of samples, in the next one, the next
set of samples and so on, in order. The format of the data is given by the
<tt>AFormat</tt> value. By checking the <tt>afmt</tt> value, you can
dynamically adjust to changes in data type, etc.; however, we are going to
just assume it is what we specified in the <tt>query</tt> function.</p>

<pre class="code">
gint mod_samples(gpointer * d, gint length, AFormat afmt, gint srate, gint nch)
{
	/* Read data as 16 bit values */
	gint16 *data = (gint16 *) * d;
	gint i;

	/* We have "length" bytes, so "length / 2" samples */
	for (i = 0; i &lt; length / 2; i += 2) {
		gfloat echo_val;

		/* For the left sample */
		echo_val = buffer_left[left_index]; /* Retrieve delayed value */
		buffer_left[left_index++] = data[i]; /* Store latest sample */
		data[i] = (1 - ECHO_SCALE) * data[i] + ECHO_SCALE * echo_val; /* Set the echoed value */
		left_index = left_index % BUFFER_LENGTH; /* Circular buffer shift */
		/* Do the same for the right channel samples */
		echo_val = buffer_right[right_index]; /* Retrieve delayed value */
		buffer_right[right_index++] = data[i + 1]; /* Store latest sample */
		data[i + 1] = (1 - ECHO_SCALE) * data[i + 1] + ECHO_SCALE * echo_val; /* Set the echoed value */
		right_index = right_index % BUFFER_LENGTH; /* Circular buffer shift */
	}
	return length; /* Amount of data we have processed. */
}
</pre>

<p>We are expected to process the samples and write the modified
values back into the same memory locations. There are two things which
you must note here. First, since we have to process samples which are
16 bits (or two bytes) each, the number of samples is actually half
the number of bytes. So, <tt>length / 2</tt> is the actual number of
samples we have. That explains the cast to <tt>gint16</tt>. Also,
since we are handling stereo audio, successive samples alternate
between left and right. So, we actually have <tt>length / 4</tt>
number of left and an equal number of right channel samples, such that
<tt>data[0]</tt> is a left sample, <tt>data[1]</tt> is a right sample,
<tt>data[2]</tt> is a left sample, and so on.</p>

<p>Finally, we register the plugin with XMMS as follows:</p>

<pre class="code">
EffectPlugin e_plugin = {
	NULL,
	NULL,
	"Example Echo plugin",
	init,
	cleanup,
	about,
	configure,
	mod_samples,
	query};

EffectPlugin *
get_eplugin_info(void)
{
	return &amp;e_plugin;
}
</pre>

<h3>Build, install and test</h3>

<p>The compilation and linking is just like for any other shared
object file; note that we have to take care of the GTK and GLIB
dependencies. You can see the <a
href="misc/appaiah/Makefile.txt">Makefile</a> for details. I
also add a line to copy the plugin to <tt>$HOME/.xmms/Plugins/</tt>
after every compile. This ensures that I don't forget to put it there
manually after each build. It is very useful for testing!</p>

<p>I strongly recommend that you initially compile your plugin with
the <tt>-g</tt> option, so that you can debug it using
<tt>gdb</tt>. There are many ways to use <tt>gdb</tt> to debug the
plugin. I generally start <tt>gdb</tt> as <tt>gdb /usr/bin/xmms</tt>,
or find the PID of a running XMMS process and use <tt>gdb --pid
&lt;PID&gt;</tt>.</p>

<p>For best performance, once you are done with debugging the plugin,
recompile it with <tt>-O2</tt> or a similar optimization to allow the
compiler to optimize your code. You may also wish to consider using a
profiler to optimize the code further.</p>

<h3>Further details</h3>

<p>Now that you are ready and raring to write your own XMMS effect
plugins, enjoy yourself. I'd also recommend that you go through the
source code of various effect plugins available at <a
href="http://www.xmms.org/plugins.php?category=Effect">xmms.org</a> to
get an idea of the techniques and possibilites. Also, for serious DSP
advice, <a
href="http://groups.google.co.in/group/comp.dsp">comp.dsp</a> is
<em>the</em> place to go. <a href="http://www.dspguru.com">dspguru</a>
also has a good collection of DSP tricks and ideas. <a
href="http://www.harmony-central.com/">Harmony Central</a> is an
excellent place to learn more about artificial sound effects.</p>

<p>Comments, corrections and cribs are always welcome. Please e-mail
me at the address in my <a href="../authors/appaiah.html">bio</a>.</p>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:129/appaiah.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<hr>
<p>
<img align="left" alt="Bio picture" src="../gx/authors/appaiah.jpg" class="bio">
</p>

<p>
<em>
Kumar Appaiah is studying to earn a B.Tech in Electrical
Engineering and M.Tech in Communication Engineering (Dual-degree) at
the <a href="http://www.iitm.ac.in/">Indian Institute of Technology
Madras</a>. He has been using GNU/Linux for the past five years, and
believes that Free Software has helped him do work more neatly,
quickly and efficiently.
</p>

<p>
He is a fan of Debian GNU/Linux. He loves using Mutt, GNU Emacs,
XCircuit, GNU Octave, SciPy, Matplotlib and ConTeXt.
</p>

</em>

<br clear="all">


<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/appaiah.html">Kumar Appaiah</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 129 of Linux Gazette, August 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="dyckoff"></a>
<h1>Away Mission -- SEMTECH - The Semantic Web Technology Conference</h1>
<p id="by"><b>By <A HREF="../authors/dyckoff.html">Howard Dyckoff</A></b></p>


</b>
</p>


<p>
<p> Semantics is a new, interesting, and demanding area for web
technologists; it promotes the creation of ontologies and provides tools to
conserve meaning within the data. The use of semantics in the development
of data taxonomies is now a $2 billion per year market, and is projected to
grow to over $50 billion by the year 2010. A large part of this is driven
by 3-letter government agencies [ e.g., the NSA ] - unsurprisingly, several
of the attendees hailed from that sector.
</p>

<p> IT industry analysts have estimated that 35-65% of our 'untamable' system
integration costs are due to semantic issues [semantic discontinuities];
this is making the overlap of semantics and web technologies an issue of
critical interest to businesses on the cutting edge.
</p>

<p>
The fusion of semantics and web technologies goes back to the late 1990s
and was proposed by Tim Berners-Lee. His proposal to the WC3, <a
href="http://www.w3.org/DesignIssues/Semantic.html">"A roadmap to the
Semantic Web"</a> in 1998 inspired other contributors.
</p>

<p>
In 2004, the W3C released the Resource Description Framework (RDF) and the
Ontology Web Language (OWL) as W3C Recommendations.  RDF is used to
represent information and to exchange knowledge on the Web; in this system,
the combination of Subject/Predicate/Object constitutes an RDF "Triple"
where the 'object' uses URIs to encode this information and to point to a
specific web location.
</p>

<p>
OWL is used to publish and share sets of terms called <em>ontologies</em>, which
support advanced Web searching, software agents, and knowledge management.
OWL and RDF are two of the main ingredients of today's Semantic Web. For
more information, see this <a
href="http://www.w3.org/XML/1999/XML-in-10-points">working definition of RDF</a>.
</p>

<p>
In simple terms, RDF provides a standard and unambiguous way to make
statements about resources, while OWL overlays RDF and provides the ability
to make inferences about data. OWL, in turn, is used to build complex rule
systems. Prior art for OWL comes from DAML, the so-called DARPA Agent
Markup Language.
</p>

<h3>Semantic Web Technology</h3>
<p>
The big idea here is extend the HTML web with the addition of "meaningful"
tags such that software can help us find things - and then relate those
things to other things. The Semantic Web extends the utility of the World
Wide Web through the use of standards, semantic markup languages, inference
engines and related processing tools. That may well be the stuff of Web 3.0...
</p>

<p>
A Sunday evening primer on the Semantic Web, "Semantics in Perspective,"
was given by Dave McComb, President of Semantic Arts. His presentation drew
from his 2005 tutorial, which is <a
href="http://www.semanticarts.com/data/7d1e4bb9-3912-4e66-95d9-0ccf51efdc80/files/Toronto%20DAMA%20Oct%2019%202005.pdf">available from his company web site</a>.
</p>

<p>
This is, admittedly, very dense material; after the opening keynote and a
tech session, I felt the early onset of brain fatigue. But the final
session I attended, on the challenges of classifying Disney's vast media
collection, gave me much a better sense of why and how to apply these
techniques. I also learned that semantic metadata can increase the value of
content, especially media. For instance, that animation cel in a frame is
worth more depending on 'who' painted it and 'when' and how many there
were. [See this <a
href="http://www.semantic-conference.com/2up_bw/solomon-madi.pdf">great slide pack</a> for more].
</p>

<p>
That opening keynote with Ora Lassila [co-author of the RDF standard and
Research Fellow at the Nokia Research Center] set the tone and context for
the entire conference. He shared the stage with James Hendler [Director of the
Joint Institute for Knowledge Discovery, University of Maryland], with whom
he and Tim Berners-Lee had co-authored the seminal 2001 Scientific American
paper "The Semantic Web" which discussed the concept of <a
href="http://www.scientificamerican.com/article.cfm?articleID=00048144-10D2-1C70-84A9809EC588EF21&amp;catID=2">Semantic Webvision</a>.
</p>

<p>
They had also independently written two of the earlier, defining articles on the
concept of the Semantic Web, setting the terminology and direction for many
of the researchers and developers to follow. We are not, however, talking about a
long history here: Ora wrote about pervasive computing in his 1999 article,
"Why your microwave oven needs to surf the WWW." Jim published his DARPA
article on "Tetherless DAML and the Mobile Semantic Web" in Oct. 2000.
</p>

<p>
In an informal and interweaving style, both Ora and Jim described a
timeline of Semantic Technology history and also gave themselves a report
card on their pronouncements. [The slides for this keynote are 
availible <a
href="http://www.semantic-conference.com/2up_bw/SemTech-Lassila-Hendler-bw.pdf">here</a>.]
</p>

<p>
The prehistory of the Semantic Web starts in 1990s, emphasizing metadata
and the second wave of AI. Much of the discussion at that time focused on
the key changes in traditional AI, its failings and its rebirth with space
probes like Mars Rover and Deep Space-1.
</p>

<p>
Ora -- "We learn from the history of AI that only embedded AI was
successful. Standalone AI did not succeed." He noted that reasoning tools
are a 'means' and not an end. "And toward any end, content is still very
important."
</p>

<p>
Ora -- [referencing the 2001 Scientific American article where he wrote
about robust agents to work on the "behalf" of people] "... Sem-Tech web
services are the 'plumbing' for these agents, and some trials are now
underway. These must be able to handle unexpected and inconsistant
data... Semantic systems will help here."
</p>

<p>
Later, Ora said, "Another thing about agents... I work for a company that
makes little mobile devices... the way we use mobile devices for browsing
is not the best possible paradigm... [there are, e.g., problems when driving].
So here is another case where you need systems that work for you."
</p>

<p>
Jim -- "...the miracle is not in a new magic box... it is when we start
linking things together." He went on to describe <a
href="http://en.wikipedia.org/wiki/SPARQL">SPARQL</a> [an <a
title="Resource Description Framework"
href="http://www.w3.org/2001/11/13-RDF-Query-Rules/">RDF</a> Query
Language] as a doc and data exchange mechanism.  With a picture of
massively interlinked systems on screen, he added "... we have both broad
tech and deep technology -- we will use these things we all are building
but also we must link them all together..."
</p>

<p>
Ora - "...most of what we predicted is already happening, and its happening
faster than we anticipated ... the ontolgies are there but there is
little linking so far... and little progress on agents..."
</p>

<p>
The closing keynote by Mills Davis was distinctly less academic. Subtitled
"The Executive Guide to Billion Dollar Markets," it was a summary of a
market research paper prepared by Project 10X: Semantic Wave
2006, Part 1. The presentation addressed the business value of the new
semantic wave technologies and provided perspectives to help business
executives seeking to use "distributed intelligence" for strategic
advantage in global markets. [This <a
href="http://www.semantic-conference.com/semanticwave.html">conference site
link</a> provides a digest of the 55 page report and also provides a link
for the full file.]
</p>

<h3>The WSDL connection</h3>
<p>
There was also much discussion about the connection between Web Services
and Semantics. During the week of the SemTech conference, the shorter name
that the organizers used frequently, the World Wide Web Consortium (W3C)
reinforced its commitment to Web Services with continued work on SOAP, Web
Services Description Language (WSDL), and addressing specs by chartering a
new group to enhance WSDL with semantics to automate the composition and
discovery of Web Services.
</p>

<p>
WSDL is used to describe the interface of a Web service with inputs and
outputs. But WSDL alone does not provide enough information to determine
automatically whether the interfaces of two arbitrary Web services are
compatible.  Semantic descriptions can make it easier to automatically
identify services that have compatible inputs and outputs. With a
description of a service for finding books and a description of a service
for purchasing them, it becomes much easier to combine these into a useful
composite. Similarly, machine-readable semantic descriptions facilitate the
discovery of the correct Web services.
</p>

<p>
Semantic WSDL [or WSDL-S] was discussed in the context of "Large Scale
Distributed Information Systems" by Amit Sheth of the University of Georgia.
This talk focused on semantics for Web Services and SOAs, and offered
analysis of the underlying architectures. He noted that today "... a lot of
land work is required to link processes" across different business domains.
This is because different businesses and public intstitutions use different
vocabularies. There needs to be agreement on processes and on data and data
formats. Said Sheth, "...semantic description is the way to integrate
disparate services and data." He offered a semantic-aware archtitecture
that used web taxonomies to link different domains.
</p>


<h3>Semantics Enrich Web Service Descriptions</h3>
<p>
WSDL 2.0 includes the hooks to allow the specification of semantic
descriptions. The W3C has chartered the Semantic Annotations for Web
Services Description Language (SAWSDL) Working Group to develop annotations
that takes advantage of those hooks. This group will also provide a mapping
of the new properties into a form compatible with the existing RDF mapping
for WSDL.
</p>

<p>
Currently, more than 400 researchers and developers participate in the
continuing Semantic Web Services Interest Group (SWSIG), a public forum
created in 2003 to discuss the integration of the Semantic Web and Web
Services. That should go some way toward putting working semantics under
the covers of Web Services.
</p>

<p>
This is the working definition of RDF from the W3C XML (the "10 Points" doc):
</p>

<pre>
   W3C's Resource Description Framework (RDF) is an XML text format that supports
   resource description and metadata applications, such as music playlists, photo
   collections, and bibliographies. For example, RDF might let you identify
   people in a Web photo album using information from a personal contact list; then
   your mail client could automatically start a message to those people stating that
   their photos are on the Web. Just as HTML integrated documents, images, menu
   systems, and forms applications to launch the original Web, RDF provides
   tools to integrate even more, to make the Web a little bit more into a
   Semantic Web.
</pre>

<p>
The full text is available <a
href="http://www.w3.org/XML/1999/XML-in-10-points">here</a>.
</p>

<p>
And here is the web page for the W3C on the Semantic Web: <a href="http://www.w3.org/2001/sw/">http://www.w3.org/2001/sw/</a>.
</p>

<p>
Finally, here is the Web Service Semantics - WSDL-S link: <a
href="http://www.w3.org/Submission/2005/10/">http://www.w3.org/Submission/2005/10/</a>
</p>


<h3>Conference followups </h3>
<p>
Sem-Tech conference blog: <a
href="http://semantic-conference.blogs.com/semtech06/">http://semantic-conference.blogs.com/semtech06/</a>
</p>

<p>
The business of Semantic Web Technology: <a
href="http://www.dmreview.com/article_sub.cfm?articleID=1019819">http://www.dmreview.com/article_sub.cfm?articleID=1019819</a>
</p>

<p>
Most of the session presentations and tutorials are availible for download
<a href="http://www.semantic-conference.com/Presentations_2up_bw.html">here</a>.
 If you are new to the subject matter, allow yourself some time to get
through it all [well, lots of time. It's a complex subject.]
</p>

<p>
The 5th International Semantic Web Conference will be hosted in Athens, GA,
USA [dates: November 5 (Sunday) - 9 (Thursday), 2006] and the 1st Annual
Asian Semantic Web Conference (ASWC) which will be held in Beijing early
September of 2006. SemTech 2007 will take place May 20-24 next year [but
probably in another US city].
</p>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:129/dyckoff.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<p>

<img align="left" alt="Bio picture" src="../gx/authors/dyckoff.jpg" class="bio">

<em>

Howard Dyckoff is a long term IT professional with primary experience at
Fortune 100 and 200 firms. Before his IT career, he worked for Aviation
Week and Space Technology magazine and before that used to edit SkyCom, a
newsletter for astronomers and rocketeers. He hails from the Republic of
Brooklyn [and Polytechnic Institute] and now, after several trips to
Himalayan mountain tops, resides in the SF Bay Area with a large book
collection and several pet rocks.

</em>
<br clear="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/dyckoff.html">Howard Dyckoff</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 129 of Linux Gazette, August 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="okopnik"></a>
<h1>The Geekword Puzzle</h1>
<p id="by"><b>By <A HREF="../authors/okopnik.html">Ben Okopnik</A></b></p>


</b>
</p>


<p>
<script type="text/javascript" src="../gx/js/cwd.js"></script>
<link rel="StyleSheet" href="../gx/js/cwd.css" type="text/css"/>
<body onkeypress="return keypress(getkey(event));" onblur="unset();">

<h3>Introduction</h3>

<p>This month, in the spirit of "Making Linux a Little More Fun", I
decided to try my hand at a Linux crossword puzzle. This presented
a number of interesting challenges: for one thing, using a <a href=
"http://freshmeat.net/projects/arccc/">crossword compiler</a>
requires having a large list of words as well as a grid that
matches that list to some degree (i.e., word length, common letters
in appropriate positions, etc.) <a href=
"http://linuxgazette.net/tag/ask-the-gang.html">The Answer Gang</a>
kicked in several hundred Linux- and computer-related words;
unfortunately, it wasn't quite enough for the hungry compiler beast
- even though I spent a lot of time bending my brain around various
grid designs. Perhaps that approach will pay off later; in the
meantime, I decided to design a crossword manually, since I'd heard
that some people consider this a fun activity.</p>

<p>...</p>

<p>The random twitching and the screaming in the middle of the
night have abated somewhat by now, and the doctor assures me that,
with a year or two of therapy, the other effects will decrease to a
manageable level as well.</p>

<p>Originally, I had considered writing a bit of CGI to allow
readers to solve the puzzle on-line, but rejected the thought very
quickly; one of the most important guidelines here at LG is keeping
the content static, and thus available to everyone. I also couldn't
just crank out a nice JavaScript-enabled version, since those of
our readers who use Lynx would be left out (other text-mode
browsers - links, elinks, and w3m all render tables quite happily,
although they will not allow puzzle completion on-line - you'd have
to print the page and write your answers.) In fact, given the way
that Lynx treats tables, it wouldn't even look like a crossword. On
the other hand, to those who have a modern graphical browser, a
simple ASCII-art layout would look - well, rather crude. Hmm, what
to do?</p>

<p>I decided to get the best of both worlds by doing both (my wife
and I share a common characteristic: when offered a choice of two
good alternatives, as in "do you want to do X or Y?", we will
usually respond with "Yes".) However, since I'm too... let's just
call it <em>efficient</em>... to spend time laying out two
different puzzles, I wrote a Perl script that reads a single input
file which creates both. Thus, the Javascript puzzle is what you
see below; the "printable version" link provides access to the
(nearly) pure ASCII layout that is viewable with any browser. This
solution satisfies my persnickety sense of The Right Thing, and
should provide access to everyone (anyone left out for some reason
I may have missed should <a href="../authors/okopnik.html">contact
me</a> and let me know the details, and I'll do my best to include
them as well.)</p>

<p>In any case, the result of all the cogitation, agitation, and
meditation is presented here for your enjoyment; I hope you have as
much fun... yeah, that's the word... solving it as I had designing
it!<br>
<img src="../gx/smile.png" alt="Smile"></p>

<p>[ The solution to the current puzzle will be provided in the
next month's issue. ]</p>

<hr>

<p>&nbsp;</p>
<!-- Crossword goes here -->

<table summary="cwd" border="1" class="cwd" id="cwd" ondblclick=
"chgdir();">
<tr>
<td class="cell" title="Distro for over-50 women who wear purple"
onclick="setxyd(0,0,1);">
<div class="tag">1</div>

<div class="sol">
</div>
</td>
<td class="cell" title="PS in a capsule" onclick="setxyd(1,0,0);">
<div class="tag">2</div>

<div class="sol">
</div>
</td>
<td class="cell" title=
"The heavy-metal method of estimating disk usage" onclick=
"setxyd(2,0,0);">
<div class="tag">3</div>

<div class="sol">
</div>
</td>
<td class="cell" title="A computer language that's all show"
onclick="setxyd(3,0,0);">
<div class="tag">4</div>

<div class="sol">
</div>
</td>
<td class="cell" title="Non-cron command scheduler" onclick=
"setxyd(4,0,0);">
<div class="tag">5</div>

<div class="sol">
</div>
</td>
<td class="cell" title="Set shell variables on a newspaper press?"
onclick="setxyd(5,0,0);">
<div class="tag">6</div>

<div class="sol">
</div>
</td>
<td class="black" title="" onclick="unset();">*</td>
<td class="cell" title="A Free privacy guard" onclick=
"setxyd(7,0,0);">
<div class="tag">7</div>

<div class="sol">
</div>
</td>
</tr>

<tr>
<td class="black" title="" onclick="unset();">*</td>
<td class="cell" title="Encrypted, secure window glue" onclick=
"setxyd(1,1,1);">
<div class="tag">8</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(2,1,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(3,1,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(4,1,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(5,1,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="black" title="" onclick="unset();">*</td>
<td class="cell" title="" onclick="setxyd(7,1,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
</tr>

<tr>
<td class="cell" title=
"Across:Systems group in charge of Linux (abbrev); Down:Where everything starts"
onclick="setxyd(0,2,2);">
<div class="tag">9</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(1,2,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="black" title="" onclick="unset();">*</td>
<td class="cell" title="" onclick="setxyd(3,2,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="black" title="" onclick="unset();">*</td>
<td class="cell" title="Igpay-atinlay anslatortray" onclick=
"setxyd(5,2,1);">
<div class="tag">10</div>

<div class="sol">
</div>
</td>
<td class="cell" title=
"C header file for interrupt handlers (without &quot;.h&quot;)"
onclick="setxyd(6,2,0);">
<div class="tag">11</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(7,2,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
</tr>

<tr>
<td class="cell" title="" onclick="setxyd(0,3,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="black" title="" onclick="unset();">*</td>
<td class="cell" title=
"Across:Package converter from another planet; Down:A beautiful sound system for KDE"
onclick="setxyd(2,3,2);">
<div class="tag">12</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(3,3,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="cell" title="A party line protocol (abbrev)" onclick=
"setxyd(4,3,0);">
<div class="tag">13</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(5,3,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(6,3,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="black" title="" onclick="unset();">*</td>
</tr>

<tr>
<td class="cell" title="" onclick="setxyd(0,4,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="black" title="" onclick="unset();">*</td>
<td class="cell" title="" onclick="setxyd(2,4,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="black" title="" onclick="unset();">*</td>
<td class="cell" title="Abort TCP connection (abbrev)" onclick=
"setxyd(4,4,1);">
<div class="tag">14</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(5,4,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(6,4,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="black" title="" onclick="unset();">*</td>
</tr>

<tr>
<td class="cell" title="Grave-robber's toolkit" onclick=
"setxyd(0,5,1);">
<div class="tag">15</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(1,5,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(2,5,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="black" title="" onclick="unset();">*</td>
<td class="cell" title=
"The emergency virus response team, for sure" onclick=
"setxyd(4,5,1);">
<div class="tag">16</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(5,5,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(6,5,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="cell" title="Transmit (abbrev)" onclick=
"setxyd(7,5,0);">
<div class="tag">17</div>

<div class="sol">
</div>
</td>
</tr>

<tr>
<td class="black" title="" onclick="unset();">*</td>
<td class="black" title="" onclick="unset();">*</td>
<td class="cell" title="A very quiet CLI" onclick="setxyd(2,6,1);">
<div class="tag">18</div>

<div class="sol">
</div>
</td>
<td class="cell" title="" onclick="setxyd(3,6,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="black" title="" onclick="unset();">*</td>
<td class="cell" title="" onclick="setxyd(5,6,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
<td class="black" title="" onclick="unset();">*</td>
<td class="cell" title="" onclick="setxyd(7,6,-1);">
<div class="tag">
</div>

<div class="sol">
</div>
</td>
</tr>
</table>
<!-- Crossword goes here -->

<p><br clear="all">
</p>
<small><strong>[ Crossword formatting and JavaScript via Alon
Altman's <a href="http://freshmeat.net/projects/cwd/">cwd</a>. The
ASCII-art, printable version is available <a href=
"misc/okopnik/xwd.html">here</a>. ]</strong></small>
<p>&nbsp;</p>

<div id="clues">
<table summary="clues" border="0">
<tr>
<td valign="top"><strong>Across</strong><br>
<br>
1. Distro for over-50 women who wear purple<br>
8. Encrypted, secure window glue<br>
9. Systems group in charge of Linux (abbrev)<br>
10. Igpay-atinlay anslatortray<br>
12. Package converter from another planet<br>
14. Abort TCP connection (abbrev)<br>
15. Grave-robber's toolkit<br>
16. The emergency virus response team, for sure<br>
18. A very quiet CLI<br></td>
<td valign="top"><strong>Down</strong><br>
<br>
2. PS in a capsule<br>
3. The heavy-metal method of estimating disk usage<br>
4. A computer language that's all show<br>
5. Non-cron command scheduler<br>
6. Set shell variables on a newspaper press?<br>
7. A Free privacy guard<br>
9. Where everything starts<br>
11. C header file for interrupt handlers (without ".h")<br>
12. A beautiful sound system for KDE<br>
13. A party line protocol (abbrev)<br>
17. Transmit (abbrev)<br></td>
</tr>
</table>
</div>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:129/okopnik.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<p>
<img alt="picture" src="../gx/authors/okopnik.jpg" align="left"  hspace="10" vspace="10" class="bio">
</p>

<p>
Ben is the Editor-in-Chief for Linux Gazette and a member of The Answer Gang.
</p>

<p>
<em>
Ben was born in Moscow, Russia in 1962. He became interested in electricity
at the tender age of six, promptly demonstrated it by sticking a fork into
a socket and starting a fire, and has been falling down technological
mineshafts ever since. He has been working with computers since the Elder
Days, when they had to be built by soldering parts onto printed circuit
boards and programs had to fit into 4k of memory. He would gladly pay good
money to any psychologist who can cure him of the recurrent nightmares.
</em>
</p>

<p>
<em>
His subsequent experiences include creating software in nearly a dozen
languages, network and database maintenance during the approach of a
hurricane, and writing articles for publications ranging from sailing
magazines to technological journals. After a seven-year Atlantic/Caribbean
cruise under sail and passages up and down the East coast of the US, he is
currently anchored in St. Augustine, Florida. He works as a technical
instructor for Sun Microsystems and a private Open Source consultant/Web
developer. His current set of hobbies includes flying, yoga, martial arts,
motorcycles, writing, and Roman history; his Palm Pilot is crammed full of
alarms, many of which contain exclamation points.
</em>
</p>

<p>
<em>
He has been working with Linux since 1997, and credits it with his complete
loss of interest in waging nuclear warfare on parts of the Pacific Northwest.
</em>
</p>

<br CLEAR="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/okopnik.html">Ben Okopnik</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 129 of Linux Gazette, August 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="okopnik1"></a>
<h1>Low-Fat Linux - Now with Less Cruft!</h1>
<p id="by"><b>By <A HREF="../authors/okopnik.html">Ben Okopnik</A></b></p>


</b>
</p>


<p>
<p>
OK, I admit it - there's no such thing as "Low-Fat Linux"
(unless somebody just came out with it in order to spite me.) These
days, the average installation is pretty big - and many of the most
popular programs take up huge swaths of space. Even with a 60GB
hard drive like the one in my laptop, you still have to pay close
attention lest it become Godzilla, The Eater Of All Available Space
(and time, too - but we're not talking about Quake III or Xbubble
at the moment.)
</p>

<p>
So there you are - going along, innocently doing your work (or
playing your games), installing delicious little packages (<a
href="http://linux.softpedia.com/get/Utilities/Yum-2656.shtml">Yum</a>!)
that sound interesting or that your friends recommended... and
then, one day, you cast a casual glance at your system, and a
slight chill runs down your spine.
</p>

<pre class="code">
ben@Fenrir:~$ df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/hda3             958M  362M  548M  40% /
/dev/hda5              33G   25G  6.5G  79% /home
/dev/hda1             5.5G  4.8G  521M  91% /home/ben/Music
/dev/hda6              13G   12G  389M  97% /usr
/dev/hda7             1.9G  699M  1.1G  40% /var
/dev/hda8              46M  9.1M   35M  21% /boot
tmpfs                 253M  4.0K  253M   1% /dev/shm
</pre>

<p>
<strong><em>Yikes!</em></strong> Just look at that '/usr'
partition!
</p>

<p>
And now comes the dreadful awareness that <strong>you're going
to have to delete something.</strong> In fact, given the size of
the partition, and the number of megabytes that it takes to make up
even one percent of it, you're going to have to delete <strong>a
lot</strong> of that something. How the heck are you supposed to
figure out what to delete???
</p>

<p>
Let the panic begin.
</p>

<p>
After a few calming exercises - a little yoga, a lot of deep
breathing, several gin-and-tonics, etc. - you decide on a rational
approach (at least if you didn't go for the gin-and-tonics.
Otherwise, you'll be doing it later - and that hangover headache
will not be working in your favor.) First, you clean out a few
games - the ones you don't play much if at all. However, you
quickly discover that the <em>interesting</em> games are all BIG -
and the simple, boring ones don't do much to fill the trash bucket
with megabytes. Kilobytes, more likely. Run "apt-get clean" to
remove the cached installation packages in Debian? Oh, that
helped... in the '/var' partition, that is. Not in '/usr', where we
need it most desperately.
</p>

<p>
OK, well... let's give it some thought. Oh yeah... all those
installed packages - right. It's going to be quite the long and
tedious process, but it does indeed pay off: one of the effects of
free software is that many people tend to install things "just to
check them out", get distracted, and - well, cruft, like entropy,
always increases. It's just a law of physics. However, although we
haven't yet found a way to reverse the latter, the former can
indeed be done - with a bunch of effort. So, on my Debian laptop,
it all looks like this (at least post-cleanup):
</p>

<pre class="code">
# Count installed Debian packages
ben@Fenrir:~$ dlocate -l|grep '^ii'|wc -l
2133
ben@Fenrir:~$ dlocate -l|grep '^ii'|less
ii  9menu                      1.8-1.1                    Creates X menus from the shell
ii  a2ps                       4.13b.dfsg.1-1             GNU a2ps - 'Anything to PostScript' converter and pretty-printer
ii  aalib-bin                  1.4p5-25                   sample programs using aalib
ii  aalib1                     1.4p5-28                   ascii art library - transitional package
ii  abcde                      2.3.99.5-1                 A Better CD Encoder
ii  accesscontrol              1.0-2                      control panel that activates handicapped accessibility features
ii  acpi                       0.09-1                     displays information on ACPI devices
ii  acpid                      1.0.4-5                    Utilities for using ACPI power management
ii  adduser                    3.87                       Add and remove users and groups

[ the rest of long list elided ]
</pre>

<p>
Over 2,000 packages... well, I could mutter some sort of a
justification for most of them, anyway. The ones that I couldn't
find a reason to keep went away - configuration and all. That cleared
away a significant chunk - but not enough to "grow on". It was
similar to giving your house a quick little once-over with a whisk
broom and ignoring the dust monsters under the bed, the horrible
mess in the attic ("It's not a problem - nobody can see it!"), and
the biological experiment that used to be a half a pound of tuna
salad in your refrigerator: just fine for a quick visit from your
neighbor, but it would all collapse in a second if your snoopy aunt
Marge came over. Heck, the stuff in the attic will just collapse
onto your head if you let it go a couple more weeks even without
Auntie crawling around up there. It really is better to take care
of it now, <em>before</em> the ambulances, the embarrassing
articles in the local newspaper ("Local Man Buried In His Own
Trash: Mother Dies Of Shame"), and your friends' sarcastic
laughter. Indeed, Drastic Measures are now called for.
</p>

<p>
"<strong>More</strong> drastic measures?", you say, aghast.
"What could be more drastic than giving up my programs, installed
by the sweat of my brow (even if I have no idea what they do and
have never used them in the three years that they've been
installed)? What do you want, <em>blood</em>???" Nah, nothing like
that; I'm usually happy with fine wine and chocolate. Maybe a side
of blood oranges and Rainier cherries, if you really insist.
</p>

<p>
However, my point is that system cruft accumulates almost
invisibly - and costs you little (other than a little study and
searching) to remove. If you've had your system installed for any
significant length of time, and have done a lot of updates, there
are a number of programs which don't remove their previous versions
before installation - notably, programming languages. I'm a big fan
of Perl, and have been installing every new version of it, as well
as many of its modules, as long as I've been using Linux. Chances
are that you, too - given how many programs on the average Linux
systems require Perl - have done the same thing. Ditto Python.
Ditto the GCC compiler. Ditto your favorite language - or perhaps
some language that you've never even heard of but is necessary for
compiling your favorite applications. In other words, you need to
take a second, differently-informed look at that package listing:
even if you don't know much about programming, you can still spot
multiple installed versions of languages. Of course, if trying to
uninstall one produces a message warning you of current
dependencies, and you want to keep all the programs that depend on
that specific version of a language, then you need to hold on to it
- but usually, the latest version is enough. If you're careful, and
know what you're doing, you can look at, e.g., the
'/usr/{share,lib}/{perl,python,ruby}*' and
'/usr/local/{share,lib}/{perl,python,ruby}*' directories and see
which ones are redundant - or perhaps can become so if you
reinstall the modules in the newest versions of those languages. I
found, for example, that removing the old Perl, Python, and Ruby
versions from those locations freed up several hundred megabytes -
at no cost beyond reinstalling a few packages. Admittedly, this did
take some time and careful querying of the package database.
</p>

<p>
OK, now that we're on the hunt - what's next? Well, one of the
traditional ways to chomp arbitrary but huge amounts of space on
your machine - not that this is specifically Linux-related - has
always been the installation of <em>fonts</em>. Great Ghu knows why
we need so many: after all, despite our best imagination, few of us
are actually graphic designers. Most of us, though, end up
installing lots and lots of them... and then sneaking in a few
more, just to be sure. Many ([<em>cough</em>] several hundred) of
these can all be some indistinguishably-similar version of Arial or
Times New Roman or Tekton - but, hey, who knows? We just might feel
like <em>this</em> one instead of <em>that</em> one someday, and
then what would we do if it wasn't there?...
</p>

<p>
"Off", cried the Red Queen, "with their heads!" And rightly so.
At least if they're unnecessary fonts.
</p>

<pre>
ben@Fenrir:~$ xlsfonts|wc -l
18673
</pre>

<p>
Oh, dear. That is just way, way too many fonts. Sure, I like them
as much as anyone else... but really. If I estimate - generously -
the number of fonts that I actually use, explicitly and by name, I
<em>might</em> come up with a dozen. OK, two dozen. If I want to
get really fancy with an OpenOffice document while making up a
business brochure, I might like to have a field of, say, fifty or a
hundred to look at... but over eighteen <strong>thousand</strong>?
I think not.
</p>

<pre class="code">
# Count the number of available fonts
ben@Fenrir:~$ apt-cache search xfonts|egrep -c '^xfonts|^ttf'
86
# Check which ones are installed on my system
ben@Fenrir:~$ dlocate -l |grep '^ii  xfonts'
ii  xfonts-100dpi              1.0.0-2                    100 dpi fonts for X
ii  xfonts-75dpi               1.0.0-2                    100 dpi fonts for X
ii  xfonts-a12k12              1-8                        12-dot Kanji &amp; ASCII fonts for X
ii  xfonts-artwiz              1.3-5                      x11 fonts created by Artwiz, TigerT, and Daniel Erat
ii  xfonts-base                1.0.0-3                    standard fonts for X
ii  xfonts-base-transcoded     6.9.0.dfsg.1-6             standard fonts for X (transcoded from ISO 10646-1)
ii  xfonts-bolkhov-cp1251-75dp 1.1.20001007-6             75 dpi CP1251 encoded Cyrillic fonts for X (Cyr-RFX collection)
ii  xfonts-bolkhov-cp1251-misc 1.1.20001007-6             Character-cell CP1251 encoded Cyrillic fonts for X (Cyr-RFX collection)
ii  xfonts-bolkhov-koi8r-75dpi 1.1.20001007-6             75 dpi KOI8-R encoded Cyrillic fonts for X (Cyr-RFX collection)
ii  xfonts-bolkhov-koi8r-misc  1.1.20001007-6             Character-cell KOI8-R encoded Cyrillic fonts for X (Cyr-RFX collection)
ii  xfonts-bolkhov-koi8u-75dpi 1.1.20001007-6             75 dpi KOI8-U encoded Cyrillic fonts for X (Cyr-RFX collection)
ii  xfonts-bolkhov-koi8u-misc  1.1.20001007-6             Character-cell KOI8-U encoded Cyrillic fonts for X (Cyr-RFX collection)
ii  xfonts-cronyx-cp1251-100dp 2.3.8-6                    100 dpi CP1251 encoded Cyrillic fonts for X (Cronyx collection)
ii  xfonts-cronyx-cp1251-75dpi 2.3.8-6                    75 dpi CP1251 encoded Cyrillic fonts for X (Cronyx collection)
ii  xfonts-cronyx-cp1251-misc  2.3.8-6                    Character-cell CP1251 encoded Cyrillic fonts for X (Cronyx collection)
ii  xfonts-cronyx-koi8r-100dpi 2.3.8-6                    100 dpi KOI8-R encoded Cyrillic fonts for X (Cronyx collection)
ii  xfonts-cronyx-koi8r-75dpi  2.3.8-6                    75 dpi KOI8-R encoded Cyrillic fonts for X (Cronyx collection)
ii  xfonts-cronyx-koi8r-misc   2.3.8-6                    Character-cell KOI8-R encoded Cyrillic fonts for X (Cronyx collection)

[ Actual complete list snipped in embarassment ]
</pre>

<p>
Well, lots of them, anyway.
</p>

<p>
A careful review and removal of these - paying attention to the
dependency warnings, of course - helped quite a lot, another couple
of hundred megabytes or so. What helped even more was a careful
examination of the actual font directories - it turns out that
X.org (as contrasted against XFree86) decided to rationalize their
font structure by combining it with the traditional system location
for fonts, '/usr/share/fonts' instead of the old
'/usr/X11R6/lib/X11/fonts'. <strong>However</strong>, the old font
directory was still there - and still packed with a hundred-plus MB
worth of files! A careful comparison of what was there (in fact, I
backed up the entire directory temporarily to see if there were any
bad effects) with the new '/usr/share/fonts/X11' structure helped
recover a huge bunch of space. I did end up keeping quite a lot
more than a hundred fonts, by the way - I depend on Unicode fonts
for quite a lot of my work, and I need a good selection of Russian
and Japanese fonts in addition to the base font package that comes
with X - but at this point, I'm down to a much more reasonable
5000+ fonts (around 3000 unique ones), including all the TrueType
fonts that I like.
</p>

<p>
A quick digression into details may be useful here: I suggest
taking a good look at Thomas Adam's <a href="../128/adam.html">"How
Fonts Interact with the X Server and X Clients"</a> article to gain
a bit of understanding of how fonts work. Taking him at his word
("...font servers: you don't need them."), I carefully checked all
my font directories for the presence of "fonts.alias", "fonts.dir",
and, in the case of TrueType fonts, "fonts.scale" files - all
easily created with the help of the 'ttmkfdir' and 'mkfontdir'
utilities. I then confirmed that all my font directories were
listed in my '/etc/X11/xorg.conf', in the "Files" section, and -
<em>Voila!</em> - I had all my fonts available without running the
'xfs' or 'xfstt' servers, or having 'unix/:7100' or 'unix/:7101'
(the server ports) listed in that section or in the 'xset q'
report. Not that those servers took up a huge amount of space, but
X now seems to start a bit faster than it used to, at least in my
perception.
</p>

<p>
So, was all that worth it? You might say so.
</p>

<pre class="code">
ben@Fenrir:~$ df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/hda3             958M  362M  548M  40% /
/dev/hda5              33G   25G  6.5G  79% /home
/dev/hda1             5.5G  4.8G  521M  91% /home/ben/Music
/dev/hda6              13G  9.9G  2.3G  82% /usr
/dev/hda7             1.9G  700M  1.1G  40% /var
/dev/hda8              46M  9.1M   35M  21% /boot
tmpfs                 253M  4.0K  253M   1% /dev/shm
</pre>

<p>
Sure, that took a couple of hours of work - but at this point, I
know the state of my system, I've got a couple of gigabytes worth
of space in '/usr' again, and I'm more aware of what kinds of
things eat up space (and what should be checked once in a while.)
In my opinion, that's definitely a gain - in knowledge and
understanding, as well as in available disk space.
</p>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:129/okopnik1.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<p>
<img alt="picture" src="../gx/authors/okopnik.jpg" align="left"  hspace="10" vspace="10" class="bio">
</p>

<p>
Ben is the Editor-in-Chief for Linux Gazette and a member of The Answer Gang.
</p>

<p>
<em>
Ben was born in Moscow, Russia in 1962. He became interested in electricity
at the tender age of six, promptly demonstrated it by sticking a fork into
a socket and starting a fire, and has been falling down technological
mineshafts ever since. He has been working with computers since the Elder
Days, when they had to be built by soldering parts onto printed circuit
boards and programs had to fit into 4k of memory. He would gladly pay good
money to any psychologist who can cure him of the recurrent nightmares.
</em>
</p>

<p>
<em>
His subsequent experiences include creating software in nearly a dozen
languages, network and database maintenance during the approach of a
hurricane, and writing articles for publications ranging from sailing
magazines to technological journals. After a seven-year Atlantic/Caribbean
cruise under sail and passages up and down the East coast of the US, he is
currently anchored in St. Augustine, Florida. He works as a technical
instructor for Sun Microsystems and a private Open Source consultant/Web
developer. His current set of hobbies includes flying, yoga, martial arts,
motorcycles, writing, and Roman history; his Palm Pilot is crammed full of
alarms, many of which contain exclamation points.
</em>
</p>

<p>
<em>
He has been working with Linux since 1997, and credits it with his complete
loss of interest in waging nuclear warfare on parts of the Pacific Northwest.
</em>
</p>

<br CLEAR="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/okopnik.html">Ben Okopnik</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 129 of Linux Gazette, August 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="pitcher"></a>
<h1>A Prisoner of Windows</h1>
<p id="by"><b>By <A HREF="../authors/pitcher.html">Lew Pitcher</A></b></p>


</b>
</p>


<p>
<center>
<em>Imprisoned in a Windows jail? Make your escape to Linux through an SSH tunnel and remote X Windows.</em>
</center>

<hr/>

<p>
Those of us who use Linux desktops sometimes forget that most of our peers
do not have our luxuries. At times, we find ourselves forced to devolve,
and use a Windows desktop to do our work. When we do, we pine for the vast
variety of tools we had under Linux and curse the clumsiness of the
software prison that we are locked into.
</p>

<p>
But there is hope for Prisoners of Windows. If our Microsoft Windows
environment is network-enabled, and if we can connect to a suitably
configured network-enabled Linux box, we can still work on our platform of
choice. So, how do we free ourselves? By giving ourselves secure remote
access to Linux, both at the command line and at the GUI level with a
combination of standard Linux tools and a couple of Open Source
applications for Windows.
</p>

<p>
My goal is to show you how to let a Windows desktop user log into and run
both command-line and GUI applications on a remote Linux system, with
Windows handling the presentation (and <em>only</em> the presentation). I
will show you how to set up OpenSSH on a Linux system in order to provide
secure access and facilitate GUI interaction, and how to configure and use
an Open Source SSH client (<strong>PuTTY</strong>) and an Open Source X
server (<strong>Xming</strong>) on Windows. With these tools, Windows
captives can securely and easily escape to a Linux system and work on it
remotely as if it were the only system they were on.
</p>

<h3>The escape plan: Setting up the OpenSSH Server</h3>
<p>
Before you can escape, you have to prepare a "safe haven" on a Linux system.
You will need to set up an OpenSSH server on a Linux system and make it
reachable from the outside world.
</p>
 
<p>
As most Linux distributions come with (or make available) a native version
of OpenSSH, I will not cover the distribution-specific details of
installation from native packages, or the tedious technical details of
installation from source. Instead, I will assume that you already have
located and installed the appropriate package, and are ready to configure
it.
</p>

<h4>Configuring the OpenSSH Server</h4>
<p>
You can find the default configuration file for the OpenSSH server in
/etc/ssh/sshd_config.  This text file contains three types of text: blank
lines, comments (which start with a #) and lines of keyword/argument pairs
which control the behaviour of the SSH server. You only need concern
yourself with the keyword/argument lines, since 'sshd' ignores comments and
blank lines.
</p>

<p>
Even though the default values for the 'sshd' parameters (the values
assumed when no options are specified) are usually adequate for general
SSH use, I'd like you to explicitly set the values of four of the
parameters to ensure proper access.
</p>

<p>
Specifically, set:
<ul>
<li><tt><strong>AllowTcpForwarding</strong></tt> to <tt><strong>yes</strong></tt></li>
<li><tt><strong>X11Forwarding</strong></tt> to <tt><strong>yes</strong></tt></li>
<li><tt><strong>X11DisplayOffset</strong></tt> to <tt><strong>10</strong></tt></li>
<li><tt><strong>X11UseLocalHost</strong></tt> to <tt><strong>yes</strong></tt></li>
</ul>

<dl>
<dt><strong>AllowTcpForwarding</strong><dd> controls whether or not
the SSH daemon will permit generic TCP forwarding. This feature permits SSH
clients to direct selected network traffic through the SSH tunnel so that
it moves securely from client to server (or vice versa). While this
parameter defaults to &quot;<tt><em>yes</em></tt>&quot;, you may find that
the default <tt>sshd_config</tt> explicitly sets it to
&quot;<tt><em>no</em></tt>&quot;, and since we wish to ensure that TCP
forwarding is permitted, you need to change it.<br/>

<dt><strong>X11Forwarding</strong><dd> controls whether or not the SSH
daemon will explicitly handle SSH forwarding of X11 data streams. This
parameter defaults to &quot;<tt><em>no</em></tt>&quot; and you should
explicitly set it to &quot;<tt><em>yes</em></tt>&quot; in
<tt>sshd_config</tt> in order to permit your Windows detainee to easily
interact with Linux GUI applications. Note that, with
<tt><em>AllowTcpForwarding</em></tt> enabled,
<tt><em>X11Forwarding</em></tt> is a convenience, and is not absolutely
necessary for X11 tunnelling.<br/>

<dt><strong>X11DisplayOffset</strong><dd> specifies the starting
DISPLAY number for SSH-transported X11 datastreams. This parameter should
be set to a value higher than the highest 'real' (locally attached) X11
display on the Linux system in order to avoid interfering with the local
GUI users. The default value for this parameter is <tt><em>10</em></tt>,
but you may wish to assign a larger value if your Linux system supports a
large number of X users.<br/>

<dt><strong>X11UseLocalHost</strong><dd> controls whether SSH should
&quot;bind&quot; X11 forwarding to the local loopback address or to the
less secure wildcard address. If bound to the local loopback address, some
older X11 clients may not function properly. The default for this parameter
is &quot;<tt><em>yes</em></tt>&quot; (which is the value I'd like you to
explicitly set it to), but your initial configuration file may have
a different value.
</dl>

<p>
Of the above four parameters, two are typically unnecessary (since their
default values are sane anyway), and one of the other two may be redundant.
Specifically, <tt><strong>X11DisplayOffset</strong></tt> and
<tt><strong>X11UseLocalhost</strong></tt> default to sane values, and you
don't need to alter them in <tt>sshd_config</tt>. Also,
<tt><strong>AllowTcpForwarding</strong></tt> and
<tt><strong>X11Forwarding</strong></tt> offer clients similar abilities; if
<tt><strong>AllowTcpForwarding</strong></tt> is already specified, then it
is simple (but not obvious) for a client to perform X11 forwarding without
the <tt><strong>X11Forwarding</strong></tt> option. If
<tt><strong>X11Forwarding</strong></tt> alone has been set, our incoming
clients can forward X11 sessions, but not other types of data streams. For
your prisoner of Windows, you want to allow access to all network data
streams (hence the explicit <tt><strong>AllowTcpForwarding</strong></tt>
setting), and painlessly permit him to forward X11 specifically (hence the
explicit <tt><strong>X11Forwarding</strong></tt> setting).
</p>

<p>
Once you've made the appropriate changes to your
<tt>/etc/ssh/sshd_conf</tt> file (see <a
href="misc/pitcher/figures.html#figure_1"><em>Figure 1</em></a>), save your
editing efforts and continue to the next step: generating your SSH server
keys.


<h4>Generate your Server Keys</h4>

<p>
Before you can use the SSH server, you must generate encryption keys for
it. Some Linux distributions arrange for the first execution of the SSH
server to build these keys, but some do not. In the next step, you will
explicitly build three sets of keys (one set for each method of
conversation that SSH understands), and place these key sets in the
standard files.
</p>

<p>
As <tt><strong>root</strong></tt>, first execute the <tt>ssh-keygen</tt> command
to build your <tt>rsa1</tt> key into the <tt>/etc/ssh/ssh_host_key</tt>
file:
</p>
<dl>
<dd><tt>/usr/bin/ssh-keygen -t <strong>rsa1</strong> -f <strong>/etc/ssh/ssh_host_key</strong> -N ''</tt></dd>
</dl>

<p>
Next, again execute the <tt>ssh-keygen</tt> command, but this time to build your <tt>dsa</tt> key into
file <tt>/etc/ssh/ssh_host_dsa_key</tt>:
</p>
<dl>
<dd><tt>/usr/bin/ssh-keygen -t <strong>dsa</strong> -f <strong>/etc/ssh/ssh_host_dsa_key</strong> -N ''</tt></dd>
</dl>

<p>
Finally, execute the <tt>ssh-keygen</tt> command for a third time, this time to build your <tt>rsa</tt>
key into file <tt>/etc/ssh/ssh_host_rsa_key</tt>:
</p>
<dl>
<dd><tt>/usr/bin/ssh-keygen -t <strong>rsa</strong> -f <strong>/etc/ssh/ssh_host_rsa_key</strong> -N ''</tt></dd>
</dl>

<p>
With these commands, you have given your SSH daemon both ears and a voice
through which your Windows captive can communicate with the Linux
environment.
</p>


<h4>Start the OpenSSH server</h4>
<p>
Finally, it is time to start your OpenSSH server, which will use the
configuration and key files you've prepared to conduct conversations with
the outside world. If your system starts the SSH server automatically, you
can just &quot;signal&quot; it to have it reread its configuration. To do
this, as <tt><strong>root</strong></tt>, you
</p>
<dl>
<dd><tt>/bin/kill SIGHUP `cat /var/run/sshd.pid`</tt></dd>
</dl>
to send the SIGHUP signal to the currently running ssh daemon. On the other
hand, if your system hasn't started the SSH daemon, you (again as
<tt><strong>root</strong></tt>) can run the sshd server with a simple
command:
<dl>
<dd><tt>/usr/bin/sshd</tt></dd>
</dl>

<p class="editorial">[ In most distributions, launching standard system
daemons such as SSH is best done via the scripts in '/etc/init.d'. The
above two tasks, for example, would be handled by '/etc/init.d/ssh restart'
and '/etc/init.d/ssh start' executed as root. -- Ben ]</p> 

<p>
Now you have completed the extra Linux configuration, created a secure door
to your Linux &quot;safe haven&quot; (did you remember to adjust your
firewall to permit SSH connections?), and have taken the first step to
freeing that Prisoner of Windows from his oppressive confines. Of course,
he will still require an account on the Linux system, which you will need
to create with the standard tools and methods of your distribution.
Initially, he will log into the Linux system using his assigned username
and password; after that, he will have the option of logging in through the
secure facilities of SSH.
</p>

<h3>A foot out the door - Linux Commandline with PuTTY</h3>
<p>
Fully locked-down Windows systems, where you can't even run unapproved
programs from floppy disk or USB &quot;thumb drive&quot; memory stick, are
the worst prisons of all. You can't do anything about these dungeons
without the co-operation of the Windows system administrator. Let's hope
that your Windows captive is not locked in one of these &quot;solitary
confinement&quot; cells, and instead has a little latitude in his actions.
</p>

<p>
The first step to freedom, from the Windows side, is to install the
&quot;<strong>PuTTY</strong>&quot; SSH client application.
&quot;PuTTY&quot; is a Windows GUI application written and maintained by
Simon Tatham, and released (both in executable form, and in source code)
under a BSD-like Open Source license. When installed, it takes about 2800K
of disk space, and creates a couple of (not absolutely required) Windows
Registry entries. The 6 programs in the PuTTY suite provide the client
tools necessary for our captive to escape to our Linux "safe haven".
</p>

<dl>
<dd><table border="1" summary="PuTTY programs">
<tr><td><tt>PUTTY.EXE</tt></td>
	<td>This is the SSH client program used for &quot;command-line&quot;
	access to outside systems, and is a secure replacement for the
	<strong>telnet</strong> client command.</td>
</tr>
<tr>
    <td><tt>PUTTYGEN.EXE</tt></td>
	<td>This program builds client &quot;public key&quot; keys, for use in
	identifying the client to the ssh server.</td>
</tr>
<tr>
    <td><tt>PAGEANT.EXE</tt></td>
	<td>This tool is a &quot;key agent&quot; that allows the Windows user
	to &quot;make available&quot; selected keys on an ongoing basis to
	PuTTY applications. This is a convenience (to reduce the number of
	times a user must enter key information), and not a requirement.</td>
</tr>
<tr>
    <td><tt>PSCP.EXE</tt></td>
	<td>An SSH replacement for the <strong>rcp</strong> client command, and
	allows secure copying.</td> </tr>
<tr>
    <td><tt>PSFTP.EXE</tt></td>
    <td>An SSH replacement for the <strong>ftp</strong> client command.</td>
</tr>
<tr>
    <td><tt>PLINK.EXE</tt></td>
	<td>This tool is an SSH client program (like <tt>PUTTY.EXE</tt>)
	suitable for use in automated processes (like <tt>.BAT</tt> and
	<tt>.CMD</tt> files). Other GUI programs (like <strong>Xming</strong>)
	also use <tt>PLINK.EXE</tt> to establish their own SSH connections to
	the target systems.</td>
</tr>
</table></dd>
</dl>

<p>
Your first task will be to configure PuTTY to connect to the Linux system. This will be a simple connection
that depends on Linux userid and password confirmation; it will not (yet) use the power of SSH public key
authorization to give you immediate access to the Linux system. We'll save that little flourish for later.
</p>

<p>
So, from the <tt><strong>Windows Start -> All Programs -> Putty</strong></tt> menu, you now run
<strong>PuTTY</strong>. The <tt>PUTTY.EXE</tt> program will start, and present you with a PuTTY
Configuration window. Because this is your first time running PuTTY, and you have not yet set any configuration
information, the window will be mostly empty. On the left hand side of the window, you will see a tree of PuTTY
options, and on the right, the settings for the &quot;Session&quot; option. It is here that you provide the basic
information necessary to get out of Windows and into your Linux commandline.
</p>

<p>
In the <tt><strong>Host Name</strong></tt> field, you enter the <em>DNS
name or IP address</em> of your Linux system. If you intend to return to
this system (and you likely do), you can save the session information by
entering a meaningful name in the <tt><strong>Saved Sessions</strong></tt>
entry box and selecting the <tt><strong>Save</strong></tt> button (see <a
href="misc/pitcher/figures.html#figures_2a-2c"><em>Figures 2a-2c</em></a>).
From this point on, you can launch PuTTY, select and
<tt><strong>Load</strong></tt> the Linux system session information from
the list of <tt><strong>Saved Sessions</strong></tt>, and then select the
<tt><strong>Open</strong></tt> button to immediately connect to the Linux
system.
</p>

<p>
Because PuTTY has never conversed with your Linux system before, it will
show you the SSH key that the &quot;Safe Haven&quot; OpenSSH server
provided (see <a href="misc/pitcher/figures.html#figure_3a"><em>Figure
3a</em></a>), and ask you if you trust it. Answer
<tt><strong>&quot;Yes&quot;</strong></tt> to complete the SSH handshake
with the Linux system; if you answer
<tt><strong>&quot;No&quot;</strong></tt> instead, then PuTTY will continue
with the handshake, but will not remember that you trust the Linux system,
and if you answer <tt><strong>&quot;Cancel&quot;</strong></tt>, Putty will
abandon the connection altogether. Once you've completed the handshake, it
is now just a simple matter of completing the text-based login with your
Linux userid and password (<a
href="misc/pitcher/figures.html#figures_3b-3d"><em>Figures 3b-3d</em></a>),
and you are done; the world of your Linux system awaits you, from a
character-based interface (like in <a
href="misc/pitcher/figures.html#figure_3e"><em>Figure 3e</em></a>).
</p>

<h3>Free as a Bird - Linux GUI with Xming</h3>
<p>
But a character-based interface is just &quot;a shadow on the wall&quot; to
our GUI-acquainted eyes. While it <em>is</em> possible to use Linux this
way, you likely prefer a less limited interaction, and that means X. Your
Windows captive will better enjoy his freedom if you install the
&quot;Xming&quot; X server, and that is your next step.
</p>

<p>
Xming is a port of the <a href="X.org">X.org</a> X11 server to the Windows
environment, currently maintained by Colin Harrison who took over from
Alexander Gottwald. The latest release of Xming (at the writing of this
article) is based on the new X.org X11R6.9 X server, and (like PuTTY) is
released under an Open Source licence.
</p>

<p>
Unlike PuTTY, however, the Xming install comes in multiple parts. There are
two different X servers (one that uses OpenGL for rendering, and one that
uses the much slower Mesa renderer) and one font package. You will need to
install one of the two X servers, and some of the fonts from the font
package. The installations are very straightforward, consisting of a
familiar graphical installation wizard that takes care of all the mechanics
of the install. Configuration (at this point) is not an issue; the basic
Xming services that the install builds will suit our needs perfectly. With
the OpenGL server and all the fonts (both obligatory and optional)
installed, Xming takes about 45Mb of disk space (and a few optional
registry entries) to install.
</p>

<p>
Once you have the X server and fonts installed, you will start a &quot;rootless&quot; Xming server by traversing
the <tt><strong>Windows Start -> All Programs -> Xming</strong></tt> menu, and selecting the 
<tt><strong>Xming</strong></tt> option. This will start the X server, and leave you with an Xming icon
(see <a href="misc/pitcher/figures.html#figure_4"><em>Figure 4</em></a>) in your toolbar. Xming does not come with the 
<tt>xauth</tt> or <tt>xhost</tt> commands (although they are available through an add-on package), and the X server
does not, by default, permit unauthenticated remote applications to connect to and use the display. You could add in
some of the add-on toolset in order to get the X authority tools, but instead, I'll show you how to use the X11
forwarding capabilities of your OpenSSH server and PuTTY client to cause your remote X11 applications to appear as
local applications to Xming. So, back to PuTTY we go.
</p>

<p>
When you launch <tt>PUTTY.EXE</tt>, you are always first presented with a
configuration window. When you first connected to your Linux &quot;safe
haven&quot;, you (hopefully) saved the PuTTY configuration for that
connection.  You now want to <tt><strong><em>Load</em></strong></tt> that
<tt><strong><em>Saved Session</em></strong></tt>, and alter it a bit. If
you scroll down the &quot;Category&quot; list on the left hand side of the
configuration window, you will come to a leaf titled
&quot;<tt><strong><em>X11</em></strong></tt>&quot;. Select this leaf and
alter its settings (see <a
href="misc/pitcher/figures.html#figure_5a"><em>Figure 5a</em></a>) to
<tt><strong><em>Enable X11 Forwarding</em></strong></tt>.  Then, scroll
back to the <tt><strong><em>Sessions</em></strong></tt> leaf, and
<tt><strong><em>Save</em></strong></tt> the altered definition before you
<tt><strong><em>Open</em></strong></tt> the session to your Linux system.
</p>

<p>
When you do open the session, you will find that, on the Linux side of the
connection, the <tt>$DISPLAY</tt> environment variable is now set (see <a
href="misc/pitcher/figures.html#figure_5b"><em>Figure 5b</em></a>) to a
display on the Linux system. This display doesn't actually physically
exist; it is one of the X11 tunnels that you permitted with your OpenSSH
<tt>X11Forwarding</tt> and <tt>X11DisplayOffset</tt> settings. Your Linux X
client applications will interact with OpenSSH instead of a real X server,
and OpenSSH (on Linux) will relay the X protocol messages to PuTTY (on
Windows), which will then pass them on to your Xming X server running on
Windows. The X server will respond in reverse, passing data to your PuTTY
client, which passes it back to OpenSSH to be finally handed over to the X
client application. It is a round-about route to be certain, but it does
provide several advantages:
</p>

<ol>
<li>it provides a layer of security around your GUI traffic,</li>
<li>it gives your X client applications an assured route to your X server,
guaranteeing that they will not be stopped by firewall rules or routing
problems that may inadvertently block the X protocol traffic, and</li>
<li>it eliminates the need to use the X authorization tools (like
<tt>xauth</tt> or <tt>xhost</tt>) because, to your X server, all the X
protocol traffic is local traffic.</li>
</ol>

<p>
As <a href="misc/pitcher/figures.html#figure_5c"><em>Figure 5c</em></a>
shows, from this PuTTY and Xming setup, you can run even the most
sophisticated X application. Truly, almost any X application that is
available to you in Linux can be run this way. Only those applications that
require services not implemented in the Xming server (such as OpenGL when
you use the Mesa version of Xming) cannot be run this way.
</p>

<h3>A Person In Danger</h3>

<p>
With this, I've met my goal and given you the tools to free your Prisoner
of Windows. Now, all the facilities of Linux are open to him, command-line
and GUI tools alike. He no longer needs to curse the confines of his local
working environment, and can luxuriate in the freedom of the remote Linux
system.
</p>
 
<p>
The I Ching says <em>&quot;A person in danger should not try to escape at
one stroke. He should first calmly hold his own, then be satisfied with
small gains, which will come by creative adaptations.&quot;</em> We've
given our Prisoner of Windows a small gain achieved by a creative
adaptation. The next steps you take will lead to his complete escape.
</p>

<hr/>

<h3>Resources</h3>
<p>
<strong>OpenSSH</strong> SSH server <em>(Linux)</em><br/>
    <tt><a
href="http://www.openssh.com/">http://www.openssh.com/</a></tt>
</p>

<p>
<strong>PuTTY</strong> SSH client <em>(Windows)</em> <br/>
    <tt>
	<a href="http://www.chiark.greenend.org.uk/~sgtatham/putty/">http://www.chiark.greenend.org.uk/~sgtatham/putty/</a></tt>
</p>
    

<p>
<strong>Xming</strong> X server  <em>(Windows)</em><br/>
    <tt><a href="http://www.straightrunning.com/XmingNotes/">http://www.straightrunning.com/XmingNotes/</a></tt>
</p>
    

<p>
<strong>X Foundation</strong>  <em>(X server reference site)</em><br/>
    <tt><a href="http://www.x.org/">http://www.x.org/</a></tt>
</p>
    

<p>
<strong>Remote X Apps mini-HOWTO</strong> <em>(Linux Documentation Project)</em> <br/>
    <tt><a href="http://www.tldp.org/HOWTO/text/Remote-X-Apps">http://www.tldp.org/HOWTO/text/Remote-X-Apps</a></tt>
</p>
    

<p>
<strong>Usenet Newsgroup</strong> for <strong>SSH</strong> matters  <em>(the authors of PuTTY sometimes hang out here)</em><br/>
    <tt><a
href="news:comp.security.ssh">news:comp.security.ssh</a></tt>
</p>
    

<p>
<strong>Usenet Newsgroup</strong> for general <strong>X Window system</strong> matters <br>
    <tt><a href="news:comp.windows.x">news:comp.windows.x</a></tt>
</p>
    

<p>
<strong>Usenet Newsgroup</strong> for <strong>Linux X Window system</strong> matters <br>
    <tt><a href="news:comp.os.linux.x">news:comp.os.linux.x</a></tt>
    


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:129/pitcher.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<p>
<img align="left" alt="Bio picture" src="../gx/2002/note.png" class="bio">

<!-- 
If the author has sent his pic, save it to the right directory
and enable the line below.

<img align="left" alt="Bio picture" src="../gx/authors/pic.jpg" class="bio">

-->

<em>

<! -- BIO GOES HERE -->

Canadian by birth, and living in Brampton, Ontario, I am a career techie
working at a major Canadian bank. For over 25 years, I've programmed on
all sorts of systems, from Z80 CP/M up to OS/390. Primarily, I develop
OS/390 MVS applications for banking services, and have incorporated
Linux into my development environment.

</em>
<br clear="all">
<!-- *** END bio *** -->



<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/pitcher.html">Lew Pitcher</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 129 of Linux Gazette, August 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="saha"></a>
<h1>Issues In Concurrent Server Design on Linux Systems - Part I</h1>
<p id="by"><b>By <A HREF="../authors/saha.html">Amit Saha</A></b></p>


</b>
</p>


<p>
<h3>What is a Concurrent Server</h3>

<p>
In the simplest terms, a <em>server</em> is a process which waits for
incoming client connections. The server can be a simple echo server,
echoing back what the client sends to it - or it can be a complex program
such as a FTP or web server handling thousands of connection requests from
clients. A concurrent server is one that can process more than one client
connection at the same time. 
</p>


<h3>Implementing a Concurrent Server</h3>
<p>
Stevens suggests the following choices for the type of process control to
use while designing concurrent Linux servers:

<ul>
<li>One Fork Per Client Request</li>
<li>Prefork with child calling accept</li>
<li>Prefork with file locking to protect accept</li>
<li>Prefork with thread mutex locking to protect accept</li>
<li>Prefork with parent passing socket descriptor to child</li>
<li>Create one thread per client request</li>
<li>Prethreaded with mutex locking to protect accept</li>
<li>Prethreaded with main thread calling accept</li>
</ul>

<p>
We shall now take a brief look at each of the above techniques by
implementing the ideas to design TCP-based concurrent servers.

<p>
A. <strong>TCP Concurrent Server, One Child per Client</strong>
<p>
This is by far the simplest method of concurrent server design. The server
process forks a child for each client connecting to it. The child forked
then takes care of the corresponding client connection while the server
waits for other client connections. In this issue,  we shall stress on this
particular method using it in to design an "enhanced" file transfer
application.

<p>
B. <strong>TCP Preforked Server, No Locking Around Accept</strong>
<p>
This technique of server design uses a technique called
<em>preforking</em>. The server launches a number of child processes when
it starts, and the children service the clients as each client connection
arrives. A few things worth noticing here are:

<ul>
<li>New clients can be handled without the cost of a fork by the server</li>
<li>The server has to guess the number of children to prefork when it starts</li>
</ul>

<p>
If the number of clients being serviced at any time exceeds the number of
children, the additional clients will experience a service time delay (they
will not be ignored as long as the backlog in <code>listen()</code> is less
than or equal to the additional clients).

<p>
The <em>preforking mechanism</em> in a preforked server has been reproduced
from Stevens for your reference:

<pre class="code">
pid_t child_make(int i,int listenfd,int addrlen)
{
	pid_t pid;
	if((pid=fork())&gt;0)
		rteurn(pid);	//parent
	child_main(i,listenfd,addrlen); //never returns

}

void child_main(int i,int listenfd,int addrlen)
{
	int connfd;
	socklen_t clilen;
	struct sockaddr *cliaddr;
	cliaddr=malloc(addrlen);
	printf("Child %ld starting\n",(long)getpid());
	for(;;)
		{
		clilen=addrlen;
		connfd=accept(listenfd,cliaddr,&amp;clilen);
		/*
		perform
		processing jobs
		*/
		}
}
</pre>

<p>
A point of interest in this regard is that multiple processes are calling
accept on the same listening descriptor. How this is done and other
associated issues are going to be dealt in subsequent parts of this series. 

<p>
C.  <strong>TCP Preforked Server, File Locking Around Accept</strong>
<p>
The implementation just described works fine with Berkeley-derived kernels.
However, System V kernels, which implement <code>accept()</code> as a
library function may not allow this. The solution lies in placing some kind
of a "lock" around the call to accept, so that only one process at a time
is blocked in the call to accept. The remaining children will be blocked
trying to obtain the lock. 

<p>
There are various ways to provide this locking mechanism (we will address
these in subsequent articles.) The only change to the code previously
decsribed in section B is to call the locking function before the children
are created, and to release the lock in the <code>child_main()</code>
function before performing the processing tasks. 

<p>
D.  <strong>TCP Preforked Server, Descriptor Passing</strong>
<p>
Another possible modification to the preforking type servers is having only
the parent call accept and the "pass" the connected socket to one child. A
few points worth noting here are:

<ul>
<li>This gets around the possible need of file locking around the call to
accept in all the children, but requires a form of descriptor passing to
the children</li>
<li>This complicates the code somewhat as the parent has to keep track of
which children are busy and which are free to pass a new socket to a free
child</li>
</ul>

<p>
There are two more design mechanisms possible - <em>TCP Prethreaded Server,
per-Thread Accept</em> and <em>TCP Prethreaded Server, Main Thread
Accept</em> - where instead of forking new child processes, we use threads
to achieve concurrency. The rest is similar to the design mechanism just
described. 

<p>
We shall now introduce ourselves to two famous problems associated with
scalability of Linux servers. 


<h3>The Thundering Herd Problem</h3>
<p>
Network servers that use TCP/IP to communicate with their clients are
rapidly growing in capability. A service may elect to create multiple
threads or processes to wait for increasing numbers of concurrent incoming
connections.  By pre-creating these multiple threads,  a network server can
handle connections and requests at a faster rate than with a single thread. 

<p>
In Linux, when multiple threads call accept() on the same TCP socket, they
get put on the same wait queue, waiting for an incoming connection to wake
them up.

<p> In the Linux 2.2.9 kernel and earlier, when an incoming TCP connection
is accepted, the <code>wake_up_interruptible()</code> function is invoked
to awaken waiting threads.  This function walks the socket's wait queue and
awakens everybody.  All but one of the threads,  however,  will put
themselves back on the wait queue to wait for the next connection.  This
unnecessary awakening is commonly referred to as a "thundering herd"
problem and creates scalability problems for network server applications. 

<p>
For more about the "Thundering Herd problem", see <a
href="http://www.citi.umich.edu/projects/linux-scalability/reports/accept.html">this document</a>.


<h3>The C10K Problem</h3>
<p>
'C' stands for 'Client' and 'K' stands for 1000. Dan Kegel's contention is
that the web is a big place now, and web servers have to be able to handle
ten thousand clients simultaneously; the solution to this problem involves
finding the optimal configuration, both at Operating System level and
network application level, which helps minimize the latency while serving
on the order of tens of thousands of clients. In <a
href="http://www.kegel.com/c10k.html">his 'C10K' paper</a>, Dan suggests
the following optimizations:

<ul>
<li>Serve many clients with each thread, and use nonblocking I/O and level-triggered readiness notification
<li>Serve many clients with each thread, and use nonblocking I/O and readiness change notification
<li>Serve many clients with each server thread, and use asynchronous I/O
<li>serve one client with each server thread, and use blocking I/O
<li>Build the server code into the kernel
</ul>

<p>
For more details, see the above link.

<p>
Now that we've acquainted ourselves briefly with the various design
alternatives, we are going to take up the simplest among the design
techniques - that is, <em>TCP Concurrent Server, One Child per client</em>.
Then we are going to see how we can design an <em>"enhanced" file transfer
program</em> using this principle. The other design techniques shall be
described with an effective application for each in subsequent issues.

<h3>Enhanced Server Design Method I</h3>
<strong>TCP Concurrent Server, One Child per client</strong>
<p>
This is by far the simplest method of concurrent server design; the server
process forks a child for each client connecting to it. The child then
takes care of the corresponding client connection while the server waits
for other client connections. The complete source code can be found <a
href="misc/saha/concurrent_server.c.txt">here</a>. In this example, the
server just displays any message sent by the client. Let us now go through
a part of the server code where the client connection is accepted: 

<pre class="code">
1. while(1){
2. if ((newfd = accept(listener, (struct sockaddr *)&amp;remoteaddr,&amp;addrlen)) == -1)
3.          {
4. 	  perror("accept");
5.          }
6. else
7.          {
8.	//fork a new child whenever we have a new client connection

9.	pid=fork();
10.     if(pid==0){

	//handle the client

11.	printf("new connection from %s on socket %d\n", inet_ntoa(remoteaddr.sin_addr),newfd);
12.     printf("Recieved %d bytes from the client",read(newfd,buf,sizeof(buf)));
13.     printf("%s",buf);

	//do any other tasks as needed
14.	exit(0);
        }
}
</pre>

<p>
Examination of the server code reveals that if a client connection is
succesfully accepted (line 6), then the server forks a new child (line 9).
The child process then does the other jobs using the client connection
(lines 11-13). After this the child exits.

<p>
Meanwhile the parent process goes back into the infinite loop (line 1) and
waits for incoming client connections (line 2).

<p>
Let us now use this server design method to do something useful. First,
we'll outline our goal - i.e., building an Enhanced File Transfer
Application - clearly:

<ul>
<li><strong>Design a simple File Transfer client &amp; Server
Program.</strong> This effectively creates a single connection between the
client and the server for each file transfer operation. It can be very
easily observed that the file transfer operation consumes more time as the
file size increases even if the client and the server is on the same
machine.
<li><strong>Enhance the application to be less time consuming.</strong> The
enhancement method that we implement here is that instead of opening a
single connection, we are going to open multiple connections from the sender
to the receiver. From the implementation point of view, we are creating
multiple sockets (endpoints). This automatically calls for management issues
like server concurrency (our issue here), since we are opening up multiple
connections to the server, though from the same client. This will also
introduce us to the issue of concurrency in client programs.
</ul>

<p>
In this "simple" file transfer program, the server binds itself to a port
and waits for the file that the receiver is sending. The client then connects
to the server on the port opened and proceeds with the transmission.
For simplicity, only the relevant code snippet is given here; you'll need
to add the standard server and client program procedures like filling up
the socket data structures, binding your server, etc. to test it if
desired.

<pre class="code">
// The client
sock_descr=socket(AF_INET,SOCK_STREAM,6);  //create a TCP socket
c_status=connect(sock_descr,(struct sockaddr*)&amp;remote_addr,sizeof(remote_addr));

if(c_status&lt;0){
	printf("Can't connect");
	exit(0);
}
else {
	fd=fopen(argv[1],"r");   //the file to be transferred is supplied as a command line argument
	if(fd==NULL){
		perror("Error reading file");
	}

	while(!feof(fd){
		ch=fgetc(fd);
		write(sock_descr,&amp;ch,1),sock_descr);
	}
}
</pre>

<pre class="code">
// The server

//listener is the descriptor returned by listen()
if ((newfd = accept(listener, (struct sockaddr *)&amp;remoteaddr,&amp;addrlen)) == -1){
	perror("accept");
}
else {
	printf("Recieving file...\n");
	if(read(newfd,&amp;ch,1) &lt;= 0){
		fputc(ch,fp);
        fseek(fp,1,SEEK_CUR);
	}
}
</pre>

<strong>The File Transfer Optimization Algorithm</strong>
<p>
The file transfer method just described suffers from a drawback: the time
involved in the whole process increases drastically with file size. We will
now enhance the process by introducing a degree of concurrency at the
sender as well as the receiver. The terms sender/receiver and
client/server, by the way, are used interchangeably in this text. What we
seek to do at the sender's end is to logically divide the file using the
algorithm mentioned below. The splitting is done at two levels: level 1 is
the logical division of the file horizontally into <em>Num_chunks</em>.
Then, each of the <em>Num_chunks</em> is divided into <em>Num_packets</em>.
The number of simultaneous connections that the client will open up with
the server is <em>num_sockets</em> which is equal to <em>Num_packets</em>.
The various parameter values in the following pseudo-code are arbitrary,
and can be replaced as appropriate for your application.

<pre class="code">
Check file size, f_size(in MB)
if f_size &gt; 5  then call module SPLIT else proceed with normal("sequential transmission")
	Module SPLIT
		For 5 &lt; f_size &lt; 10 
		Level 1 split
			Num_chunks=[f_size/ sizeof-1-chunk]
			Sizeof-1-chunk=2mb
		Level 2 split
			Num_packets=[sizeof-level-1-chunk/ sizeof-1-level2 packet]
			Sizeof-1-level2 packet=0.25 mb

		For 10 &lt; f_size &lt; 15 
		Level 1 split
			Num_chunks=[f_size/ sizeof-1-chunk]
			Sizeof-1-chunk=4mb
		Level 2 split
			Num_packets=[sizeof-level-1-chunk/ sizeof-1-level2 packet]
			Sizeof-1-level2 packet=0.25 mb

		For 15 &lt; f_size  &lt; 20 
		Level 1 split
			Num_chunks=[f_size/ sizeof-1-chunk]
			Sizeof-1-chunk=5mb
		Level 2 split
			Num_packets=[sizeof-level-1-chunk/ sizeof-1-level2 packet]
			Sizeof-1-level2 packet=0.25 mb

		No of open sockets=Num_packets

	End Module SPLIT

Proceed with transmission
</pre>

Note that we have blissfully ignored the case where the file size may be
greater than 20MB. Let's take it one step at a time!

<p>
That was the algorithm we intend to implement. This will be covered in the
next issue, which will introduce us to concurrent clients and
Interprocess Communication (IPC) mechanisms. Till then - happy coding and
experimenting!

<hr>

<h4>References:</h4>
<ol>
<li> Unix Network Programming(Vol I &amp; II) - W.Richard Stevens
<li> Dan Kegel's <a href="http://www.kegel.com">C10K</a> paper
<li> <a href="http://www.citi.umich.edu/projects/linux-scalability/reports/accept.html">Accept() scalability on Linux</a>, Steve Molloy, CITI - University of Michigan
</ol>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:129/saha.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<hr>
<p>
<img align="left" alt="Bio picture" src="../gx/authors/saha.jpg" class="bio">
</p>

<p>
<em>

The author is a 3rd year Computer Engineering Undergraduate at Haldia
Institute of Technology, Haldia. His interests include Network Protocols,
Network Security, Operating systems, and Microprocessors. He is a Linux fan
and loves to hack the Linux kernel.

</em>

</p>
<br clear="all">


<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/saha.html">Amit Saha</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 129 of Linux Gazette, August 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="ecol"></a>
<h1>Ecol</h1>
<p id="by"><b>By <A HREF="../authors/malonda.html">Javier Malonda</A></b></p>


</b>
</p>


<p>
The Ecol comic strip is written for <a
href="http://escomposlinux.org">escomposlinux.org</a> (ECOL), the web site that
supports es.comp.os.linux, the Spanish USENET newsgroup for Linux.  The
strips are drawn in Spanish and then translated to English by the author.
<p>
<em>These images are scaled down to minimize horizontal scrolling.</em>
<p>


<p>

<div class="cartoon">
<a href="misc/ecol/ecol-236-e.png">
<img alt="[cartoon]" src="misc/ecol/ecol-236-e.png"><p>Click here to see the full-sized image</a>.
</div>
<div class="cartoon">
<a href="misc/ecol/ecol-238-e.png">
<img alt="[cartoon]" src="misc/ecol/ecol-238-e.png"><p>Click here to see the full-sized image</a>.
</div>


All Ecol cartoons are at
<a href="http://tira.escomposlinux.org/">tira.escomposlinux.org</a> (Spanish),
<a href="http://comic.escomposlinux.org/">comic.escomposlinux.org</a> (English) 
and
<a href="http://tira.puntbarra.com/">http://tira.puntbarra.com/</a> (Catalan).
The Catalan version is translated by the people who run the site; only a few
episodes are currently available.

<p> <small>These cartoons are copyright Javier Malonda.  They may be copied,
linked or distributed by any means.  However, you may not distribute
modifications.  If you link to a cartoon, please <a
href="mailto:jmr@escomposlinux.org">notify</a> Javier, who would appreciate
hearing from you.
</small>

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:129/ecol.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<!-- P>
<img ALIGN="LEFT" ALT="Bio picture" SRC="../gx/2002/note.png" class="bio">
<em>
</em>
<br CLEAR="all" -->
<!-- *** END bio *** -->

<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/malonda.html">Javier Malonda</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 129 of Linux Gazette, August 2006
</p>

</div>

</div>


<div id="navigation">

<a href="../index.html">Home</a>
<a href="../faq/index.html">FAQ</a>
<a href="../lg_index.html">Site Map</a>
<a href="../mirrors.html">Mirrors</a>
<a href="../mirrors.html">Translations</a>
<a href="../search.html">Search</a>
<a href="../archives.html">Archives</a>
<a href="../authors/index.html">Authors</a>
<a href="../contact.html">Contact Us</a>
</div>

<div id="breadcrumbs">

<a href="../index.html">Home</a> &gt;
<a href="index.html">August 2006 (#129)</a> &gt;
TWDT

</div>


<img src="../gx/tux_86x95_indexed.png" id="tux" alt="Tux"/>

<br />

</body>
</html>


<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
		 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' lang='utf-8' xml:lang='utf-8'>
<head>
<title>Talkback:152/lg_tips.html</title>
<meta http-equiv='Content-Type; charset=utf-8' />
<link rel='stylesheet' type='text/css' href='../../../lg.css' />
</head>
<body>
<a href="../../../"><img alt="Linux Gazette" src="../../../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" /></a><img alt="Tux" src="../../../gx/tux_86x95_indexed.png" id="tux" /><p id="fun">...making Linux just a little more fun!</p><div class='content articlecontent'><a name="top"></a><h3>Talkback:152/lg_tips.html</h3>
<p><b>[ In reference to "<a href='../../../152/lg_tips.html'>2-Cent Tips</a>" in LG#152 ]</b></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Sat, 2 Aug 2008 22:53:01 -0400</b>
</p>

<p>
Hi, Greg -
</p>

<p>
On Sat, Jul 26, 2008 at 11:02:39AM -0700, Greg Metcalfe wrote:
</p>

<pre>
&gt; On Friday 25 July 2008 21:02:51 Ben Okopnik wrote:
&gt; &gt; On Fri, Jul 25, 2008 at 11:35:02AM -0700, Greg Metcalfe wrote:
&gt; &gt; &gt; Regarding "2-cent tip: Removing the comments out of a configuration
&gt; &gt; &gt; file":
&gt; &gt; &gt;
&gt; &gt; &gt; I don't like to invoke Yet Another Interpreter (Perl, Python, etc.) for
&gt; &gt; &gt; simple problems, when I've already got a perfectly good one (the bash
&gt; &gt; &gt; shell) running, and all those wonderful GNU programs.
&gt; &gt;
&gt; &gt; You know, I'm often puzzled when people say that. Whether you have Bash
&gt; &gt; running or not, your script launches another instance of it - *as an
&gt; &gt; interpreter.* The memory footprint of bash plus grep is not going to be
&gt; &gt; much smaller than that of Perl, either. You also lose the capability of
&gt; &gt; (easily) writing the result back to the original file. In what way is
&gt; &gt; this better?
&gt; &gt;
&gt; The bit about launching another interpreter is forehead-slappingly correct, of 
&gt; course. I have systems where bash is the only interpreter present. Sendmail's 
&gt; restricted shell is disabled, etc. I wonder if I'm not subconciously making 
&gt; peace with that situation, rather than growling about it.
</pre>

<p>
That would be understandable, certainly. I'm a big fan of the functional
overlap that is afforded by the various programming tools plus the
standard Unix toolkit - it means that you can usually get the job done
even when you're missing your favorite gadget. Believe me, I have
nothing at all against 'grep' - especially when it's wearing that
Superman cape with a '-E' option stenciled on the back. <img src="../gx/smile.png" alt=":)">
 
</p>

<pre>
&gt; My 'dense' actually does other things via switches, such as reporting on local 
&gt; modifications to config files via a mandated '# LOCALMOD date name reason' 
&gt; standard, etc.
&gt; 
&gt; But it just growed, and most of it is far too nasty (non-standard switches, 
&gt; etc.) to ever be seen by the public. I just grabbed the two most relevant 
&gt; lines, and pasted. You'll have seen my shebang typo, for instance. 
&gt; The 'dense' that's really in use does have the advantage of actually being 
&gt; runable...
</pre>

<p>
Heh. I've done a number of those in my time... although after a certain
point, I got into a habit of going back and rewriting them if I found
that they kept on being useful. I actually have two projects of that
sort on the slow burner right now: my lightweight MTA ('bssmtp'), and
the LG mailbag processor. The latter actually has a comment in it that
says
</p>

<pre>
# This code is a really ugly hack, and I must have  #
# been smoking really cheap crack when I wrote it.  #
# It is, however, useful.                           #
</pre>

<p>
 - although that's not quite as true as it used to be. The original
<em>had</em> "just growed", since it was driven by what the job demanded -
which in turn was driven by the perceived lack of function while using
the script. Once it reached the 95% mark or so (i.e., I wasn't hearing
any more complaints from our Mailbag Editor, a.k.a. my wife), I started
making it look like code written by a professional programmer rather
than something akin to the contents of a hobo's knapsack.
 
</p>

<pre>
&gt; Regarding the bit about writing back to the original file. I suppose that 
&gt; could be useful, but it's not something I'd want (or be allowed) to do, in 
&gt; the case of classic config files. In which case, redirection is all that's 
&gt; needed.
</pre>

<p>
Well, not exactly. 'dense foobar.conf &gt; foobar.conf' would be just as
disastrous as any other attempt at "simple" redirection. <img src="../gx/smile.png" alt=":)">
 
</p>

<pre>
&gt; &gt; Is there any reason to have those parentheses in the first part of the
&gt; &gt; regex? It works just fine without them. I would also extend the
&gt; &gt; definition of 'blank lines' to include lines consisting solely of
&gt; &gt; whitespace, and get rid of all those useless backslashes:
&gt; &gt;
&gt; The parenthesis and backslashes may be an artifact of dragging this over from 
&gt; some (possibly ancient) version of HP-UX. Provenance might be hard to trace, 
&gt; particularly as it likely predates the last <strong>two</strong> version control systems.
</pre>

<p>
Ah. I usually see that kind of thing from cargo-cult coding: "Joe said
to use parens; I don't know why, but his code works, and I'm reluctant
to screw with it." Not necessarily the cause in your case, but it's
often the reason for arbitrary gribble and goo in programs.
 
</p>

<pre>
&gt; &gt; ``
&gt; &gt; egrep -v '^[[:space:]]*(#|$)' /etc/hosts
&gt; &gt; ''
&gt; &gt;
&gt; Simpler, more portable, more powerful. What's not to like? Well, other than  
&gt; needing to work late a couple of nights next week, grovelling through 'dense' 
&gt; and a couple of other scripts that are likely just as old. There won't be 
&gt; time during what I laughingly refer to as normal hours, so the lesson here is 
&gt; plain. Do not get involved in discussions like this when the weather is nice, 
&gt; for you may find yourself working late. <img src="../gx/smile.png" alt=":)">
</pre>

<p>
I think I know that tune. Been there, done that, hope you got out to
enjoy some of the good weather anyway. <img src="../gx/smile.png" alt=":)"> Thanks for writing!
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_talkback.html#mb-talkback_152_lg_tips">Back</a><hr width="50%" align="left" /><p><br /></p></div>
</body>
</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML><HEAD>
<META NAME="generator" CONTENT="lgazmail v1.4G.p">
<TITLE>Linux Gazette 100: The Answer Gang</TITLE><link href="../lg.css" rel="stylesheet" type="text/css" media="screen, projection" />
</HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#0000AF" ALINK="#FF0000">

<div class="content articlecontent">
<center>
        <img src="../../gx/dennis/qbubble.gif" alt="(?)"                           
	                border="0" align="left">
<A NAME="answer"><BIG><BIG><STRONG><FONT COLOR="maroon"
	>The Answer Gang</FONT></STRONG></BIG></BIG></a>
	<img src="../../gx/dennis/bbubble.gif" alt="(!)"                           
	                border="0" align="right"><BR>
<STRONG>By Jim Dennis, Ben Okopnik, Dan Wilder, Breen, Chris, and...
        (<a href="../../tag/bios.html">meet the Gang</a>) ...
	        the Editors of <i>Linux Gazette</i>...
		        and You! 
</STRONG></BIG> </TD></TR>
</TABLE>
<P>

<!-- END header -->

<center><p>
<br>We have guidelines for <a href="../../tag/ask-the-gang.html">asking</a> and <a
href="../../tag/members-faq.html">answering</a> questions.  Linux questions only, please.
</STRONG>
<br><em><font color="#7F0000">We make <b>no guarantees</b> about answers, but you can be <b>anonymous</b> on request.</font></em>
<br>See also: The Answer Gang's 
<a href="../../tag/kb.html">Knowledge Base</a>
and the <i>LG</i> 
<a href="http://linuxgazette.net/search.html">Search Engine</a>
</center>
<br></p></center>

<HR>
<!-- BEGIN message -->
<!-- begin 2 -->
<H3 align="left"><img src="../../gx/dennis/qbubble.gif" 
	height="50" width="60" alt="(?) " border="0"
	>Font rendering with GTK-2.0</H3>


<p><strong>From Thomas Adam 
</strong></p> 
<p></strong></p>

<p align="right"><strong>Answered By:  Thomas Adam, Ben Okopnik, Bradley Chapman, Robos, Kapil Hari Paranjape
</strong></p>
<P><STRONG>
Hello TAGgers,
</STRONG></P>
<P><STRONG>
I am wondering if someone can help. I am having a rather interesting font
issue at the moment with gtk2 apps, in that the font it uses to display in
its menus, etc is not what I would like...it looks weird to me. I think
the font in question is monospace but I am uncertain.
</STRONG></P>
<P><STRONG>
I cannot determine from using "editres/xdpyinfo/FvwmIdent" what font is
being used and it is beginning to annoy me. I have tried adding:
</STRONG></P>

<pre><strong>gtk-font-name = "Sans 10 Bold"
</strong></pre>
<P><STRONG>
as a crude test to: ~/.gtkrc-2.0 but this has had no effect in changing
the font even when re-starting the application(s) in question. I have
checked the BTS but nothing has been that useful. I am now thinking it
might be a pango problem but I wouldn't know.
</STRONG></P>
<P><STRONG>
Ideally it would be nice if I could get the same font that gtk+-1.2 uses
since I have had no problems with the font those apps use in their menus,
etc.
</STRONG></P>
<P><STRONG>
Ideas would be welcome.
</STRONG></P>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Bradley] 
I added:
</blockQuote>

<blockquote><pre>gtk-font-name = "Luxi Sans 10"
</pre></blockquote>
<blockQuote>
This is what I added to my rc file and the GTK2-2.2.4 libraries that
Firebird is currently using seem to honour it. Have you tried updating your GTK2 libs?
</blockQuote>
<P><STRONG>
<IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
Yes, I have updated them, I'm running sid so everything is bang up to date
in that respect. Still no luck. I do though get the following errors
printed to stdout:
</STRONG></P>

<pre><strong>Fontconfig warning: line 248: invalid edit binding "same"
Fontconfig warning: line 260: invalid edit binding "same"
</strong></pre>
<P><STRONG>
According to the BTS, this error is supposedly fixed by making sure you
only have one fontconfig lib installed, well, I do.
</STRONG></P>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Bradley] 
You could try checking your GTK+-1.2 libraries to find out where their
defaults are stored and then just match the font name &amp; size decls in your GTK2 config.
</blockQuote>
<P><STRONG>
<IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
I fixed it in the end. I found out the defoma (DEbian FOnt MAngler) was
causing all kinds of weird aliases that pango was then having trouble
parsing. The fonts were the defaulting to an ugly monospace-9 font which
looked horrid.
</STRONG></P>

<font color="red"><blockquote><em>Ok, so defoma really is: DEbian FOnt MAnager, but I couldn't resist it

<IMG SRC="../../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
 -- Thomas Adam</em></blockquote></font>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Ben] 
Thomas, at some point in the sweet by-and-by, you ought to write an
article on that whole system. As far as I'm concerned, you two are
chatting in a particularly obscure dialect of Gibberish (and that's not
a comment on what you're saying but on how well I'm understanding it. 
<IMG SRC="../../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Thomas] 
Heh, I did take notes[1]
</blockQuote>
<blockQuote>
[1] If you think gibberish is correct, you should try and interpret my handwriting.
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Ben] 
Twiddling the font system is something I've done in the past -
successfully, in some cases - by the "close your eyes, hit it with a
baseball bat, run away, and read about the effect in tomorrow's papers"
method.
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Thomas] 
"O p n k. Ben plays with fonts"
</blockQuote>
<blockQuote>
I think we can say that looks like an appropriate header for tomorrow's
newspapers.
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Ben] 
As far as <EM>understanding</EM> it goes, uh-uh. Well, I actually know
of a few things that do some things 
<IMG SRC="../../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">, but I have <em>  no  </em> idea how the
whole shmear does what it does, or even what it really does - and that's
before we even mention console fonts, which seem to be a completely
unrelated (and nearly as complex) system.
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Thomas] 
Console fonts are very interesting. These are almost certainly controlled
by locales (which in turn also dictate the font you need to use under X11
as well). As to how they are rendered, this is something that I have been
looking into. I have to go and see a psychiatrist first though -- its just
about done my head in.
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Ben] 
Yeah, I can't wait until X is smart enough to be fully UTF8-compliant. I
just <em>  love  </em> UTF8; it chops out a huge chunk of what I see as horrible
and unnecessary complexity. Admittedly, the mess grew out of a need -
but that's no longer current, hasn't been for a long time, and the mess
is still with us.
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Ben] 
At some point, I read some
HOWTO that attempted to "explain" it all in a short, easy, step-by-step
27,500-page memo. When it got to the point about "fonts don't really
define what characters look like, they just kinda hint at a glyph set
which sorta doesn't mean anything either - except when it does", I had
to walk off whistling with my hands in my pockets. Otherwise, I'd have
gone looking for that baseball bat again.
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Thomas] 
GTK2/pango/freetype all work in tandem with each other. The way fonts are
displayed is dictated by pango which helps render them (it's actually used
for internationalisation of fonts as well).
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Robos] 
My latest incident: tried some program on my agenda vr3 pda (which I know
not as much about as I would like) and the proggy proclaims: font "9x15" not
known to X server (or something). Yeeeesss, ok, this is a pda! No debconf,
no xfontsel or something. How the heck do I figure out what fonts are there
and what their names are without later being able to write an xserver myself?
Yes, X. Like in "the X files". Maybe that was their initial idea: molder and
scully try to find out what fonts are installed....
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Kapil] 
I do know that applications that try to load fonts directly from X
(rather than using a toolkit <TT>/</TT> themekit like GTK) will find any font
that is also found by "xlsfonts". So on my machine (slightly(!) more
disk space than a PDA) I get:
</blockQuote>

<blockquote><pre>command: $ xlsfonts -fn "9x15"
output:	-misc-fixed-medium-r-normal--15-140-75-75-c-90-iso8859-1
	9x15
</pre></blockquote>
<blockQuote>
So 9x15 is an alias for the font described in the first line of output.
</blockQuote>
<blockQuote>
You too (yes you Robos!) can define your own aliases as follows.
</blockQuote>

<blockQuote><ol>
<LI>Create a directory called (say) "$HOME/myfonts".


<LI>Put whatever X fonts (AFAIK this means only BDF and PCF fonts). For example you can link the "real" fonts from wherever these are.


<LI>Run "mkfontdir $HOME/myfonts", this will create fonts.* files.


<LI>Create an fonts.alias file as follows. Copy any line in the fonts.dir or fonts.scale files into this file and replace the name of the file (first entry in the line) by the alias you want to use.


<LI>Run "xset +fp $HOME/myfonts".

</ol></blockQuote>

<font color="#660000"><blockquote><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Thomas] Don't forget also to run:
</blockquote>
<blockquote>xset fp rehash
</blockquote></font>

<!-- end 2 -->
<P> <hr> </p>
</div>
<div id="articlefooter">
<H5 align="center">This page edited and maintained by the Editors
        of <I>Linux Gazette</I>
<br><a href="../../copying.html"
        >Copyright &copy;</a> its authors, 2004
<BR>Published in issue 100 of <I>Linux Gazette</I> March 2004</H5>
<H6 ALIGN="center">HTML script maintained by
        <A HREF="mailto:star@starshine.org">Heather Stern</a> of
        Starshine Technical Services,
       <A HREF="http://www.starshine.org/">http://www.starshine.org/</A>
</H6>
<!--startcut ======================================================= -->
<P> <hr> 
<!-- begin tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::-->
<p align="center">
<table width="100%" border="0"><tr>
<td align="right" valign="center"
	><IMG ALT="" SRC="../../gx/navbar/left.jpg"
        WIDTH="14" HEIGHT="45" BORDER="0" ALIGN="middle" border="0"
><A HREF="../index.html"
	><IMG SRC="../../gx/navbar/toc.jpg" align="middle"
              ALT="[ Table Of Contents ]" border="0"></A
><A HREF="../lg_answer.html"
	><IMG SRC="../../gx/dennis/answertoc.jpg" align="middle"
              ALT="[ Answer Guy Current Index ]" border="0"></A></td>
<td align="center" valign="center"><A HREF="../lg_answer.html#greeting"><img align="middle"
	src="../../gx/dennis/smily.gif" alt="greetings" border="0"></A> &nbsp;
  <A HREF="../../tag/bios.html">Meet&nbsp;the&nbsp;Gang</A> &nbsp;
  <A HREF="1.html">1</A> &nbsp;
  <A HREF="2.html">2</A> &nbsp;
  <A HREF="3.html">3</A> &nbsp;
  <A HREF="4.html">4</A> &nbsp;
  <A HREF="5.html">5</A> &nbsp;
  <A HREF="6.html">6</A> &nbsp;
  <A HREF="7.html">7</A> 
  </td>
<td align="left" valign="center"><A HREF="../../tag/kb.html"
	><IMG SRC="../../gx/dennis/answerpast.jpg" align="middle"
              ALT="[ Index of Past Answers ]" border="0"></A
><IMG ALT="" SRC="../../gx/navbar/right.jpg" align="middle"
        WIDTH="14" HEIGHT="45" BORDER="0"></td></tr></table>
</p>
<!-- end tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::::-->
</div>


</BODY></HTML>


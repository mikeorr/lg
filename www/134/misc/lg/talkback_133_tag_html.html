<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>Talkback</title>
<link rel="stylesheet" type="text/css" href="../../../lg.css" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body>
<a href="../../../"><img alt="Linux Gazette" src="../../../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" /></a><img alt="Tux" src="../../../gx/tux_86x95_indexed.png" id="tux" /><p id="fun">...making Linux just a little more fun!</p><div class='content articlecontent'><a name="top"></a><h3>Talkback:133/tag.html</h3>
<p><b>[ In reference to "<a href='../../../133/tag.html'>The Monthly Troubleshooter: The USB Subsystem</a>" in LG#133 ]</b></p><p>
<b></b><br />
<b>Mon, 4 Dec 2006 10:30:41 +0200</b>
</p>

<p>
Hi,
</p>

<p>
Is there any common way to communicate with USB devices which aren't
mass storage - like Motorola mobile phones, some Canon photo cameras and
so on?
</p>

<p>
thanks,
Vitaly
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_talkback.html#mb-talkback_133_tag_html">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b>Rick Moen [rick at linuxmafia.com]</b><br />
<b>Mon, 4 Dec 2006 01:01:16 -0800</b>
</p>

<p>
Quoting Vitaly Karasik (Vitaly.Karasik@Kayote.com):
</p>


<pre>
&gt; Is there any common way to communicate with USB devices which aren't
&gt; mass storage - like Motorola mobile phones, some Canon photo cameras and
&gt; so on?
</pre>

<p>
On USB cameras:  I don't have much experience with this, but rumour has
it that software using gPhoto2 is your best bet:  <a href="http://www.gphoto.org/">http://www.gphoto.org/</a>
</p>

<p>
E.g., even Canon photo cameras can be talked to using PTP, which is
essentially a sort of serial protocol over USB.  (Canon have been 
entirely uncooperative, being essentially the NVidia / Broadcom of 
camera companies.)
</p>

<p>
You might want to start here:
<a href="http://www.gphoto.org/doc/manual/FAQ.html#FAQ-camera-support">http://www.gphoto.org/doc/manual/FAQ.html#FAQ-camera-support</a>
</p>

<p>
Motorola 'phones and Linux are something I've only just started
contemplating, having just bought a Motorola RAZR V3, myself -- which
turns out to itself use Linux + embedded Java + Qtopia Core, at least
reportedly.
</p>

<p>
KMobileTools looks promising, plus a number of the other bookmarks in
this collection:  <a href="http://del.icio.us/ll350/Razr">http://del.icio.us/ll350/Razr</a>   But I'll have to first
find a cable to connect to my RAZR V3's mini-USB connector, something
I've never seen before.  
</p>

<p>
I've been sort of out of the Tamagotchi-surrogate gadget market for a
while.  E.g., my last cellular 'phone was coal-fired.  (That's my story,
and I'm sticking to it.)
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_talkback.html#mb-talkback_133_tag_html">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b>Kapil Hari Paranjape [kapil at imsc.res.in]</b><br />
<b>Mon, 4 Dec 2006 16:59:17 +0530</b>
</p>

<p>
Hello,
</p>

<p>
On Mon, 04 Dec 2006, Rick Moen wrote:
</p>

<pre>
&gt; Quoting Vitaly Karasik (Vitaly.Karasik@Kayote.com):
&gt; 
&gt; &gt; Is there any common way to communicate with USB devices which aren't
&gt; &gt; mass storage - like Motorola mobile phones, some Canon photo cameras and
&gt; &gt; so on?
&gt; 
&gt; Motorola 'phones and Linux are something I've only just started
&gt; contemplating, having just bought a Motorola RAZR V3, myself -- which
&gt; turns out to itself use Linux + embedded Java + Qtopia Core, at least
&gt; reportedly.
</pre>

<p>
I just got a Razr V3 recently and had a number of difficulties with
setting it up using Linux. For what it is worth here are my
experiences. (Note that the V3i is an entirely different beast!)
</p>

<p>
1. The USB cable. This works with the recent(?) cdc-acm driver as a
serial device (/dev/ttyACM0 for me). It cannot be used as a
USB-storage device and mounted---worse luck.
</p>

<p>
        (a) It doesn't work too well with "gammu". It seems that
        Motorola changed the AT+Cxxx command sequence "a bit". What
        you <strong>can</strong> do is download the phonebook with "--backup" but
        this is only for local storage since re-upload fails.
</p>

<p>
        (b) "moto4lin" is a Qt-based program that works fine for
        editing the filesystem (up/down loading photos/music etc but
        not the phonebook!). It can also edit the "SEEM" which looks
        dangerous so I haven't tried it yet. You can also upload Java
        applications but I haven't done that either.
</p>

<p>
2. Bluetooth. This need a firmware upgrade (I was within the warranty
period when I asked for one so it was free) to R374_G_0E.42.10R_A (at
least; I noticed somewhere that _B,_C, etc are available). Even after
this it was not entirely smooth sailing.
</p>

<p>
	(a) Bluetooth connects with bluez-utils. It was a bit tricky for
	me (=command-line-type!). This needed a file
	/var/lib/bluetooth/&lt;local_address&gt;/pincodes containing
	entries like
		&lt;phone_address&gt; 12345678
	The 12345678 is the "initial shared secret" used between your phone
	and the computer. The file can be deleted after establishing
	a connection the first time.
</p>

<p>
	(b) "obexftp" and "obexfs" can be used to access all the
	audio/pictures/video that you create (but not the others; you
	need "moto4lin" for that). However, this leads to corrupt
	{down,up}loads. The situation was worse with a Mac that Sudeshna
	uses.
</p>

<p>
	(c) "obexpushd" and "ussp-push" are inherently less secure
	programs and are difficult to "batchify" but those are the
	ones that currently work for me to download and upload files
	without corruption.
</p>

<p>
	(d) "gammu" with "bluerfat" (which is AT commands over RFCOMM)
        work fine for the phonebook. This is because the phone seems
        to use standard AT+Cxxx commands over this interface---wierd
        that it doesn't over the cable! I am able to edit the phone
        book and even use my computer keyboard as a remote keyboard
        instead of the phone keyboard. Can't access multimedia data
        over this interface though.
</p>

<p>
3. Still to try (but will not try soon since I've already wasted two
weeks on this!).
</p>

<p>
	(a) Haven't yet tried to connect to the net using the phone.
	In principle, the difficulty here is not with the phone but
	with the service providers instructions---I still haven't
	managed to decode them---Indlish anyone?
</p>

<p>
	(b) Haven't yet tried to unlock the pre-installed "Web
	sessions". This can be done by editing the SEEM according to
	various web sites. It doesn't have to be done yet since I am
	able to edit everything except the name of these sessions.
	That is enough to use the phone browser to "browse the web".
</p>

<p>
	(c) Install Java applications and get them to work. I created
	some room by deleted all those keyboard damaging games that
	<strong>were</strong> installed but haven't got further than that.
</p>

<p>
	(d) Re-write "moto4lin" as a command-line program. Why should
	one need to use Qt for a task like this?
</p>

<p>
Hope this helps,
</p>

<p>
Kapil.
--
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_talkback.html#mb-talkback_133_tag_html">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b>Kapil Hari Paranjape [kapil at imsc.res.in]</b><br />
<b>Mon, 4 Dec 2006 20:58:57 +0530</b>
</p>

<p>
Hello,
</p>

<p>
On Mon, 04 Dec 2006, Kapil Hari Paranjape wrote:
</p>

<pre>
&gt; 1. The USB cable. This works with the recent(?) cdc-acm driver as a
&gt; serial device (/dev/ttyACM0 for me). It cannot be used as a
&gt; USB-storage device and mounted---worse luck.
&gt; 
&gt;         (a) It doesn't work too well with "gammu". It seems that
&gt;         Motorola changed the AT+Cxxx command sequence "a bit". What
&gt;         you <strong>can</strong> do is download the phonebook with "--backup" but
&gt;         this is only for local storage since re-upload fails.
</pre>

<p>
Oops. Apparently, this too was a bug with the firmware. The cited
experience with "gammu" was prior to firmware upgrade. Now "gammu"
works fine with the USB cable (for phonebook backup/recovery).
</p>

<p>
Regards,
</p>

<p>
Kapil.
--
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_talkback.html#mb-talkback_133_tag_html">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b>Benjamin A. Okopnik [ben at linuxgazette.net]</b><br />
<b>Mon, 4 Dec 2006 09:04:19 -0500</b>
</p>

<p>
Hi, Vitaly -
</p>

<p>
You're probably unaware of this, but you sent your message in
an HTML format. This doubled the size of your message without
any benefit in return, and will create extra work for our Mailbag
editor.
</p>

<p>
Please change your mailer's settings to stop it from doing this. For
more info, please see &lt;<a href="http://expita.com/nomime.html">http://expita.com/nomime.html</a>&gt;.
</p>

<p>
On Mon, Dec 04, 2006 at 10:30:41AM +0200, Vitaly Karasik wrote:
</p>

<pre>
&gt; 
&gt;    Hi,
&gt; 
&gt;    Is there any common way to communicate with USB devices which aren't mass
&gt;    storage - like Motorola mobile phones, some Canon photo cameras and so on?
</pre>

<p>
I used a Motorola phone for years as my main method of Net access; the
standard module that deals with USB modems such as my Nextel phone is
'cdc_acm'. Setting it up is fairly easy; most of the advice in the
article is still applicable, and the PPP setup is no big deal. Here's
the config from my '/etc/ppp/peers/cell':
</p>

<pre>
-detach		# I like to see the PPP messages on my xterm
noauth
connect "/usr/sbin/chat -v -f /etc/chatscripts/cell-hs"
# Turn off LCP negotiation!!!
local
# passive
crtscts
/dev/ttyACM0
57600
defaultroute
replacedefaultroute
noproxyarp
usepeerdns
</pre>
And here is '/etc/chatscripts/cell-hs':
</p>

<pre>
ATZ
OK ATQ0&amp;K3
OK ATDTS=2
</pre>
Not much to it.
</p>

<p>
As to cameras, most of them <em>are</em> treated as mass storage devices. I've
had a Minolta, a Canon, and an Olympus, and I'm able to mount any of
them (I no longer have the Minolta Dimage, but it worked fine when I did.) 
I do have to say, though, that I've never been able to get any of them
to work with 'gphoto' - not that I've tried very hard; I just mount
them and do whatever I need with the images.
</p>

<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_talkback.html#mb-talkback_133_tag_html">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b>Vitaly Karasik [Vitaly.Karasik at Kayote.com]</b><br />
<b>Mon, 4 Dec 2006 16:35:55 +0200</b>
</p>

<pre>
&gt; Hi, Vitaly -
&gt; 
&gt; You're probably unaware of this, but you sent your message in 
&gt; an HTML format. This doubled the size of your message without 
&gt; any benefit in return, and will create extra work for our 
&gt; Mailbag editor.
&gt; 
&gt; Please change your mailer's settings to stop it from doing 
&gt; this. For more info, please see &lt;<a href="http://expita.com/nomime.html">http://expita.com/nomime.html</a>&gt;.
</pre>

<p>
I know that HTML emails are bad thing, but I was under impression that I
(my Outlook)use RTF, not HTML format. Next time I'll send  old good
plain text email using "mail" :-|
Thanks!
Vitaly
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_talkback.html#mb-talkback_133_tag_html">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b>Kapil Hari Paranjape [kapil at imsc.res.in]</b><br />
<b>Tue, 5 Dec 2006 09:47:00 +0530</b>
</p>

<p>
Hello,
</p>

<p>
On Mon, 04 Dec 2006, Benjamin A. Okopnik wrote:
</p>

<pre>
&gt; I used a Motorola phone for years as my main method of Net access; the
&gt; standard module that deals with USB modems such as my Nextel phone is
&gt; 'cdc_acm'. Setting it up is fairly easy; most of the advice in the
&gt; article is still applicable, and the PPP setup is no big deal. Here's
&gt; the config from my '/etc/ppp/peers/cell':
</pre>

<p>
Ben inspired me to try out my own phone .. and .. it works with GPRS. I
followed the (clear and concise) instructions at:
</p>

<p>
	<a href="http://artm-friends.at/rm/bluetooth-gprs-suse10-RAZRv3-rm-HOWTO.txt">http://artm-friends.at/rm/bluetooth-gprs-suse10-RAZRv3-rm-HOWTO.txt</a>
	
Note that you usually need a username/password pair from your phone
service provider to actually use the connection.
</p>

<p>
I think GPRS is a bit faster than the serial connection but that may
be the effect of momentary exhuberance on my part.
</p>


<pre>
&gt; As to cameras, most of them <em>are</em> treated as mass storage devices. I've
&gt; had a Minolta, a Canon, and an Olympus, and I'm able to mount any of
&gt; them (I no longer have the Minolta Dimage, but it worked fine when I did.) 
&gt; I do have to say, though, that I've never been able to get any of them
&gt; to work with 'gphoto' - not that I've tried very hard; I just mount
&gt; them and do whatever I need with the images.
</pre>

<p>
Unfortunately, not all cameras present themselves as storage devices.
The VGA camera on my Motorola RAZR is one such. I haven't yet tried
it with "gphoto" though since "moto4lin" or "bluetooth+obex" works as
explained earlier.
</p>

<p>
Regards,
</p>

<p>
Kapil.
--
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_talkback.html#mb-talkback_133_tag_html">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b>Rick Moen [rick at linuxmafia.com]</b><br />
<b>Mon, 4 Dec 2006 01:09:27 -0800</b>
</p>

<p>
----- Forwarded message from Vitaly Karasik &lt;Vitaly.Karasik@Kayote.com&gt; -----
</p>

<pre>
Date: Mon, 4 Dec 2006 11:04:20 +0200
From: Vitaly Karasik &lt;Vitaly.Karasik@Kayote.com&gt;
To: Rick Moen &lt;rick@linuxmafia.com&gt;
Subject: RE: [TAG] Talkback:133/tag.html (The Monthly Troubleshooter: The USB Subsystem)
</pre>
Thanks!
Vitaly 
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_talkback.html#mb-talkback_133_tag_html">Back</a><hr width="50%" align="left" /><p><br /></p></div>
</body>
</html>

<html>
<head>
<link href="../../../lg.css" rel="stylesheet" type="text/css" media="screen,
projection"  />
<link rel="shortcut icon" href="../favicon.ico" />
<title>Regex: Be Careful!</title>

<style type="text/css" media="screen, projection">
<!--


.articlecontent {
	position:absolute;
	top:143px;
}


-->
</style>
</head>

<body>

<img src="../../../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" alt="Linux
Gazette"/>
<p id="fun">...making Linux just a little more fun!</p>

<div class="content articlecontent">

<h2>Regex: Be Careful!</h2>

<p> Beyond shell-type globs, I'd never had much need for regex. So using
RSSscrape was a new experience for me. 

<p> I picked <a href="http://okopnik.freeshell.org/blog/blog.cgi">Ben's 
blog</a>, mainly because I knew it didn't have a feed. So, I adapted the
sample scraper, and after one false start - I was missing a space - I had a 
working scraper. Yay me, etc!

<p> I decided to have another go. I came across <a #
href="http://www.fotopic.net/">fotopic.net</a> and decided that it was a much
simpler example. So, I looked for a collection, and found pictures from
<a href="http://gallery.bofhcam.org/c29972.html">LinuxUser Expo 2003</a>,
courtesy of <a href="http://www.bofhcam.org">BOFHcam</a>, which I remembered
from college, and thought it was perfect.

<p> This site has a fairly simple layout:

<pre class="code">
&lt;td width=25% class="thumbs"&gt;
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;a href="/p691254.html"&gt;&lt;img src="http://193.0.234.78/254000000691.jpg" width=150 height=112 class="thumbs"&gt;&lt;/a&gt;&lt;br/&gt;
&lt;div class="thumbs-description"&gt;Worryingly, the nurse gets her hand stuck to the vent&lt;/div&gt;&lt;div class="thumbs-metrics"&gt;1600x1200&lt;/div&gt;&amp;nbsp;
&lt;a href="javascript:addcart(691254,'P',1892);"&gt;Buy&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;

&lt;tr class="thumbs"&gt;

&lt;td width=25% class="thumbs"&gt;
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;a href="/p691255.html"&gt;&lt;img src="http://193.0.234.78/255000000691.jpg" width=112 height=150 class="thumbs"&gt;&lt;/a&gt;&lt;br/&gt;
&lt;div class="thumbs-description"&gt;Tired from her ordeal, the nurse rests&lt;/div&gt;&lt;div class="thumbs-metrics"&gt;1200x1600&lt;/div&gt;&amp;nbsp;
&lt;a href="javascript:addcart(691255,'P',1892);"&gt;Buy&lt;/a&gt;&lt;/td&gt;

&lt;td width=25% class="thumbs"&gt;<br>
</pre>

<p> I thought everything was great. I ran the scraper, looked at the RSS it
generated, and cheered. Then I decided to look at it in Liferea.

<img src="expo-broken.png" alt="View of broken RSS">

<p> Hmm. Something was wrong with my scraper. I looked at the RSS again, to 
make sure it came out OK. Then, I looked at the scraper. I checked the regex,
checked the HTML. I checked that special characters were escaped, that the 
missing lines had the same amount of tabs - everything looked the same.

<p> Until it slowly dawned on me that though the <tt>width</tt> and 
<tt>height</tt> attributes had the same values in each line, in some they were
switched. D'oh! One quick fix later, and I had the correct results:

<img src="expo-fixed.png" alt="View of fixed RSS">

<div id="articlefooter">

<p>
Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
</p>

<p>
Published in Issue 105 of Linux Gazette, August 2004
</p>

</div>

</div>

<div id="navigation">

<a href="../../../index.html">Home</a>
<a href="../../../faq/index.html">FAQ</a>
<a href="../../../lg_index.html">Site Map</a>
<a href="../../../mirrors.html">Mirrors</a>

<a href="../../../mirrors.html">Translations</a>
<a href="../../../search.html">Search</a>
<a href="../../../archives.html">Archives</a>
<a href="../../../authors/index.html">Authors</a>
<a href="../../../contact.html">Contact Us</a>

</div>



<div id="breadcrumbs">

<a href="../../../index.html">Home</a> &gt;
<a href="../../index.html">August 2004 (#105)</a> &gt; Article

</div>

<img src="../../../gx/2003/sit3-shine.7-2.gif" id="tux" alt="Tux"/>

</body>
</html>

<!--startcut  ==============================================-->
<!-- *** BEGIN HTML header *** -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML><HEAD>
<META NAME="generator" CONTENT="lgazmail v1.4G.i">
<TITLE>The Answer Gang 92: Redhat 7.2 upgrade to Redhat 9.1 without booting from a disk</TITLE>
</HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#0000AF"
ALINK="#FF0000">
<!-- *** END HTML header *** -->
<!--endcut  ==============================================-->
<!-- begin 4 -->
<H3 align="left"><img src="../../gx/dennis/qbubble.gif" 
	height="50" width="60" alt="(?) " border="0"
	>Redhat 7.2 upgrade to Redhat 9.1 without booting from a disk</H3>


<p><strong>From Nick Pringle 
</strong></p> 
<p></strong></p>

<p align="right"><strong>Answered By  Thomas Adam, Faber Fedor, Dan Wilder, Heather Stern, Ben Okopnik
</strong></p>
<P><STRONG>
<IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
Hi
</STRONG></P>
<P><STRONG>
I rent a Redhat 7.2 system installed on a host machine 'in a galaxy far,
far away'. I want to upgrade to Redhat 9.1 but cannot follow the
prescribe route because I cannot boot from floppy or cd the way Redhat
say to do the upgrade. I can, however, always boot from an emergency ram
disk and then mount the real system to work on it. When booted via this
emergency RAM disk I have full net access and have ftp access to all the
Redhat CDs etc. Is there any way of running the upgrade procedure
'manually'?
</STRONG></P>
<P><STRONG>
Regards
Nick Pringle
</STRONG></P>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Thomas] 
How do you mean by installing it "manually"? The RH installer allows you
the choice of doing either http/ftp/cdrom install, depending on what you
choose.
</blockQuote>
<blockQuote>
Are you trying to say then, that you want to only upgrade certain packages
on your system (N.B. This is not a good idea, since as this is a higher
version than the version currently on your system, trying to upgrade
certain packages leads to "dependency hell"). Cf:
</blockQuote>
<blockQuote><BLOCKQuote>
<A HREF="../..//issue71/tag/3.html"
	>http://linuxgazette.net/issue71/tag/3.html</A>
</BLOCKQuote></blockQuote>
<blockQuote>
Could you try and provide more details.
Thanks.
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Faber] 
That's the problem he has, Thomas.  The box is "far far away" and he
can't just "put in the CD, boot the machine, and choose http/ftp/cdrom"
after selecting his language mouse and keyboard.  He isn't at the
machine.
</blockQuote>
<blockQuote>
So he ants to know if he can manually start the installation process,
i.e. not reboot the machine.
</blockQuote>
<blockQuote>
It's a good question and I haven't found a solution yet.
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Dan] 
Maybe he shoulda used <A HREF="http://www.debian.org/">Debian</A>.
</blockQuote>
<blockQuote>
I routinely upgrade Debian systems one major release level via
an ssh login.  So far not "far far away", but without touching the
box being upgraded, yes.  At one point I upgraded a running web
server this way, with only a fifteen minute interruption to
its services.
</blockQuote>
<blockQuote>
Which proves such a thing can be done.  Now whether other
distributions allow for it ...
</blockQuote>

<blockquote><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Heather] I am a lot more careful about letting debian do its automagical thing if
I know I can't get over to that machine and whack it one.  There have
been a few times in my life, when playing with Debian's idea of the
leading edge, I took too careless a leap and added that "b" noise to
the word.  Ouchie.
</blockquote>
<blockquote>Essentially, I use a curses-mode selector such as aptitude.  I update,
and I pick some very basic stuff to make sure the raw parts are
<EM>definitely</EM> grabbed first.  This generally means dpkg, debconf and its
related parts - libc and things having to do with login, such as the
shell, pam, and so on.   All in all I've usually done 4 or 5 small sets
of critical utilities (not always members of "base" - sometimes in
admin, or related to the actual purpose of the system).  Before anything
whose improper behavior would give me the willies, I use dpkg-repack to
save an instance of its current bits before I allow it to upgrade. Yeah,
I bail out of the selector a lot.  But when I finally am happy with how
perl settled in, I won't need to worry about the rest of it.
</blockquote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Ben] 
1) Install the system on a local machine; configure and tweak.
</blockQuote>
<blockQuote>
2) Copy everything across (FTP or whatever) to a new partition on the
remote machine.
</blockQuote>
<blockQuote>
3) Carefully adjust the remote "lilo.conf" to boot the new
"installation" on the next reboot.
</blockQuote>
<blockQuote>
Anybody see a problem with this scenario? Sure, some stuff is going to
require tweaking afterwards - but that's true of any new install.
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Dan] 
Sure sounds a lot like the safest upgrade procedure for what's still,
for quirky reasons, my favorite distribution ... <A HREF="http://www.slackware.org/">Slackware</A>.
</blockQuote>
<blockQuote>
It'd be nice if the ever-so-much featureful RH could do better.
</blockQuote>
<HR width="10%" align="left"><P><STRONG>
<IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
Hi. Thanks for the prompt reply.
</STRONG></P>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Thomas] 
All part of the service, sir!
</blockQuote>
<P><STRONG>
<IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
I recently upgraded the machine in my office from Redhat Linux 7.2 to
Redhat 9.1. No trouble. I just booted from the CD, click the options in
graphics mode and did the upgrade. 
<IMG SRC="../../gx/dennis/smily.gif" ALT=":-)" 
		height="24" width="20" align="middle"> So I've been through the process
on a PC I can touch.
</STRONG></P>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Thomas] 
Yep, installers are becoming easier and easier. I am sure people like Jim
Dennis and Ben Okopnik (resident on this list) will remember the days of
black and white, and having to use the "friendly" program fdisk 
<IMG SRC="../../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle"> 
<IMG SRC="../../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
</blockQuote>
<P><STRONG>
<IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
But I am trying out a hosting package provided by a company called
Oneandone. It's a very attractive solution because they have fast
access, I won't have to use a machine and UPS of my own and they are
cheap! It's $50 a month. It's on www.oneandone.co.uk as a Root Server 1.
I live in Britain,
</STRONG></P>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Thomas] 
Well, well, well. I live in England too 
<IMG SRC="../../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle"> Small world, eh? I have heard
of oneandone, but never really looked any further, until now 
<IMG SRC="../../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
</blockQuote>
<P><STRONG>
<IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
I think the machine might be in Germany but I'm not
actually sure. I don't know what sort or hardware they run but I am
simply unable to detect if it is virtual in any way. Even the hardware
reporting at boot time says it is a real machine. I imagine they have
racks of tiny machines with only processor, memory, Realtek netcard and
a hard disk.
</STRONG></P>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Thomas] 
A reasonable assumption.
</blockQuote>
<P><STRONG>
<IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
I get Redhat Linux 7.2 installed but very limited support! When I point
out to them that Redhat 7.2 becomes obsolete in November they agree it
will but cannot upgrade my Server package. To use the service I really
need to know I can upgrade at some time.
</STRONG></P>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
Hmm, I am going to be picky here and say that NO Linux distibution becomes
obsolete. Yes, some of the programs will be at a lower version number than
some more recent ones, but as long as it <EM>works</EM> and does what you want it
to do -- there is no reason to upgrade at all. That is perhaps the selling
point of Linux for me over Microsoft --- you don't, nor are you forced to
upgrade. If it works, keep it. Heck, I know some people who are still
running kernel 1.x.x 
<IMG SRC="../../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
</blockQuote>

<blockquote><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Heather] I'll have to agree;  I've safely let systems lay with only the important
service ever being updated, behind a nice little firewall whose kernel is
updated more often.
</blockquote>
<P><STRONG>
<IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
I am truly remote. I ONLY have SSH access. I cannot boot from anything
other than the hard disk of the remote machine. When I upgraded my local
machine in the office I booted with the Redhat CD1 on my local CD drive.
As far as I can see Redhat upgrade requires you to <EM>BOOT</EM> from either a
floppy or CD. If I could boot from the CD I know I could choose
ftp/cd/or local hard disk but I cannot do the very first step.
</STRONG></P>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Thomas] 
I see your problem 
<IMG SRC="../../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle"> If you have SSH support, then what I would be
inclined to do is <EM>try</EM> and run a program called "up2date", like so:
</blockQuote>

<blockquote><pre>up2date -u
</pre></blockquote>
<blockQuote>
essentially this locates a RH server and updates old packages that you
have on your current remote system with newer ones. It does not though
perform a dist-upgrade. I suppose that you could look at "up2date" as a
very childlike form of Debian's "apt-get".
</blockQuote>
<blockQuote>
So, this is a half-way solution to your problem.
</blockQuote>
<blockQuote>
Another, perhaps more direct approach is to use the utility "wget"
download the ".iso" files, and mount them on a loopback, such that you can
then issue:
</blockQuote>

<blockquote><pre>rpm -ivh *.rpm
</pre></blockquote>
<P><STRONG>
<IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
Sorry to drag it on a bit but I hope the above clarifies the situation.
</STRONG></P>
<P><STRONG>
If you haven't lost the will to live by now thank you very much for
listening.
</STRONG></P>
<P><STRONG>
Incidentally I agree that partial upgrades and going through each of the
RPMs one at a time will result in "dependency hell" which is why I need
a 3rd route.
</STRONG></P>

<blockquote><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Heather] There you have it folks; if anyone has had their own successes in such
distant climes, maybe you'd like to write us an article someday soon?
</blockquote>

<!-- end 4 -->

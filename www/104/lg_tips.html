
<html>
<head>
<link href="../lg.css" rel="stylesheet" type="text/css" media="screen, projection"  />
<link rel="shortcut icon" href="../favicon.ico" />
<title>More 2 Cent Tips! LG #104</title>

<style type="text/css" media="screen, projection">
<!--

-->
</style>

<link rel="alternate" type="application/rss+xml" title="LG RSS" href="lg.rss" />
<link rel="alternate" type="application/rdf+xml" title="LG RDF" href="lg.rdf" />
<link rel="alternate" type="application/atom+xml" title="LG Atom" href="lg.atom.xml" />

</head>

<body>


<img src="../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" alt="Linux Gazette"/>
<p id="fun">...making Linux just a little more fun!</p>


<div class="content articlecontent">

<div id="previousnexttop">
<A HREF="lg_mail.html" >&lt;-- prev</A> | <A HREF="lg_answer.html" >next --&gt;</A>
</div>



<h1>More 2 Cent Tips!</h1>

<p>
<center><STRONG>See also: The Answer Gang's 
<a href="../tag/kb.html">Knowledge Base</a>
and the <i>LG</i> 
<a href="http://www.linuxgazette.net/search.html">Search Engine</a></STRONG>
</center><HR>
<UL>
<!-- index_text begins -->
<li><A HREF="#tips.1"
	><strong>a question about linker script</strong></a>
<li><A HREF="#tips.2"
	><strong>Launching Firefox 0.9</strong></a>
<li><A HREF="#tips.3"
	><strong>Checkinstall</strong></a>
<li><A HREF="#tips.4"
	><strong>Periodic table of the operators</strong></a>
<li><A HREF="#tips.5"
	><strong>"Remote" authentication with PHP</strong></a>
<li><A HREF="#tips.6"
	><strong>Xserver spits Xclient hosts</strong></a>
<li><A HREF="#tips.7"
	><strong>Fun game in 64 LoC</strong></a>
<li><A HREF="#tips.8"
	><strong>Grokdoc</strong></a>
<!-- index_text ends -->
</UL>
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.1"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">a question about linker script</FONT></H3>
Ben Okopnik, Jimmy O'Regan, Philip O Brien (<a href="mailto:tag@lists.linuxgazette.net?cc=helo54ljm@yahoo.com.tw&cc=tag@lists.linuxgazette.net&subject=%20Re%3A%20%5BLG%20104%5D%202c%20Tips%20%231">The <em>LG</em> Answer Gang</a>)
<BR>Question by Liang Jun-Ming (helo54ljm from yahoo.com.tw)

<P>
Dear Mr.Okopnik
</P>
<P>
My name is Liang Jun-Ming,a student from Taiwan.
</P>
<P>
I'm suffering from a programming problem,I would very much
appreciate receving an answer from you !
I wrote a testing program named hello.s , and a linker script named
ldscript as follows:
</P>
<p align="center">See attached <tt><a href="misc/tips/liong.hello.s.asm.txt">liong.hello.s.asm.txt</a></tt></p>
<P>
after " as hello.s -o hello.o" and "ld -Tldscript hello.o -o hello"
I get an executable named hello.
</P>
<P>
My question is:
</P>
<P><BLOCKQuote>
What does "AT(0x3000000)" mean ?
</BLOCKQuote></P>
<P>
Does it mean that the loader will load this executable at
"physical address " 0x3000000 ?
</P>
<P>
I know the "virtual address" of the first byte of this executable
would be 0x1000, but in Linux , can we put data at any physical
address as we wish ? If it does, why the program still works even if the RAM
is 32M in my PC ?(0x3000000 &gt; 32M). What tool in Linux can we have to
let us "watch" the contents of memory by specifying "physical addresses"?
If it doesn't, what is the function when we write "AT(xxxx)" ?
Hope I can receive an answer when you are not busy. Thank you very much!
</P>
<BLOCKQUOTE>
[Ben] 
Hi, Jun-Ming -
</BLOCKQUOTE>
<BLOCKQUOTE>
I'm afraid your question is somewhat misdirected: I'm not an assembly
expert, under Linux or otherwise. My suggestion to you would be to start
at <A HREF="http://linuxassembly.org"
	>http://linuxassembly.org</A> and go from there - their front page
reads
</BLOCKQUOTE>

<TABLE WIDTH="95%" BORDER="1" BGCOLOR="#FFFFCC"><TR><TD>
<p align="center">...............</p>
<BLOCKQUOTE>
Welcome to the Linux Assembly!
</BLOCKQUOTE>
<BLOCKQUOTE>
If you are looking for information on assembly programming under
UNIX-like operating systems (Linux/BSD/ BeOS/etc), this is the right
place to be. Here you can find various resources, ranging from tutorials
and documentation, to actual programs written in assembly language. As
time passes, we will try to provide as much information on the subject
as possible, so stay tuned.
</BLOCKQUOTE><p align="center">...............</p>
</TD></TR></TABLE>
<BLOCKQUOTE>
That seems like the right place for your query.
</BLOCKQUOTE>
<BLOCKQUOTE>
[Jimmy O'Regan] 
The <TT> AT()</TT> keyword is for things like ROMs. I recommend you read the GNU Linker manual:
</BLOCKQUOTE>
<BLOCKQUOTE><BLOCKQuote>
<A HREF="http://www.gnu.org/software/binutils/manual/ld-2.9.1/html_chapter/ld_3.html#SEC21"
	>http://www.gnu.org/software/binutils/manual/ld-2.9.1/html_chapter/ld_3.html#SEC21</A>
</BLOCKQuote></BLOCKQUOTE>
<P><STRONG>
Dear Answer Gang:
</STRONG></P>
<P><STRONG><BLOCKQuote>
According to the GNU linker ld manual:
</BLOCKQuote></STRONG></P>
<P><STRONG>
the <TT> AT()</TT> keywod specifies the load address of a section,
and it says "this feature is designed to make it easy to build a ROM image..."
</STRONG></P>
<P><STRONG>
Query,
</STRONG></P>

<p><Strong><ol>
<LI>the address specified by AT() keyword to load is the "physical address"
of ROM ? and we can really put code in ROM in this way ?

<LI>the "ROM" the document mentioned is the actual element in board, or
just RAM of imitating the Read-Only-Memory ?
</ol></Strong></p>
<P><STRONG>
( forgive me for a Chinese student's poor English !)
</STRONG></P>
<BLOCKQUOTE>
[Jimmy] 
The <TT> AT()</TT> keyword can be used for ROMs - if you want to write a
replacement BIOS (such as Linux BIOS: <A HREF="http://www.linuxbios.org"
	>http://www.linuxbios.org</A>), you
will have to do use the <TT> AT()</TT> keyword; or if you are creating a ROM
images for later use in an emulator, or to write to a physical ROM.
</BLOCKQUOTE>
<BLOCKQUOTE>
You can also use the <TT> AT()</TT> keyword for boot loaders/kernels, which need
to be at a specific location in RAM to be executed; and in a normal
program. If the program has a specified load address, and is loaded on
an MMU-less system, or in an OS which doesn't use the MMU, then you get
access to that specific area of memory, but in an OS (such as Linux)
which makes use of the MMU, the address is transparently remapped to an
address within the space allocated to your program by the kernel.
</BLOCKQUOTE>

<blockquote><font color="#000066">Jimmy also asked a friend...
 -- Heather</font></blockquote>
<BLOCKQUOTE>
[Jimmy] 
Sorry about the format this takes; I asked a friend from college if he
could answer the linker script question, the answer is in the attached
IRC log. There's a lot of overview in there which I thought was
interesting. Philip's credentials are that he wrote an operating system
for his degree thesis, based on KeyOS (<A HREF="http://keyos.sourceforge.net"
	>http://keyos.sourceforge.net</A>),
to which he contributed code under a pseudonym (the college made some
claims about copyright...).
</BLOCKQUOTE>

<blockquote><font color="#000066">Logged from the
<a href="http://www.undernet.org/">UnderNet IRC</a>
on Jun 20.<br>
 -- Heather</font></blockquote>

<TABLE WIDTH="95%" BORDER="1" BGCOLOR="#FFFFCC"><TR><TD>
<p align="center">...............</p>

<blockquote><code><font color="#000033"><br>&lt;JimRegan&gt;	So, can you answer that question?
<br>&lt;JimRegan&gt;	Cos noone at LG can.
</font></code></blockquote>

<blockquote><em><font color="#000033"><br>&lt;Crypty&gt;	question?
</font></em></blockquote>

<blockquote><code><font color="#000033"><br>&lt;JimRegan&gt;	In the html file I sent
</font></code></blockquote>

<blockquote><em><font color="#000033"><br>&lt;Crypty&gt;	its the offset that that section is loaded at.
<br>&lt;Crypty&gt;	the offset from the loadaddr
</font></em></blockquote>

<blockquote><code><font color="#000033"><br>&lt;JimRegan&gt;	?
</font></code></blockquote>

<blockquote><em><font color="#000033"><br>&lt;Crypty&gt;	and the 0x1000 is the size of the section if i remember correctly
<br>&lt;Crypty&gt;	or at least i think thats it.
<br>&lt;Crypty&gt;	had to figure it out for writing my boot loader, which i couldnt get to work right, caused fatal exception when it switched to ring 0 to enter PMODE.....
<br>&lt;Crypty&gt;	ended up having to use Grub, but handed up my effort to the examiners, they were impressed i got it to ge tthat faer.
</font></em></blockquote>

<blockquote><code><font color="#000033"><br>&lt;JimRegan&gt;	So... in a ROM, it'd go from the beginning of memory, otherwise it's relative to where it loaded
<br>&lt;JimRegan&gt;	If the ROM is loaded at 0
</font></code></blockquote>

<blockquote><em><font color="#000033"><br>&lt;Crypty&gt;	.text is actually the code by the way, not the strings.
<br>&lt;Crypty&gt;	and yes, but all programs see their address as 0, but the OS handles their requests for memory locations and adds their offset in the memory manager
</font></em></blockquote>

<blockquote><code><font color="#000033"><br>&lt;JimRegan&gt;	The strings go in .data
</font></code></blockquote>

<blockquote><em><font color="#000033"><br>&lt;Crypty&gt;	yes
<br>&lt;Crypty&gt;	the code is put in a large offset to avoid overflows causing mistooks in the code.
</font></em></blockquote>

<blockquote><code><font color="#000033"><br>&lt;JimRegan&gt;	So it's not necessary to specify the location, unless you have some weird backwards compatibility problem, or are writing an OS?
</font></code></blockquote>

<blockquote><em><font color="#000033"><br>&lt;Crypty&gt;	but the OS can preempt this and actually fool the program by pretending it loaded the code at that offset and translating the addresses on the fly
<br>&lt;Crypty&gt;	well, it is also to specify locations in writing an OS or other "pure application"
</font></em></blockquote>

<blockquote><code><font color="#000033"><br>&lt;JimRegan&gt;	So, in short, you can't just put code wherever the heck you want in a modern OS?
</font></code></blockquote>

<blockquote><em><font color="#000033"><br>&lt;Crypty&gt;	but a decent OS will just ignore the offsets and pretend instead
<br>&lt;Crypty&gt;	no, the OS itself has to obey the offset rules, as the memory manager will not be loaded at that point.
</font></em></blockquote>

<blockquote><code><font color="#000033"><br>&lt;JimRegan&gt;	I mean if that's executed in a running OS.
</font></code></blockquote>

<blockquote><em><font color="#000033"><br>&lt;Crypty&gt;	so it cant pretent and every thing is relying on exact offsets for a form of crude task switching.
<br>&lt;Crypty&gt;	oh, yes.
</font></em></blockquote>

<blockquote><code><font color="#000033"><br>&lt;JimRegan&gt;	Like the MacOS did?
</font></code></blockquote>

<blockquote><em><font color="#000033"><br>&lt;Crypty&gt;	but even without a ld script, it should still use a default set of offsets for linking, depending on ythe executable format, coff, elf, bin etc..
</font></em></blockquote>

<blockquote><code><font color="#000033"><br>&lt;JimRegan&gt;	OK, I think that'll answer the question. Do I have your formal permission to send this for potential publication?
</font></code></blockquote>

<blockquote><em><font color="#000033"><br>&lt;Crypty&gt;	the offsets are set by default on set types of exe, so that the os can just go , heh I know this type, and not have to search for markers in the code etc.
<br>&lt;Crypty&gt;	no, hehe I better read up and make sure its right first.. its been over a year.
</font></em></blockquote>

<blockquote><code><font color="#000033"><br>&lt;JimRegan&gt;	Ah. Cool.
<br>&lt;JimRegan&gt;	Well, what you've said makes what I read in the LD manual make sense.
</font></code></blockquote>

<blockquote><em><font color="#000033"><br>&lt;Crypty&gt;	oh well in that cvase.. sure.. just dont sign my name to it, klast thing i need is people with questions :-) or worse some git flaming me for not getting it quite right.
</font></em></blockquote>

<blockquote><code><font color="#000033"><br>&lt;JimRegan&gt;	AT ( ldadr )
<br>&lt;JimRegan&gt;	    The expression ldadr that follows the AT keyword specifies the load address of the section. The default (if you do not use the AT keyword) is to make the load address the same as the relocation address. This feature is designed to make it easy to build a ROM image. For example, this SECTIONS definition creates two output sections: one called `.text', which starts at 0x1000, and one called `.mdata', w
<br>&lt;JimRegan&gt;	hich is loaded at the end of the `.text' section even though its relocation address is 0x2000. The symbol _data is defined with the value 0x2000:
</font></code></blockquote>

<blockquote><em><font color="#000033"><br>&lt;Crypty&gt;	but that said I think i got it right, been a while but I think i remember it right
<br>&lt;Crypty&gt;	oh, good I did remember it right.. yeah, go me!
</font></em></blockquote>

<blockquote><code><font color="#000033"><br>&lt;JimRegan&gt;	So, do I get a definite OK now?
</font></code></blockquote>

<blockquote><em><font color="#000033"><br>&lt;Crypty&gt;	hehe I am still one of the knigits of ye olde ASM coding :-)
<br>&lt;Crypty&gt;	yeah sure.
</font></em></blockquote>

<blockquote><code><font color="#000033"><br>&lt;JimRegan&gt;	Thanks.
</font></code></blockquote>

<blockquote><em><font color="#000033"><br>&lt;Crypty&gt;	you can tell me if some one flames you for getting it slightly skew ways,
<br>&lt;Crypty&gt;	but it is a good enough explainatin to the question i think
</font></em></blockquote>

<blockquote><code><font color="#000033"><br>&lt;JimRegan&gt;	Nah. People are generally polite in pointing out mistakes.
<br>&lt;JimRegan&gt;	God knows I've made enough of them.
</font></code></blockquote>

<blockquote><em><font color="#000033"><br>&lt;Crypty&gt;	AT()  is definitly the offset it gets loaded at and the x1000 is the size of the section, they are seperate in that one specifies properties of the process after its loaded and one specifies properties of the EXE.
</font></em></blockquote>
<p align="center">...............</p>
</TD></TR></TABLE>
<!-- end 1 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.2"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">Launching Firefox 0.9</FONT></H3>
Raj Shekhar (<a href="mailto:tag@lists.linuxgazette.net?cc=rajshekhar@hotpop.com&subject=%20Re%3A%20%5BLG%20104%5D%202c%20Tips%20%232">rajshekhar from hotpop.com</a>)


<P><STRONG>
Hello
</STRONG></P>
<P><STRONG>
I had used the following script for launching Firefox (earlier named
firebird)  (See my article Mozilla Firebird - A review
(<A HREF="http://linuxgazette.net/issue97/shekhar.html"
	>http://linuxgazette.net/issue97/shekhar.html</A>) to see how you can use this).
</STRONG></P>

<pre><strong>#!/bin/sh
/usr/lib/mozilla-firebird/MozillaFirebird  -remote "openURL('$@', new-tab)" ||
exec /usr/lib/mozilla-firebird/MozillaFirebird "$@";
</strong></pre>
<P><STRONG>
However, with the 0.9 release (the latest one, which is even more slick
and fast), this stopped working. Instead of launching the new tab, the
Profile Manager UI pops up. This was reported as bug
<A HREF="http://bugzilla.mozilla.org/show_bug.cgi?id=246168"
	>http://bugzilla.mozilla.org/show_bug.cgi?id=246168</A> in the Mozilla Bugzilla.
</STRONG></P>
<P><STRONG>
The reason for this is the change in the format of calling the remote
command. The new way of doing this is:
</STRONG></P>

<pre><strong>firefox -a firefox -remote openURL(&lt;url&gt;,new-tab)
</strong></pre>
<P><STRONG>
Note that there should be no space between the the comma and the command
after the url (new-tab in this case, you can also use new-window to
start a new window) or you get a  "Error: Failed to send command: 509
internal error".
</STRONG></P>
<P><STRONG>
So the script to launch firefox becomes
</STRONG></P>

<pre><strong>#!/bin/sh
/usr/lib/firefox/firefox -a firefox  -remote "openURL("$@",new-tab)" ||
exec /usr/lib/firefox/firefox "$@";
</strong></pre>
<BLOCKQUOTE>
[Ben] 
I just had the same problem with the new Mozilla upgrade; the trouble is
in the brain-dead URL parser at the end of the wrapper script. Although
I fixed it, it very quickly became useless: I downloaded Mozilla 1.7 from
<A HREF="http://mozilla.org"
	>http://mozilla.org</A>, and its wrapper script works fine.
</BLOCKQUOTE>
<BLOCKQUOTE>
Oh, and since you brought this issue up: just yesterday, I was reading
about Mozilla's "remote" methods in order to fix the above problem - and
still forgot, completely, that there's a "native" way to test if Mozilla
is running or not.
</BLOCKQUOTE>
<BLOCKQUOTE>
Wonder if I can trade this brain in for a newer model?
</BLOCKQUOTE>

<blockquote><pre>mozilla -remote "ping()" 2&gt;/dev/null &amp;&amp; mozilla -remote "openurl($1,new-window)" || mozilla $1
</pre></blockquote>

<!-- end 2 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.3"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">Checkinstall</FONT></H3>
Neil Youngman (<a href="mailto:tag@lists.linuxgazette.net?cc=neil.youngman@wirefast.com&subject=%20Re%3A%20%5BLG%20104%5D%202c%20Tips%20%233">neil.youngman from wirefast.com</a>)


<P><STRONG>
This one courtesy of LWN. You want to build a package from the latest
source, but have it managed by your favourite package manager.
Checkinstall claims to automate the process for <A HREF="http://www.debian.org/">Debian</A> (presumably any
system using dpkg?), <A HREF="http://www.slackware.org/">Slackware</A> and RPM based systems. I gotta have it

<IMG SRC="../gx/dennis/smily.gif" ALT=";-)" 
		height="24" width="20" align="middle">
</STRONG></P>
<P><STRONG>
<A HREF="http://checkinstall.izto.org"
	>http://checkinstall.izto.org</A>
</STRONG></P>
<P><STRONG>
Publication by LWN is hereby permitted
</STRONG></P>
<BLOCKQUOTE>
[Thomas] 
I have used both, and my personal preference would be the use of
<a href="http://www.gnu.org/software/stow/">stow</a>
over checkinstall. 
<IMG SRC="../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
</BLOCKQUOTE>

<blockquote><font color="#000066">Typing stow as a keyword into the search box at freshmeat.net also
reveals some interesting competitors, and a front end for stow.
</font></blockquote>
<blockquote><font color="#000066">Also, Allan Peda had an article on this topic in Issue 75,
<a href="http://linuxgazette.net/issue75/peda.html">Simple Package Management With Stow</a>
 -- Heather</font></blockquote>

<!-- end 3 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.4"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">Periodic table of the operators</FONT></H3>
Jimmy O'Regan (<a href="mailto:tag@lists.linuxgazette.net?cc=jimregan@o2.ie&subject=%20Re%3A%20%5BLG%20104%5D%202c%20Tips%20%234">The <em>LG</em> Answer Gang</a>)


<P><STRONG>
One for Ben: a periodic table of Perl 6's operators.
</STRONG></P>
<P><STRONG>
<A HREF="http://www.ozonehouse.com/mark/blog/code/PeriodicTable.html"
	>http://www.ozonehouse.com/mark/blog/code/PeriodicTable.html</A>
</STRONG></P>
<BLOCKQUOTE>
[Ben] 
"Today, we're going to learn about one of the varieties of serious
mental disturbance. Here, for example, is a distinctly pathological
case..." 
<IMG SRC="../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
</BLOCKQUOTE>
<BLOCKQUOTE>
It's got some amount of cuteness to it, but I think you'd have to be a
bit obsessed to actually do the thing up. Reminds me of an <EM>excellent</EM>
model of the Titanic, about 8' long IIRC, built out of matchsticks - all
the way down to the deck chairs and the oars in the lifeboats - that I
saw at an exhibition of artworks done by mental patients. Much of the
work was incredible, brilliant, and unrepeatable in many cases - and the
stories (such as that of a woman who made these shockingly beautiful
patterns from threads she'd pluck out of rags... and almost all of whose
work had been thrown away because it was just "trash" made by "crazy
Nancy") would break your heart.
</BLOCKQUOTE>

<!-- end 4 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.5"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">"Remote" authentication with PHP</FONT></H3>
Lew Pitcher (<a href="mailto:tag@lists.linuxgazette.net?cc=lpitcher@sympatico.ca&subject=%20Re%3A%20%5BLG%20104%5D%202c%20Tips%20%235">lpitcher from sympatico.ca</a>)


<P><STRONG>
Hi Guys
</STRONG></P>
<P><STRONG>
Here's another contribution. Hopefully, you can publish it as a 'two cent tip'
</STRONG></P>
<HR width="10%" align="center"><P><STRONG>
As part of a PHP web app I'm playing with, I needed to authenticate the web
client user with a remote system. Unfortunately, this system is a mainframe
and setting up a web-enabled authentication product on it is somewhat
timeconsuming and requires a lot of administrivia. I wanted to avoid all
that, so I had to come up with another way to authenticate web users
remotely.
</STRONG></P>
<P><STRONG>
The one TCP/IP networked app our mainframe has available is FTP. Now, the FTP
protocol implements security processes with the 'USER' and 'PASS'word
commands, and our host security people have ensured that the host FTP server
requires these two functions. In our case, the 'USER' and 'PASS' functions on
the server interface with the ACF2 security system to validate that the given
userid and password combination are correct, and will not let an FTP
connection in if they aren't.
</STRONG></P>
<P><STRONG>
I use this little tidbit of information to let me authenticate web users of my
Linux box by forcing their web browsers to pop up the Authentication panel,
and sending their entered userid and password information to the host in an
FTP 'USER' and 'PASS'word command sequence. If the host's FTP rejects the
sequence, then the user isn't authorized, but if the host's FTP accepts the
sequence, then the user is valid to the host. In either case, I don't
actually transfer files over the FTP link; I simply close it unused. I only
need it for the authentication.
</STRONG></P>
<P><STRONG>
Neat or what?
</STRONG></P>
<P><STRONG>
Here's an example PHP script that demonstrates the process. It needs an
ftp server in order to work, and is (for demonstration purposes) set up to
talk to the ftp server at localhost...
</STRONG></P>

<pre><strong>&lt;?php

  /*
  ** LoginPrompt() sends headers and html with the intent of
  ** inducing the web-browser to display it's built-in userid/password
  ** prompt.
  ** It sends a WWW-Authenticate header to give the authentication specs,
  **          a HTTP 401 on the current page requested by the browser, and
  **          a dummy HTML page to be displayed if the user cancels the
  **            login prompt
  ** It then exits, causing php to terminate the current transaction
  ** without further output
  */
  function LoginPrompt($URL)
  {
    /* force the login popup to show up */
    Header("WWW-Authenticate: Basic realm=\"System Login\"");
    Header("HTTP/1.0 401 Unauthorized");

    /* if the user hits Cancel, send him to a place he cant hurt us from */
    echo "&lt;meta HTTP-EQUIV=\"Refresh\" CONTENT=\"0; URL=$URL\"&gt;";

    exit;
  }

  $userid = $_SERVER['PHP_AUTH_USER'];
  $passwd = $_SERVER['PHP_AUTH_PW'];

  $validuser = "no";

  if ($userid &amp;&amp; $passwd)
  {

    /* connect to FTP server, see if it accepts the given userid &amp; password */
    $conn = ftp_connect("localhost") or die("Cant connect");
    if (@ftp_login($conn,$userid,$passwd))  $validuser = "yes";
    ftp_close($conn);

    if ($validuser == "no") /* bad user - try the login again */
      LoginPrompt("http://www.php.net/manual/en/features.http-auth.php");
  }
  else /* first time into this page - force the 1st login prompt */
    LoginPrompt("http://www.php.net/manual/en/features.http-auth.php");

  phpinfo();

?&gt;
</strong></pre>

<!-- end 5 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.6"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">Xserver spits Xclient hosts</FONT></H3>
Chris Christensen (<a href="mailto:tag@lists.linuxgazette.net?cc=Chris.Christensen@aspenresearch.com&subject=%20Re%3A%20%5BLG%20104%5D%202c%20Tips%20%236">Chris.Christensen from aspenresearch.com</a>)



<blockquote><font color="#990000"><em>This is in reply to:
</em></font></blockquote>
<blockquote><font color="#990000"><em><A HREF="http://linuxgazette.net/103/lg_tips.html#tips.4"
	>http://linuxgazette.net/103/lg_tips.html#tips.4</A>
 -- Thomas Adam</em></font></blockquote>
<P><STRONG>
Regarding Xserver spits multiple windows to foreign Xclient:
</STRONG></P>
<P><STRONG><BLOCKQuote>
I have no knowledge of Exceed.  I use cygwin to connect to unix/linux boxes.
You have to configure/install cygwin with X (and ssh, if you're going to use
that, and why not?).  Crucial step is to start an xwdm (blackbox I think,
whatever is available on Cygwin) first, and start linux x-apps from inside the
xwdm (start with an xterm!).  The full screen x-windows display manager is
actually running locally, while the windowed apps are in the dm.
</BLOCKQuote></STRONG></P>
<P><STRONG>
Chris C
</STRONG></P>

<!-- end 6 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.7"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">Fun game in 64 LoC</FONT></H3>
Ben Okopnik (<a href="mailto:tag@lists.linuxgazette.net?cc=ben@callahans.org&subject=%20Re%3A%20%5BLG%20104%5D%202c%20Tips%20%237"><em>LG</em> Technical Editor</a>)


<P><STRONG>
Ambassador of Pain - quite entertaining for 64 lines of code. (That's in
C, mind you; if it was Perl, I'd be expecting Quake3, including the PAK
file. 
<IMG SRC="../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
</STRONG></P>
<P><STRONG>
<A HREF="http://raffi.at/view/code/aop"
	>http://raffi.at/view/code/aop</A>
</STRONG></P>

<!-- end 7 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.8"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">Grokdoc</FONT></H3>
Jimmy O'Regan (<a href="mailto:tag@lists.linuxgazette.net?cc=jimregan@o2.ie&subject=%20Re%3A%20%5BLG%20104%5D%202c%20Tips%20%238">The <em>LG</em> Answer Gang</a>)


<P><STRONG>
A while back, Groklaw mentioned that they wanted to have a Linux
usability test, and technical documentation written for new users.
They've started a wiki (based on the Wikipedia software) to do this:
</STRONG></P>
<P><STRONG><BLOCKQuote>
<A HREF="http://www.grokdoc.net/index.php/Main_Page"
	>http://www.grokdoc.net/index.php/Main_Page</A>
</BLOCKQuote></STRONG></P>

<!-- end 8 -->
<hr>
<CENTER><Font face="Helvetica"><STRONG>
This page edited and maintained by the Editors of <I>Linux Gazette</I><br>HTML script maintained by <A HREF="mailto:star@starshine.org">Heather Stern</a> of Starshine Technical Services, <A HREF="http://www.starshine.org/">http://www.starshine.org/</A>
</STRONG></Font></CENTER>
<hr>

</p>


<!-- *** BEGIN author bio *** -->
<P>&nbsp;
<P>

<!-- *** END author bio *** -->

<div id="articlefooter">

<p>
Copyright &copy; 2004, . Released under the <a
href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>

<p>
Published in Issue 104 of Linux Gazette, July 2004
</p>

</div>


<div id="previousnextbottom">
<A HREF="lg_mail.html" >&lt;-- prev</A> | <A HREF="lg_answer.html" >next --&gt;</A>
</div>


</div>






<div id="navigation">

<a href="../index.html">Home</a>
<a href="../faq/index.html">FAQ</a>
<a href="../lg_index.html">Site Map</a>
<a href="../mirrors.html">Mirrors</a>
<a href="../mirrors.html">Translations</a>
<a href="../search.html">Search</a>
<a href="../archives.html">Archives</a>
<a href="../authors/index.html">Authors</a>
<a href="../contact.html">Contact Us</a>

</div>



<div id="breadcrumbs">

<a href="../index.html">Home</a> &gt; 
<a href="index.html">July 2004 (#104)</a> &gt; 
Article

</div>





<img src="../gx/2003/sit3-shine.7-2.gif" id="tux" alt="Tux"/>




</body>
</html>


<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>2-Cent Tips</title>
<link rel="stylesheet" type="text/css" href="../../../lg.css" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body>
<a href="../../../"><img alt="Linux Gazette" src="../../../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" /></a><img alt="Tux" src="../../../gx/tux_86x95_indexed.png" id="tux" /><p id="fun">...making Linux just a little more fun!</p><div class='content articlecontent'><a name="top"></a><h3>Brings back swapped out pages</h3>
<p>
<b>Mulyadi Santosa [mulyadi.santosa at gmail.com]</b><br />
<b>Sat, 16 Dec 2006 21:12:28 +0700</b>
</p>

<p>
After you start a memory-hogger application such as manipulating a large 
bitmap graphic file, some portions of RAM are likely pushed away to swap. 
This is normal especially if you have not so big RAM (256MB or less). The 
problem is, after you finish with this application, whatever you do will be 
creepingly slow since those pages must be brought back to RAM.
</p>

<p>
	One way you can try is to do these:
</p>

<pre>
# swapoff -a
(wait for some seconds... continue after hard disk's LED stops blinking)
# swapon -a
</pre>
Swapoff will push everything back to RAM and eventuall disables the swap 
spaces. Simply execute swapon to enable them again. If you want to play safe, 
check free output first:
<pre>
# free -m
             total       used       free     shared    buffers     cached
Mem:           249        170         79          0         12         45
-/+ buffers/cache:        111        137
Swap:          376          0        376
</pre>
There you can find out that the free RAM (free+buffers+cached) exceeds the 
size of used swap space (in this case, since nothing is there, it is zero). 
Knowing this, swapoff will sucessfully push things back to RAM
</p>

<p>
Another way you can try, is to use swap prefetch feature included in Con 
Kolivas patchset (-ck). You can find it in kernel.kolivas.org and it's also 
included in -mm (Andrew Morton) patchset.
</p>


<p>
I hope this tip is useful for all of LG readers.
</p>

<p>
regards,
</p>

<p>
Mulyadi Santosa, RHCE
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-brings_back_swapped_out_pages">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b>Predrag Ivanovic [predivan at ptt.yu]</b><br />
<b>Tue, 19 Dec 2006 14:58:09 +0100</b>
</p>

<p>
On Sat, 16 Dec 2006 21:12:28 +0700
Mulyadi Santosa wrote:
</p>

<p>
&lt;snip swapon/swapoff&gt;
</p>

<pre>
&gt; 
&gt; Another way you can try, is to use swap prefetch feature included in Con 
&gt; Kolivas patchset (-ck). You can find it in kernel.kolivas.org and it's also 
&gt; included in -mm (Andrew Morton) patchset.
&gt; 
</pre>

<p>
Recently, Con posted a swap prefetch tester to ck ML[1], so
it's possible to test benefits of swap prefetch feature from ck patchset.
Several results are also in that thread, and it seems it <strong>does</strong> make a difference.
</p>

<p>
[1]<a href="http://bhhdoa.org.au/pipermail/ck/2006-December/006503.html">http://bhhdoa.org.au/pipermail/ck/2006-December/006503.html</a>
</p>

<p>
Pedja
<pre>-- 
"There are some benefits to high blood pressure", Bob mused as
another mosquito exploded.
            --  Bulwer-Lytton contest entry, author unknown.
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-brings_back_swapped_out_pages">Back</a><hr width="50%" align="left" /><p><br /></p></div>
</body>
</html>
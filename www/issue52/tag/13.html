<!--startcut ======================================================= -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<META NAME="generator" CONTENT="lgazmail v1.3C.j">
<TITLE>The Answer Guy 52: Keeping Both Hard Drives Connected</TITLE>
</HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"
	LINK="#3366FF" VLINK="#A000A0">
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<H4>"The Linux Gazette...<I>making Linux just a little more fun!</I>"</H4>
<P> <hr> <P>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<center>
<H1><A NAME="answer">
	<img src="../../gx/dennis/qbubble.gif" alt="(?)" 
		border="0" align="middle">
	<font color="#B03060">The Answer Guy</font>
	<img src="../../gx/dennis/bbubble.gif" alt="(!)" 
		border="0" align="middle">
</A></H1> 
<BR>
<H4>By James T. Dennis,
	<a href="mailto:tag@lists.linuxgazette.net">tag@lists.linuxgazette.net</a><BR>
	LinuxCare,
	<A HREF="http://www.linuxcare.com/">http://www.linuxcare.com/</A> 
</H4>
</center>

<p><hr><p>
<!--  endcut ======================================================= -->
<!-- begin 13 -->
<H3 align="left"><img src="../../gx/dennis/qbubble.gif" 
	height="50" width="60" alt="(?) " border="0"
	>Keeping Both Hard Drives Connected</H3>
<H4 ALIGN="center">New LILO Overcomes 1024 Cylinder Limit!</H4>


<p><strong>From Crazy Weirdo  on Thu, 23 Mar 2000  
</strong></p>
<!-- ::
Keeping Both Hard Drives Connected
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
New LILO Overcomes 1024 Cylinder Limit!
:: -->
<P><STRONG>
Answer Guy,
</STRONG></P>
<P><STRONG>
I just bought a new hard drive for my pc. I put Linux on it.  The problem
with that is i cant keep both hard drives connected at the same time unless
i keep changing the jumpers.  Is there a way to make LILO boot windows
while its on another HDD....if so...how is it done?
</STRONG></P>
<P><STRONG><em>
This is a test of the Weirdo e-mail system.  Had this been an actual e-mail
you would have become extremely hostile towards me and other users of the
internet, but just relax and realize that this was just a test.
</em></STRONG></P>
<P><STRONG>
Weirdo
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
I presume that these are IDE hard drives.  It doesn't
matter too much, but there wouldn't be this problem with SCSI.
</BLOCKQUOTE>
<BLOCKQUOTE>
Anyway, LILO will load an OS off of any drive and partition that
the BIOS can see.  I've heard that a new version finally overcomes
the classic old 1024 cylinder limit that's been plaguing it (and
us) for so long.
</BLOCKQUOTE>
<BLOCKQUOTE>
Oddly enough this is one of the few software upgrades that I've
seen recently that I couldn't find at <A HREF="http://www.freshmeat.net/">Freshmeat</A>.net
(<A HREF="http://www.freshmeat.net"
	>http://www.freshmeat.net</A>)
</BLOCKQUOTE>
<BLOCKQUOTE>
Another good place to look for open source and free software
release announcements is Appwatch (<A HREF="http://www.appwatch.com"
	>http://www.appwatch.com</A>).
Here's the one for the latest LILO:
</BLOCKQUOTE>

<TABLE WIDTH="95%" BORDER="1" BGCOLOR="#FFFFCC"><TR><TD>
<P><BLOCKQuote>
LILO 21.4.1 (John D. Rowell) 20000321 22:45 GMT
</BLOCKQuote></P>
<P>
Changes: Since v21: Will boot from disks up to 2048Gb in size, as
long as the BIOS allows the Enhanced BIOS calls for 32-bit sector
addressing using packet calls; Checks if BIOS supports packet
calls (int 0x13, AH=0x42), and uses these calls if 'lba32' was
specified.
</P>
<P>
Otherwise, it uses the C:H:S addressing scheme of the original
IBM-PC BIOS; the disk read routine is separated into its own
source file, "<tt>read.S</tt>", which is included in the first-stage, and
second-stage loader codes. The first stage loader uses a very
stripped down read routine, since it only deals in single sector
transfers; if BIOS does not support 32-bit packet calls, and the
cylinder address overflows when the 32-bit address is converted to
C:H:S, then a "<tt>9f</tt>" error code is issued; map compaction of '<tt>lba32</tt>'
addresses is supported with the existing '<TT>-c</TT>' switch (or '<tt>compact</tt>'
configuration file global option); floppy disks now will always
fall back to C:H:S addressing; changed the <TT>-v</TT> option to now accept
a single digit to set the verbosity level; e.g., '<TT>lilo -v</TT> 5 ...'
replaces '<TT>lilo -v -v -v -v -v</TT> ...' for maximum diagnostic output;
</P>
<P>
LILO version information is moved to the file 'version.h', and
VERSION is now deleted. This allows for tracking of VERSION_MAJOR
(=21) and VERSION_MINOR (=3) for this and future code paths;
</P>
<P>
Inspired by '<tt>dparam.com</tt>', a much more extensive BIOS test program
is included with this version. Called '<tt>disk.com</tt>', it was developed
under DOS, and requires '<tt>nasm</tt>' to be assembled; <TT>DISK.COM</TT> will
probe the BIOS for disks supported by the BIOS, and report on
their CHS geometry.
</P>
<P>
If EDD is supported, the EDD geometry is also reported. If disks
with cylinder numbers of 1024 or above are detected, it will issue
a recommendation to use LILO with the '<tt>lba32</tt>' option. Creation of
the bootable floppy image version of this utility is incomplete at
this time. Fixed: bug in '<tt>read.S</tt>' that disabled the combination
'<tt>linear</tt>' with '<tt>compact</tt>' ( '<TT>-l</TT>' and '<TT>-c</TT>' together). Added: the '<TT>-L</TT>'
command line switch and '<tt>lba32</tt>' configuration file global
option.
</P>
<P>
Note: Currently only available here.  Console / System (BSD)
</P>

</TD></TR></TABLE><BLOCKQUOTE>
(<A HREF="http://www.appwatch.com/Linux/Users/history?app_id=46&amp;vty_id=S"
	>http://www.appwatch.com/Linux/Users/history?app_id=46&amp;vty_id=S</A>)
</BLOCKQUOTE>
<BLOCKQUOTE>
What all of that goobledygook means is that LILO has been updated
to handle these HUGE drives without forcing us to have a little
partition below the 1024 cylinder line that used to be the upper
limit on PC hard drive sizes.  (Read some of my back issue rants
about LILO to get more info on that then you want to hear).
</BLOCKQUOTE>
<BLOCKQUOTE>
So, back to your question:
</BLOCKQUOTE>
<BLOCKQUOTE><BLOCKQuote>
If you have a LILO conf like this:
</BLOCKQuote></BLOCKQUOTE>

<blockquote><pre>              boot = /dev/hda
              root = /dev/hda1
	      prompt

              image = /boot/vmlinuz-2.3.99pre3
		      read-only
		      append="devfs=nomount"
                      label = new

              image = /boot/vmlinuz-2.2.14
		      read-only
                      label = cur

              image = /boot/vmlinuz-2.0.38
		      read-only
		      label = old

              other = /dev/hdb1
		      label = dos

</pre></blockquote>
<BLOCKQUOTE>
You should be able to have both drives co-exist.  You should
be able to use LILO to boot any of the three Linux kernels
(new, cur(rent), and old) or your MS-DOS/Win'9x by simply
typing any one of those three-letter keywords (stanza labels)
at the LILO prompt.
</BLOCKQUOTE>
<BLOCKQUOTE>
Note that the "other" directive points to <TT>/dev/hdb1</TT> --- the
first partition on the second IDE hard drive on your primary
IDE controller.  That might be <TT>/dev/hdc1</TT> (master hard drive
on the secondary controller) or even <TT>/dev/hdd1</TT> (slave drive
on the secondary contoller).  That all depends on how your
drives are physically connected, and if you have an IDE CD-ROM
and how its connected.  Of course it might be in some other
partition on any of these drives.  You BIOS might only allow
you to boot from <TT>/dev/hda</TT> and <TT>/dev/hdb</TT> (first two drives on
the primary controller).
</BLOCKQUOTE>
<BLOCKQUOTE>
I'm once again going to point to <TT>LOADLIN.EXE.</TT>  Search through
my archives here at Linux Gazette:
</BLOCKQUOTE>
<BLOCKQUOTE><BLOCKQuote>
<A HREF="http://www.linuxgazette.net/search.html"
	>Search</A>
</BLOCKQuote></BLOCKQUOTE>
<BLOCKQUOTE>
... to review what I've said about this before.  My basic
rule of thumb is:  "If you have to ask about making MS-DOS and/or
MS-Win '9x co-exist with Linux --- USE <TT>LOADLIN.EXE!</TT>"
</BLOCKQUOTE>
<BLOCKQUOTE>
It just works. No muss! No fuss! No worrying about what drive,
partition, or cylinder your kernel is on.  The object of this
game is to get the Linux kernel (and maybe an initial RAM disk)
into memory, and jump into the kernel image's entry point
(possibly passing it a list of command line arguments).  Once
you've managed that, then the Linux kernel can take care of all
the other fussy details about finding and mounting its root
filesystem and driving its hardware.  (The kernel doesn't need
the BIOS for any normal operations --- though there is some
minor device configuration that the kernel expects is already
done before it got loaded.  Linux has its own 32-bit native drivers
for all PC/x86 hardware).  (I guess there are some PCI BIOS32 and
APM functions that are actually handled by modern BIOS' --- but
I don't know the details).
</BLOCKQUOTE>

<!-- sig -->


<!-- end 13 -->
<!--startcut ======================================================= -->
<P> <hr> <P>
<H5 align="center"><a href="http://www.linuxgazette.net/copying.html"
	>Copyright &copy;</a> 2000, James T. Dennis 
<BR>Published in <I>The Linux Gazette</I> Issue 52 April 2000</H5>
<H6 ALIGN="center">HTML transformation  by
	<A HREF="mailto:star@tuxtops.com">Heather Stern</a> of
	Tuxtops, Inc.,
	<A HREF="http://www.tuxtops.com/">http://www.tuxtops.com/</A> 
</H6>
<P> <hr> <P>
<!-- begin tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::-->
<TABLE WIDTH="95%"><TR VALIGN="center" ALIGN="center">
<TD colspan="2" rowspan="2"><A 
	HREF="../lg_answer52.html"
	><IMG SRC="../../gx/dennis/answernew.gif"
              ALT="[ Answer Guy Current Index ]"></A>
<TD colspan="2" rowspan="2"><A 
	HREF="../../tag/kb.html"
	><IMG SRC="../../gx/dennis/answertoc.gif"
              ALT="[ Index of Past Answers ]"></A></td>
  <TD WIDTH="11%"><A HREF="../lg_answer52.html#greeting"><img
	src="../../gx/dennis/smily.gif" alt="greetings" border="0"></A></TD>
  <TD WIDTH="11%"><A HREF="1.html">1</A></TD>
  <TD WIDTH="11%"><A HREF="2.html">2</A></TD>
  <TD WIDTH="11%"><A HREF="3.html">3</A></TD>
  <TD WIDTH="11%"><A HREF="4.html">4</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="11%"><A HREF="5.html">5</A></TD>
  <TD WIDTH="11%"><A HREF="6.html">6</A></TD>
  <TD WIDTH="11%"><A HREF="7.html">7</A></TD>
  <TD WIDTH="11%"><A HREF="8.html">8</A></TD>
  <TD WIDTH="11%"><A HREF="9.html">9</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="10%"><A HREF="10.html">10</A></TD>
  <TD WIDTH="10%"><A HREF="11.html">11</A></TD>
  <TD WIDTH="10%"><A HREF="12.html">12</A></TD>
  <TD WIDTH="10%"><A HREF="13.html">13</A></TD>
  <TD WIDTH="11%"><A HREF="14.html">14</A></TD>
  <TD WIDTH="11%"><A HREF="15.html">15</A></TD>
  <TD WIDTH="11%"><A HREF="16.html">16</A></TD>
  <TD WIDTH="11%"><A HREF="17.html">17</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="10%"><A HREF="18.html">18</A></TD>
  <TD WIDTH="10%"><A HREF="19.html">19</A></TD>
  <TD WIDTH="10%"><A HREF="20.html">20</A></TD>
  <TD WIDTH="10%"><A HREF="21.html">21</A></TD>
  <TD WIDTH="11%"><A HREF="22.html">22</A></TD>
  <TD WIDTH="11%"><A HREF="23.html">23</A></TD>
  <TD WIDTH="11%"><A HREF="24.html">24</A></TD>
</TR></TABLE>
<!-- end tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::::-->
<P> <hr> <P>
<!-- begin lgnav ::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<A HREF="../index.html"
	><IMG SRC="../../gx/indexnew.gif" ALT="[ Table Of Contents ]"></A>
<A HREF="../../index.html"
	><IMG SRC="../../gx/homenew.gif" ALT="[ Front Page ]"></A>
<A HREF="../lg_bytes52.html"
	><IMG SRC="../../gx/back2.gif" ALT="[ Previous Section ]"></A>
<A HREF="../../faq/index.html"
	><IMG SRC="../../gx/dennis/faq.gif"
              ALT="[ Linux Gazette FAQ ]"></A>
<A HREF="../lg_tips52.html"
	><IMG SRC="../../gx/fwd.gif" ALT="[ Next Section ]"></A>
<!-- end lgnav ::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
</BODY></HTML>
<!--endcut ========================================================= -->

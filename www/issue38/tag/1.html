<!--startcut ======================================================= -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<META NAME="generator" CONTENT="lgazmail v1.1I.e">
<TITLE>The Answer Guy 38: FTP Only Access:  Trickier than it Seems</TITLE>
</HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"
	LINK="#3366FF" VLINK="#A000A0">
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<H4>"The Linux Gazette...<I>making Linux just a little more fun!</I>"</H4>
<P> <hr> <P>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<center>
<H1><A NAME="answer">
	<img src="../../gx/dennis/qbubble.gif" alt="(?)" 
		border="0" align="middle">
	<font color="#B03060">The Answer Guy</font>
	<img src="../../gx/dennis/bbubble.gif" alt="(!)" 
		border="0" align="middle">
</A></H1> 
<BR>
<H4>By James T. Dennis,
	<a href="mailto:tag@lists.linuxgazette.net">tag@lists.linuxgazette.net</a><BR>
	Starshine Technical Services,
	<A HREF="http://www.starshine.org/">http://www.starshine.org/</A> 
</H4>
</center>

<p><hr><p>
<!--  endcut ======================================================= -->
<!-- begin 1 -->
<H3 align="left"><img src="../../gx/dennis/qbubble.gif" 
	height="50" width="60" alt="(?) " border="0"
	>FTP Only Access:  Trickier than it Seems</H3>


<p><strong>From chris  on Fri, 29 Jan 1999  
</strong></p>
<!-- ::
FTP Only Access:  Trickier than it Seems
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
:: -->
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
i was recently reading your article in the december issue of
linuxgazzette regarding setting up users for FTP access only.
<em>[titled "<a href="../../issue35/tag/ftproot.html"
	>FTP Login as 'root' --- Don't!</a> -- Heather]</em>
i ran into this problem about a month ago and putting a <tt>*</tt> in front
of the password entry in the <TT>/etc/passwd</TT> file fixed the problem.
no telnet/login access, but ftp access.  is there something i dont
know that prevents this from being a simple solution?
</STRONG></P>
<P><STRONG>
chris.
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
"Starring out" the password field (the one between
the second and third colons on that users line in
<TT>/etc/passwd</TT>) should also prevent FTP access (unless
your FTP daemon uses some other form of account
management and authentication).
</BLOCKQUOTE>
<BLOCKQUOTE>
Locking out the "shell" field (the last one) by
setting it to <TT>/bin/false</TT> (if <TT>/bin/false</TT> is actually
a compiled binary --- NOT the traditional shell script)
or to a simple compiled program that does a '<TT>printf()</TT>' or
'<TT>write()</TT>' and an '<TT>exit()</TT>') will prevent telnet access.
However it might not prevent '<tt>rsh</tt>' and it certainly
won't limit the user "just" to FTP.
</BLOCKQUOTE>
<BLOCKQUOTE>
The clever user can post all sorts of <tt>.forward</tt>, <tt>.procmail</tt>
and other files to his or her home directory (using
FTP) and these "magic" files can be used to run arbitrary
commands (generally under that user's ID) on behalf of
the user.  Thus I could post a <tt>.forward</tt> file that
"forwarded" my mail through a program (using the piping
feature that most installations of '<tt>sendmail</tt>' are
configured to support).  My program can issue
commands like '<tt>chsh</tt>' (to change my shell to something
that I can use).
</BLOCKQUOTE>
<BLOCKQUOTE>
There are many "magic" files.  I can use FTP to create
a <tt>.ssh</tt> directory and put in the <tt>.ssh/authorized_keys</tt>
which will then let me '<tt>ssh</tt>' into the system (if you're
running an ssh daemon).  Not only are there many of these
--- but more of them are added as we create new
protocols and services.
</BLOCKQUOTE>
<BLOCKQUOTE>
So, you really need to do more than just set their
shell to '<TT>/usr/local/bin/noshell</TT>' or '<tt>goaway</tt>' 
or '<TT>/bin/sync</TT>' That's why I suggest using a replacement 
to the standard old BSD FTP daemon.  Go read the article again for that.
</BLOCKQUOTE>
<!-- sig -->

<!-- end 1 -->
<!--startcut ======================================================= -->
<P> <hr> <P>
<H5 align="center"><a href="http://www.linuxgazette.net/copying.html"
	>Copyright &copy;</a> 1999, James T. Dennis 
<BR>Published in <I>The Linux Gazette</I> Issue 38 March 1999</H5>
<P> <hr> <P>
<!-- begin tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::-->
<TABLE WIDTH="96%"><TR VALIGN="center" ALIGN="center">
<TD ROWSPAN="3" COLSPAN="4" WIDTH="24%"><A HREF="../lg_answer38.html"
	><IMG SRC="../../gx/dennis/answernew.gif"
              ALT="[ Answer Guy Index ]"></A></td>
  <TD WIDTH="6%"><A HREF="1.html">1</A></TD>
  <TD WIDTH="6%"><A HREF="2.html">2</A></TD>
  <TD WIDTH="6%"><A HREF="3.html">3</A></TD>
  <TD WIDTH="6%"><A HREF="4.html">4</A></TD>
  <TD WIDTH="6%"><A HREF="5.html">5</A></TD>
  <TD WIDTH="6%"><A HREF="6.html">6</A></TD>
  <TD WIDTH="6%"><A HREF="7.html">7</A></TD>
  <TD WIDTH="6%"><A HREF="8.html">8</A></TD>
  <TD WIDTH="6%"><A HREF="9.html">9</A></TD>
  <TD WIDTH="6%"><A HREF="10.html">10</A></TD>
  <TD WIDTH="6%"><A HREF="11.html">11</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD><A HREF="12.html">12</A></TD>
  <TD>&nbsp;</TD>
  <TD><A HREF="14.html">14</A></TD>
  <TD>&nbsp;</TD>
  <TD><A HREF="16.html">16</A></TD>
  <TD><A HREF="17.html">17</A></TD>
  <TD><A HREF="18.html">18</A></TD>
  <TD><A HREF="19.html">19</A></TD>
  <TD>&nbsp;</TD>
  <TD><A HREF="21.html">21</A></TD>
  <TD><A HREF="22.html">22</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD><A HREF="23.html">23</A></TD>
  <TD><A HREF="24.html">24</A></TD>
  <TD>&nbsp;</TD>
  <TD><A HREF="26.html">26</A></TD>
  <TD>&nbsp;</TD>
  <TD><A HREF="28.html">28</A></TD>
  <TD><A HREF="29.html">29</A></TD>
  <TD><A HREF="30.html">30</A></TD>
  <TD><A HREF="31.html">31</A></TD>
  <TD><A HREF="32.html">32</A></TD>
  <TD>&nbsp;</TD>
</TR></TABLE>
<!-- end tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::::-->
<P> <hr> <P>
<!-- begin lgnav ::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<A HREF="../index.html"
	><IMG SRC="../../gx/indexnew.gif" ALT="[ Table Of Contents ]"></A>
<A HREF="../../index.html"
	><IMG SRC="../../gx/homenew.gif" ALT="[ Front Page ]"></A>
<A HREF="../lg_bytes38.html"
	><IMG SRC="../../gx/back2.gif" ALT="[ Previous Section ]"></A>
<A HREF="../lg_tips38.html"
	><IMG SRC="../../gx/fwd.gif" ALT="[ Next Section ]"></A>
<!-- end lgnav ::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
</BODY></HTML>
<!--endcut ========================================================= -->

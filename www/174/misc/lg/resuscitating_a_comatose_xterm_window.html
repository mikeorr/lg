<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
		 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' lang='utf-8' xml:lang='utf-8'>
<head>
<title>Resuscitating a comatose xterm window?</title>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
<link rel='stylesheet' type='text/css' href='../../../lg.css' />
</head>
<body>
<a href="../../../"><img alt="Linux Gazette" src="../../../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" /></a><img alt="Tux" src="../../../gx/tux_86x95_indexed.png" id="tux" /><p id="fun">...making Linux just a little more fun!</p><div class='content articlecontent'><a name="top"></a><h3>Resuscitating a comatose xterm window?</h3>
<p>
<b><p>
Kat Tanaka Okopnik [kat at linuxgazette.net]

</p>
</b><br />
<b>Sun, 18 Apr 2010 20:15:57 -0700</b>
</p>

<p>
Hi, gang - 
</p>

<p>
After a history of losing data to dying computers (yes, yes, I know,
it's really about not backing up data adequately), I've come to prefer
leaving my e-mail on remote servers rather than dealing with it locally.
As a result, my non-webmail interaction is done via ssh. I've learned to
run screen so that a dropped connection doesn't result in losing
half-composed mail, but I haven't figured out what to do with my frozen
xterm window. 
</p>

<p>
What I mean by this is that I end up losing the connection, having to
reconnect, and then having to kill the frozen-by-dropped-connection
window. Is there a way that I can resuscitate the dead session in the
existing window, rather than opening up a new xterm window and killing
the old one?
</p>

<p>
Please be gentle as I expose my lack of proper terminology. I'm pretty
sure I'm not describing my problem using all the right words, but I'm
hoping I've come close enough for someone to figure out how I <strong>should</strong>
have put it. (I'd ask my resident *nix guru to vet my question, but he's
up against a deadline while running short on sleep.) I'd wait to ask my
question, but I suspect I'd forget to ask, again...
</p>


<p>
-- 
Kat Tanaka Okopnik
Linux Gazette Mailbag Editor
kat at linuxgazette.net
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas at xteddy.org]

</p>
</b><br />
<b>Mon, 19 Apr 2010 08:02:01 +0100</b>
</p>

<p>
On 19 April 2010 04:15, Kat Tanaka Okopnik &lt;kat at linuxgazette.net&gt; wrote:
</p>

<pre>
&gt; What I mean by this is that I end up losing the connection, having to
&gt; reconnect, and then having to kill the frozen-by-dropped-connection
&gt; window. Is there a way that I can resuscitate the dead session in the
&gt; existing window, rather than opening up a new xterm window and killing
&gt; the old one?
</pre>

<p>
Press:
</p>

<pre>
~.
</pre>

<p>
That's "tilda" and "dot".
</p>

<p>
-- Thomas Adam
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Neil Youngman [ny at youngman.org.uk]

</p>
</b><br />
<b>Mon, 19 Apr 2010 08:13:48 +0100</b>
</p>

<p>
On Monday 19 April 2010 08:02:01 Thomas Adam wrote:
</p>

<pre>
&gt; On 19 April 2010 04:15, Kat Tanaka Okopnik &lt;kat at linuxgazette.net&gt; wrote:
&gt; &gt; What I mean by this is that I end up losing the connection, having to
&gt; &gt; reconnect, and then having to kill the frozen-by-dropped-connection
&gt; &gt; window. Is there a way that I can resuscitate the dead session in the
&gt; &gt; existing window, rather than opening up a new xterm window and killing
&gt; &gt; the old one?
&gt;
&gt; Press:
&gt;
&gt; ``
&gt; ~.
&gt; ''
&gt;
&gt; That's "tilda" and "dot".
</pre>

<p>
To be absolutely clear on that, the "~." sequence kills ssh (and depends on 
your ssh settings leaving the default escape character unchanged). This will 
bring you back to your local command prompt. This will not work if the last 
character was not a linefeed, so it's usually best to start the sequence with 
the Enter key.
</p>

<p>
See the section on escape characters in ssh(1), if you need more information.
</p>

<p>
Neil Youngman
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Kat Tanaka Okopnik [kat at linuxgazette.net]

</p>
</b><br />
<b>Mon, 19 Apr 2010 19:14:25 -0700</b>
</p>

<p>
On Mon, Apr 19, 2010 at 08:02:01AM +0100, Thomas Adam wrote:
</p>

<pre>
&gt; On 19 April 2010 04:15, Kat Tanaka Okopnik &lt;kat at linuxgazette.net&gt; wrote:
&gt; &gt; What I mean by this is that I end up losing the connection, having to
&gt; &gt; reconnect, and then having to kill the frozen-by-dropped-connection
&gt; &gt; window. Is there a way that I can resuscitate the dead session in the
&gt; &gt; existing window, rather than opening up a new xterm window and killing
&gt; &gt; the old one?
&gt; 
&gt; Press:
&gt; 
&gt; ``
&gt; ~.
&gt; ''
&gt; 
&gt; That's "tilda" and "dot".
</pre>

<p>
Thank you, Thomas! Tilde dot works like a charm.
</p>

<p>
Now Ben's kibbitzing over here, saying, "ah, but can you get back to the
ssh session without going out and back in" (or something like that...)
</p>

<p>
But meanwhile, I'm thrilled to be able to yell, "CLEAR!" and zap the
frozen thing back to life. (Okay, with the kids sleeping, I don't really
yell...but I think it really loudly.)
</p>

<p>
-- 
Kat Tanaka Okopnik
Linux Gazette Mailbag Editor
kat at linuxgazette.net
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Kat Tanaka Okopnik [kat at linuxgazette.net]

</p>
</b><br />
<b>Mon, 19 Apr 2010 19:24:39 -0700</b>
</p>

<p>
On Mon, Apr 19, 2010 at 08:13:48AM +0100, Neil Youngman wrote:
</p>

<pre>
&gt; On Monday 19 April 2010 08:02:01 Thomas Adam wrote:
&gt; &gt; On 19 April 2010 04:15, Kat Tanaka Okopnik &lt;kat at linuxgazette.net&gt; wrote:
&gt; &gt; &gt; What I mean by this is that I end up losing the connection, having to
&gt; &gt; &gt; reconnect, and then having to kill the frozen-by-dropped-connection
&gt; &gt; &gt; window. Is there a way that I can resuscitate the dead session in the
&gt; &gt; &gt; existing window, rather than opening up a new xterm window and killing
&gt; &gt; &gt; the old one?
&gt; &gt;
&gt; &gt; Press:
&gt; &gt;
&gt; &gt; ``
&gt; &gt; ~.
&gt; &gt; ''
&gt; &gt;
&gt; &gt; That's "tilda" and "dot".
&gt; 
&gt; To be absolutely clear on that, the "~." sequence kills ssh (and depends on 
&gt; your ssh settings leaving the default escape character unchanged). This will 
&gt; bring you back to your local command prompt. This will not work if the last 
&gt; character was not a linefeed, so it's usually best to start the sequence with 
&gt; the Enter key.
</pre>

<p>
 [Nod] Thanks for the expansion.
</p>



<pre>
&gt; See the section on escape characters in ssh(1), if you need more information.
</pre>

<p>
[sigh] I tried, and what I remember is a bunch of cryptic stuff that
made me say, "If I <em>understood</em> what I wanted, I would just search for
it. Since I don't know how to frame my question...":
</p>

<p>
(Now Ben's muttering something about ~B and ~R. I don't know, I just
cargo-cult my computer usage. Bad user, no donut!)
</p>


<p>
I tried running a screen session locally, and then ssh to where my
mail lives, but that resulted in some keystrokes getting interpreted in
ways that I didn't like (e.g. the backspace key becomes something else,
IOW not backspacing). This is probably a whole different question that
should go under another subject line...
</p>

<p>
-- 
Kat Tanaka Okopnik
Linux Gazette Mailbag Editor
kat at linuxgazette.net
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Henry Grebler [henrygrebler at optusnet.com.au]

</p>
</b><br />
<b>Tue, 20 Apr 2010 13:25:35 +1000</b>
</p>

<pre>
&gt; I tried running a screen session locally, and then ssh to where my
&gt; mail lives, but that resulted in some keystrokes getting interpreted in
&gt; ways that I didn't like (e.g. the backspace key becomes something else,
&gt; IOW not backspacing). This is probably a whole different question that
&gt; should go under another subject line...
</pre>

<p>
When you ssh into another computer, you are logging in to a different
environment (kinda obvious, I guess). The interpretation of some
key-presses may vary.
</p>

<p>
I find the default settings of most sites really irritating. In
particular, I happen to like my keys to have functions according to
their position on the keyboard. This is less of a problem than in the
past, since it seems that Microsoft has mandated that the key on right
of the top row is labelled BackSpace. If I remember correctly, there
were keyboards that labelled it Delete.
</p>

<p>
<em>&lt;Digression&gt;</em>
</p>

<p>
The one that really galls me is Control. I started using Teletypes (in
the 60s). The key above Shift was Control, not Caps Lock. This
continued until about the mid-90s, I guess. Then, suddenly, Control
was relegated down below Shift.
</p>

<p>
I'm too old to change, so wherever I go, I remap the keyboard so that
both keys produce the effect of the Control key.
</p>

<p>
<em>&lt;/Digression&gt;</em>
</p>

<p>
You need to examine two parts of the problem: what ASCII sequence is
the BackSpace key producing? what is the meaning assigned to that
ASCII sequence?
</p>

<p>
Under FreeBSD, "showkey" echoes "raw keystrokes back at you in a
printable form". Use "showkey --ascii" under Linux.
</p>

<p>
Here's what I get:
</p>

<p>
<pre class='code'>
	showkey --ascii
 
Press any keys - Ctrl-D will terminate this program
 
^H        8 0010 0x08
^_       31 0037 0x1f
^[[3z    27 0033 0x1b
         91 0133 0x5b
         51 0063 0x33
        122 0172 0x7a
</pre>

<p>
The first line is what I expect from a BackSpace key. The second line
is the classical value of Delete; I got it by pressing "Control-?".
The rest of the lines are produced by either of the keys labelled Del.
</p>

<p>
Run the command, first on a computer where your BackSpace key works;
then again where it doesn't. Are the outputs the same?
</p>

<p>
If so, then you probably need to look at stty. If not, it's a little
more tricky.
</p>

<p>
On my Linux machine (to which I have sshed):
</p>

<p>
<pre class='code'>
	stty   
speed 9600 baud; line = 0;
erase = ^H;
-brkint ixany
</pre>

<p>
The erase line is consonant with the output produced by pressing the
BackSpace key (as confirmed with "showkey --ascii"). (BTW, on some
Linuxes, you might need "stty -a".)
</p>

<p>
I had to jump through hoops, but I finally managed to create an
environment where "erase = #". When I press the BackSpace key, I see
"^H" echoed. I have to press the "#" key (Shift-3) to erase
characters.
</p>

<p>
To fix the problem, I type:
<pre>
	stty erase "^H"
</pre>
NB there are 2 characters between the quotes: Shift-6 and uppercase H.
</p>

<p>
To make it permanent, add the line to $HOME/.profile
</p>

<p>
If your BackSpace key generates different ASCII output on the remote
machine, you should try to create an "stty erase" command to suit.
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Tue, 20 Apr 2010 00:03:13 -0400</b>
</p>

<p>
On Tue, Apr 20, 2010 at 01:25:35PM +1000, Henry Grebler wrote:
</p>

<pre>
&gt; 
&gt; 
&gt; &gt; I tried running a screen session locally, and then ssh to where my
&gt; &gt; mail lives, but that resulted in some keystrokes getting interpreted in
&gt; &gt; ways that I didn't like (e.g. the backspace key becomes something else,
&gt; &gt; IOW not backspacing). This is probably a whole different question that
&gt; &gt; should go under another subject line...
&gt; 
&gt; When you ssh into another computer, you are logging in to a different
&gt; environment (kinda obvious, I guess). The interpretation of some
&gt; key-presses may vary.
</pre>

<p>
In this case, though, the interpretation/problem came from using 'screen'; the
remote host worked just fine when she just SSHed into it, but generated
'^?'s instead of backspaces when she tried running 'screen' locally (my
suggestion - I wanted to see if she could just drop the SSH session via
'screen' when it hung.)
</p>

<p>
The stack looks like this:
<pre>
localhost -&gt; SSH -&gt; remotehost + vi				# Works fine
localhost -&gt; SSH -&gt; remotehost + screen + vi	# Works fine
localhost + screen -&gt; remotehost + vi			# '^?' instead of BkSp
</pre>
(I've just reconfirmed it.)
</p>


<pre>
&gt; To fix the problem, I type:
&gt; 
&gt; 	stty erase "^H"
</pre>

<p>
Yep - that's the classic solution. Making 'screen' honor that, though,
takes a little more digging, and I haven't struck gold yet.
</p>


<p>
-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href='http://LinuxGazette.NET'>http://LinuxGazette.NET</a> *
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Henry Grebler [henrygrebler at optusnet.com.au]

</p>
</b><br />
<b>Tue, 20 Apr 2010 17:00:54 +1000</b>
</p>

<pre>
&gt;On Tue, Apr 20, 2010 at 01:25:35PM +1000, Henry Grebler wrote:
&gt;&gt; 
&gt;&gt; 
&gt;&gt; --&gt;I tried running a screen session locally, and then ssh to where my
&gt;&gt; --&gt;mail lives, but that resulted in some keystrokes getting interpreted in
&gt;&gt; --&gt;ways that I didn't like (e.g. the backspace key becomes something else,
&gt;&gt; --&gt;IOW not backspacing). This is probably a whole different question that
&gt;&gt; --&gt;should go under another subject line...
&gt;&gt; 
&gt;&gt; When you ssh into another computer, you are logging in to a different
&gt;&gt; environment (kinda obvious, I guess). The interpretation of some
&gt;&gt; key-presses may vary.
&gt;
&gt; In this case, though, the interpretation/problem came from using 'screen'; the
&gt; remote host worked just fine when she just SSHed into it, but generated
&gt; '^?'s instead of backspaces when she tried running 'screen' locally (my
&gt; suggestion - I wanted to see if she could just drop the SSH session via
&gt; 'screen' when it hung.)
&gt; 
&gt; The stack looks like this:
&gt; 
&gt; localhost -&gt; SSH -&gt; remotehost + vi				# Works fine
&gt; localhost -&gt; SSH -&gt; remotehost + screen + vi	# Works fine
&gt; localhost + screen -&gt; remotehost + vi			# '^?' instead of BkSp
&gt;
&gt; (I've just reconfirmed it.)
&gt;
&gt;&gt; To fix the problem, I type:
&gt;&gt; 
&gt;&gt; 	stty erase "^H"
&gt;
&gt; Yep - that's the classic solution. Making 'screen' honor that, though,
&gt; takes a little more digging, and I haven't struck gold yet.
</pre>


<p>
Sounds to me like you should try
<pre>
	stty erase "^_"
</pre>
on the remote machine.
</p>

<p>
My suggestion is to let 'screen' do whatever it wants and compensate
at remotehost.
</p>

<p>
If that doesn't work, try crossing your fingers and using
<pre>
	stty erase "^?"
</pre>

<p>
I'm a bit intrigued. I can't make it fail in the same way. What
platform is localhost? What platform is remotehost?
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas at xteddy.org]

</p>
</b><br />
<b>Tue, 20 Apr 2010 08:18:04 +0100</b>
</p>

<p>
On 20 April 2010 03:12, Kat Tanaka Okopnik &lt;kat at linuxgazette.net&gt; wrote:
</p>

<pre>
&gt; Now Ben's kibbitzing over here, saying, "ah, but can you get back to the
&gt; ssh session without going out and back in" (or something like that...)
</pre>

<p>
Obviously.  But you could cheat.  If you were to ditch screen for tmux
(tmux.sf.net) you can set:
</p>

<pre>
set -g set-remain-on-exit
</pre>

<p>
Then you can use the "respawn-window" command get you back in to your
ssh session.  You could even do it all in one go.
</p>

<p>
Exercise is left to someone who wants to try.
</p>

<p>
-- Thomas Adam
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Chris Bannister [mockingbird at earthlight.co.nz]

</p>
</b><br />
<b>Wed, 21 Apr 2010 00:44:20 +1200</b>
</p>

<p>
On Tue, Apr 20, 2010 at 01:25:35PM +1000, Henry Grebler wrote:
</p>

<pre>
&gt; 
&gt; 
&gt; --&gt;I tried running a screen session locally, and then ssh to where my
&gt; --&gt;mail lives, but that resulted in some keystrokes getting interpreted in
&gt; --&gt;ways that I didn't like (e.g. the backspace key becomes something else,
&gt; --&gt;IOW not backspacing). This is probably a whole different question that
&gt; --&gt;should go under another subject line...
&gt; 
&gt; When you ssh into another computer, you are logging in to a different
&gt; environment (kinda obvious, I guess). The interpretation of some
&gt; key-presses may vary.
&gt; 
&gt; I find the default settings of most sites really irritating. In
&gt; particular, I happen to like my keys to have functions according to
&gt; their position on the keyboard. This is less of a problem than in the
&gt; past, since it seems that Microsoft has mandated that the key on right
&gt; of the top row is labelled BackSpace. If I remember correctly, there
&gt; were keyboards that labelled it Delete.
</pre>

<p>
An interesting read is:
<a href='http://mail-index.netbsd.org/netbsd-users/2010/04/01/msg005977.html'>http://mail-index.netbsd.org/netbsd-users/2010/04/01/msg005977.html</a>
and associated posts.
</p>

<p>
-- 
Chris.
======
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Tue, 20 Apr 2010 11:33:45 -0400</b>
</p>

<p>
On Mon, Apr 19, 2010 at 08:02:01AM +0100, Thomas Adam wrote:
</p>

<pre>
&gt; On 19 April 2010 04:15, Kat Tanaka Okopnik &lt;kat at linuxgazette.net&gt; wrote:
&gt; &gt; What I mean by this is that I end up losing the connection, having to
&gt; &gt; reconnect, and then having to kill the frozen-by-dropped-connection
&gt; &gt; window. Is there a way that I can resuscitate the dead session in the
&gt; &gt; existing window, rather than opening up a new xterm window and killing
&gt; &gt; the old one?
&gt; 
&gt; Press:
&gt; 
&gt; ``
&gt; ~.
&gt; ''
&gt; 
&gt; That's "tilda" and "dot".
</pre>

<p>
Y'know, I'm glad Kat asked that question - because I had no idea,
myself. Seems kinda silly, since I've known about the telnet 'escape'
key sequence ever since the first cavemen starting using computers
(...or something like that), but I never quite bridged the two. I
suppose it's because telnet was always getting stuck, while SSH is,
well, pretty darn reliable.
</p>

<p>
I do have to say, though, that living with fragile Net connections
teaches its own lessons.
</p>


<p>
-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href='http://LinuxGazette.NET'>http://LinuxGazette.NET</a> *
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at okopnik.com]

</p>
</b><br />
<b>Thu, 22 Apr 2010 18:41:23 -0400</b>
</p>

<p>
On Tue, Apr 20, 2010 at 05:00:54PM +1000, Henry Grebler wrote:
</p>

<pre>
&gt; 
&gt; Sounds to me like you should try
&gt; 
&gt; 	stty erase "^_"
&gt; 
&gt; on the remote machine.
&gt; 
&gt; My suggestion is to let 'screen' do whatever it wants and compensate
&gt; at remotehost.
</pre>

<p>
That seems reasonable - although the problem does not manifest at the
commandline, but only in Vim. I dimly recall that Vim has a way to deal
with that kind of error... but haven't had the spare minutes (or brain
capacity) to go digging. I'm neck-deep in a project that's going to go
at least another week, and my CPU is almost maxed out.
 
</p>

<pre>
&gt; I'm a bit intrigued. I can't make it fail in the same way. What
&gt; platform is localhost? What platform is remotehost?
</pre>

<pre>
ben at Jotunheim:~$ uname -a
Linux Jotunheim 2.6.31-20-generic #58-Ubuntu SMP Fri Mar 12 05:23:09 UTC 2010 i686 GNU/Linux
ben at Jotunheim:~$ ssh lg 'uname -a'
Linux genetikayos.com 2.4.21-27.ELsmp #1 SMP Wed Dec 1 21:59:02 EST 2004 i686 i686 i386 GNU/Linux
</pre>

<p>
I don't think that's where the difference is, though. Here's some more
info, edited for clarity:
</p>

<pre>
ben at Jotunheim:~$ ssh lg
[ben at genetikayos ben]$ echo $TERM
xterm
[ben at genetikayos ben]$ screen -r
[ben at genetikayos ben]$ echo $TERM
screen
</pre>

<p>
It's quite likely that Vim knows what to do with the former, but not the
latter.
</p>


<p>
-- 
                       OKOPNIK CONSULTING
        Custom Computing Solutions For Your Business
Expert-led Training | Dynamic, vital websites | Custom programming
               443-250-7895    <a href='http://okopnik.com'>http://okopnik.com</a>
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Henry Grebler [henrygrebler at optusnet.com.au]

</p>
</b><br />
<b>Fri, 23 Apr 2010 18:02:07 +1000</b>
</p>

<pre>
&gt;That seems reasonable - although the problem does not manifest at the
&gt;commandline, but only in Vim. I dimly recall that Vim has a way to deal
</pre>

<p>
The reason that the problem does not manifest at the commandline is
that bash (strictly Readline) treats both backspace (^H) and delete (^?) as
"backward-delete-char". Try this:
</p>

<p>
	bind -p | grep 'backward-delete-char'
"\C-h": backward-delete-char
"\C-?": backward-delete-char
# forward-backward-delete-char (not bound)
</p>



<pre>
&gt;with that kind of error... but haven't had the spare minutes (or brain
&gt;capacity) to go digging. I'm neck-deep in a project that's going to go
&gt;at least another week, and my CPU is almost maxed out.
</pre>

<p>
Well, maybe the contagion is spread via email. There I was thinking
that I was immune to this stuff, when, fm if I didn't get the same
problem! And I use emacs! Go figure.
</p>

<p>
I don't think I cause the problem in the same way, though I do have a
good handle on how <strong>I</strong> cause the problem. For all that, I have an
inelegant workaround (at least for my problem).
</p>

<p>
On an xterm press-and-hold Ctrl and then hold down the left mouse
button. A menu appears. Make sure the item
<pre>
        Backarrow key (BS/DEL)
</pre>
has a tick on its left.
</p>

<p>
The nice thing about this workaround is that you don't have to jump
out of vim or emacs. As soon as you see that pressing the BackSpace key
is behaving oddly, just apply the recipe.
</p>

<p>
YMMV.
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Wed, 28 Apr 2010 00:51:40 -0400</b>
</p>

<p>
On Wed, Apr 21, 2010 at 12:44:20AM +1200, Chris Bannister wrote:
</p>

<pre>
&gt; On Tue, Apr 20, 2010 at 01:25:35PM +1000, Henry Grebler wrote:
&gt; &gt; 
&gt; &gt; I find the default settings of most sites really irritating. In
&gt; &gt; particular, I happen to like my keys to have functions according to
&gt; &gt; their position on the keyboard. This is less of a problem than in the
&gt; &gt; past, since it seems that Microsoft has mandated that the key on right
&gt; &gt; of the top row is labelled BackSpace. If I remember correctly, there
&gt; &gt; were keyboards that labelled it Delete.
&gt; 
&gt; An interesting read is:
&gt; <a href='http://mail-index.netbsd.org/netbsd-users/2010/04/01/msg005977.html'>http://mail-index.netbsd.org/netbsd-users/2010/04/01/msg005977.html</a>
&gt; and associated posts.
</pre>

<p>
I love it. The thread name alone - "The Chthulhoid horror that is
keyboard handling in Unix" - deserves to be enshrined forever and be
displayed by loyal museum staff to hushed and awed groups of children,
for their proper education and moral upbringing.
</p>

<p>
The delete-vs.-backspace religious wrangle will go on long after the
human race is dust. We shall infect whatever alien race comes to destroy
us, as our final revenge. <img src="../gx/smile.png" alt=":)">
</p>


<p>
-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href='http://LinuxGazette.NET'>http://LinuxGazette.NET</a> *
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at okopnik.com]

</p>
</b><br />
<b>Wed, 28 Apr 2010 18:55:18 -0400</b>
</p>

<p>
On Fri, Apr 23, 2010 at 06:02:07PM +1000, Henry Grebler wrote:
</p>

<pre>
&gt; 
&gt; --&gt;That seems reasonable - although the problem does not manifest at the
&gt; --&gt;commandline, but only in Vim. I dimly recall that Vim has a way to deal
&gt; 
&gt; The reason that the problem does not manifest at the commandline is
&gt; that bash (strictly Readline) treats both backspace (^H) and delete (^?) as
&gt; "backward-delete-char". Try this:
&gt; 
&gt; 	bind -p | grep 'backward-delete-char'
&gt; "\C-h": backward-delete-char
&gt; "\C-?": backward-delete-char
&gt; # forward-backward-delete-char (not bound)
</pre>
 
It's rather odd. "screen" doesn't modify that - but it does affect how
Vim works. Is it only the TERM setting, I wonder? I'll check that out
later.
 
</p>

<pre>
&gt; On an xterm press-and-hold Ctrl and then hold down the left mouse
&gt; button. A menu appears. Make sure the item
&gt; 
&gt;         Backarrow key (BS/DEL)
&gt; 
&gt; has a tick on its left.
&gt; 
&gt; The nice thing about this workaround is that you don't have to jump
&gt; out of vim or emacs. As soon as you see that pressing the BackSpace key
&gt; is behaving oddly, just apply the recipe.
&gt; 
&gt; YMMV.
</pre>

<p>
...especially if you use Ubuntu. There, the default is 'gnome-terminal'
- which does not have the above interface. One of the things I
definitely find annoying about it. I sometimes change the default term
to the real 'xterm', but most times, I can live with it.
</p>


<p>
-- 
                       OKOPNIK CONSULTING
        Custom Computing Solutions For Your Business
Expert-led Training | Dynamic, vital websites | Custom programming
               443-250-7895    <a href='http://okopnik.com'>http://okopnik.com</a>
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Henry Grebler [henrygrebler at optusnet.com.au]

</p>
</b><br />
<b>Thu, 29 Apr 2010 10:09:26 +1000</b>
</p>

<pre>
&gt; ...especially if you use Ubuntu. There, the default is 'gnome-terminal'
&gt; - which does not have the above interface. One of the things I
&gt; definitely find annoying about it. I sometimes change the default term
&gt; to the real 'xterm', but most times, I can live with it.
</pre>

<p>
Your comment raises so many issues.
</p>

<p>
1. Why are people reinventing the wheel? What was so dreadfully wrong
with xterm that someone had to fork (or, worse, create from scratch),
gnome-terminal?
</p>

<p>
If extra features were desirable, why could they not be added as
compile options or run-time switches to xterm?
</p>

<p>
What am I missing here?
</p>


<p>
2. The other thing that I like in "the above interface" is Log to
File. Lately I have found this turned off at compile time, presumably
because it is seen as a security risk.
</p>

<p>
However, as a mechanism for recording exactly what really happened
during a session it beats everything else going round. I especially
like the ability to turn logging on and off during a session.
</p>


<p>
3. I also love the way that xterm allows text selection with the
mouse: one click for characters, two for words, three for lines. By
default, right button extends/contracts the current selection; middle
button pastes.
</p>


<p>
4. Whatever your tool of choice, just when you find it working how
<strong>you</strong> want, it seems that someone wants to change its behaviour in a
way which is insensitive to tradition.
</p>

<p>
Maybe having gnome-terminal as a separate product wasn't such a bad
idea!
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas at xteddy.org]

</p>
</b><br />
<b>Thu, 29 Apr 2010 10:35:53 +0100</b>
</p>

<p>
On Thu, Apr 29, 2010 at 10:09:26AM +1000, Henry Grebler wrote:
</p>

<pre>
&gt; 1. Why are people reinventing the wheel? What was so dreadfully wrong
&gt; with xterm that someone had to fork (or, worse, create from scratch),
&gt; gnome-terminal?
&gt; 
&gt; If extra features were desirable, why could they not be added as
&gt; compile options or run-time switches to xterm?
&gt; 
&gt; What am I missing here?
</pre>

<p>
 From XTerm's README:
</p>

<pre>
Abandon All Hope, Ye Who Enter Here
 
This is undoubtedly the most ugly program in the distribution.  It was one of
the first "serious" programs ported, and still has a lot of historical baggage.
Ideally, there would be a general tty widget and then vt102 and tek4014 
subwidgets so that they could be used in other programs.  We are trying to 
clean things up as we go, but there is still a lot of work to do.
</pre>


<pre>
&gt; 2. The other thing that I like in "the above interface" is Log to
&gt; File. Lately I have found this turned off at compile time, presumably
&gt; because it is seen as a security risk.
&gt; 
&gt; However, as a mechanism for recording exactly what really happened
&gt; during a session it beats everything else going round. I especially
&gt; like the ability to turn logging on and off during a session.
</pre>

<p>
script(1).
</p>


<pre>
&gt; 
&gt; 3. I also love the way that xterm allows text selection with the
&gt; mouse: one click for characters, two for words, three for lines. By
&gt; default, right button extends/contracts the current selection; middle
&gt; button pastes.
</pre>

<p>
I use this:
</p>

<pre>
XTerm*on2Clicks:  regex [^/@ \n]+
XTerm*on3Clicks:  regex [^ \n]+
XTerm*on4Clicks:  regex [^#$]+
XTerm*on5Clicks:  line
</pre>


<pre>
&gt; 
&gt; 4. Whatever your tool of choice, just when you find it working how
&gt; <strong>you</strong> want, it seems that someone wants to change its behaviour in a
&gt; way which is insensitive to tradition.
</pre>

<p>
I think you're missing the more obvious fact here -- gnome-terminal "fits"
in with the rest of the GNOME applications, especially in terms of style.
That's really important for consumers these days.
</p>

<p>
Yes, <strong>consumers</strong>.  Really.  <img src="../gx/smile.png" alt=":)">
</p>

<p>
-- Thomas Adam
</p>

<p>
-- 
"It was the cruelest game I've ever played and it's played inside my head."
-- "Hush The Warmth", Gorky's Zygotic Mynci.
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Thu, 29 Apr 2010 09:32:51 -0400</b>
</p>

<p>
On Thu, Apr 29, 2010 at 10:35:53AM +0100, Thomas Adam wrote:
</p>

<pre>
&gt; On Thu, Apr 29, 2010 at 10:09:26AM +1000, Henry Grebler wrote:
&gt; &gt; 
&gt; &gt; What am I missing here?
&gt; 
&gt; &gt;From XTerm's README:
&gt; 
&gt; ``
&gt; Abandon All Hope, Ye Who Enter Here
&gt; ''
</pre>

<p>
[grin] Exactly the part I was going to cite, but you beat me to it.
 
</p>

<pre>
&gt; &gt; 3. I also love the way that xterm allows text selection with the
&gt; &gt; mouse: one click for characters, two for words, three for lines. By
&gt; &gt; default, right button extends/contracts the current selection; middle
&gt; &gt; button pastes.
&gt; 
&gt; I use this:
&gt; 
&gt; ``
&gt; XTerm*on2Clicks:  regex [^/@ \n]+
&gt; XTerm*on3Clicks:  regex [^ \n]+
&gt; XTerm*on4Clicks:  regex [^#$]+
&gt; XTerm*on5Clicks:  line
&gt; ''
</pre>

<p>
Oh, that's <strong>nice</strong>. For anyone following along at home, this means "add
the above lines to your ~/.Xresources file (creating one if needed),
then run 'xrdb -merge ~/.Xresources', which will make that configuration
available to any xterms you start after that point." The effect of the
above is to select, on two clicks, any part of the line that does not
contain '@' signs, spaces, or newlines; on three clicks, anything that
is not a space or a newline; on four, anything that is not a '#' sign or
a '$' sign; and on five, the entire line.
</p>

<p>
Obviously, you could change the regexes to suit your own preferences. I
wasn't aware that you could do that; nice bit of flexibility.
 
</p>

<pre>
&gt; &gt; 4. Whatever your tool of choice, just when you find it working how
&gt; &gt; <strong>you</strong> want, it seems that someone wants to change its behaviour in a
&gt; &gt; way which is insensitive to tradition.
&gt; 
&gt; I think you're missing the more obvious fact here -- gnome-terminal "fits"
&gt; in with the rest of the GNOME applications, especially in terms of style.
&gt; That's really important for consumers these days.
&gt; 
&gt; Yes, <strong>consumers</strong>.  Really.  <img src="../gx/smile.png" alt=":)">
</pre>

<p>
Consumers who use the CLI. I boggle. Truly, I do. <img src="../gx/smile.png" alt=":)"> But you're right:
'gnome-terminal' is of a piece with the entire Ubuntu approach, and a
plain xterm just doesn't fit that model. [shrug] It's easy enough to do
System-&gt;Preferences-&gt;Preferred_Applications-&gt;System(tab) and change the
default terminal to 'Standard X terminal', if that's what you want to
do. As long as the choice is there, I'm satisfied.
</p>



<p>
-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href='http://LinuxGazette.NET'>http://LinuxGazette.NET</a> *
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-resuscitating_a_comatose_xterm_window">Back</a><hr width="50%" align="left" /><p><br /></p></div>
</body>
</html>
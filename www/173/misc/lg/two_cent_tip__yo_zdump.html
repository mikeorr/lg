<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
		 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' lang='utf-8' xml:lang='utf-8'>
<head>
<title>Two-cent Tip: Yo! zdump!</title>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
<link rel='stylesheet' type='text/css' href='../../../lg.css' />
</head>
<body>
<a href="../../../"><img alt="Linux Gazette" src="../../../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" /></a><img alt="Tux" src="../../../gx/tux_86x95_indexed.png" id="tux" /><p id="fun">...making Linux just a little more fun!</p><div class='content articlecontent'><a name="top"></a><h3>Two-cent Tip: Yo! zdump!</h3>
<p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Sun, 14 Mar 2010 23:43:47 -0400</b>
</p>

<p>
----- Forwarded message from "s. keeling" &lt;keeling@nucleus.com&gt; -----
</p>

<p>
I've yet again just discovered that tomorrow morning is "spring
forward Day", so this may be apropos:
</p>

<pre>
   alias dst="zdump -v Canada/Mountain | grep $(date '+%Y')"
</pre>

<p>
Substitute your TZ for C/M, of course.  Submit to 2cT?
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href='http://LinuxGazette.NET'>http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__yo_zdump">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Mon, 15 Mar 2010 02:31:42 -0400</b>
</p>

<p>
On Sun, Mar 14, 2010 at 11:43:47PM -0400, Benjamin Okopnik wrote:
</p>

<pre>
&gt; ----- Forwarded message from "s. keeling" &lt;keeling@nucleus.com&gt; -----
&gt; 
&gt; I've yet again just discovered that tomorrow morning is "spring
&gt; forward Day", so this may be apropos:
&gt; 
&gt;    alias dst="zdump -v Canada/Mountain | grep $(date '+%Y')"
&gt; 
&gt; Substitute your TZ for C/M, of course.
</pre>

<p>
Even that last part can be automated:
</p>

<pre>
alias dst="zdump -v `cat /etc/timezone` | grep $(date '+%Y')"
</pre>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href='http://LinuxGazette.NET'>http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__yo_zdump">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Breen Mullins [breen.mullins at gmail.com]

</p>
</b><br />
<b>Mon, 15 Mar 2010 11:53:07 -0700</b>
</p>

<p>
* Ben Okopnik &lt;ben@linuxgazette.net&gt; [2010-03-15 02:31 -0400]:
</p>


<pre>
&gt;
&gt;Even that last part can be automated:
&gt;
&gt;``
&gt;alias dst="zdump -v `cat /etc/timezone` | grep $(date '+%Y')"
&gt;''
&gt;
</pre>

<p>
For most of us that file should be /etc/localtime .
</p>

<p>
A large number of us had to worry about the time change on Sunday
morning. The whole choir was there on time yesterday (!)
</p>


<pre>-- 
Breen Mullins
&lt;breen.mullins@gmail.com&gt;
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__yo_zdump">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at okopnik.com]

</p>
</b><br />
<b>Mon, 15 Mar 2010 15:55:43 -0400</b>
</p>

<p>
On Mon, Mar 15, 2010 at 11:53:07AM -0700, Breen Mullins wrote:
</p>

<pre>
&gt; * Ben Okopnik &lt;ben@linuxgazette.net&gt; [2010-03-15 02:31 -0400]:
&gt; 
&gt; &gt;
&gt; &gt;Even that last part can be automated:
&gt; &gt;
&gt; &gt;``
&gt; &gt;alias dst="zdump -v `cat /etc/timezone` | grep $(date '+%Y')"
&gt; &gt;''
&gt; 
&gt; For most of us that file should be /etc/localtime .
</pre>

<p>
Breen, are you sure? My /etc/localtime is the actual timezone <em>data</em> -
binary info - rather than the TZ string.
 
</p>

<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href='http://LinuxGazette.NET'>http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__yo_zdump">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sam Bisbee [sbisbee at computervip.com]

</p>
</b><br />
<b>Mon, 15 Mar 2010 16:55:06 -0400</b>
</p>

<p>
On Mon, Mar 15, 2010 at 03:55:43PM -0400, Ben Okopnik wrote:
</p>

<pre>
&gt; On Mon, Mar 15, 2010 at 11:53:07AM -0700, Breen Mullins wrote:
&gt; &gt; * Ben Okopnik &lt;ben@linuxgazette.net&gt; [2010-03-15 02:31 -0400]:
&gt; &gt; 
&gt; &gt; &gt;
&gt; &gt; &gt;Even that last part can be automated:
&gt; &gt; &gt;
&gt; &gt; &gt;``
&gt; &gt; &gt;alias dst="zdump -v `cat /etc/timezone` | grep $(date '+%Y')"
&gt; &gt; &gt;''
&gt; &gt; 
&gt; &gt; For most of us that file should be /etc/localtime .
&gt; 
&gt; Breen, are you sure? My /etc/localtime is the actual timezone <em>data</em> -
&gt; binary info - rather than the TZ string.
&gt;  
</pre>

<p>
Ditto - /etc/localtime is binary data and /etc/timezone is the string
representation ("America/New_York").
</p>

<p>
Cheers,
</p>

<pre>-- 
Sam Bisbee
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__yo_zdump">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Breen Mullins [breen.mullins at gmail.com]

</p>
</b><br />
<b>Mon, 15 Mar 2010 15:25:06 -0700</b>
</p>

<p>
On Mon, Mar 15, 2010 at 12:55, Ben Okopnik &lt;ben@okopnik.com&gt; wrote:
</p>

<pre>
&gt;
&gt; Breen, are you sure? My /etc/localtime is the actual timezone <em>data</em> -
&gt; binary info - rather than the TZ string.
</pre>

<p>
On Fedora, there's no /etc/timezone. Just /etc/localtime (which is the
binary data file).
</p>

<p>
zdump -v /etc/localtime returns the expected output, though.
</p>

<p>
Aren't distributions fun?
</p>


<pre>-- 
Breen Mullins
&lt;breen.mullins@gmail.com&gt;
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__yo_zdump">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Mon, 15 Mar 2010 19:44:21 -0400</b>
</p>

<p>
On Mon, Mar 15, 2010 at 03:25:06PM -0700, Breen Mullins wrote:
</p>

<pre>
&gt; On Mon, Mar 15, 2010 at 12:55, Ben Okopnik &lt;ben@okopnik.com&gt; wrote:
&gt; &gt;
&gt; &gt; Breen, are you sure? My /etc/localtime is the actual timezone <em>data</em> -
&gt; &gt; binary info - rather than the TZ string.
&gt; 
&gt; On Fedora, there's no /etc/timezone. Just /etc/localtime (which is the
&gt; binary data file).
</pre>

<p>
I've just checked, and it pretty much what I recalled (Debian used to do
it this way years ago): /etc/localtime is a link to the actual timezone
data in /usr/share/zoneinfo. Not much help, there.
 
</p>

<pre>
&gt; zdump -v /etc/localtime returns the expected output, though.
</pre>

<p>
Perhaps that depends on what is expected. <img src="../gx/smile.png" alt=":)">
</p>

<p>
<pre class='code'>
ben@Jotunheim:~$ zdump -v America/New_York | grep $(date '+%Y')
America/New_York  Sun Mar 14 06:59:59 2010 UTC = Sun Mar 14 01:59:59 2010 EST isdst=0 gmtoff=-18000
America/New_York  Sun Mar 14 07:00:00 2010 UTC = Sun Mar 14 03:00:00 2010 EDT isdst=1 gmtoff=-14400
America/New_York  Sun Nov  7 05:59:59 2010 UTC = Sun Nov  7 01:59:59 2010 EDT isdst=1 gmtoff=-14400
America/New_York  Sun Nov  7 06:00:00 2010 UTC = Sun Nov  7 01:00:00 2010 EST isdst=0 gmtoff=-18000
ben@Jotunheim:~$ zdump -v /usr/share/zoneinfo/EDT
/usr/share/zoneinfo/EDT  Fri Dec 13 20:45:52 1901 UTC = Fri Dec 13 20:45:52 1901 isdst=0 gmtoff=0
/usr/share/zoneinfo/EDT  Sat Dec 14 20:45:52 1901 UTC = Sat Dec 14 20:45:52 1901 isdst=0 gmtoff=0
/usr/share/zoneinfo/EDT  Mon Jan 18 03:14:07 2038 UTC = Mon Jan 18 03:14:07 2038 isdst=0 gmtoff=0
/usr/share/zoneinfo/EDT  Tue Jan 19 03:14:07 2038 UTC = Tue Jan 19 03:14:07 2038 isdst=0 gmtoff=0
ben@Jotunheim:~$ zdump -v /usr/share/zoneinfo/EDT | grep $(date '+%Y')
ben@Jotunheim:~$ 
</pre>

<p>
Neither of the last two gives you the time switch-over point, which was,
I think, Stephen's whole point.
 
</p>

<pre>
&gt; Aren't distributions fun?
</pre>

<p>
Heh. I'm sure that there's a way to get the same thing on a
Fedora/CentOS system, but you're right: my adaptation of this script
will only work on systems that have a file containing that TZ string
(note that 'EST', etc., won't work; it has to be the 'Country/City'
variety.) His version is distro-independent, though - assuming that all
distros have 'zdump', of course. <img src="../gx/smile.png" alt=":)">
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href='http://LinuxGazette.NET'>http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_tips.html#mb-two_cent_tip__yo_zdump">Back</a><hr width="50%" align="left" /><p><br /></p></div>
</body>
</html>
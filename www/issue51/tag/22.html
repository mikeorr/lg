<!--startcut ======================================================= -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<META NAME="generator" CONTENT="lgazmail v1.3C.e">
<TITLE>The Answer Guy 51: Installing a POP Daemon on Red Hat Linux</TITLE>
</HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"
	LINK="#3366FF" VLINK="#A000A0">
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<H4>"The Linux Gazette...<I>making Linux just a little more fun!</I>"</H4>
<P> <hr> <P>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<center>
<H1><A NAME="answer">
	<img src="../../gx/dennis/qbubble.gif" alt="(?)" 
		border="0" align="middle">
	<font color="#B03060">The Answer Guy</font>
	<img src="../../gx/dennis/bbubble.gif" alt="(!)" 
		border="0" align="middle">
</A></H1> 
<BR>
<H4>By James T. Dennis,
	<a href="mailto:tag@lists.linuxgazette.net">tag@lists.linuxgazette.net</a><BR>
	LinuxCare,
	<A HREF="http://www.linuxcare.com/">http://www.linuxcare.com/</A> 
</H4>
</center>

<p><hr><p>
<!--  endcut ======================================================= -->
<!-- begin 22 -->
<H3 align="left"><img src="../../gx/dennis/qbubble.gif" 
	height="50" width="60" alt="(?) " border="0"
	>Installing a POP Daemon on Red Hat Linux</H3>


<p><strong>From Hongwei Li  on Mon, 31 Jan 2000  
</strong></p>
<P><STRONG>
Hi Jim,
</STRONG></P>
<P><STRONG>
Thank you very much!  I did the following as you advised, but still failed:
</STRONG></P>
<!-- ::<BlockQuote>
Installing a POP Daemon on <A HREF="http://www.redhat.com/">Red Hat</A> Linux
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
</BlockQuote>:: -->
<P><STRONG><FONT COLOR="#000099"><EM>
<BR>Hi,
</EM></FONT></STRONG></P>
<P><STRONG><FONT COLOR="#000099"><EM>
<BR>I recently installed RedHat 6.0 and 6.1 on two machines,
<BR>respectively.  Everything looks working except that users can not
<BR>access their e-mail accounts on these two servers from PC Windows
<BR>using Netscape Mail or MS Outlook Express although they can access
<BR>the e-mails using telnet, pine.  Apparently, POP3 daemon is not
<BR>working on these two RH Linux boxes.
</EM></FONT></STRONG></P>
<P><STRONG><FONT COLOR="#000099"><EM>
<BR>Somebody said I can retrieve POP3 daemon from IMAP package.  But,
<BR>I don't know where it is and how to do it.  Could you help me?
<BR>How to check the system if POP3 daemon is installed and working?
<BR>Where can I get IMAP package and retrieve POP3 daemon, then
<BR>installed it and let it run? or should I get something else?
</EM></FONT></STRONG></P>
<P><STRONG><FONT COLOR="#000099"><EM>
<BR>I would greatly appreciate your help!
<BR>Hongwei Li
</EM></FONT></STRONG></P>
<blockquote><strong><FONT COLOR="#000066"><EM>
Your "somebody" is a smart cookie.  You sould listen
to him or her.  However, you might ask him (or her) for
a wee bit more detail.
</EM></FONT></STRONG></blockquote>
<P><STRONG>
-- He/she sent me the first advice, but didn't explain further after I asked
in more detail.  So, I could not do anything until I received your help.
</STRONG></P>
<blockquote><STRONG><FONT COLOR="#000066"><EM>
Red Hat inexplicably puts their POP and IMAP daemons
in the same file.  You can install them using
something like the following procedure:
</EM></FONT></STRONG></blockquote>
<blockquote><STRONG><FONT COLOR="#000066"><EM>
1) Mount your RH Linux CD (disc #1?) using
a command like:
</EM></FONT></STRONG></blockquote>
<blockquote><STRONG><FONT COLOR="#000066"><EM><BlockQuote><Code>
mount /mnt/cdrom
</Code></BlockQuote></EM></FONT></STRONG></blockquote>
<P><STRONG>
-- I did it.
</STRONG></P>
<blockquote><STRONG><FONT COLOR="#000066"><EM>
2) Go to RPM directory using something like:
</EM></FONT></STRONG></blockquote>
<blockquote><STRONG><FONT COLOR="#000066"><EM><BlockQuote><Code>
cd /mnt/cdrom/Redhat/RPMS
</code></blockquote></EM></FONT></STRONG></blockquote>
<P><STRONG>
-- then, this.
</STRONG></P>
<blockquote><STRONG><FONT COLOR="#000066"><EM>
3) Install the imap....rpm package using a
command like:
</EM></FONT></STRONG></blockquote>
<blockquote><STRONG><FONT COLOR="#000066"><EM><BlockQuote><Code>
rpm -Uvh imap*
</Code></BlockQuote></EM></FONT></STRONG></blockquote>
<P><STRONG>
-- then this as:
</STRONG></P>
<P><STRONG>
<tt>rpm -Uvh imap-4.5.3.i386.rpm</tt>  (on a RH 6.0 system)
<br>the screen shows:
<br><tt>imap           ##....#</tt>
</BlockQuote></STRONG></P>
<blockquote><STRONG><FONT COLOR="#000066"><EM>
... or:
</EM></FONT></STRONG></blockquote>
<blockquote><STRONG><FONT COLOR="#000066"><EM><BlockQuote>
rpm -i imap*
</BlockQuote></EM></FONT></STRONG></blockquote>
<blockquote><STRONG><FONT COLOR="#000066"><EM>
That's basically all there is to it.  You can
test for POP installlation/accessibility using a
command like:
</EM></FONT></STRONG></blockquote>
<blockquote><STRONG><FONT COLOR="#000066"><EM><BlockQuote><Code>
telnet $TARGET 110
</Code></BlockQuote></EM></FONT></STRONG></blockquote>
<blockquote><STRONG><FONT COLOR="#000066"><EM>
... where $TARGET is replaced with the hostname or
IP address of the system on which you hope to find
a POP server.
</EM></FONT></STRONG></blockquote>
<blockquote><STRONG><FONT COLOR="#000066"><EM>
If you get a "connection refused" or a "connection
closed by remote host" then you don't have POP installed
properly on the $TARGET system (or you have a firewall,
packet filter, or <TT>/etc/hosts.deny</TT> rule between your client
and the server).
</EM></FONT></STRONG></blockquote>
<P><STRONG>
-- then I try this:
</STRONG></P>
<P><STRONG>
<tt>telnet elyback.wustl.edu 110</tt> from that machine (elyback) and another
Linux system, but got:
</STRONG></P>
<Pre><STRONG> Trying 128.252.85.78...
 telnet: Unable to connect to remote host: Connection refused
</STRONG></Pre>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
It sounds like you have a more basic networking
problem.  Are you sure that you have your IP addresses
and routes set up correctly?
</BLOCKQUOTE>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Then, I reboot the machine (maybe I don't need to reboot, but enter some
other command else?), try it again and still get the same message from that
machine and from another system.  I check the <TT>/etc/service</TT> file, it shows
</STRONG></P>

<pre><strong> pop-3    110/tcp        # POP version 3
 pop-3    110/udp
</strong></pre>
<P><STRONG>
and the <TT>/etc/hosts.deny</TT> file is empty.  We don't have firewall.
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
It's good that you checked that.  Actually it's
possible to put deny rules in the <TT>/etc/hosts.allow</TT>
file (or vice versa).  When I asked Wietse why he
didn't just change that to <TT>/etc/tcpd.conf</TT> instead of
having two different files who's names are obviously
derived from the name of the utility that references
them (<TT>/sbin/tcpd</TT>).
</BLOCKQUOTE>
<BLOCKQUOTE>
Remember to ensure that you have valid <TT>/etc/hosts</TT>
entries for your two systems.  Do a search on my
FAQ or in the Linux Gazette Archives on the string:
</BLOCKQUOTE>
<BLOCKQUOTE><BlockQuote>
"double reverse lookup"
</BlockQuote></BLOCKQUOTE>
<BLOCKQUOTE>
... for some long explanations on why this is important.
</BLOCKQUOTE>
<BLOCKQUOTE>
(My first guess would be that you don't have
proper <TT>/etc/hosts</TT> or DNS PTR records for these, and that
your copy of TCP Wrappers may be configured (compiled)
with the -DPARANOID option.  Possibly that your
<TT>/etc/hosts.allow</TT> has a PARANOID directive in it).
</BLOCKQUOTE>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
So, it seems that the pop3 daemon is still not working.  Is there any other
way to check if it is installed and running after I did the above things?
</STRONG></P>
<P><STRONG>
Could you give me more advice? Thank you!
<br>Hongwei
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
The fastest way to get an answer would be to call
<A HREF="http://www.linuxcare.com/">Linuxcare</A>'s tech support number.  However, that is not
free.  You could keep trying to get me enough information
so that I could find the answer --- but I'm sure you
understand that this might take a long time (I'll be
gone in New York all next week, and in Arizona the
week after that).
</BLOCKQUOTE>
<BLOCKQUOTE>
So, if you need this quickly, and are willing to pay
a little bit to get some handholding consider calling
888-LIN-GURU.  Otherwise I'll need to see the output
from the following commands:
</BLOCKQUOTE>

<blockquote><pre>		script /tmp/answerguy.capture
		ifconfig -a
		route -n
		netstat -an --inet | grep LISTEN
		tail /var/log/messages
		exit
		cd /tmp
		col -b &lt; answerguy.capture  &gt; answerguy.txt
</pre></blockquote>
<BLOCKQUOTE>
If you do that correctly you should see a message
like: &quot;Script done, file is <TT>/tmp/answerguy.capture&quot;</TT>
and you should find a reasonably clean copy of the
the captured information in <TT>/tmp/answerguy.txt</TT>
</BLOCKQUOTE>
<BLOCKQUOTE>
(The 'script' or "typescript" command is what
students use to capture there interactive sessions to
files, so they can print their homework assignments.
The col -b command "collates out" the backspaces
and other control characters that might have been
captured along with the text. The other commands are
diagnostics and information gathering, ended by the
exit command to end the typescript session).
</BLOCKQUOTE>
<BLOCKQUOTE>
I'd need these for both of the machines involved.
</BLOCKQUOTE>
<BLOCKQUOTE>
Also see if each system can "ping" the other, and
try running the command:
</BLOCKQUOTE>
<BLOCKQUOTE><BLOCKQUOTE><CODE><BlockQuote>
tcpdump -n
</BlockQuote></CODE></BLOCKQUOTE></BLOCKQUOTE>
<BLOCKQUOTE>
... on the server while you are trying to access
the POP service.  You should be able to see the
packet headers that tcpdump "sees" as the connection
attempts are made.
</BLOCKQUOTE>
<BLOCKQUOTE>
As I say, if you decide to stick with me it could be
a few weeks before I get back to you (two weeks out
of town and more time to get caught up with my
e-mail backup after that.
</BLOCKQUOTE>
<BLOCKQUOTE>
Of course you can also post this to netnews
(<a href="news:comp.os.linux.networking">comp.os.linux.networking</a>) 
or you could subscribe to L.U.S.T. (Linux Users Support Team) which
has a web page at:
</BLOCKQUOTE>
<BLOCKQUOTE><DL><DT>
L.U.S.T. Home Page:
<DD><A HREF="http://www.ch4549.org/lust"
	>http://www.ch4549.org/lust</A>
</DL></BLOCKQUOTE>
<BLOCKQUOTE>
... you can find a list of other support options
at:
</BLOCKQUOTE>
<BLOCKQUOTE><DL><DT>
Netpedia Linux: Support
<DD><A HREF="http://smalllinux.netpedia.net/links/support.html"
	>http://smalllinux.netpedia.net/links/support.html</A>
</DL></BLOCKQUOTE>

<!-- sig -->


<!-- end 22 -->
<hr align="center" width="40%">
<!-- begin 23 -->
<H3 align="left"><img src="../../gx/dennis/bbubble.gif" 
	height="50" width="60" alt="(!) " border="0"
	>More on: Installing a POP Daemon on Red Hat Linux</H3>


<p><strong>From Tim Moss  on Sun, 20 Feb 2000  
</strong></p>
<!-- ::
More on: Installing a POP Daemon on <A HREF="http://www.redhat.com/">Red Hat</A> Linux
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
:: -->
<BLOCKQUOTE>
Tim Moss commented on one reader's apparently unresolved
problem:
</BLOCKQUOTE>
<P><STRONG>Have him uncomment pop-3 in his 
<TT>/etc/inetd.conf.</TT> I believe it is
commented out by default in current Red Hat distros.
</STRONG></P>
<P><STRONG>
Hongwei wrote:
</STRONG></P>
<P><STRONG><FONT COLOR="#000099"><EM>Hi Jim,
<BR>Thank you very much!  I did the following as you advised, but still failed:
<BR>Installing a POP Daemon on Red Hat Linux
</EM></FONT></STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>
Of course I should have added a "check your inetd.conf"
check to my instructions.
</BLOCKQUOTE>
<BLOCKQUOTE>
I have mixed feelings about this change to Red Hat's
default <TT>/etc/inetd.conf.</TT>
</BLOCKQUOTE>
<BLOCKQUOTE>
On the one hand I applaud the advance towards better
security.  It's long been a problem in the UNIX world that
companies leave services enabled and insecurely configured
in their call avoidance efforts.  Doing the "right thing"
can often result in getting a very large number of technical
support calls, which translates to EXPENSE for the
commercial software vendor.
</BLOCKQUOTE>
<BLOCKQUOTE>
So it's nice that Red Hat is in a business where they can
fix problems like this and not worry about the
consequences.
</BLOCKQUOTE>
<BLOCKQUOTE>
On the other hand I think that it is absurd that they
haven't enhanced their RPM's and package management to
resolve the issue of configuring (and re-configuring)
packages as they are installed and/or after the fact.
</BLOCKQUOTE>
<BLOCKQUOTE>
This is one of those respects in which I prefer 
<A HREF="http://www.debian.org/">Debian</A>.  If
I install a Debian POP server it makes sure that the
inetd.conf is configured to use it.  It might ask me if I
want to add an entry to limit the hosts.allow that are
allowed to access this service.
</BLOCKQUOTE>
<BLOCKQUOTE>
Of course Red Hat couldn't simply adopt the Debian strategy.
The Red Hat distributions are geared for an "install
everything" approach.  When I try to make an initial
"minimal" installation in Red Hat I find that later efforts
to add packages "as needed" are frought with trips into
"dependency hell."
</BLOCKQUOTE>
<BLOCKQUOTE>
By contrast Debian excels at the minimal installation.
Later addition (and removal) of packages is more robust than
I've seen under any other OS.  Dependencies and conflicts
are handled (mostly automatically).
</BLOCKQUOTE>
<BLOCKQUOTE>
(At the same time Debian has room for improvement as well.
I'll save my choice comments for a review of their next
major release).
</BLOCKQUOTE>
<BLOCKQUOTE>
(Incidentally, any reader that writes to suggest using
Linuxconf will get an e-raspberry!  I won't even comment on
my experiences with Linuxconf.  Ugh!).
</BLOCKQUOTE>

<!-- sig -->


<!-- end 23 -->
<!--startcut ======================================================= -->
<P> <hr> <P>
<H5 align="center"><a href="http://www.linuxgazette.net/copying.html"
	>Copyright &copy;</a> 2000, James T. Dennis 
<BR>Published in <I>The Linux Gazette</I> Issue 51 March 2000</H5>
<H6 ALIGN="center">HTML transformation  by
	<A HREF="mailto:star@tuxtops.com">Heather Stern</a> of
	Tuxtops, Inc.,
	<A HREF="http://www.tuxtops.com/">http://www.tuxtops.com/</A> 
</H6>
<P> <hr> <P>
<!-- begin tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::-->
<TABLE WIDTH="95%"><TR VALIGN="center" ALIGN="center">
<TD colspan="2" rowspan="2"><A 
	HREF="../lg_answer51.html"
	><IMG SRC="../../gx/dennis/answernew.gif"
              ALT="[ Answer Guy Current Index ]"></A>
<TD colspan="2" rowspan="2"><A 
	HREF="../../tag/kb.html"
	><IMG SRC="../../gx/dennis/answertoc.gif"
              ALT="[ Index of Past Answers ]"></A></td>
  <TD WIDTH="11%"><A HREF="../lg_answer51.html#greeting"><img
	src="../../gx/dennis/smily.gif" alt="greetings" border="0"></A></TD>
  <TD WIDTH="11%"><A HREF="1.html">1</A></TD>
  <TD WIDTH="11%"><A HREF="2.html">2</A></TD>
  <TD WIDTH="11%"><A HREF="3.html">3</A></TD>
  <TD WIDTH="11%"><A HREF="4.html">5</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="11%"><A HREF="5.html">5</A></TD>
  <TD WIDTH="11%"><A HREF="6.html">6</A></TD>
  <TD WIDTH="11%"><A HREF="7.html">7</A></TD>
  <TD WIDTH="11%"><A HREF="8.html">8</A></TD>
  <TD WIDTH="11%"><A HREF="9.html">9</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="10%"><A HREF="10.html">10</A></TD>
  <TD WIDTH="10%"><A HREF="11.html">11</A></TD>
  <TD WIDTH="10%"><A HREF="12.html">12</A></TD>
  <TD WIDTH="10%"><A HREF="13.html">13</A></TD>
  <TD WIDTH="11%"><A HREF="14.html">14</A></TD>
  <TD WIDTH="11%"><A HREF="15.html">15</A></TD>
  <TD WIDTH="11%"><A HREF="16.html">16</A></TD>
  <TD WIDTH="11%"><A HREF="17.html">17</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD WIDTH="10%"><A HREF="18.html">18</A></TD>
  <TD WIDTH="10%"><A HREF="19.html">19</A></TD>
  <TD WIDTH="10%"><A HREF="20.html">20</A></TD>
  <TD WIDTH="10%"><A HREF="21.html">21</A></TD>
  <TD WIDTH="11%"><A HREF="22.html">22</A></TD>
</TR></TABLE>
</TR><TR VALIGN="center" ALIGN="center">
<!-- end tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::::-->
<P> <hr> <P>
<!-- begin lgnav ::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<A HREF="../index.html"
	><IMG SRC="../../gx/indexnew.gif" ALT="[ Table Of Contents ]"></A>
<A HREF="../../index.html"
	><IMG SRC="../../gx/homenew.gif" ALT="[ Front Page ]"></A>
<A HREF="../lg_bytes51.html"
	><IMG SRC="../../gx/back2.gif" ALT="[ Previous Section ]"></A>
<A HREF="../../faq/index.html"
	><IMG SRC="../../gx/dennis/faq.gif"
              ALT="[ Linux Gazette FAQ ]"></A>
<A HREF="../lg_tips51.html"
	><IMG SRC="../../gx/fwd.gif" ALT="[ Next Section ]"></A>
<!-- end lgnav ::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
</BODY></HTML>
<!--endcut ========================================================= -->


<html>
<head>
<link href="../lg.css" rel="stylesheet" type="text/css" media="screen, projection"  />
<link rel="shortcut icon" href="../favicon.ico" />
<title>More 2 Cent Tips! LG #110</title>

<style type="text/css" media="screen, projection">
<!--

-->
</style>

<link rel="alternate" type="application/rss+xml" title="LG RSS" href="lg.rss" />
<link rel="alternate" type="application/rdf+xml" title="LG RDF" href="lg.rdf" />
<link rel="alternate" type="application/atom+xml" title="LG Atom" href="lg.atom.xml" />

</head>

<body>


<img src="../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" alt="Linux Gazette"/>
<p id="fun">...making Linux just a little more fun!</p>


<div class="content articlecontent">

<div id="previousnexttop">
<A HREF="lg_mail.html" >&lt;-- prev</A> | <A HREF="lg_answer.html" >next --&gt;</A>
</div>



<h1>More 2 Cent Tips!</h1>

<p>
<center><STRONG>See also: The Answer Gang's 
<a href="../tag/kb.html">Knowledge Base</a>
and the <i>LG</i> 
<a href="http://www.linuxgazette.net/search.html">Search Engine</a></STRONG>
</center><HR>
<UL>
<!-- index_text begins -->
<li><A HREF="#tips.1"
	><strong>Firewall</strong></a>
<li><A HREF="#tips.2"
	><strong>Cygwin from a CD</strong></a>
<li><A HREF="#tips.3"
	><strong>Tip of the Day: regular expressions</strong></a>
<li><A HREF="#tips.4"
	><strong>Adding custom headers in Thunderbird</strong></a>
<li><A HREF="#tips.5"
	><strong>Counting braces</strong></a>
<li><A HREF="#tips.6"
	><strong>JPEG to PS</strong></a>
<li><A HREF="#tips.7"
	><strong>Setting the Clock on Linux</strong></a>
<li><A HREF="#tips.8"
	><strong>SMTP-time despamming</strong></a>
<li><A HREF="#tips.9"
	><strong>starting X automatically without [gkx]dm</strong></a>
<li><A HREF="#tips.10"
	><strong>whois.sc</strong></a>
<!-- index_text ends -->
</UL>
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.1"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">Firewall</FONT></H3>
Hugo Mills (<a href="mailto:tag@lists.linuxgazette.net?subject=%20Re%3A%20%5BLG%20110%5D%202c%20Tips%20%231">darksatanic, #hants on irc.blitzed.org</a>)


<div class="irc">
<table>
<tr><td id="r">13:04 &lt;@darksatanic&gt; </td><td>I usually use it for debugging firewalls.</td></tr>
<tr><td id="r">13:04 &lt;@darksatanic&gt; </td><td>watch -n1 iptables -nvL \| sed -ne /^Chain INPUT/,/^$/p</td></tr>
<tr><td id="r">13:05 &lt;@darksatanic&gt; </td><td>There's a 2&cent; tip for you...</td></tr>
<tr><td id="r">13:07 &lt;@darksatanic&gt; </td><td>The sed bit prints out just the chain you want.</td></tr>
<tr><td id="r">13:08 &lt;@darksatanic&gt; </td><td>My rules for the firewall are just a tad too big to fit on the screen,</td></tr>
<tr><td id="r">13:09 &lt;@darksatanic&gt; </td><td>so I use that (and things like it) to show only the chains I want.</td></tr>
</table>
<p><br clear="all"></p>
</div>

<!-- end 1 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.2"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">Cygwin from a CD</FONT></H3>
Jimmy O'Regan (<a href="mailto:tag@lists.linuxgazette.net?subject=%20Re%3A%20%5BLG%20110%5D%202c%20Tips%20%232">The <em>LG</em> Answer Gang</a>)


<font color="#006600"><blockquote><IMG SRC="../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Jimmy] This is a follow-up to <A HREF="http://linuxgazette.net/109/lg_tips.html#tips.2"
	>http://linuxgazette.net/109/lg_tips.html#tips.2</A>
</blockquote></font>
<P>
Whoops. Having just looked back over the .reg file, I see that I have
the path for X's fonts entered differently to the rest of the file: this
<TT>/is</TT> not/ the reason why X doesn't work from a CD.
</P>
<P>
Saw this on <A HREF="http://www.slashdot.org/">Slashdot</A> today: XliveCD (<A HREF="http://xlivecd.indiana.edu"
	>http://xlivecd.indiana.edu</A>) is a
CD image that autoruns an X session when put into a Windows machine
(it's based on Cygwin).
</P>

<!-- end 2 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.3"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">Tip of the Day: regular expressions</FONT></H3>
Dave Whitinger (<a href="mailto:tag@lists.linuxgazette.net?cc=dave@lxer.com&subject=%20Re%3A%20%5BLG%20110%5D%202c%20Tips%20%233">dave from lxer.com</a>)


<P><STRONG>
Forwarding to you a good tip by Robert Whitinger.  If you ever
run dry and need fresh tips for upcoming LGs let me know - we've
got a ton of these fun ones.
</STRONG></P>
<BLOCKQUOTE>
[Ben] 
Thanks, Dave - we're always looking for 2-cent tips like these! I
believe Heather has mentioned this in the Mailbag recently.
</BLOCKQUOTE>
<P><STRONG>
(And please keep up the great work!)
</STRONG></P>
<BLOCKQUOTE>
[Ben] 
[grin] Much appreciated; we'll do our best. Keep on reading, and let
your friends know about us; the more folks read (and write for) us, the
better we get.
</BLOCKQUOTE>
<P><STRONG>
best,
dave
</STRONG></P>

<TABLE WIDTH="95%" BORDER="1" BGCOLOR="#FFFFCC"><TR><TD>
<p align="center">...............</p>
<P><STRONG>
I don't know about you, but I've spent a lot of time learning all
the intricacies of the preg_... pcre functions.  But whenever I
go to the shell environment, the rules are different and so are
the results.
</STRONG></P>
<P><STRONG>
Today, I found `pcregrep` and it behaves exactly like the perl
compatible regular expression from php and perl since it does in
fact use the same engine.  Now I have only one regex syntax to
know in detail, and my regexs work the same everywhere.
</STRONG></P>
<P><STRONG>
Now, I can say things like:
</STRONG></P>
<P><STRONG><CODE>
pcregrep -r ^[ae].*?log$ *
</CODE></STRONG></P><p align="center">...............</p>
</TD></TR></TABLE>

<!-- end 3 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.4"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">Adding custom headers in Thunderbird</FONT></H3>
Andy Burns (<a href="mailto:tag@lists.linuxgazette.net?cc=andy.burns@adslpipe.co.uk&subject=%20Re%3A%20%5BLG%20110%5D%202c%20Tips%20%234">andy.burns from adslpipe.co.uk</a>)



<br>Answered By  Brian Bilbrey,
 Jimmy O'Regan

<font color="#006600"><blockquote><IMG SRC="../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Jimmy] This is a follow-up to a 2c Tip in LG #109:
<A HREF="http://linuxgazette.net/109/lg_tips.html#tips.1"
	>http://linuxgazette.net/109/lg_tips.html#tips.1</A>
</blockquote></font>
<P><STRONG>
I stumbled across your article on mozilla/thunderbird headers (I'm only
an irregular reader)
</STRONG></P>
<P><STRONG>
I had a look an the "mheny" extension, because I like the idea of
customising the viewed headers, but I found that it <EM>CAN</EM> also control
the headers used at composition time. Not sure if you "summarized this
out" of your article, or didn't find it to start with 
<IMG SRC="../gx/dennis/smily.gif" ALT=";-)" 
		height="24" width="20" align="middle">
</STRONG></P>
<P><STRONG>
Within the option dialog for mheny extension, select custom headers from
the tree on the left, then pick composition from the drop list on the
right, and you can select existing fields or add/remove custom fields,
which then show up when you compose a message.
</STRONG></P>
<P><STRONG>
However (and I think this means it still doesn't fit your need) you
can't add a default value for a field.
</STRONG></P>
<BLOCKQUOTE>
[Brian] 
And that's the bingo value: I did try mnenhy, but what I really want is
a constant X-blah header containing a specific value every time I send
an email via Mozilla Thunderbird.
</BLOCKQUOTE>
<P><STRONG>
Still a useful find, thanks ...
</STRONG></P>
<BLOCKQUOTE>
[Brian] 
But you got farther than I did, thanks for the heads up, I'll work some
more with mnenhy when I get a chance. Of course, that I just spelled the
name of the extension right twice only shows that I had to look it up
twice, inside of a minute or two.
</BLOCKQUOTE>
<BLOCKQUOTE>
[Jimmy] 
I came across this: <A HREF="http://www.picklematrix.net/archives/000969.html"
	>http://www.picklematrix.net/archives/000969.html</A>
it turns out it <TT>/is/</TT> possible to add values to headers in Mozilla
</BLOCKQUOTE>
<BLOCKQUOTE>
add something like this to your prefs.js (not user.js):
</BLOCKQUOTE>

<blockquote><pre>user_pref("mail.identity.id2.headers", "tag");
user_pref("mail.identity.id2.header.tag", "X-gazette-tag: Jimmy");
</pre></blockquote>
<BLOCKQUOTE>
(id1 is the 'local folders' identity)
</BLOCKQUOTE>

<!-- end 4 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.5"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">Counting braces</FONT></H3>
Amod C Damle (<a href="mailto:tag@lists.linuxgazette.net?cc=amod_cd@rediffmail.com&subject=%20Re%3A%20%5BLG%20110%5D%202c%20Tips%20%235">amod_cd from rediffmail.com</a>)

<P><STRONG>
i am learning from your website "Linux Gazette" by which i am finding it
easy to learn unix.
</STRONG></P>
<P><STRONG>
but i am having problems compiling and debugging the following program ...
can you please help me out with its solution.
</STRONG></P>
<P><STRONG>
using UNIX filters and awk to write a shell script to filter out comment
statements in a C program
</STRONG></P>
<P><STRONG>
a shell script to count the number of parentheses and braces in a C
program
</STRONG></P>
<P><STRONG>
a shell script to recognize function calls in a C program
</STRONG></P>
<P><STRONG>
a shell script to generate code to do profiling of a C program (to insert
counters to the C program)
</STRONG></P>
<P><STRONG>
using filter or just  grep, sed and awk)
</STRONG></P>
<P><STRONG>
hoping for some guidence
sincerely
Amod Damle
(ILLINOIS INSTITUTE OF TECHNOLOGY-CHICAGO)
</STRONG></P>
<BLOCKQUOTE>
[Sluggo] 
The first thing you should see is the TAG Posting Guidelines
<A HREF="http://linuxgazette.net/tag/ask-the-gang.html"
	>http://linuxgazette.net/tag/ask-the-gang.html</A>
in the FAQ section.  There you'll see we don't do people's homework for
them.  How do we know it's homework?  You don't want to do a useful task:
who cares how many braces a C program has?  You choose the tools first and
then the strategy, and you insist on using kludgey tools.  If I really
wanted to count braces, I would write a Python program.
</BLOCKQUOTE>

<blockquote><pre>#!/usr/bin/env python
"""count-braces.py

Usage: count-braces.py &lt;filename
Print the number of {}() characters in the input file.
"""
import re, sys

braceRx = re.compile( R"[{}()]" )
text = sys.stdin.read()
hits = braceRx.findall(text)
print len(hits)
</pre></blockquote>
<BLOCKQUOTE>
[Ben] 
Jeez. Pythoneers. Always making things more complicated. 
<IMG SRC="../gx/dennis/smily.gif" ALT=":)" 
		height="24" width="20" align="middle">
</BLOCKQUOTE>

<blockquote><pre>perl -0wne'print y/{()}//' file.c
</pre></blockquote>

<!-- end 5 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.6"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">JPEG to PS</FONT></H3>
Kapil Hari Paranjape (<a href="mailto:tag@lists.linuxgazette.net?subject=%20Re%3A%20%5BLG%20110%5D%202c%20Tips%20%236">The <em>LG</em> Answer Gang</a>)


<P>
Readers who wish to convert JPEG to Postscript for inclusion in a
TeX/LaTeX document (or for any other reason) may want to use:
</P>

<blockquote><pre>	convert file.jpg eps2:file.eps
	                    ^
</pre></blockquote>
<P>
Note the 2! This is better than the default "convert file.jpg file.eps"
and performs the same function as "jpeg2ps" (which is in <A HREF="http://www.debian.org/">Debian</A>
non-free).
</P>
<P>
Explanation:
The default postscript level for PS conversion is 1 which produces large
and bad conversions since it produces pixelised bitmaps. In PS Level 2
and Level 3 the conversion of JPEG is inbuilt so the above procedure
just adds a bit of postscript header stuff to the <EM>unchanged</EM> jpeg file.
In other words this conversion is lossless.
</P>
<P>
You can also use "eps3" as the tag but beware that may be reasonably new
postscript printers that are <EM>not</EM> level 3 compliant. (Ghostscript <EM>is</EM>
level 3 compliant).
</P>

<!-- end 6 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.7"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">Setting the Clock on Linux</FONT></H3>
Walt R (<a href="mailto:tag@lists.linuxgazette.net?cc=wmreinemer@tns.net&subject=%20Re%3A%20%5BLG%20110%5D%202c%20Tips%20%237">wmreinemer from tns.net</a>)

<font color="#006600"><blockquote><IMG SRC="../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Jimmy] This is a follow-up to <A HREF="http://linuxgazette.net/109/lg_mail.html#mailbag.1"
	>http://linuxgazette.net/109/lg_mail.html#mailbag.1</A>
</blockquote></font>
<P>
The following script is my interface to netdate.  I modified
the script found at website listed in the script.   You have
to be root to set the system and hardware clocks, yet you
can query the time servers as a regular user.
</P>
<P>
Walt Reinemer
</P>
<p align="center">See attached <tt><a href="misc/tips/netdate.sh.txt">netdate.sh.txt</a></tt></p>

<!-- end 7 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.8"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">SMTP-time despamming</FONT></H3>
Ben Okopnik (<a href="mailto:tag@lists.linuxgazette.net?subject=%20Re%3A%20%5BLG%20110%5D%202c%20Tips%20%238"><em>LG</em> Editor</a>)


<P>
Just saw this at <A HREF="http://www.freshmeat.net/">Freshmeat</A>; sounds really sweet, particularly the
per-user configuration capability. Hopefully, the world is heading this
way...
</P>

<TABLE WIDTH="95%" BORDER="1" BGCOLOR="#FFFFCC"><TR><TD>
<p align="center">...............</p>

<blockquote><pre> Mail Avenger 0.5.1
 by xxx - Sun, Nov 21st 2004 02:48 PDT
</pre></blockquote>
<P>
About: Mail Avenger is a highly-configurable, MTA-independent SMTP
server. It allows you to reject spam during mail transactions, before
spooling messages in your local mail queue. You can specify site-wide
default policies for filtering mail, but individual users can also craft
their own policies by creating avenger scripts in their home
directories. It includes many features not supported by other SMTP
servers, including mail-bomb protection, integration with kernel
firewalls, TCP SYN fingerprint and network route recording, SMTP-level
analysis of client implementations, SMTP callbacks to verify sender
addresses, per-user mail scripts that run during SMTP transactions,
virtual domain to user mapping for the purposes of filtering, SPF
(sender policy framework), dynamic SPF query construction in mail filter
scripts, support for easily issuing multiple concurrent, asynchronous
DNS and SPF queries from filter scripts, and the ability to run spam
filters such as spamassassin on message bodies before replying to SMTP
DATA commands.
</P>
<P>
Changes: A critical memory handling bug was fixed in the avenger.local
and deliver utilities.
</P><p align="center">...............</p>
</TD></TR></TABLE>

<!-- end 8 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.9"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">starting X automatically without [gkx]dm</FONT></H3>
Ben (<a href="mailto:tag@lists.linuxgazette.net?subject=%20Re%3A%20%5BLG%20110%5D%202c%20Tips%20%239"><em>LG</em> Editor</a>)


<P>
As past discussions in TAG have shown, I'm definitely not a fan of the
various display managers; I believe that they take away, or obscure, too
much of the control that a user has over X. However, starting X
automatically from your ~/.bash_profile doesn't seem like a very smart
move either: any time you get a login shell (e.g., logging into another
console), you'd be firing off a new instance of X - or at least trying
to, since it would die with a list of error messages.
</P>
<P>
The answer to this dilemma is a <EM>conditional</EM> start for X - in other
words, we only want to execute it if it's not already running, i.e. only
on the first login. To do this, just add the following line to the end
of your ~/.bash_profile:
</P>

<blockquote><pre>ps ax|grep -q "[ ]`which X`" || startx
</pre></blockquote>
<P>
For those who just have to know ([grin] I certainly would, if I were
you): the above expression pipes the list of running processes, which is
the output of the "ps" command, to 'grep', which searches it for the
presence of a running X. To make the search more precise, the command
substitution (`which X`) returns the full pathname to X as the search
string. The character class preceding the search string ([ ]) is there
to make 'grep' ignore its own entry in process table (an old 'grep'
trick), and the "-q" option of 'grep' makes it return only a
success/failure exit code instead of the actual matched string. The OR
operator, '||', ties it all together into an expression that says
"either X is running OR (execute) startx".
</P>

<!-- end 9 -->
<!--     .~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.~~.     -->
<P> <A NAME="tips.10"><HR WIDTH="75%" ALIGN="center"></A> <P>
<H3><IMG ALIGN=BOTTOM ALT="" SRC="../gx/lil2cent.gif">
<FONT COLOR="navy">whois.sc</FONT></H3>
Jared Belkus (<a href="mailto:tag@lists.linuxgazette.net?cc=&cc=jared.belkus@gmail.com&subject=%20Re%3A%20%5BLG%20110%5D%202c%20Tips%20%2310">jared.belkus from gmail.com</a>)

<P>
hi,
</P>
<P>
i was told to email this address about a useful website:
</P>
<P><BLOCKQuote>
<A HREF="http://www.whois.sc"
	>http://www.whois.sc</A>
</BLOCKQuote></P>
<P>
I use this whois website a lot because of the information it gives. If
you sign up you can see all the domains that a server has.
</P>
<P>
thanks,
<BR>Jared Belkus
</P>

<blockquote><font color="#000066">Just in case you're a sysadmin thinking, geez, just how many sites <EM>am</EM>
I running on this machine again... did I miss any during that upgrade...
 -- Heather</font></blockquote>

<!-- end 10 -->
<hr>
<CENTER><Font face="Helvetica"><STRONG>
This page edited and maintained by the Editors of <I>Linux Gazette</I><br>HTML script maintained by <A HREF="mailto:star@starshine.org">Heather Stern</a> of Starshine Technical Services, <A HREF="http://www.starshine.org/">http://www.starshine.org/</A>
</STRONG></Font></CENTER>
<hr>

</p>


<!-- *** BEGIN author bio *** -->
<P>&nbsp;
<P>

<!-- *** END author bio *** -->

<div id="articlefooter">

<p>
Copyright &copy; 2005, . Released under the <a
href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>

<p>
Published in Issue 110 of Linux Gazette, January 2005
</p>

</div>


<div id="previousnextbottom">
<A HREF="lg_mail.html" >&lt;-- prev</A> | <A HREF="lg_answer.html" >next --&gt;</A>
</div>


</div>






<div id="navigation">

<a href="../index.html">Home</a>
<a href="../faq/index.html">FAQ</a>
<a href="../lg_index.html">Site Map</a>
<a href="../mirrors.html">Mirrors</a>
<a href="../mirrors.html">Translations</a>
<a href="../search.html">Search</a>
<a href="../archives.html">Archives</a>
<a href="../authors/index.html">Authors</a>
<a href="../contact.html">Contact Us</a>

</div>



<div id="breadcrumbs">

<a href="../index.html">Home</a> &gt; 
<a href="index.html">January 2005 (#110)</a> &gt; 
Article

</div>





<img src="../gx/tux_86x95_indexed.png" id="tux" alt="Tux"/>




</body>
</html>


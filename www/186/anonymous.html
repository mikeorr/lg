<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="utf-8" xml:lang="utf-8">
<head>
<title>Caps Lock LG #186</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../lg.css" type="text/css" media="screen, projection"  />
<link rel="alternate" type="application/rss+xml" title="LG RSS" href="../lg.rss" />
<link rel="alternate" type="application/rdf+xml" title="LG RDF" href="../lg.rdf" />
<!-- link rel="alternate" type="application/atom+xml" title="LG Atom" href="lg.atom.xml" / -->
<link rel="shortcut icon" href="../favicon.ico" />

<style type="text/css" media="screen, projection">
<!--

-->
</style>

</head>
<body>

<a href="../">
<img src="../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" alt="Linux Gazette"/>
</a>
<p id="fun">...making Linux just a little more fun!</p>

<div id="navigation">
<table summary="masthead" width="100%">
<tr>
<td align="center" colspan="3" style="font-size: 10px; font-weight: bold">
<a href="../index.html">Home</a>
<a href="http://linuxgazette.net">Main Site</a>
<a href="../faq/index.html">FAQ</a>

<a href="../lg_index.html">Site Map</a>
<a href="../mirrors.html">Mirrors</a>
<a href="../mirrors.html">Translations</a>
<a href="../search.html">Search</a>
<a href="../archives.html">Archives</a>
<a href="../authors/index.html">Authors</a>
<a href="http://lists.linuxgazette.net/listinfo/">Mailing Lists</a>
<a href="../jobs.html">Join Us!</a>
<a href="../contact.html">Contact Us</a>

<hr width="99%" style="border: 1px inset #000033">
</td>
</tr>
<tr>
<td width="40%" align="left" style="font-size: 10px; font-weight: bold">
The Free International Online Linux Monthly
</td>
<td width="20%" align="center" style="font-size: 10px; font-weight: bold">
ISSN: 1934-371X
</td>
<td width="40%" align="right" style="font-size: 10px; font-weight: bold">
Main site: <a href="http://linuxgazette.net">http://linuxgazette.net</a> 
</td>
</table>
</div>


<div id="breadcrumbs1">

<a href="../index.html">Home</a> &gt; 
<a href="index.html">June 2011 (#186)</a> &gt; 
Article

</div>

<div class="articlecontent1">
<div class="content">

<div id="previousnexttop">
<A HREF="lg_bytes.html" >&lt;-- prev</A> | <A HREF="borisov.html" >next --&gt;</A>
</div>

<h1>Caps Lock</h1>
<p id="by"><b>By <a href="../authors/anonymous.html">Anonymous</a></b></p>


<p>
Coming back again to Ubuggy in the text console, be sure you are
relaxed and in tolerance mode.
</p>

<p>
First, if you do not know it by its legal name, Ubuggy goes mostly
by the nickname of Ubuntu. I have no problems using the nickname.
</p>

<p>
Second, assume that we have switched from the Ubuntu desktop to pure text mode
with Ctrl-Alt-F1 or Ctrl-Alt-F2 or whatever. We are not in a graphic
terminal.
</p>

<p>
Third, adjustments to the keymap in text mode do not affect the
desktop.
</p>

<p>
Fourth, you have superuser privileges or else you can stop
here.
</p>

<p>
And what are we dealing with this time? The caps lock key. When
pressing it intentionally or inadvertently in the text console, you
notice that other keys are not responding or are responding the
wrong way. The caps lock LED is not lighting up.
</p>

<p class="editorial">[ Just for the record: I'm using Ubuntu, and my text
terminal keys all seem to work fine - although the caps lock LED does fail
to come on. -- Ben ]
</p>

<p>
Google to the rescue: the problem is at least 6 years old. Has it
been solved? You have one guess and if you fail, nobody can help
you.
</p>

<p>
It turns out that Ubuntu has just inherited the problem, although you
can assume they made it worse. The problem is:
</p>

<p>
<a href="http://old.nabble.com/Bug-514212%3A-console-setup%3A-on-UTF-8-console,-caps-lock-is-turned-into-a-shift-lock-td21848145.html">http://old.nabble.com/Bug-514212%3A-console-setup%3A-on-UTF-8-console,-caps-lock-is-turned-into-a-shift-lock-td21848145.html</a><br>
<a href="http://www.mail-archive.com/debian-boot@lists.debian.org/msg106545.html">http://www.mail-archive.com/debian-boot@lists.debian.org/msg106545.html</a>
</p>

<p>
So the traditional caps lock action - called Caps_Lock in the kernel
keymap - only works for ASCII or more precisely for latin1.
</p>

<p>
The intended solution is to replace it with CtrlL_Lock which is
nothing but a sticky Ctrl key to help produce Unicode capitals when
set.
</p>

<p>
The way to hell is paved with Unicode intentions. For the moment,
the patches do not work properly. Or maybe they do in a different
distro but Ubuntu has further complications:
</p>

<ol type='latin'>
<li> The Ubuntu text mode keymap has a total of 127 combos on top of
any plain key. I'd bet the farm that they have not been tested one
by one.

<li> Debian is still winding up the legacy of console-tools:

<p>
<a href="http://lct.sourceforge.net/">http://lct.sourceforge.net/</a>
</p>
</ol>

<p>
This was a project with alternative loadkeys/dumpkeys, launched in
the late 90s and stuck into non-maintenance shortly afterwards. Its
short life was, however, long enough to lure Debian into a costly
mistake they still have not recovered from. OK, but Ubuntu is Ubuntu
and they are responsible for what they do even if they are based on
Debian. Just thank console-tools if you change your text mode keymap
and later on it is rolled back unbeknownst to you.
</p>

<p>
So what has to be done until isolated kernel patchers close in on
a safe caps lock solution and Ubuntu converts to a safe text mode
keymap?
</p>

<p>
I was asking myself the question and couldn't find an answer. But
then it occurred to me that normally you and me do not type lengthy
texts all caps. For a short text of half a screen line it is not
difficult to hold down the Shift key and type the letters. For
lengthy text, should necessity really arise, type the lowercase text
in an editor, turn it upper case with the editor and paste it
wherever it is supposed to go. In other words, who needs Caps Lock
besides the Nigerians offering you millions?
</p>

<p>
And where does this key originate from in the first place? Decades
ago in the world of telegraph and telex, there was no lower case.
Typewriters could be shifted to upper case. When ca. 1970 dedicated
text processing machines were introduced, they had keyboards with
lower case and were mimicking typewriters, so they got the caps
lock key. But why the hell is it still there firmly planted on our
keyboards forty years on?
</p>

<p>
Let's solve the problem without waiting for the perfect kernel
patch: let's nuke Caps Lock.
</p>

<p>
In step 1, issue:
</p>

<pre>
dumpkeys -1 &gt; kdump.txt
</pre>

<p>
In step 2, load kdump.txt into an editor and replace all instances
of CtrlL_Lock with VoidSymbol. Save the modified file.
</p>

<p>
In step 3, issue:
</p>

<pre>
loadkeys -s kdump.txt
</pre>

<p>
Done. Of course, you may also assign to the key some other action of
your choice. For instance, I came across a guy who assigned Tab to
it because his normal Tab key was damaged. If you want to do that,
do nuke CtrlL_Lock first as indicated above, then issue:
</p>

<p>
echo "keycode 58 = Tab" | loadkeys
</p>

<p>
or whatever you want to use.
</p>

<p>
This solution is ephemeral. At the next boot you will again get the
CtrlL_Lock treatment. So save the keymap as you need it and load it
automatically from your bash profile.
</p>

<p>
Hello, Dell? Please extend an invitation to Microsoft and others and remove
the Caps Lock key from our PC keyboards.
</p>


<br clear="all" />

<table align='center' cellspacing='10'>
<tr>
<td>
<script type='text/javascript'>
digg_url = 'http://linuxgazette.net/186/anonymous.html';
digg_title = 'Caps Lock';
digg_bodytext = '<p> Coming back again to Ubuggy in the text console, be sure you are relaxed and in tolerance mode. </p> ';
digg_topic = 'linux_unix';
</script>
<script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
</td>
<td>
<a name="fb_share" type="box_count" href="http://www.facebook.com/sharer.php">Share</a>
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript"></script>
</td>
<td>
<a href="http://twitter.com/home?status=Currently%20reading:%20http://linuxgazette.net/186/anonymous.html%20at%20Linux%20Gazette%20%23linuxgazette" title="Click to share this post on Twitter"><img src="../gx/twitter.png" width="50" height="85" border="0"></a>
</td>
</tr>
</table>


<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:186/anonymous.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
<!-- ============================================================= -->
<!-- *** BEGIN bio *** -->
<hr>

<p>
<img ALIGN="LEFT" ALT="Bio picture" SRC="../gx/2002/note.png" class="bio">
<em>

A. N. Onymous has been writing for LG since the early days - generally by
sneaking in at night and leaving a variety of articles on the Editor's
desk. A man (woman?) of mystery, claiming no credit and hiding in
darkness... probably something to do with large amounts of treasure in an
ancient Mayan temple, and a beautiful dark-eyed woman with a snake tattoo
winding down from her left hip. Or maybe A.N. is just into privacy. In
any case, we're grateful for the contributions.<br>
 -- Editor, Linux Gazette

</em>
<br CLEAR="all">

<!-- *** END bio *** -->

<!-- ============================================================= -->


<!-- *** END author bio *** -->

<div id="articlefooter">

<p>
Copyright &copy; 2011, Anonymous. Released under the <a
href="http://linuxgazette.net/copying.html">Open Publication License</a>
unless otherwise noted in the body of the article.
<!-- Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc. -->
</p>

<p>
Published in Issue 186 of Linux Gazette, June 2011
</p>

</div>

<div id="previousnextbottom">
<A HREF="lg_bytes.html" >&lt;-- prev</A> | <A HREF="borisov.html" >next --&gt;</A>
</div>

</div>
</div>

<script src="http://www.google-analytics.com/urchin.js"
type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1204316-1";
urchinTracker();
</script>







<img src="../gx/tux_86x95_indexed.png" id="tux" alt="Tux"/>

</body>
</html>


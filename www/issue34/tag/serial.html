<!--startcut ======================================================= -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html><head>
<META NAME="generator" CONTENT="lgazmail v1.1D.l">
<TITLE>The Answer Guy 34: 
RE how to find out the serial connect speed of a modem 
</TITLE> 
<!-- ORIGINAL SUBJECT:
RE how to find out the serial connect speed of a modem 
JTD SUBTITLE:

-->
</head>

<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#A000A0"
ALINK="#FF0000">
<H4>"Linux Gazette...<I>making Linux just a little more fun!</I>"
</H4>
<P> <hr> <P>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<H1 align="center"><A NAME="answer">
	<img src="../../gx/dennis/qbubble.gif" alt="" border="0" align="middle">
	<a href="../index.html">The Answer Guy</a>
	<img src="../../gx/dennis/bbubble.gif" alt="" border="0" align="middle">
</A></H1> 
<BR>
<H4 align="center">By James T. Dennis,
	<a href="mailto:tag@lists.linuxgazette.net">tag@lists.linuxgazette.net</a>
	<BR>Starshine Technical Services, <A HREF="http://www.starshine.org/">http://www.starshine.org/</A> 
</H4>
<p><hr><p>
<!--endcut ========================================================= -->

<p>The original message in this thread appeared in
	<a href="http://linuxgazette.net/issue31/tag_connect.html"
	>Issue 31</a>, and the 
	<a href="news:comp.unix.questions"
	>comp.unix.questions</a> newsgroup.
This volley resulted:</p>

<hr width="40%" align="center">
<p><strong>From Michael Schwab  on 30 Sep 1998</strong></p>

<p><strong>Hello,
I just read the article about
</strong></p>

<p><strong>So please don't say "WHO CARES ABOUT THAT?"
</strong></p>


<blockquote><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)" height="28" width="50" align="bottom">I'll say what I bloody well feel like saying!
</blockquote>

<blockquote>(And I expect my editors, and readership to 
respond as they see fit).
</blockquote>

<blockquote>I'm sorry if that seems like a harsh thing to say
but frankly I think you missed the whole point of what
I was trying to say before.
</blockquote>

<blockquote>First, I don't know of a general way to get the 
connect speed.  It's probably modem specific, so you
could probably write a script that queries your modem
to get the info.  Your script would probably not work
with most other modems, and you'd have to hack it into
whatever communications package you were actually using
on that modem (pppd, uucico, minicom, kermit, slip, 
whatever).
</blockquote>

<blockquote>Another point I made is that the speed is likely to 
fluctuate frequently throughout the duration of a 
connection (particularly with any 28.8 or faster modem).
It's likely to start out a bit high and be adjusted
downward until the corrected error rate attains an
suitable threshold.
</blockquote>

<blockquote>So, if you had your script reporting a connection 
speed at one instant --- it would tell you almost nothing
about your sustained throughput.
</blockquote>


<p><strong><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)" height="28" width="50" align=""bottom">I do !!
</strong></p>

<blockquote><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)" height="28" width="50" align="bottom">More power to you.  I didn't ask <EM>who</EM> cares?  I asked
what benefit those who "think" they care hope to derive 
from this statistic.
</blockquote>

<blockquote>I can test the temperature in my house to with an arbitrary
precision.  However, the numbers on a thermometer will not
motivate me to reset my thermostat or go out and buy a
new furnace or air conditioner.  It's a meaningless
statistic that is no benefit to me.
</blockquote>

<blockquote>Also there isn't just one temperature in my home -- there's
a whole range of fluctuating temperatures.  So precise 
measurement would be non-trivial.
</blockquote>

<blockquote>For subjective issue there's no point in going to 
great measurement effort.  When I'm cold I either turn 
up the thermostat, or (more likely) toss on a sweater or
some little fuzzy booties.
</blockquote>

<blockquote>Now, it is the case that I might do some measurements 
when I'm troubleshooting a line.  I'd certainly expect a
telco technician to do so if I was complaining about 
line quality --- and I might do so to "motivate" a telco
(or to file my complaint with a public utility commission).
</blockquote>

<blockquote>If course if I was <EM>really</EM> serious about a line quality
issue I'd rent an oscilloscope and look through a Fluke (TM)
catalog to find a chart-strip recorder for the job.
</blockquote>

<blockquote>So these numbers aren't completely useless in all
contexts.  However, the number of people who can make
reasonable use of them is fairly limited.
</blockquote>

<p><strong><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)" height="28" width="50" align=""bottom">How can you tell the connection speed that a modem auto-negotiates
when dialing an ISP? My system log (/var/log/messages in RH5.1)
does tell me the line speed I have set in the chat script, but I
would like to know the connect speed as well (56K, 33.6, etc). I
know this info must be available somewhere/somehow.
</strong></p>

<blockquote><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)" height="28" width="50" align="bottom">Modern modems don't just auto-negotiate at the beginning of
a call.  The "retrain" (negotiate speed changes) throughout
a call's duration.
</blockquote>

<blockquote>You'd "like" to know.  Put what would you do with this?
Order you phone company to pull new copper to your house?
Return your modem and try another one? Switch to tachyon 
beams?
</blockquote>

<blockquote>As for "this info must be available" --- look in the
programming manual for your modem, <EM>if</EM> you can find one.
It used to be standard for modems to come with a pretty
decent technical manual --- providing details on a couple
hundred AT commands that comprised that manufacturer's
extensions beyond the based "Hayes" set for that particular
model.  These days you'll be lucky if you pry a dinky little
summary of a tiny subset of their diagnostics and commands
out of most of these manufacturers.
</blockquote>

<p><strong><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)" height="28" width="50" align=""bottom">I don't know how to really get the connect speed but that might be
not so important. Since I have a leased line to the Internet with
a modem it is important for me to know how fast my line is running
because sometimes this Line might have a lot of noise on it and
the connect might be only 4800 bps instead of 33600 bps. In this
case I have to call my Telecommunications provider to check the
line !!!
</strong></p>

<blockquote><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)" height="28" width="50" align="bottom">If your connection varies by this much you'll know it.
You won't need any numbers to tell you that it's *slow*.
</blockquote>

<blockquote>If you are trying to serve your customers (web site
users, whatever) over this line --- it does make sense
to monitor the bandwidth and latency.  However these
are higher level networking issues that are only 
marginally related to the underlying connection speed.
</blockquote>

<p><strong><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)" height="28" width="50" align=""bottom">But its easy to detect just send a ping to the other side when the
line has low traffic. I do this by sending approx 20 pings and
then look at the (lowest) roundtrip time. You can send a ping
containing 8192 or 16384 bytes of data and you will detect nearly
every change in bandwith.
</strong></p>

<blockquote><IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)" height="28" width="50" align="bottom">Aha!  Now this is a totally different metric.  You aren't
measuring "modem connection speed" you're measuring 
latency and throughput!  Doing this once every two or
three hours with about 5 pings and setting "watcher" to
monitor those and warn you when the latency get's too
high or the throughput gets too low would make sense
--- for a dedicated line where  you are concerned that
you customers/users are waiting "too long" for their
traffic.
</blockquote>

<blockquote>There is a package called MRTG --- the "multi-router
traffic grapher" which can be used to create web page
graphs of your network traffic statistics over
time.  It seems to be primarily used by larger sites
for ethernet.  However it might have some facilities for 
monitoring PPP (even SLIP) lines.
</blockquote>

<blockquote>Actually MRTG depends on SNMP so I should say that
you might figure out how to configure the CMU SNMP 
agents for Linux to interface to your serial interfaces
--- and then MRTG could provide the graphs.  However,
you don't technically <EM>need</EM> to run SNMP under MRTG
--- their docs suggest that you can use various
commands to provide it statistics to graph.
</blockquote>

<blockquote>You can read more about MRTG at:
</blockquote>

<blockquote><A HREF="http://ee-staff.ethz.ch/~oetiker/webtools/mrtg/mrtg.html">http://ee-staff.ethz.ch/~oetiker/webtools/mrtg/mrtg.html</A>
</blockquote>

<p><strong><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)" height="28" width="50" align=""bottom">Best Regards 
Michael Schwab
</strong></p>
<!-- end body -->

<hr width="40%" align="center">

<H3><img src="../../gx/dennis/qbub.gif" alt="(?)"width="50" height="28"
	align="left" border="0">RE how to find out the serial connect speed of a modem </H3>
<p><strong>From Michael Schwab  on 30 Sep 1998</strong></p>
<!-- begin body -->

<p><strong>OK the Intention of the Mail send by me was mainly to give a short help
on what might be a suitable answer on the quistion posed in Linux Gazette.
Despite of this THANKS FOR YOUR VERY LONG MAIL, now it's much clearer what
you were saying and why. I agree with you when you say the connect speed
is unimportant because it changes anyway during the connectiontime.
Sinec the guy who send the question to you said that he connects to his ISP
so I suggested that might monitoring bandwith ans latency also might be
more meaningfull for him than just getting the connect speed !
</strong></p>

<p><strong>Anyway thanks for your Answer .....
</strong></p>

<p><strong>see you soon <IMG SRC="../../gx/dennis/smily.gif" ALT="" height="24" width="20" align="middle">
</strong></p>

<p><strong>Michael Schwab
</strong></p>

<!--startcut ======================================================= -->
<P> <hr> <P>
<H5 align="center"><a href="http://www.linuxgazette.net/copying.html"
	>Copyright &copy;</a> 1998, James T. Dennis <BR>
Published in <I>Linux Gazette</I> Issue 34 November 1998</H5>
<P> <hr> <P>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<P align="center">
<table width="98%"><tr valign="center" align="center">
<td rowspan="3"><A HREF="../lg_answer34.html"><IMG
        SRC="../../gx/dennis/answernew.gif"
        ALT="[ Answer Guy Index ]"></A></td>
  <td><A HREF="./apache.html">apache</a>
  <td><A HREF="./current.html">current</a>
  <td><A HREF="./digi.html">digi</a>
  <td><A HREF="./ether.html">ether</a>
  <td><A HREF="./goodtimes.html">goodtimes</a>
  <td><A HREF="./intlX.html">intlX</a>
  <td><A HREF="./largedisk.html">largedisk</a>
</tr><tr valign="center" align="center">
  <td><A HREF="./maybe.html">maybe</a>
  <td><A HREF="./numlock.html">numlock</a>
  <td><A HREF="./quota.html">quota</a>
  <td><A HREF="./recovery.html">recovery</a>
  <td><A HREF="./script.html">script</a>
  <td><A HREF="./serial.html">serial</a>
  <td><A HREF="./session.html">session</a>
</tr><tr valign="center" align="center">
  <td><A HREF="./sound.html">sound</a>
  <td><A HREF="./tape.html">tape</a>
  <td><A HREF="./testsuite.html">testsuite</a>
  <td><A HREF="./w95ie.html">w95ie</a>
  <td><A HREF="./w95ras.html">w95ras</a>
  <td><A HREF="./w95virus.html">w95virus</a>
  <td><A HREF="./xdm.html">xdm</a>
</tr></table>
	</P>
<P> <hr> <P>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<A HREF="../index.html"><IMG SRC="../../gx/indexnew.gif"
        ALT="[ Table Of Contents ]"></A>
<A HREF="../../index.html"><IMG SRC="../../gx/homenew.gif"
        ALT="[ Front Page ]"></A>
<A HREF="../lg_bytes34.html"><IMG SRC="../../gx/back2.gif"
        ALT="[ Previous Section ]"></A>
<A HREF="../izquierdo.html"><IMG SRC="../../gx/fwd.gif"
        ALT="[ Next Section ]"></A>
</body>
</html>
<!--endcut ========================================================= -->


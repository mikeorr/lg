<!--startcut ======================================================= -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<META NAME="generator" CONTENT="lgazmail v1.1F.i">
<TITLE>The Answer Guy 35: relaying still not correct ...</TITLE>
</HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"
	LINK="#3366FF" VLINK="#A000A0">
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<H4>"The Linux Gazette...<I>making Linux just a little more fun!</I>"</H4>
<P> <hr> <P>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<center>
<H1><A NAME="answer">
	<img src="../../gx/dennis/qbubble.gif" alt="(?)" border="0" align="middle">
	<font color="#B03060">The Answer Guy</font>
	<img src="../../gx/dennis/bbubble.gif" alt="(!)" border="0" align="middle">
</A></H1> 
<BR>
<H4>By James T. Dennis,
	<a href="mailto:tag@lists.linuxgazette.net">tag@lists.linuxgazette.net</a><BR>
	Starshine Technical Services,
	<A HREF="http://www.starshine.org/">http://www.starshine.org/</A> 
</H4>
</center>

<p><hr><p>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<H3 align="left"><img src="../../gx/dennis/qbubble.gif" height="50" width="60"
	  alt="(?) " border="0">relaying still not correct ...</H3>

<p><strong>From joel williams  on Thu, 12 Nov 1998  
</strong></p>
<!-- begin 14 -->
<P><STRONG>
Dennis,
</STRONG></P>
<P><STRONG>
I have another computer on my 10.1.1.0 net. I rebooted my Linux box,
and now it will not relay mail again.  Any clues?
</STRONG></P>
<P><STRONG>
Joel
</STRONG></P>
<BLOCKQUOTE><IMG SRC="../../gx/dennis/bbub.gif" alt="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	>Somehow it considers the Windows box to be "in" your
domain --- while it considers the other 10* system to
be offering it mail from "outside" of your domain.
</BLOCKQUOTE>
<BLOCKQUOTE>
Could you take a piece of mail like this:
</BLOCKQUOTE>
<BLOCKQUOTE><pre>
-------------------- Cut Here ----------------
To: <A HREF="mailto:jimd@mail.starshine.org">jimd@mail.starshine.org</A>
Subject: Testing

Testing
-------------------- Cut Here ----------------
</pre></BLOCKQUOTE>
<BLOCKQUOTE>
... and pipe that into the command:
</BLOCKQUOTE>
<BLOCKQUOTE><BLOCKQUOTE><CODE>
sendmail -v -t -oi  &amp;&gt; <TT>/tmp/test.results</TT>
</CODE></BLOCKQUOTE></BLOCKQUOTE>
<BLOCKQUOTE>
... (or capture the output in a typescript or
use cut&amp;paste from your telnet/xterm window).
</BLOCKQUOTE>
<BLOCKQUOTE>
I'm interested in where this (other) system is trying to
relay the mail to, and what/who it is masquerading as.
</BLOCKQUOTE>
<BLOCKQUOTE>
The following might work:
</BLOCKQUOTE>
<BLOCKQUOTE><pre>
divert(0)dnl
VERSIONID(`Williams-consulting nullclient')

OSTYPE(`linux')

FEATURE(allmasquerade)
FEATURE(always_add_domain)
FEATURE(masquerade_envelope)
MASQUERADE_AS(`williams-consulting.com')

FEATURE(nullclient, `williams-consulting.com')
</pre></BLOCKQUOTE>
<BLOCKQUOTE>
... put that unto the affected box (if it's Unix),
build the cf file (using a command similar to the
one we used on the Linux box --- finding the right
directory is the trick.  You could use the copy
of sendmail on the Linux box to build the .cf files
for the other system(s) --- just redirect the
m4 output to another file and copy the file over using
ftp/rcp (or whatever).
</BLOCKQUOTE>
<BLOCKQUOTE>
... Note:  Change the OSTYPE argument as appropriate.
</BLOCKQUOTE>
<BLOCKQUOTE>
If this is a Windows box running Netscape Communicator
or something like that -- check your "Identity" on
that system.
</BLOCKQUOTE>
<BLOCKQUOTE>
We know that you system will currenly relay for anyone
that "claims" to be sending mail "from" your domain.
So any client that masquerades as williams-consulting.com
should work.
</BLOCKQUOTE>
<BLOCKQUOTE>
I'll get an answer about the appropriate format for the
<TT>/etc/mail/{relay_allow}</TT> file tonight.  I'm pretty sure
I have examples from Glynn Clements' posting to linux-admin
in my archives.
</BLOCKQUOTE>

<!-- end 14 -->
<!--startcut ======================================================= -->
<P> <hr> <P>
<H5 align="center"><a href="http://www.linuxgazette.net/copying.html"
	>Copyright &copy;</a> 1998, James T. Dennis 
<BR>Published in <I>The Linux Gazette</I> Issue 35 December 1998</H5>
<P> <hr> <P>
<!--::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::-->
<TABLE WIDTH="96%"><TR VALIGN="center" ALIGN="center">
<TD ROWSPAN="3" COLSPAN="3" WIDTH="26%"><A HREF="../lg_answer35.html"
	><IMG SRC="../../gx/dennis/answernew.gif"
              ALT="[ Answer Guy Index ]"></A></td>
  <TD WIDTH="14%"><A HREF="office.html">office</A></TD>
  <TD WIDTH="14%"><A HREF="largedisk.html">largedisk</A></TD>
  <TD WIDTH="14%"><A HREF="links.html">links</A></TD>
  <TD WIDTH="14%"><A HREF="yamaha.html">yamaha</A></TD>
  <TD WIDTH="14%"><A HREF="magickeys.html">magickeys</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD><A HREF="passwd.html">passwd</A></TD>
  <TD><A HREF="ftproot.html">ftproot</A></TD>
  <TD><A HREF="pvtmail.html">pvtmail</A></TD>
  <TD><A HREF="netware.html">netware</A></TD>
  <TD><A HREF="crypto.html">crypto</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD><A HREF="relay.html">relay</A></TD>
  <TD><A HREF="project.html">project</A></TD>
  <TD><A HREF="bootmethod.html">bootmethod</A></TD>
  <TD><A HREF="sysadmin.html">sysadmin</A></TD>
  <TD><A HREF="ipscript.html">ipscript</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD><A HREF="loopfs.html">loopfs</A></TD>
  <TD><A HREF="mrtg.html">mrtg</A></TD>
  <TD><A HREF="slimscan.html">slimscan</A></TD>
  <TD><A HREF="rpm.html">rpm</A></TD>
  <TD><A HREF="egg.html">modutil</A></TD>
  <TD><A HREF="libc.html">libc</A></TD>
  <TD><A HREF="dell.html">dell</A></TD>
  <TD><A HREF="remoteroot.html">remoteroot</A></TD>
</TR></TABLE>
<P> <hr> <P>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<A HREF="../index.html"
	><IMG SRC="../../gx/indexnew.gif" ALT="[ Table Of Contents ]"></A>
<A HREF="../../index.html"
	><IMG SRC="../../gx/homenew.gif" ALT="[ Front Page ]"></A>
<A HREF="../lg_bytes35.html"
	><IMG SRC="../../gx/back2.gif" ALT="[ Previous Section ]"></A>
<A HREF="../anderson.html"
	><IMG SRC="../../gx/fwd.gif" ALT="[ Next Section ]"></A>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
</BODY></HTML>
<!--endcut ========================================================= -->

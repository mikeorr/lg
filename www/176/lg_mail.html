<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="utf-8" xml:lang="utf-8">
<head>
<title>Mailbag LG #176</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../lg.css" type="text/css" media="screen, projection"  />
<link rel="alternate" type="application/rss+xml" title="LG RSS" href="../lg.rss" />
<link rel="alternate" type="application/rdf+xml" title="LG RDF" href="../lg.rdf" />
<!-- link rel="alternate" type="application/atom+xml" title="LG Atom" href="lg.atom.xml" / -->
<link rel="shortcut icon" href="../favicon.ico" />

<style type="text/css" media="screen, projection">
<!--

-->
</style>

</head>
<body>

<a href="../">
<img src="../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" alt="Linux Gazette"/>
</a>
<p id="fun">...making Linux just a little more fun!</p>

<div id="navigation">
<table summary="masthead" width="100%">
<tr>
<td align="center" colspan="3" style="font-size: 10px; font-weight: bold">
<a href="../index.html">Home</a>
<a href="http://linuxgazette.net">Main Site</a>
<a href="../faq/index.html">FAQ</a>

<a href="../lg_index.html">Site Map</a>
<a href="../mirrors.html">Mirrors</a>
<a href="../mirrors.html">Translations</a>
<a href="../search.html">Search</a>
<a href="../archives.html">Archives</a>
<a href="../authors/index.html">Authors</a>
<a href="http://lists.linuxgazette.net/listinfo.cgi">Mailing Lists</a>
<a href="../jobs.html">Join Us!</a>
<a href="../contact.html">Contact Us</a>

<hr width="99%" style="border: 1px inset #000033">
</td>
</tr>
<tr>
<td width="40%" align="left" style="font-size: 10px; font-weight: bold">
The Free International Online Linux Monthly
</td>
<td width="20%" align="center" style="font-size: 10px; font-weight: bold">
ISSN: 1934-371X
</td>
<td width="40%" align="right" style="font-size: 10px; font-weight: bold">
Main site: <a href="http://linuxgazette.net">http://linuxgazette.net</a> 
</td>
</table>
</div>


<div id="breadcrumbs1">

<a href="../index.html">Home</a> &gt; 
<a href="index.html">July 2010 (#176)</a> &gt; 
Article

</div>

<div class="articlecontent1">
<div class="content">

<div id="previousnexttop">
<A HREF="lg_bytes.html" >next --&gt;</A>
</div>

<h1>Mailbag</h1>

<h3>This month's answers created by:</h3><strong>[  Ben Okopnik, S. Parthasarathy, Henry Grebler, Kapil Hari Paranjape, Ren&eacute; Pfeiffer, Mulyadi Santosa, Neil Youngman  ]</strong>
<br />...and you, our readers!<br /><hr width="50%" align="center" size="3" /><h1>Our Mailbag</h1>
<hr />

<!-- Thread anchor: FIFO usage --><a name='fifo_usage'></a>
<h3>FIFO usage</h3>
<p>
<b><p>
Dr. Parthasarathy S [drpartha at gmail.com]

</p>
</b><br />
<b>Tue, 22 Jun 2010 09:09:46 +0530</b>
</p>

<p>
I have come across this thing called FIFO named pipe. I can see how it
works, but I find no place where I can put it to good use (in a shell
script). Can someone give me a good application context where a shell
script would need to use FIFO ? I need a good and convincing example,
to be able to tell my students.
</p>

<p>
Thanks TAG,
</p>

<p>
partha
</p>

<pre>
-- 
---------------------------------------------------------------------------------------------
Dr. S. Parthasarathy                    |   mailto:drpartha at gmail.com
Algologic Research &amp; Solutions    |
78 Sancharpuri Colony                 |
Bowenpally  P.O                          |   Phone: + 91 - 40 - 2775 1650
Secunderabad 500 011 - INDIA     |
WWW-URL: <a href='http://algolog.tripod.com/nupartha.htm'>http://algolog.tripod.com/nupartha.htm</a>
---------------------------------------------------------------------------------------------
</pre>


<p><b>[  <a name="mb-fifo_usage"></a> <a href="misc/lg/fifo_usage.html">Thread continues here (13 messages/23.98kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: 2-cent tip: A safer 'rm' --><a name='2_cent_tip__a_safer_rm'></a>
<h3>2-cent tip: A safer 'rm'</h3>
<p>
<b><p>
Henry Grebler [henrygrebler at optusnet.com.au]

</p>
</b><br />
<b>Sun, 20 Jun 2010 15:45:14 +1000</b>
</p>

<p>
Hi,
</p>

<p>
[I wrote what follows nearly a month ago. Since I started working
full-time-plus, I have not been able to respond as promptly as I would
prefer. For many, I suspect, the subject has gone cold. Nevertheless,
...] 
</p>


<p>
As often happens, I have not phrased myself well. [sigh]
</p>

<p>
I apologise for trying to respond quickly, when clearly a fuller and
more considered response was indicated.
</p>

<p>
Let me try again.
</p>


<p>
As I understand it, this is the original statement of the problem:
</p>


<p>
	If you've ever tried to delete Emacs backup files with
</p>

<p>
	rm *~
</p>

<p>
	(i.e. remove anything ending with ~), but you
	accidentally hit Enter before the ~ and did "rm *", ...
</p>

<p>
Silas then goes on to suggest a solution.
</p>


<p>
Perhaps I took the problem statement too literally. When I wrote
cleanup.sh, it was aimed exclusively at emacs backup files. When I
talked about it, I was thinking exclusively of emacs backup files. I
am not aware of any other place where tildes are used.
</p>

<p>
If it's a file I've been editing with emacs, I've usually created it.
So I get to choose its name.
</p>

<p>
The message I am trying to convey to TAG's broad readership is this.
If you are happy with Silas's solution, that's fine. If you are happy
with any of the other solutions provided, that's fine too. I myself
have felt the need to deal with this problem. I offer my approach to
dealing with emacs backup files for your consideration.
</p>

<p>
Part of my approach is the cleanup script; this is the technical
outcome, the tangible I can offer to others.
</p>

<p>
More important is a holistic approach to the problem as originally
stated. I took it to mean that certain behaviours are more risky than
others. This is again in the eyes of the beholder. Some people always
alias 'rm' to 'rm -i'. If they do this, they will always be prompted
before deleting any file. If they specify multiple files, there will
be a prompt for each file individually.
</p>

<p>
Such an approach would have saved Silas.
</p>

<p>
Again, if such an approach appeals to you, by all means adopt it.
</p>

<p>
It seems to me ill-advised to adopt a safe behaviour in one
circumstance and a risky behaviour in another. The nett effect will
not be as safe as your safest behaviour, but rather as risky as your
riskiest behaviour. (A chain is no stronger than its weakest link.)
</p>

<p>
So, first of all, according to my philosophy, don't go creating files
with dangerous characters in them. It's really not important to me to
call a file 'a b' when I can just as easily call it 'a_b'. If I
download a file with spaces in the filename AND I plan to edit it with
emacs, it's worth renaming the file, replacing spaces with underscores
(or any other innocuous character).
</p>

<p>
And I am strongly recommending this behaviour of mine to others.
</p>

<p>
If you live largely in a Linux world, you should rarely encounter
filenames containing dangerous characters. If you are creating files,
you can choose to avoid dangerous characters. Or not. It's up to you.
<p>
[ ... ]
</p><p><b>[  <a name="mb-2_cent_tip__a_safer_rm"></a> <a href="misc/lg/2_cent_tip__a_safer_rm.html">Thread continues here (2 messages/9.65kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: Face detection in Perl --><a name='face_detection_in_perl'></a>
<h3>Face detection in Perl</h3>
<p>
<b><p>
Jimmy O'Regan [joregan at gmail.com]

</p>
</b><br />
<b>Sun, 27 Jun 2010 18:46:50 +0100</b>
</p>

<p>
Since I got commit access to Tesseract, I've been getting a little
more interested in image recognition in general, and I was pleased to
find a Java-based 'face annotation' system on Sourceforge:
<a href='http://faint.sourceforge.net'>http://faint.sourceforge.net</a>
</p>

<p>
The problem is, it doesn't support face detection on Linux, but it
does have a relatively straightforward way of annotating the image
using XMP tags. Perl to the rescue - there's a module called
Image::ObjectDetect on CPAN... it's a pity the example in the POD is
incorrect.
</p>

<p>
Here's a correct example that generates a simple HTML map (and nothing else <img src="../gx/smile.png" alt=":)">
</p>

<pre>
#!/usr/bin/perl

use warnings;
use strict;

use Image::ObjectDetect;

my $cascade = '/usr/share/opencv/haarcascades/haarcascade_frontalface_alt2.xml';
my $file = $ARGV[0];
my @faces = Image::ObjectDetect::detect_objects($cascade, $file);
my $count=1;

print "&lt;map name='mymap'&gt;\n";
for my $face (@faces) {
    print "  &lt;area shape='rect' alt='map$count'
href='<a href='http://www.google.com'>http://www.google.com</a>' coords='";
    print $face-&gt;{x}, ", ";
    print $face-&gt;{y}, ", ";
    print $face-&gt;{x}+$face-&gt;{width}, ", ";
    print $face-&gt;{y}+$face-&gt;{height}, "'/&gt;\n";
}
print "&lt;/map&gt;\n";

print "&lt;img src='$file' usemap='mymap'/&gt;\n";
</pre>

<p>
(to install Image::ObjectDetect, you first need OpenCV. On Debian, that's<br>
apt-get install libcv-dev libcvaux-dev libhighgui-dev<br>
cpan Image::ObjectDetect<br>
and you're done <img src="../gx/smile.png" alt=":)">
</p>

<pre>
-- 
&lt;Leftmost&gt; jimregan, that's because deep inside you, you are evil.
&lt;Leftmost&gt; Also not-so-deep inside you.
</pre>

<p><b>[  <a name="mb-face_detection_in_perl"></a> <a href="misc/lg/face_detection_in_perl.html">Thread continues here (4 messages/6.48kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: Testing new anti-spam system --><a name='testing_new_anti_spam_system'></a>
<h3>Testing new anti-spam system</h3>
<p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Sun, 6 Jun 2010 13:31:12 -0400</b>
</p>

<pre>
From: John Hedges &lt;john@drystone.co.uk&gt;
To: TAG &lt;tag@lists.linuxgazette.net&gt;
Subject: RE: Testing new anti-spam system
</pre>
Hi Ben
</p>

<p>
I've read with interest the thread on C/R antispam technique.
</p>

<p>
The gmail solution sounds promising except in one use case - where you open an
account through a website. Unfortunately this often results in a confirmation
email - sometimes even with a username and password - exacly the kind of
information you would not want sniffed. One solution, as suggestesd by Martin
Krafft (<a href='http://madduck.net/blog/2010.02.09:sign-me-up-to-social-networking/'>http://madduck.net/blog/2010.02.09:sign-me-up-to-social-networking/</a>),
is to use a unique receiver address, such as myname-googlesignup at mydomain.co.uk
for these signups that you can whitelist in anticipation of a response, and
with the advantage that you can blacklist the address in the future if it gets
abused.
</p>

<p>
Please share with the list if you see fit.
</p>

<p>
I've enjoyed LG for many years, thanks.
</p>

<p>
John Hedges
</p>

<hr />


<!-- Thread anchor: Error when execute cgate_migrate_ldap.pl --><a name='error_when_execute_cgate_migrate_ldap_pl'></a>
<h3>Error when execute cgate_migrate_ldap.pl</h3>
<p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Fri, 4 Jun 2010 08:39:06 -0400</b>
</p>

<p>
On Fri, Jun 04, 2010 at 12:22:51PM +0800, bayu ramadhan wrote:
</p>

<pre>
&gt; dear linuxgazette,
&gt; 
&gt; i've read about migrating mail server to postfix/cyrus/openldap, , ,
&gt; 
&gt; i've tried u'r tutorial, , ,
</pre>

<p>
Who's "u'r"? I'm pretty sure it was Rene Pfeiffer who wrote that
article, not "u'r".
</p>

<p>
HINT: please use standard English, and preferably standard punctuation
as well. As you already know, your English isn't of the best; please
don't make it any more difficult by adding <strong>more</strong> levels of obscurity to
it.
 
</p>

<pre>
&gt; but i've some error when execute the perl script,,
&gt; 
&gt; i've attach the screenshoot of the error  and the script, , ,
</pre>

<p>
Next time, please just copy and paste the error. It's plain text, so
there's no need for screenshots.
 
The error - which I've had to transcribe from your screenshot (an
unnecessary waste of time) - was
</p>

<pre>
Communications Error at ./cgate_migrate_ldap.pl line 175, &lt;DATA&gt; line 225.
</pre>

<p>
Taking a look at line 175 of the script shows a pretty good possibility
for where the possible problem might be:
</p>

<p>
<pre class='code'>
173 --&gt;  # Bind to servers
174 --&gt;  $mesg = $ldap_source-&gt;bind($binddn_source, password =&gt; 'ldapbppt');
175 --&gt;  $mesg-&gt;code &amp;&amp; die $mesg-&gt;error;
</pre>

<p>
That is, you're trying to bind to a server using the same password that
Rene had used in his article. Unless you're using that password, the
connection is going to fail.
</p>


<pre>
-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href='http://LinuxGazette.NET'>http://LinuxGazette.NET</a> *
</pre>


<p><b>[  <a name="mb-error_when_execute_cgate_migrate_ldap_pl"></a> <a href="misc/lg/error_when_execute_cgate_migrate_ldap_pl.html">Thread continues here (2 messages/3.37kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: mbox selective deletion --><a name='mbox_selective_deletion'></a>
<h3>mbox selective deletion</h3>
<p>
<b><p>
Ben Okopnik [ben at okopnik.com]

</p>
</b><br />
<b>Sun, 27 Jun 2010 14:20:44 -0400</b>
</p>

<p>
Hi, Evaggelos -
</p>

<p>
On Sun, Jun 27, 2010 at 08:44:01PM +0300, Evaggelos Balaskas wrote:
</p>

<pre>
&gt; Hi,
&gt; 
&gt; First of all let me introduce my self:
&gt; 
&gt; My name is: Evaggelos Balaskas, or ebal for short, and i dont know perl!
</pre>

<p>
Welcome! That's a good Alcoholics-Anonymous-style introduction. <img src="../gx/smile.png" alt=":)">
 
</p>

<pre>
&gt; I wanted to add many subjects to my search/clear function,
&gt; so i used a list.
</pre>

<p>
Not a bad idea so far...
 
</p>

<pre>
&gt; while ( my $msg = $mb-&gt;next_message ) {
&gt;   my $flag = 0;
&gt;   my $s = $msg-&gt;header-&gt;{subject};
&gt; 
&gt;   if ( !$s ) {
&gt;     $s = "empty_subject";
&gt;   }
</pre>

<p>
If you're trying to set a default value for a variable, Perl has a nifty
way to do that by using "reflexive assigment":
</p>

<p>
$s ||= "empty_subject";
</p>

<p>
This essentially says "if $s is true - i.e., contains anything - then
leave it alone; otherwise, assign this value."
</p>


<pre>
&gt;   foreach (@subjects) {
&gt; 	  if ( $s =~ $_ ) {
</pre>

<p>
Although that will work, it's not a good idea: the binding operator (=~)
is intended to work with the match operator (/foo/ or m/foo/), and
omitting the latter makes your code fragile (i.e., since the usage is
non-standard, your code could fail with a later version of Perl.) In
addition to that, since $_ is the default binding for regexes, you don't
need to use it explicitly; you could just write
</p>

<p>
if (/$s/){
</p>

<p>
and be done with it.
</p>

<p>
However, there's a larger problem here: you don't need to build a state
machine to determine whether your messages contain one of the above
subjects - you can just use 'grep', or (my preferred method) a hash
lookup. I also noticed that you don't use the default value in "$s"
anywhere after defining it - and if you're just throwing it away, you
don't need to define it in the first place.
</p>

<p>
<pre class='code'>
# Using grep
 
my @subjects = ("aaaaaa", "bbbbbb", "ccccc", "ddddd");
 
while ( my $msg = $mb-&gt;next_message ) {
	print "$msg\n" unless grep /$msg-&gt;header-&gt;{subject}/, @subjects;
}
</pre>

<p>
Alternate method, faster lookup with less grinding:
</p>

<p>
<pre class='code'>
# Using a hash lookup
my %subjects = map { $_ =&gt; 1 } ("aaaa", "bbbb", "cccc", "dddd");
 
while ( my $msg = $mb-&gt;next_message ) {
    print "$msg\n" unless defined $subjects{$msg-&gt;header-&gt;{subject}};
}
</pre>

<p>
This latter version will also deal gracefully with undefined subject
lines.
</p>


<pre>
&gt; PS: Plz forgive me for my bad english - not my natural language.
</pre>

<p>
[smile] I'll be sure to "forgive" you - as soon as my Greek is as good
as your English (which, incidentally, is excellent as far as I can see.)
Again, welcome!
</p>


<pre>
-- 
                       OKOPNIK CONSULTING
        Custom Computing Solutions For Your Business
Expert-led Training | Dynamic, vital websites | Custom programming
               443-250-7895    <a href='http://okopnik.com'>http://okopnik.com</a>
</pre>

<hr />


<!-- Thread anchor: =?utf-8?q?Sierpi=C5=84ski_triangle?= --><a name='utf_8_q_sierpi_c5_84ski_triangle'></a>
<h3>=?utf-8?q?Sierpi=C5=84ski_triangle?=</h3>
<p>
<b><p>
Jimmy O'Regan [joregan at gmail.com]

</p>
</b><br />
<b>Fri, 18 Jun 2010 14:48:14 +0100</b>
</p>

<p>
A friend  just sent me a Sierpi?ski triangle generator in 14 lines of
C++ (<a href='http://codepad.org/tD7g8shT'>http://codepad.org/tD7g8shT</a>), my response is 11 lines of C:
</p>

<pre>
#include &lt;stdio.h&gt;

int main() {
  int a, b;
  for (a = 0; a &lt; 64; ++a) {
    for (b = 0; b &lt; 64; ++b)
      printf ("%c ", ((a + b) == (a ^ b)) ? '#' : ' ');
    printf("\n");
  }
  return 0;
}
</pre>

<p>
...but I'm wondering if Ben has a Perl one-liner? <img src="../gx/smile.png" alt=":)">
</p>

<p>
(BTW, CodePad is awesome!)
</p>

<pre>
-- 
&lt;Leftmost&gt; jimregan, that's because deep inside you, you are evil.
&lt;Leftmost&gt; Also not-so-deep inside you.
</pre>

<p><b>[  <a name="mb-utf_8_q_sierpi_c5_84ski_triangle"></a> <a href="misc/lg/utf_8_q_sierpi_c5_84ski_triangle.html">Thread continues here (15 messages/15.96kB)</a>  ]</b></p>
<hr />


<!-- Thread anchor: Knowing from what pc a certain file came --><a name='knowing_from_what_pc_a_certain_file_came'></a>
<h3>Knowing from what pc a certain file came</h3>
<p>
<b><p>
Deividson Okopnik [deivid.okop at gmail.com]

</p>
</b><br />
<b>Mon, 21 Jun 2010 11:49:03 -0300</b>
</p>

<p>
Hello TAG
</p>

<p>
I have an ubuntu linux machine here thats got a samba shared folder,
writable by anyone.
</p>

<p>
Is there any way i can know from what IP a certain file came?
</p>

<p>
Cause one of the windoze machines on my network is spreading some
virus, and I cant figure out what machine is that. It creates an
autorun.inf and a .exe on my ubuntu shared folder, thats the reason I
wanted to try to figure out where it came from.
</p>

<p>
Thanks
Deividson
</p>

<p><b>[  <a name="mb-knowing_from_what_pc_a_certain_file_came"></a> <a href="misc/lg/knowing_from_what_pc_a_certain_file_came.html">Thread continues here (4 messages/5.60kB)</a>  ]</b></p>
<hr />


<br clear="all" />

<table align='center' cellspacing='10'>
<tr>
<td>
<script type='text/javascript'>
digg_url = 'http://linuxgazette.net/176/lg_mail.html';
digg_title = 'Mailbag';
digg_bodytext = '<p>In this month\'s Linux Gazette, \'Mailbag\' covers the following topics:<br>FIFO usage<br>2-cent tip: A safer \'rm\'<br>Face detection in Perl<br>Testing new anti-spam system<br>Error when execute cgate_migrate_ldap.pl<br>mbox selective deletion<br>=?utf-8?q?Sierpi=C5=84ski_triangle?=<br>Knowing from what pc a certain file came<br></p>';
digg_topic = 'linux_unix';
</script>
<script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
</td>
<td>
<a name="fb_share" type="box_count" href="http://www.facebook.com/sharer.php">Share</a>
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript"></script>
</td>
<td>
<a href="http://twitter.com/home?status=Currently%20reading:%20http://linuxgazette.net/176/lg_mail.html%20at%20Linux%20Gazette%20%23linuxgazette" title="Click to share this post on Twitter"><img src="../gx/twitter.png" width="50" height="85" border="0"></a>
</td>
</tr>
</table>


<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:176/lg_mail.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->

<!-- *** END author bio *** -->

<div id="articlefooter">

<p>
Copyright &copy; 2010, . Released under the <a
href="http://linuxgazette.net/copying.html">Open Publication License</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>

<p>
Published in Issue 176 of Linux Gazette, July 2010
</p>

</div>

<div id="previousnextbottom">
<A HREF="lg_bytes.html" >next --&gt;</A>
</div>

</div>
</div>

<script src="http://www.google-analytics.com/urchin.js"
type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1204316-1";
urchinTracker();
</script>







<img src="../gx/tux_86x95_indexed.png" id="tux" alt="Tux"/>

</body>
</html>




<html>
<head>
<link href="../lg.css" rel="stylesheet" type="text/css" media="screen, projection" />
<title>
Linux Gazette : December 2006 (#133) 
</title>

<style type="text/css" media="screen, projection">
<!--

.twdtarticle {
	width: 84%;
	/* margin:0px;
	left:0px; */
}

#twdtbody {
/*
	margin-left:0px;
	margin-right:0px;
*/
}

.twdtarticle h1 {
	font-size:19px;
	text-align:center;
}

.lgcontent {
        width: 84%;
        margin-top: 30px;
        /* left:0px; */
}

-->
</style>


</head>

<body id="twdtbody">

<a href="../">
<img src="../gx/2003/newlogo-blank-200-gold2.jpg" alt="Linux Gazette" id="twdtlogo"/>
</a>
<p id="fun">...making Linux just a little more fun!</p>




<div class="content lgcontent">

<h2>December 2006 (#133):</h2>

<ul>


	<li><a href="#lg_mail">Mailbag</a>

	<li><a href="#lg_talkback">Talkbacks</a>

	<li><a href="#lg_bytes">NewsBytes</a>, by <i>Aditya Nag and Samuel Kotel Bisbee-vonKaufmann</i></li>

	<li><a href="#cherian">Easy Shell Scripting</a>, by <i>Blessen Cherian</i></li>

	<li><a href="#howell">Installing Knoppix</a>, by <i>Edgar Howell</i></li>

	<li><a href="#luana">Plotting the spirograph equations with 'gnuplot'</a>, by <i>V&iacute;ctor Lua&ntilde;a</i></li>

	<li><a href="#renker">Poor Man's Laptop: Richer Features</a>, by <i>Gerrit Renker</i></li>

	<li><a href="#saha">Learning about Linux Processes</a>, by <i>Amit Saha</i></li>

	<li><a href="#tag">The Monthly Troubleshooter: The USB Subsystem</a>, by <i>The Answer Gang</i></li>

	<li><a href="#collinge">HelpDex</a>, by <i>Shane Collinge</i></li>

	<li><a href="#ecol">Ecol</a>, by <i>Javier Malonda</i></li>

	<li><a href="#bisbee">The Geekword Puzzle</a>, by <i>Samuel Kotel Bisbee-vonKaufmann</i></li>

</ul>

</div>




<br />


<div class="content lgcontent">

<a name="lg_mail"></a>
<h1>Mailbag</h1>


</b>
</p>


<p>
<h3>This month's answers created by:</h3><b>[ </b><b>Ben Okopnik, Brian Bilbrey, Dale Raby, Faber Fedor, Kapil Hari Paranjape, Karl-Heinz Herrmann,  Lew Pitcher, Neil Youngman, Ramon van Alteren, Rick Moen, Samuel Kotel Bisbee-vonKaufmann, Steve Brown, Thomas Adam</b><b> ]</b>
<br />...and you, our readers!<br /><hr width="50%" align="center" size="3" /><h1>Gazette Matters</h1>
<hr />
<h3>To everyone who helped to produce LG#132...</h3>
<p>
<b>Benjamin A. Okopnik [ben at linuxgazette.net]</b><br />
<b>Thu, 2 Nov 2006 09:28:38 -0500</b>
</p>

<p>
...a most sincere "thank you"!
</p>

<p>
This month, a number of new volunteers came aboard - and, in a word,
<em>revitalized</em> LG. Some came in and cleaned up the dusty phrasing,
straightened up the crooked grammar, and replaced the broken spelling;
others brought their technical expertise and poked into the complicated
corners of articles. Yet others looked at LG with fresh eyes and pointed
out a few broken phone cords and the bumps under the carpet (which
turned out to be broken stuff hastily swept under in the past.) All who
contributed have left their mark.
</p>

<p>
As Editor-in-Chief, I took great pleasure from seeing all this activity;
in coordinating all of this [1], I got to meet a number of smart,
energetic, <em>capable</em> individuals - people whom, as a group, I'm proud to
know, and ones whom I hope I may come to call my friends.
</p>

<p>
Because of all of you, - even during this first month while everybody
"settled in" and got familiar with the tasks needed to keep LG moving -
my end of the production process has shifted focus, in large and
positive ways. Just in case anyone missed it, this month we published
the largest Mailbag (mailbag, talkbacks, and 2-cent tips) ever, by a
large factor (over 620k, as contrasted against, say, 45k in LG#113.) In
large part, this is due to our fearless Mailbag Editor, who also happens
to be my fearless wife <img src="../gx/smile.png" alt=":)"> - but in part, it is due to the fact that I
had the time and the energy to 1) rethink the Mailbag process and
presentation, and 2) write a script which automated/relieved a great
percentage of the drudgery that Mailbag used to be.
</p>

<p>
My best hope for the future is to revisit and revise every part of LG to
shift that work/fun ratio toward the fun end by leaving the repetitive
work to the machines as much as possible - and leaving the fun,
interesting, challenging efforts to us humans.
</p>

<p>
I'm very, very glad that all of you are here to share this with me.
Thanks again, and I hope that our interaction continues and improves
with time.
</p>



<p>
[1] To the extent that a herd of cats can be coordinated, of course. <img src="../gx/smile.png" alt=":)">
Part of my enjoyment in all of this was seeing people indepently grab a
hunk of work and make it by-damn <strong>behave</strong> without much input from me.
</p>

<p>
I'd mentioned, in an email exchange with Ren&eacute; Pfeiffer, that I don't
<em>want</em> to tie people down to process details. I've written or tweaked
every LG FAQ to define <em>results;</em> the implementation is mostly left
undefined, or stated in general terms. What I want is for everyone to do
their piece the way the think best; if they get stuck, I'm always here
to troubleshoot the process along with them. The way <em>I</em> do things is
only <em>my</em> way; it's not <em>the</em> way - and if you do them better than I do,
then I'll happily learn what you have to teach. That, to me, is one of
the best benefits that cooperation offers.
</p>


<p>
<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>

</p>

<p><b>[  <a name="mb-gaz:_To_everyone_who_helped_to_produce_LG_132"></a> <a href="misc/lg/gaz:_To_everyone_who_helped_to_produce_LG_132.html">Thread continues here (3 messages/4.44kB)</a>  ]</b></p>
<hr />

<h3>Aaaand... one more time, with gusto!</h3>
<p>
<b>Benjamin A. Okopnik [ben at linuxgazette.net]</b><br />
<b>Tue, 31 Oct 2006 14:58:12 -0500</b>
</p>

<p>
I've just added a routine to extract all the email addresses out of the
TAG mailbag, look them up in the LG bios, and pull up the names
associated with those addresses; the folks for whom this chain 1) exists
and 2) matches will be credited with participating in the monthly
madness (the credits will be listed at the top of the generated Mailbag
page.)
</p>

<p>
Since I really like rewarding people who do good work to whatever extent
I can, I'd appreciate it if everyone would make sure that 1) they've
sent me a bio (preferably with a ~200x200px pic included) and 2) their
bio contains the email address that they're using to post to TAG. This
would satisfy my itch <em>and</em> credit you for your brilliant flights of wit
and wisdom... sounds like an all-around win to me. <img src="../gx/smile.png" alt=":)">
</p>


<p>
<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>

</p>

<p><b>[  <a name="mb-gaz:_Aaaand_one_more_time_with_gusto"></a> <a href="misc/lg/gaz:_Aaaand_one_more_time_with_gusto.html">Thread continues here (3 messages/3.97kB)</a>  ]</b></p>
<hr />

<h1>Still Searching</h1>
<hr />
<h3>Issue with evolution on FC6</h3>
<p>
<b>Dale A. Raby [daleraby at tds.net]</b><br />
<b>Tue, 07 Nov 2006 19:22:41 -0600</b>
</p>

<p>
Hello,
</p>

<p>
This one is an irritation and a puzzle... need I mention that I do not
like puzzles?
</p>

<p>
I purchased a DVD of Fedora Core 6.  After a few minor repartitioning
issues, I got it installed, though the default resolution was 1024 x
768.  This displays text a bit small for my old eyes, so I changed the
display to 800 x 600, which is what I usually use on my vintage machine.
</p>

<p>
The problem is with the Evolution groupware package.  For some reason,
the default window is larger than my desktop.  When I unmaximize the
window, I can move it over so I can access the scroll bar, but then I
cannot see the mailboxes on the left side of the window.  This window
will not resize.
</p>

<p>
When I change the resolution to 1024 x 768, everything works as it is
supposed to, except that I get eyestrain after ten minutes.  All other
applications seem to work fine at either resolution.
</p>

<p>
I would like Evolution to display correctly at 800 x 600.  Does anyone
have a suggestion for me?
</p>

<p>
Thanks,
</p>

<p>
Dale
<pre>-- 
"Nothing is ever so bad that it couldn't be worse, and if it could be
worse than it is, maybe its not so bad!"... me
</pre>

</p>

<hr />

<h3>max. viewer for paperport</h3>
<p>
<b>ghnolan [nolanman at comcast.net]</b><br />
<b>Mon, 30 Oct 2006 07:34:52 -0500</b>
</p>

<p>
<p class="editorial">
 This was originally sent in .html format, which I manually removed.
<strong>PLEASE</strong> do not send e-mail to TAG in .html! --Kat 
</p>

</p>

<p>
In Jan.2000 you received a query from a man that could not open max. files
for viewing paperport. He later responde that he found the viewer on the
web. Do you have any idea where he found it? Going bananas here 'cause folks
can't open my attachments from Paperport sent as max. or pdf., or jpeg, or
tiff.
</p>

<p>
 
</p>

<p>
Geoff in Miami
</p>



<p>

</p>

<hr />

<h1>Our Mailbag</h1>
<hr />
<h3>Get HW and SW inventary</h3>
<p>
<b>ada * [adalex81 at gmail.com]</b><br />
<b>Wed, 22 Nov 2006 11:04:03 +0100</b>
</p>

<p>
Hello everybody:
</p>

<p>
I'm a spanish girl in her last year at University studing computer
engineering.
I'm starting to look into linux to develope my end-degree project. The
project deals with the managing of a heterogeneous net, this means that from
a client (administrator)  I have to get a Hardware and Software inventary of
every computer and device in the net. The problem is that I just don't know
where linux keeps such information (Windows keeps it in the register). Could
any of you give a helping hand?
</p>

<p>
I mean to design the interface using J2EE tecnology, so I'll have to
interrogate computers using java (neither how to do this yet).
</p>

<p>
Another question I'd like to ask is the best linux distribution to work
with. I'll work with virtual machines so high requiriments do not represent
huge problems.
</p>

<p>
hoping someone reads this (and spends sometime answering it ;) ),
Galax
</p>


<p>

</p>

<p><b>[  <a name="mb-Get_HW_and_SW_inventary"></a> <a href="misc/lg/Get_HW_and_SW_inventary.html">Thread continues here (12 messages/28.32kB)</a>  ]</b></p>
<hr />

<h3>Stuck at April 2005 on Debian Etch</h3>
<p>
<b>Riccardo Tritto [riccardo.tritto at gmail.com]</b><br />
<b>Thu, 23 Nov 2006 19:35:23 +0100</b>
</p>

<p>
Hi there,
I have installed lg-all and lg-subscription on my Debian Etch, but I
only have issues 1 to 113 (April 2005) when pointing my browser
to /usr/share/doc/lg/index.html (or <a href="http://localhost/lg/">http://localhost/lg/</a>).
</p>

<p>
Is it normal that I miss issues 114 to 132 (as of today)?
</p>

<p>
Is perhaps the maintainer of the Debian packages still packing all those
missing issues?
</p>

<p>
Or perhaps something is wrong in my system?
</p>

<p>
Thanks for answering.
</p>

<p>
Riccardo Tritto - Bari - Italy
</p>



<p>

</p>

<p><b>[  <a name="mb-Stuck_at_April_2005_on_Debian_Etch"></a> <a href="misc/lg/Stuck_at_April_2005_on_Debian_Etch.html">Thread continues here (2 messages/1.75kB)</a>  ]</b></p>
<hr />

<h3>To split DVD video stream according to DVD menu - how ?</h3>
<p>
<b>Wladimir Mutel [mwg at mwg.dp.ua]</b><br />
<b>Sun, 19 Nov 2006 15:14:50 +0200</b>
</p>

<p>
Dear people,
</p>

<p>
	I have a DVD with several short films glued together into one
	big video-stream (and of course then split into 1GB VOBs).
	There is a menu on this DVD, which buttons trigger play of
	this stream from certain offsets (starts of separate shorts).
	On the ending of a short, playing continues into next one.
</p>

<p>
	My problem now is how to split this DVD structure back into
	separate mpeg/avi files, one for each short ? I.e., first, to
	read starting point data out of DVD menu buttons, next, sort
	these points in advance order, and last, extract resulting
	pieces/intervals from big DVD stream.
</p>

<p>
	I would prefer to solve this problem by using free software
	(transcode/mplayer/mencoder/mjpegtools/xine/wharever).
	I also would not mind writing a little program myself in
	C/Perl/shell if there are no existing command-line utilities to
	achieve this goal. And I would appreciate some initial
	directions from you. What is better to read and learn before
	I start ? I found out that DVD menu is plain MPEG2 file, but no
	great details about these buttons/actions. May be I should use
	libdvdnav ? What good examples to look into ?
</p>

<p>
	Thank you in advance for your reply.
</p>

<p>

</p>

<p><b>[  <a name="mb-To_split_DVD_video_stream_according_to_DVD_menu_how"></a> <a href="misc/lg/To_split_DVD_video_stream_according_to_DVD_menu_how.html">Thread continues here (3 messages/4.51kB)</a>  ]</b></p>
<hr />

<h3>Uninstalling Linux</h3>
<p>
<b>Berghuis, Sandy J. [sberghuis at frpaper.com]</b><br />
<b>Thu, 16 Nov 2006 10:44:55 -0600</b>
</p>

<p>
Can you tell me how to uninstall Linux from my computer?  I could just
cry because it wiped everything off my hard drive.  Is there any way to
recover any of the things I had on my hard drive?  Thank you for any
help you can give me.
</p>

<p>
Sandy Berghuis
</p>

<p>

</p>

<p><b>[  <a name="mb-Uninstalling_Linux"></a> <a href="misc/lg/Uninstalling_Linux.html">Thread continues here (2 messages/1.95kB)</a>  ]</b></p>
<hr />

<h3>RS 422</h3>
<p>
<b>Farago, Peter [remedium2 at vivamail.hu]</b><br />
<b>Mon, 13 Nov 2006 09:26:43 +0100</b>
</p>

<p>
Dear James T. Dennis,
</p>

<p>
I bought a midi interface with rs422 ports,and i read about it(because =
this interface quite old)and i know its for macintosh.
</p>

<p>
But one thing isn't too clear in my mind:
</p>

<p>
Can i use devices with my pc which are made for macintosh?Because i'm =
not sure that those devices are made ONLY for macintosh.
</p>


<p>
Thanks a lot,
</p>


<p>
Peter Farago
</p>

<p>
Hungary
</p>

<p>

</p>

<p><b>[  <a name="mb-RS_422"></a> <a href="misc/lg/RS_422.html">Thread continues here (3 messages/3.75kB)</a>  ]</b></p>
<hr />

<h3>Debian install gui</h3>
<p>
<b>Rick Moen [rick at linuxmafia.com]</b><br />
<b>Thu, 2 Nov 2006 14:48:25 -0800</b>
</p>

<p>
----- Forwarded message from Rick Moen &lt;rick@linuxmafia.com&gt; -- 
</p>

<p>
<pre>
Date: Thu, 2 Nov 2006 14:47:19 -0800
To: luv-main@luv.asn.au
From: Rick Moen &lt;rick@linuxmafia.com&gt;
Subject: Re: Debian install gui
</pre>
Quoting Peter McMullen (peter@mcmullen.net.au):
</p>


<p>
<pre>
&gt; There was a thread running a while ago about the alleged difficulty of
&gt; installing Debian, and much was mode of the lack of a GUI installer. 
&gt; 
&gt; Actually it does exist, and has for a while. It has been updated for
&gt; the Etch RC1, but its a bit of a secret. If you burn the install iso
&gt; and boot, it looks the same as it always has, but if you type
&gt; installgui instead of just hitting enter you get the new install
&gt; interface. 
&gt; 
&gt; Its a direct mapping of the old dialogue, so if you expect it to hook
&gt; gparted to help with partitioning, get used to disappointment. The
&gt; only significant difference, so far, is that it does sometimes ask
&gt; multiple questions on one page - e.g. for password verification.
</pre>
</p>

<p>
This illustrates yet again that, when less-technical users say "your
Linux distribution needs [foo]", they often mean something else entirely
-- or aren't really sure what they mean -- and have a bizarre tendency
to express themselves using code phrases.
</p>

<p>
That is, the code phrase "GUI installer" in this context usually turns
out to really have very little to do with graphics.  The speaker really
means "I want an OS installer that asks me very, very few questions and
does extensive hardware autoprobing."  I.e., (they believe) they want
completely automated installers, or as close as possible.
</p>


<p>
Old-timers may recall the antique debate point used by MS-Windows and
Macintoy OS users for years:  "Linux needs more applications."  After
hearing this for many years, I sat down with one of them, a longtime
Windows user, at a Linux desktop box and typed:
<pre>
$ grep Package: /var/lib/apt/lists/*Packages | wc -l
</pre>
I pointed out that the return value of 17,511 was the number of
currently available software packages, in that distribution.  Mr.
Windows said:  "Um, desktop productivity software, I mean."  So, I
showed the guy a list of the roughly dozen different full "office"
suites that were then available for x86 Linux systems.
<pre>
RM:  A dozen.  How many are enough office suites?  Two dozen?  A hundred?
Mr. Windows:  Well, I <em>thought</em> there weren't any at all.
RM:  And <em>why</em> did you think that?
Mr. Windows:  Well, I looked on the shelves in my corner software store.
RM:  So, because you can't conceive of getting software any other way
     than in a separate, extra-cost retail package, you simply 
     <em>assumed</em> that Linux "needs more applications".  By the way,
     how many office suites do <em>you</em> use?
Mr. Windows:  {face turning red}  One.
</pre>
<pre>-- 
Cheers,                 "Heedless of grammar, they all cried 'It's him!'"
Rick Moen                       -- R.H. Barham, _Misadventure at Margate_
rick@linuxmafia.com
</pre>

</p>

<p><b>[  <a name="mb-Debian_install_gui"></a> <a href="misc/lg/Debian_install_gui.html">Thread continues here (2 messages/4.98kB)</a>  ]</b></p>
<hr />

<h3>Don't know which days are better</h3>
<p>
<b>mike sullivan [albinoaardvark at sbcglobal.net]</b><br />
<b>Tue, 07 Nov 2006 07:38:44 -0600</b>
</p>

<p>
The ones where I learn some thing about Linux. . . . or the days you 
guys are off on a tangent. Thanks either way.
</p>

<p>
Mike
</p>

<p>

</p>

<hr />

<h3>Web Search Option</h3>
<p>
<b>Ramanathan Muthaiah [rus.cahimb at gmail.com]</b><br />
<b>Mon, 20 Nov 2006 05:50:52 +0530</b>
</p>

<p>
Am looking for ways to enable search options for one of the websites (open
source, not meant for business <img src="../gx/smile.png" alt=":-)"> ) am responsible for maintenance.
</p>

<p>
However, it's not for the entire website for a specific section (FAQ pages).
</p>

<p>
Any ideas ?
</p>

<p>
/Ram
</p>

<p>
P.S: Prefer to do it using scripts written in sed / awk.
</p>


<p>

</p>

<p><b>[  <a name="mb-Web_Search_Option"></a> <a href="misc/lg/Web_Search_Option.html">Thread continues here (16 messages/18.15kB)</a>  ]</b></p>
<hr />

<h3>Grub Disk Error</h3>
<p>
<b>clarjon1 [clarjon1 at gmail.com]</b><br />
<b>Fri, 24 Nov 2006 08:47:09 -0500</b>
</p>

<p>
Hello everyone
</p>

<p>
I've come across a small annoyance lately when I try to boot my PC.
When it tries to load GRUB, it tells me: 
<pre>
GRUB Disk Error 
</pre>
I can boot, the livecd which I installed from (Freespire BTW) has a boot
from hda1 option that I find quite useful right now, so I can boot.
I've tried re-installing GRUB from the commandline, and from the GRUB
shell, but to no luck at all.  From the commandline, I get told that
(paraphrasing) the drive has no bios disk.
</p>

<p>
Any help would be appreciated.
</p>


<p>

</p>

<p><b>[  <a name="mb-Grub_Disk_Error"></a> <a href="misc/lg/Grub_Disk_Error.html">Thread continues here (7 messages/6.99kB)</a>  ]</b></p>
<hr />

<h3>Find circular simlinks</h3>
<p>
<b>Britto I [brittocan at gmail.com]</b><br />
<b>Fri, 24 Nov 2006 16:57:13 +0530</b>
</p>

<p>
Hi Folks!
</p>


<p>
   Some where in the directory structure there might be the circular
symlinks ie the softlinks made to the parent directory
</p>

<p>
   Say..
<pre>
       localhost]# pwd
 
       /usr/local/test
 
       localhost]# ln -s .. cirlink
 
       localhost]#  ls -l cirlink
 
                 cirlink -&gt; ..
 
</pre>
    I want to find that particular circular or recursive link
</p>

<p>
Thanx in Advance..
Britto
</p>


<p>

</p>

<p><b>[  <a name="mb-Find_circular_simlinks"></a> <a href="misc/lg/Find_circular_simlinks.html">Thread continues here (2 messages/1.46kB)</a>  ]</b></p>
<hr />

<h3>tar doesn`t like colon in the filename</h3>
<p>
<b>jorge xxxxx [kaeosdonk at gmail.com]</b><br />
<b>Wed, 8 Nov 2006 13:18:32 +0100</b>
</p>

<p>
<p class="editorial">
 I've removed the original message in this head, as it is entirely
reproduced in Jorge's correction below. - Kat 
</p>

</p>

<p>
2006/11/8, jorge xxxxx &lt;kaeosdonk@gmail.com&gt;:
</p>

<p>
<pre>
&gt; I'm having a problem with the downloadable pack of linuxgazette.net
&gt; issue this month(132).  It`s probably in my side as long as someone
&gt; managed to compress it but when I do
&gt;
&gt; tar -xvzf  lg-132.tar.gz
&gt;
&gt; it spit some errors about being unable of creating filenames like
&gt;
&gt; Talkback:100_lg_tips_html_tips_14.html
&gt;
&gt; As long as not having internet at home (so that's the downloadable
&gt; package for) and not being able of getting  linux machine in the
&gt; university I haven't the original error mesagges.
&gt;
&gt; the tar version is the one with debian sarge r1 I've been thinking
&gt; about it being some filesystem name limitation but again you have done
&gt; it in your end.  I can manage to get why it happens or how to extract
</pre>
<pre>
                       ^^
</pre>
</p>

<p>
<pre>
&gt; them (without cheating)
</pre>
</p>


<p>
<pre>
&gt; Sorry for the strange enclish
&gt; Jorge
</pre>
</p>

<p>
I mean to say I can't
</p>

<p>
<pre>-- 
Jorge
</pre>

</p>

<p><b>[  <a name="mb-tar_doesn_t_like_colon_in_the_filename"></a> <a href="misc/lg/tar_doesn_t_like_colon_in_the_filename.html">Thread continues here (5 messages/9.84kB)</a>  ]</b></p>
<hr />

<h3>Top posting</h3>
<p>
<b>Benjamin A. Okopnik [ben at linuxgazette.net]</b><br />
<b>Wed, 8 Nov 2006 16:18:57 -0500</b>
</p>

<p>
[ Please don't silently drop TAG from the CC list. I've re-added it. ]
</p>

<p>
On Wed, Nov 08, 2006 at 11:18:58PM +0200, Paul Sephton wrote:
</p>

<p>
<pre>
&gt; 
&gt;    Sorry...  won't happen again
</pre>
</p>

<p>
No worries, Paul. We don't flame people here for not knowing things - 
we just point'em to the FAQ. <img src="../gx/smile.png" alt=":)"> In any case, welcome.
 
</p>

<p>
<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>

</p>

<p><b>[  <a name="mb-Top_posting"></a> <a href="misc/lg/Top_posting.html">Thread continues here (2 messages/1.73kB)</a>  ]</b></p>
<hr />

<h3>How do you sort an IP address list?</h3>
<p>
<b>Rick Moen [rick at linuxmafia.com]</b><br />
<b>Tue, 7 Nov 2006 15:48:08 -0800</b>
</p>

<p>
Thread quoted below could be grist for the TAG mill, or the makings of a
2 cent tip, or something else.
</p>

<p>
<pre>
Date: Tue, 7 Nov 2006 12:16:25 -0800
To: conspire@linuxmafia.com
X-Mas: Bah humbug.
User-Agent: Mutt/1.5.11+cvs20060403
From: Rick Moen &lt;rick@linuxmafia.com&gt;
Subject: [conspire] Puzzle: How do you sort IP address lists?
</pre>
There's a maintenance task I have to do occasionally, that is very much
The Wrong Thing over the long term, but necessary in the sort term:  
I keep a blocklist of IP addresses that my SMTP server shouldn't accept
mail from.  SVLUG's server, on which I'm interim sysadmin, has a list
just like it.  Since I maintain both lists, it's logical to combine
them, run them through 'uniq' (to eliminate duplicates), and sort the
result -- to benefit both sites.  
</p>

<p>
That's where the 'puzzle' bit comes in.  But first, why it's The Wrong
Thing:
</p>

<p>
Security author Marcus J. Ranum has a dictum that 'enumerating badness'
is dumb (<a href="http://www.ranum.com/security/computer_security/editorials/dumb/):">http://www.ranum.com/security/computer_security/editorials/dumb/):</a>
<pre>
  Back in the early days of computer security, there were only a
  relatively small number of well-known security holes. That had a lot
  to do with the widespread adoption of "Default Permit" because, when
  there were only 15 well-known ways to hack into a network, it was
  possible to individually examine and think about those 15 attack
  vectors and block them. So security practitioners got into the habit
  of "Enumerating Badness" - listing all the bad things that we know
  about.  Once you list all the badness, then you can put things in
  place to detect it, or block it.
 
  Why is "Enumerating Badness" a dumb idea? It's a dumb idea because
  sometime around 1992 the amount of Badness in the Internet began to
  vastly outweigh the amount of Goodness. For every harmless,
  legitimate, application, there are dozens or hundreds of pieces of
  malware, worm tests, exploits, or viral code. Examine a typical
  antivirus package and you'll see it knows about 75,000+ viruses that
  might infect your machine. Compare that to the legitimate 30 or so apps
  that I've installed on my machine, and you can see it's rather dumb to
  try to track 75,000 pieces of Badness when even a simpleton could track
  30 pieces of Goodness.  [...]
</pre>
So, in keeping blocklists of IP addresses that have been zombified and 
used for mass-mailed spam, 419-scammail, etc., I'm aware of doing
something a bit <em>dumb</em>.  It's a losing stategy.  I'm doing it on
linuxmafia.com because the site is badly short on RAM and disk space
in the short term (still need to migrate to that VA Linux 2230), and
so software upgrades are deferred.  Similarly, the SVLUG host has a
scarily broken package system, and is therefore to be migrated rather
than worked on in place, as well.  So, we limp by on both machines with
some long-term losing anti-spam methods because they're short-term
palliatives.
</p>


<p>
Getting back to the puzzle, you'd think that GNU sort would be easily
adaptable to a list like this, right?  Consider this 11-address chunk
of linuxmafia.com's blocklist:
<p>
[ ... ]
</p><p><b>[  <a name="mb-How_do_you_sort_an_IP_address_list"></a> <a href="misc/lg/How_do_you_sort_an_IP_address_list.html">Thread continues here (23 messages/58.20kB)</a>  ]</b></p>
<hr />

<h3>USB Drive Bad Sectors</h3>
<p>
<b></b><br />
<b>Fri, 27 Oct 2006 17:04:01 -0400</b>
</p>

<p>
Greetings,
</p>

<p>
I have Linux (2.6.15.6) booting from a USB drive.  My application is
machine control and I wanted to use something solid-state.  A USB stick
seemed like a good idea because it is cheap and readily available and
reasonably fast.
</p>

<p>
My problem is that I get file system corruption and "bad sectors" some
times, presumably due to an unclean shut down.  I am using an ext2
filesystem with the thinking that a journal would just wear out the
drive in a certain spot.  Maybe that's not correct -- I am not sure if
the drive has a wear-leveling algorithm implemented or not.
</p>

<p>
Questions:
</p>

<p>
1. Is ext2 the right choice?  Or would reiserfs be better? Vfat??
</p>

<p>
2. Is their a quick way to detect bad sectors?  I tried running e2fsck
-c but it has been 45 minutes so far!
</p>

<p>
I am thinking if I can detect the corruption, I can just reformat the
partition and restore it from another read-only partition.  The kernel
seems to report them:
<pre>
sd 5:0:0:0: SCSI error: return code = 0x08000002
sdb: Current: sense key=0x3
    ASC=0x11 ASCQ=0x0
end_request: I/O error, dev sdb, sector 598730
</pre>
I guess I could grep the messages log, but I don't think that is a
conclusive check.
</p>

<p>
Any pointers would be appreciated.
</p>

<p>
<pre>-- 
Brandon Reynolds                Ph: 330-644-3059
Systems Engineer                Fax: 330-644-8110
CTI, a Poling Group Company     Email: bmr at comtime.com
  
</pre>

</p>

<p><b>[  <a name="mb-USB_Drive_Bad_Sectors"></a> <a href="misc/lg/USB_Drive_Bad_Sectors.html">Thread continues here (4 messages/6.67kB)</a>  ]</b></p>
<hr />


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:133/lg_mail.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
<!-- *** END author bio *** -->




<div id="articlefooter">




<p>
Published in Issue 133 of Linux Gazette, December 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="lg_talkback"></a>
<h1>Talkbacks</h1>


</b>
</p>


<p>
<h3>Talkback:132/pfeiffer.html</h3>
<p>
[ In reference to "<a href="../132/pfeiffer.html">Boosting Apache Performance by using Reverse Proxies</a>" in LG#132 ]
<br>
<b>Clement Huang [clement_huang at yahoo.com]</b><br />
<b>Fri, 17 Nov 2006 23:47:58 -0800 (PST)</b>
</p>

<p>
Nice article, Rene.    I also saw apache_mod_proxy can do the
reverse-proxy function. How is the performance  comparing  to squid
proxy?  any  benchmarking on  this proxy  performance between these two?
</p>

<p>
thanks again, Clement 
</p>

<p>

</p>

<p><b>[  <a name="mb-tkb:_Talkback:132_pfeiffer_html"></a> <a href="misc/lg/tkb:_Talkback:132_pfeiffer_html.html">Thread continues here (2 messages/0.82kB)</a>  ]</b></p>
<hr />

<h3>Talkback:126/savage.html</h3>
<p>
[ In reference to "<a href="../126/savage.html">IT's Enough To Drive You Crazy</a>" in LG#126 ]
<br>
<b>David Low [puma at aznetgate.net]</b><br />
<b>Tue, 07 Nov 2006 18:27:17 -0700</b>
</p>

<p>
as to excuses I use for "THAT" OS, I usualy just say "what do you
expect? It's Mickey$hit Windblows.  And that is why I use Linux.".
</p>

<p>
I have actualy exclusivly used linux since '95.  Before that I used OS/2
Warp cause the "other" OS used broken cooperative multitasking, and that
was just a mess for my Fido-net BBS.
</p>


<p>

</p>

<p><b>[  <a name="mb-tkb:_Talkback:126_savage_html"></a> <a href="misc/lg/tkb:_Talkback:126_savage_html.html">Thread continues here (3 messages/3.11kB)</a>  ]</b></p>
<hr />

<h3>Talkback:132/renker.html</h3>
<p>
[ In reference to "<a href="../132/renker.html">Poor Man's Laptop</a>" in LG#132 ]
<br>

<b>Peter Hoeg [peter at hoeg.com]</b><br />
<b>Tue, 7 Nov 2006 11:21:52 +0300</b>
</p>

<p>
Any particular reason for not just using a tool, which already exists
- such as Unison (<a href="http://www.cis.upenn.edu/~bcpierce/unison/">http://www.cis.upenn.edu/~bcpierce/unison/</a>) which is
cross platform/OS ?
</p>

<p>
/peter
</p>

<p>

</p>

<p><b>[  <a name="mb-tkb:_Talkback:132_renker_html"></a> <a href="misc/lg/tkb:_Talkback:132_renker_html.html">Thread continues here (13 messages/14.68kB)</a>  ]</b></p>
<hr />

<h3>Talkback:81/adam2.html</h3>
<p>
[ In reference to "<a href="../81/adam2.html">Introduction to Programming Ada</a>" in LG#81 ]
<br>

<b>Thomas Adam [thomas_adam16 at yahoo.com]</b><br />
<b>Sat, 25 Nov 2006 11:40:35 +0000 (GMT)</b>
</p>

<p>
[ I'm CCing TAG on this, given that you read about it in linxugazette. ]
</p>

<p>
--- Nusrat &lt;nusrat.jabeen@gmail.com&gt; wrote:
</p>


<p>
<pre>
&gt; Hi,
&gt; i am a student and have just seen ur Ada tutorial at this website.
&gt; <a href="../issue81/adam2.html">http://linuxgazette.net/issue81/adam2.html</a>
</pre>
</p>

<p>
Heh.  That was back in my "youth".
</p>


<p>
<pre>
&gt; from what i have learned i only know that Put is used to display things
&gt; on
&gt; the screen. could you please explain what these Put camands do .
</pre>
</p>

<p>
Yes -- this is correct.  puts only outputs stuff on the screen.  This is
when you have Ada.text_io; in use as a package.
</p>


<p>
<pre>
&gt; (1)
&gt; Put("Count=");
&gt; Put(Count,5); New_Line;
</pre>
</p>

<p>
I am not sure what you're asking me here -- surely it's obvious what the
above is doing?  Given that "Count" is likely an integer value, and hence
you'd have been using something like the following:
</p>

<p>
<pre>
with Ada.INTEGER_IO(INTEGER)
</pre>
Then put in this context takes on a different meaning.  What you're
asking:
</p>

<p>
<pre>
Put(Count,5); New_Line;
</pre>
To do is output count with a width of five digits.
</p>


<p>
<pre>
&gt; (2)
&gt; for Index in 1 .. 4 loop
&gt; Put("Doubled index =");
&gt; Put(2 * Index,5); New_Line;
&gt; 
&gt; i have to submitt my work today, i shall be grateful for any help.
</pre>
</p>

<p>
The explanation as above also fits in with this.
</p>

<p>
Oh dear, it seems I have submitted this work in late.  I wonder what your
teacher would have awarded me?
</p>

<p>
-- Thomas Adam
</p>


<p>

</p>

<hr />

<h3>Talkback:128/adam.html</h3>
<p>
[ In reference to "<a href="../128/adam.html">How Fonts Interact with the X Server and X Clients</a>" in LG#128 ]
<br>

<b>GTLA-02 Service Account [gtla02 at linlab1.phy.okstate.edu]</b><br />
<b>Fri, 10 Nov 2006 14:32:28 -0600</b>
</p>

<p>
Hello,
</p>

<p>
Can I get any help for installing fonts server in my machine?
</p>

<p>
its slackware 10.2
</p>


<p>
Thanks in advance
</p>

<p>

</p>

<p><b>[  <a name="mb-tkb:_Talkback:128_adam_html"></a> <a href="misc/lg/tkb:_Talkback:128_adam_html.html">Thread continues here (10 messages/9.99kB)</a>  ]</b></p>
<hr />

<h3>Talkback:65/tag/12.html</h3>
<p>
[ In reference to "<a href="../65/12.html">(?) neighbour table overflow</a>" in LG#65 ]
<br>
<b>Peter Gervai [grinapo at gmail.com]</b><br />
<b>Wed, 22 Nov 2006 00:57:39 +0100</b>
</p>

<p>
Hi,
</p>

<p>
Dunno whether you append old pages or not, but since this is the most
linked by google, maybe you do. <img src="../gx/smile.png" alt=":)">
</p>

<p>
Answer2:
</p>

<p>
Additionally to the original answer the error message (and the fill of
th ARP table) may be caused by an accidentally too broad local net
route, like 193.0.0.0/8 on eth0, which would generate plenty of ARP
for any 193... addresses, which in fact fills the ARP cache (neighbour
table). This usually happens if you mistype the network mask... (like
writing /4 instead of /24, or 255.0.0.0 instead of 255.255.255.0)
</p>

<p>
<pre>-- 
 byte-byte,
    grin
</pre>
</p>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:133/lg_talkback.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
<!-- *** END author bio *** -->




<div id="articlefooter">




<p>
Published in Issue 133 of Linux Gazette, December 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="lg_bytes"></a>
<h1>NewsBytes</h1>
<p id="by"><b>By <A HREF="../authors/nag.html">Aditya Nag</A> and <A HREF="../authors/bisbee.html">Samuel Kotel Bisbee-vonKaufmann</A></b></p>


</b>
</p>


<p>
<div align="center">
<table cellpadding="7" summary="">
  <tr>
    <td>
        <img title="News Bytes" alt=bytes src="../gx/bytes.gif" border="1">
    </td>
    <td>
      <h3><img src="../gx/bolt.gif" alt="thunderbolt" />Contents:</h3>
      <ul>
        <li><A href="#general">News in General</a>
        <li><A href="#events">Conferences and Events</a> 
	<!--<li><a href="#leg">Legislation</a> -->
        <!--<li><A href="#security">Security News</a> -->
        <li><A href="#distro">Distro News</a>
        <li><A href="#commercial">Software and Product News</a> 
        <!--<li><A href="#other">In Other News...</a> -->
      </ul>
    </td>
  </tr>
</table>
</div>

<p> Please submit your News Bytes items in plain text; other formats may be
rejected. A one- or two-paragraph summary plus a URL has a much higher
chance of being published than an entire press release. Submit items to <a
href="mailto:bytes@linuxgazette.net">bytes@linuxgazette.net</a>.
</p>

<hr>

<a name="general"></a>
<h2>News in General</h2>

<h3><img src="../gx/bolt.gif" alt="thunderbolt" />Novell and Microsoft sign agreement... and then agree to disagree</h3>

<p>The biggest news this month is undoubtedly the Microsoft-Novell deal
that sees the two companies improve compatibility in key areas, as well as
containing a "do-not-sue" clause. The key points of the agreement are
improving interoperability between Windows and SUSE Enterprise Linux Server
(SLES) on virtualization, Microsoft's Active Directory and Novell's
eDirectory, and Microsoft Office and OpenOffice XML formats on the
desktop.</p>

<p>Besides this, Microsoft  will also promote SLES where customers pick
Windows over Linux or decide to run Linux alongside Windows. While the idea
of Microsoft promoting anything Linux related may come as a shock to many,
no one will be more concerned than Red Hat. After already facing Oracle's
assault on their service business, Red Hat must now face the galling fact
of the largest proprietary software company in the world promoting a rival
Distribution. Microsoft announced that their sales staff will distribute
70,000 coupons for SLES.</p>

<p>Microsoft has also undertaken not to prosecute developers and users of
SLES over possible infringements of its intellectual property (IP) in SLES.
A special Microsoft covenant will cover non-commercial developers and those
contributing code to SLES. However, it is to be noted that this covenant
does not cover Novell itself! This slightly bizarre situation is explained
by the fact that doing so would mean that Novell would violate the GNU
Public License.</p>

<p>The financial details of the deal were quickly disclosed, and the upshot
is that Microsoft is paying Novell close to $400 million. Microsoft is to
pay Novell $240m for 350,000 subscription coupons of SLES, to be released
in annual batches of 70,000. Another $94 million will be spent on sales and
marketing through the five years of the deal. A patent co-operation
agreement will see Microsoft paying another $108 million, while Novell pays
Microsoft a minimum of $40 million.</p>

<p>The reaction from the Free Software community was prompt, and furious,
with Bruce Perens calling Novell the new SCO. Across the board criticism
led to Novell putting up a <a
href="http://www.novell.com/linux/microsoft/faq_opensource.html">FAQ</a>
that tries to answer some of the most important issues. Not all are
convinced, however. The Samba team criticized the deal, saying that "the
agreement struck between Novell and Microsoft is a divisive agreement. It
deals with users and creators of free software differently depending on
their "commercial" versus "non-commercial" status, and deals with them
differently depending on whether they obtained their free software directly
from Novell or from someone else."</p>

<p>Shortly afterwards, Microsoft CEO Steve Ballmer further raised the
hackles of the Free Software community by claiming that every Linux
customer had an "undisclosed balance sheet liability", because Linux uses
Microsoft's Intellectual Property. He also implied that the
Novell-Microsoft deal happened because of this. Novell was quick to <a
href="http://www.novell.com/linux/microsoft/community_open_letter.html">refute
this</a>, stating that they did not at any point admit to any infringement
of Microsoft IP. Microsoft then released a <a
href="http://www.microsoft.com/presspass/press/2006/nov06/11-20Statement.mspx">statement</a>,
the gist of which is that while they agree that Novell did not admit to any
patent problems, Microsoft still believes that there may be issues... and so
the matter rests for the moment.</p>

<p>Legal issues on the horizon may force a rethink of the deal, with the
Free Software Foundation offering hints of its strategy to fight the deal
in an <a
href="http://www.theregister.co.uk/2006/11/20/eben_moglen_on_microsoft_novell/">interview
with The Register.</a></p>

<h3><img src="../gx/bolt.gif" alt="thunderbolt" />Oracle Announces Support for Red Hat Customers</h3>

<p>Oracle CEO Larry Ellison shook up the Enterprise Linux space by
announcing three-tiered support for Red Hat Enterprise Linux versions 3 and
4 starting at $99 per system per year. It's not necessary for Red Hat
customers to be running Oracle products.</p>

<p>Ellison claimed Oracle would undercut Red Hat by up to 60 per cent.
Oracle middleware and application users on Red Hat who switched within 90
days of the news get Oracle's support for an additional 50 per cent
off.</p>

<p>Speaking at the Oracle Openworld conference, he also confirmed that
Oracle would deliver a complete open source stack, comprising the entire
gamut from operating systems to applications. He denied Oracle would fork
Linux, as it will return bug fixes to the community and make fixes
available to Red Hat. "Each time Red Hat comes out with new code we'll
synchronize with that version. We will add our bug fixes to current, future
and back releases. Your application will run unchanged. We are going to
stay synchronized with the Red Hat version. We are not trying to fragment
the Linux market."</p>

<p>Red Hat shares took a tumble the next day, dropping 25% as investors
reacted to the news. Red Hat reacted by refusing to change it's pricing
strategy, and criticizing Oracle's move. Red Hat CEO Matt Szulik stated
that Oracle's changes would result in a different code base than Red Hat
Enterprise Linux. Red Hat also claimed that the changes made by Oracle
might result in "material differences in the code that will result in
application failures." </p>

<p>The long term effects of this move still remain to be seen.</p>

<a name="events"></a>
<h2>Conferences and Events</h2>


<dl>
<dt>==&gt; All LinuxWorld Expos &lt;==
<dd><a href='http://www.linuxworldexpo.com/'>www.linuxworldexpo.com</a><br>
<br>
<dt>Chaos Communications Congress
<dd>December 27th - 30th, Berlin, Germany (<a href="http://events.ccc.de/congress/2006/Home">http://events.ccc.de/congress/2006/Home</a>)

<dt>EUPACO-1
<dd>January 24th, Brussels (<a href="http://www.eupaco.org/eupaco1">http://www.eupaco.org/eupaco1</a>)
</dl>


<a name="distro"></a>
<h2>Distro News</h2>

<h3><img src="../gx/bolt.gif" alt="thunderbolt" />Fedora Core 6 "Zod" Released</h3>

<p>"Zod", also known as Fedora Core 6, was released late last month. Zod is
packed with shiny new features, including the Compiz window manager running
on the AIGLX framework. Zod also features GNOME 2.16 and KDE 3.5.4, a brand
new "DNA" theme, and much better printing support. Users with
multi-core/processor systems will be pleased to know that the new unified
kernel 2.6.18 autodetects the number of processors, and automagically
enables the corresponding bits. The days of separate kernels are finally
over.</p>

<p>Zod has also added a GUI tool for managing Xen virtual machines, a
revamped Anaconda that allows the user to select third-party repositories
at the time of installation, and a graphical troubleshooting tool for
SELinux. Other changes are the removal of Helix Player in favor of GNOME's
Totem, inclusion of Dogtail, ext3 file-system performance improvements, and
DT_GNU_HASH performance improvements with Fedora Core applications.
Additional packages comprising Fedora Core 6 are the Linux 2.6.18 kernel
and X.Org 7.1. Pirut and Pup also have minor updates to the interface since
their premiere with Bordeaux.</p> 

<p>Reviews for Zod have been largely positive. Most reviewers found the new
version to be fast, and stable, and appreciated the changes.  Proprietary
programs and multimedia codecs are missing of course, in line with the
Fedora philosophy, and some reviewers have asked for easier ways to get
everything working.</p>

<p>Download Zod at <a
href="http://fedoraproject.org/wiki/FedoraMain">http://fedoraproject.org</a></p>


<h3><img src="../gx/bolt.gif" alt="thunderbolt" />Slackware 11.0 out</h3>

<p>Another one of the old-school distributions, Slackware 11.0 released
after spending more than a year in developement. Slack 11.0 ships with Xfce
4.2.3.2 and KDE 3.5.4, the latest version of the award-winning K Desktop
Environment. Slackware uses the 2.4.33.3 kernel with features such as the
ReiserFS journaling filesystem, SCSI and ATA RAID volume support, SATA
support, and kernel support for X DRI (the Direct Rendering Interface)</p>

<p>Slack 11.0 also fully supports the 2.6 kernel series, using either the
well-tested 2.6.17.13 kernel or the recently released 2.6.18 kernel. Unix
veterans will appreciate the simplicity and stability of Slackware.
Slackware 11.0 comes with everything needed to run a powerful server or
workstation, but new users might be taken aback at the lack of GUI
configuration tools.</p>

<p>The <a href="http://slackware.com/getslack/">list of mirrors</a> will
help you get your Slack on.</p>


<h3><img src="../gx/bolt.gif" alt="thunderbolt" />Linux Mint combines Ubuntu and Mulitmedia</h3>

<p>Linux Mint is a distro that attempts to overcome the lack of Proprietary
Multimedia codecs and plug-in's in Ubuntu. The Ireland based Linux Mint
team released version 2.0, based on Ubuntu 6.10 "Edgy Eft". It uses the
Ubuntu installer, and comes standard with Flash 9, Java and Real Player
10.</p>

<p>MP3, Windows media and other codecs, along with DVD support is also
enabled. The rest of it is mostly Ubuntu, so all the usual bits and pieces
are present.</p>

<p>Download <a href="http://linuxmint.com/download.html">here.</a></p>


<h3><img src="../gx/bolt.gif" alt="thunderbolt" />Xandros 4 for Thanksgiving</h3>

<p>Xandros Inc. will be giving business Linux users yet another reason to
give thanks: Xandros Desktop Professional version 4.0 is slated for release
the day after Thanksgiving.</p>

<p>The new version of Xandros is designed to work well in both Linux- and
Windows-based office networks. It comes ready for use on NT domain, AD
(Active Directory), and Linux/Unix NIS (Network Information Service)-based
LANs.</p>

<p>The Xandros team has taken great care to provide seamless integration
into existing Windows-centric networks by supporting group policy profiles,
logon scripts and domain and AD authentication. Read/write support for NTFS
is standard.</p>

<p>The Xandros UI is customized to look a great deal like Windows XP, and
includes Crossover Office that allows you to run selected Windows
applications on Linux. Don't expect every application to work, but
Microsoft Office is reasonably well supported.</p>

<p>All this comes at a price, however. Pricing information has not released
yet, but is expected to be similar to the last version, at $129 for a
single license.</p>

<p>Get the latest information at <a href="http://www.xandros.com">http://www.xandros.com</a></p>

<h3><img src="../gx/bolt.gif" alt="thunderbolt" />Mark Shuttleworth attempts to lure OpenSUSE developers</h3>

<p>Just a few weeks after the Novell-Microsoft deal, Ubuntu head honcho
Mark Shuttleworth sent an <a
href="http://lists.opensuse.org/opensuse/2006-11/msg03765.html">email</a>
out to the OpenSUSE Mailing list, in which he speaks of the wickedness of
Novell, and pitches Ubuntu's way of development. "If you have an interest
in being part of a vibrant community that cares about keeping free software
widely available and protecting the rights of people to get it free of
charge, free to modify, free of murky encumbrances and 'undisclosed balance
sheet liabilities', then please do join us."</p>

<p>Reaction to this has not been very positive, so far, with people on both
sides of the fence claiming that Mark should not have been quite so eager.
However, as of this writing, there has been no official comment from either
Novell or Ubuntu.</p>



<a name="commercial"></a>
<h2>Software and Product News</h2>

<h3><img src="../gx/bolt.gif" alt="thunderbolt" />Sony Playstation 3 Launches, and Linux is quickly installed on it</h3>

<p>November saw the launch of Sony's next-generation console. There were
the usual reports  of long lines, of crazy prices on Ebay, and the
not-so-usual reports of <a
href="http://www.cnn.com/2006/US/11/17/playstation.ap/index.html">people
getting shot for it</a>! Linux fans will be more interested to learn that
Sony Computer Entertainment (SCE) actively encourages installation of Linux
on their new baby.</p>

<p>The necessary files can be downloaded from the <a
href="http://www.playstation.com/ps3-openplatform/index.html">Open
Platform</a> website. You will need to follow instructions, but Fedora Core
6 is fairly easy to install, and supports most of the PS3's hardware. A few
tutorials are <a
href="http://ps3.qj.net/PS3-Linux-The-void-has-been-filled-Full-install-instructions-for-Fedora-Core-5-/pg/49/aid/73144">available</a>.
Linux enthusiast's have already managed to get <a
href="http://ps3.qj.net/Quake-3-Arena-on-PS3-via-Fedora-/pg/49/aid/73945">Quake
3 running on PS3</a>. If you are one of the lucky few who managed to get
their mitts on a PS3, and you are reading this, you know what you want to
do.</p>

<p>Tech specs for the PS3 include the much talked about Cell Processor
which has eight identical Synergistic Processor Elements running at 3.2 Ghz
each, seven of which are actually used. The graphics are handled by
Nvidia's RSX (Reality Synthesizer). This is based on the G70 Architecture,
the same as used in the 7800 series GPU. 256 MB of on-GPU memory and 256 MB
of system memory round off the system.</p>

<h3><img src="../gx/bolt.gif" alt="thunderbolt" />SMART Releases Updated Linux Client</h3>

<p>
On October 30th <a href="http://www.smarttech.com">SMART Technologies
Inc.</a> announced v9.5 of their <a
href="http://www2.smarttech.com/st/en-us/products/">SMART Board(tm)</a> client
for the Linux operating system. Building on v9.5 of their Mac and Windows
clients, this release will allow for simultaneous development for all three
platforms.The initial release will be targeted at Fedora Core 3, Red Hat
Enterprise 4, and SUSE 10, all of which use the RPM package management system.
The client supports multiple-languages and can be used with SMART's
Sympodium(r) interactive pen displays and AirLiner(tm) wireless slates. The
client is <a href="http://www.smarttech.com/support/software">downloadable</a>
free of charge to all current owners of a SMART Board(tm) and the Linux client
will be shipped with all future SMART Boards(tm). 
</p>

<p>
The full press release can be read online: <a
href="http://www2.smarttech.com/st/en-US/About+Us/News+Room/Media+Releases/default.htm?guid={86163DD8-0520-4BF3-87BF-977591BEE00E}">http://www2.smarttech.com/st/en-US/About+Us/News+Room/Media+Releases/default.htm?guid={86163DD8-0520-4BF3-87BF-977591BEE00E}</a>.
</p>

<h3><img src="../gx/bolt.gif" alt="thunderbolt" />First Integrated Open Source Mobile Platform Launched</h3>

<p>
On November 7th <a href="http://www.openmoko.com">OpenMoko</a> announced their
release of the first fully integrated open source mobile communications
platform in parternship with <a href="http://www.fic.com.tw">First
International Computer</a> (FIC). FIC simultaneously announced that their
Neo1973 smart phone will utilize the entire platform. Basing their platform on
<a href="http://www.openembedded.com">OpenEmbedded</a>, one of the largest
selling points is the ease of adding and removing software through "OpenMoko
Certified" and third party feeds. This will allow end users to access an
already existing large base of applications.  Meanwhile developers will be made
happy by the ease of writing applications, utilizing the open libraries and
standards.  
</p>

<p>
OpenMoko has partnered with <a href="http://www.funambol.com">Funambol</a>, a
mobile open source software company.  This partnership will allow seamless and
transparent integration between applications and services (push email, PIM
synchronization, corporate servers, etc.). Wireless technology will allow
applications to be added and updated "virtually anywhere." 
</p>

<h3><img src="../gx/bolt.gif" alt="thunderbolt" />Firebird 2.0 Announced</h3>

<p>
On November 12th at the fourth annual <a
href="http://www.firebirdsql.org/">Firebird</a> conference in Prague, version
2.0 was announced. Firebird is a SQL relational database system that has been
developed under various names since 1981. The change log for 2.0 includes a
reworked indexing system, removal of legacy limitations, 64-bit platform
support, further SQL support, and more. Binaries are available on <a
href="http://www.firebirdsql.org/index.php?op=files&id=engine_200">the
project's download page</a> for Win32 and Linux (x86 and 64-bit), including 
source code.
</p>

<p>
The full press release is online at: <a
href="http://www.firebirdsql.org/index.php?op=devel&sub=engine&id=fb20_release">http://www.firebirdsql.org/index.php?op=devel&sub=engine&id=fb20_release</a>.
</p>

<h3><img src="../gx/bolt.gif" alt="thunderbolt" />Digital Filing Cabinet Now
Available</h3>

<p>
On November 14th ArchivistaBox 2006/X1, "the first digital filing cabinet", was
released. Available as embedded or cluster software, the package is a document
management system and archiving utility available on both Linux and Windows. 
Using a web interface, there is no additional software needed to access the 
database. One can attach I/O devices (printers, scanners, etc.) to 
ArchivistaBox, which will automatically add the documents to its database. One
neat feature is the integrated printing system (CUPS), which will automatically
convert and add files from the printer spool to the document database.
</p>

<p>
Demo site (no password): <a
href="http://www.archivista.ch/appenzell">www.archivista.ch/appenzell</a><br>
ArchivistaBox free download: <a
href="http://www.archivista.ch/avbox/archivista_cd1.iso">www.archivista.ch/avbox/archivista_cd1.iso</a><br>
Full press release: <a
href="http://www.archivista.ch/index.pl/archivistabox_2006/xi3">http://www.archivista.ch/index.pl/archivistabox_2006/xi3</a>
</p>

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:133/lg_bytes.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/authors/nag.jpg" class="bio">
</p>

<em>
<p>
Aditya was bored one day in 1997 and decided to take a look at this
 "linux thing". After installing Red Hat 5, and looking at the blinking
 cursor, he promptly removed it and went back to Windows. And then
 reinstalled a few days later, determined to figure it out. So far, he's
 figured some stuff out, but he's still trying, and he's still having
 fun.
</p>



</em>

<br clear="all">


	<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/authors/bisbee.jpg" class="bio">
</p>

<em>
<p>
Samuel Kotel Bisbee-vonKaufmann was born ('87) and raised in the Boston, MA
area. His interest in all things electronics was established early as his
father was an electrician. Teaching himself HTML and web design at the age
of 10, Sam has spiraled deeper into the confusion that is computer science
and the FOSS community, running his first distro, Red Hat, when he was
approximately 13 years old. Entering boarding high school in 2002,
Northfield Mount Hermon, he found his way into the school's computer club,
GEECS for Electronics, Engineering, Computers, and Science (a recursive
acronym), which would allow him to share in and teach the Linux experience
to future generations. Also during high school Sam was abducted into the
Open and Free Technology Community (<a
href="http://www.oftc.org">http://www.oftc.org</a>), had his first article
published, and became more involved in various communities and projects.
</p>

<p>
Sam is currently pursuing a degree in Computer Science at Boston University and
continues to be involved in the FOSS community. Other hobbies include martial
arts, writing, buildering, working, chess, and crossword puzzles.  Then there
is something about Linux, algorithms, programing, etc., but who makes money
doing that?
</p>

<p>
Sam prefers programming in C++ and Bash, is fluent in Java and PHP, and while
he can work in Perl, he hates it. If you would like to know more then feel free
to ask.
</p>

</em>

<br clear="all">


<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/nag.html">Aditya Nag</A> and <A HREF="../authors/bisbee.html">Samuel Kotel Bisbee-vonKaufmann</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 133 of Linux Gazette, December 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="cherian"></a>
<h1>Easy Shell Scripting</h1>
<p id="by"><b>By <A HREF="../authors/cherian.html">Blessen Cherian</A></b></p>


</b>
</p>


<p>

<h3>Introduction</h3>

<p>
Shell scripting can be defined as a group of commands executed in sequence.
Let's start by describing the steps needed to write and execute a shell script:
</p>

<p>
<em><strong>Step 1:</strong> Open the file using an editor (e.g., "vi" or "pico".)</em>
</p>

<pre>
vi Firstshellscript.sh
</pre>

<p>
<em><strong>Step 2:</strong> All shell scripts should begin with
"#!/bin/bash" or whatever other shell you prefer. This line is called the
shebang, and although it looks like a comment, it's not: it notifies the
shell of the interpreter to be used for the script. The provided path must
be an absolute one (you can't just use "bash", for example), and the
shebang must be located on the first line of the script without any
preceding space.</em>
</p>

<p>
<em><strong>Step 3:</strong> Write the code that you want to develop.  Our
first shell script will be the usual "Hello World" routine, which we'll
place in a file called 'Firstshellscript.sh'.</em> </p>

<pre>
#!/bin/sh
echo "Hello World"
</pre>

<p>
<em><strong>Step 4:</strong>The next step is to make the script
executable by using the "chmod" command.</em> </p> 

<pre>
chmod 744 Firstshellscript.sh
</pre>

<p>
or
</p>

<pre>
chmod +x Firstshellscript.sh
</pre>

<p>
<em><strong>Step 5:</strong> Execute the script. This can be done by
entering the name of the script on the command line, preceded by its path.
If it's in the current directory, this is very simple:</em>
</p>

<pre>
bash$ ./Firstshellscript.sh
Hello World
</pre>

<p>
If you want to see the execution step-by-step - which is very useful for
troubleshooting - then execute it with the '-x' ('expand arguments') option:
</p>

<pre>
sh -x Firstshellscript.sh
+ echo 'Hello World'
Hello World
</pre>


<div class="pullquotes">
<a name="pullquote_133_cherian_1"></a>
<table summary="" border="2">
<tr>
<td align="left" bgcolor="#d3aa53">
<sup>Category: Shell scripting</sup>
<br />
<strong>
Shell scripting can be defined as a group of commands executed in sequence.
</strong>
</td>
</tr>
</table>
</div>

<p>
To see the contents of a script, you can use the 'cat' command or
simply open the script in any text editor:</p>

<pre>
bash$ cat Firstshellscript.sh
#!/bin/sh
echo Hello World
</pre>

<h3>Comments in a Shell</h3>

<p>
In shell scripting, all lines beginning with # are comments.
</p>
<pre>
# This is a comment line.
# This is another comment line.
</pre>

<p> You can also have comments that span multiple lines by using a colon
and single quotes:</p>

<pre>
: 'This is a comment line.

Again, this is a comment line.

My God, this is yet another comment line.'
</pre>

<p>
Note: This will not work if there is a single quote mark within
the quoted contents.</p>

<h3>Variables</h3>

<p> As you may or may not know, variables are the most significant part of
any programming language, be it Perl, C, or shell scripting. In the shell,
variables are classified as either system variables or user-defined
variables.</p>

<h4>System Variables</h4>

<p>
System variables are defined and kept in the environment of the <em>parent
shell</em> (the shell from which your script is launched.)  They are also
called environment variables. These variable names consist of capital
letters, and can be seen by executing the 'set' command. Examples of system
variables are PWD, HOME, USER, etc. The values of these system variables can
be displayed individually by "echo"ing the system variables. E.g.,
<code>echo $HOME</code> will display the value stored in the system variable
HOME.</p>

<p>
When setting a system variable, be sure to use the "export" command to make
it available to the <em>child shells</em> (any shells that are spawned from
the current one, including scripts):
</p>

<pre>
bash$ SCRIPT_PATH=/home/blessen/shellscript
bash$ export SCRIPT_PATH
</pre>

<p>
Modern shells also allow doing all this in one pass:
</p>

<pre>
bash$ export SCRIPT_PATH=/home/blessen/shellscript
</pre>


<h4>User-Defined Variables</h4>

<p> These are the variables that are normally used in scripting - ones that
you don't want or need to make available to other programs. Their names
cannot start with numbers, and are written using lower case letters and
underscores by convention - e.g. 'define_tempval'.</p>

<p> When we assign a value to a variable, we write the variable name
followed by '=' which is immediately followed by the value, e.g.,
<code>define_tempval=blessen</code> (note that there must not be any spaces
around the equals sign.) Now, to use or display the value in
<code>define_tempval</code>, we have to use the <code>echo</code> command
and precede the variable name with a '$' sign,
i.e.: </p>

<pre>
bash$ echo $define_tempval 
blessen
</pre>

<p>
The following script sets a variable named "username"
and displays its content when executed.</p>

<pre class="code">
#!/bin/sh

username=blessen
echo "The username is $username"
</pre>

<h4>Commandline Arguments</h4>

<p> These are variables that contain the arguments to a script when it is
run. These variables are accessed using $1, $2, ... $n, where $1 is the first
command-line argument, $2 the second, etc. Arguments are delimited by spaces. $0
is the name of the script. The variable $# will display the number of
command-line arguments supplied; this number is limited to 9 arguments in
the older shells, and is practically unlimited in the modern ones.</p>

<p>
Consider a script that will take two command-line arguments and display
them. We'll call it 'commandline.sh':
</p>

<pre class="code">
#!/bin/sh

echo "The first variable is $1"
echo "The second variable is $2"
</pre>

<p>
When I execute 'commandline.sh' with command-line arguments like "blessen" 
and "lijoe", the output looks like this:
</p>

<pre>
bash$ ./commandline.sh blessen lijoe
The first variable is blessen
The second variable is lijoe
</pre>

<h4>Exit status variable</h4>

<p> This variable tells us if the last command executed was successful or
not.  It is represented by $?.  A value of 0 means that the command was
successful.  Any other number means that the command was unsuccessful
(although a few programs such as 'mail' use a non-zero return to indicate
status rather than failure.) Thus, it is very useful in scripting.</p>

<p> To test this, create a file named "test", by running <code>touch test</code> .
Then, "display" the content of the file:</p>

<pre>
bash$ cat test
</pre>

<p>
Then, check the value of $?.
</p>

<pre>
bash$ echo $?
0
</pre>

<p>
The value is zero because the command was successful. Now try running 'cat'
on a file that isn't there:</p>

<pre>
bash$ cat xyz1
bash$ echo $?
1
</pre>

<p>
The value 1 shows that the above command was unsuccessful.
</p>


<h4>Scope of a Variable</h4>

<p> I am sure most programmers have learned (and probably worked with)
variables and the concept of <code>scope</code> (that is, a definition of
where a variable has meaning.) In shell programming, we also use the scope
of a variable for various programming tasks - although this is very rarely
necessary, it can be a useful tool. In the shell, there are two types of
scope: global and local. Local variables are defined by using a "local" tag
preceding the variable name when it is defined; all other variables, except
for those associated with function arguments, are global, and thus
accessible from anywhere within the script.  The script below demonstrates
the differing scopes of a local variable and a global one:</p>

<pre class="code">
#!/bin/sh

display()
{
    local local_var=100
    global_var=blessen
    echo "local variable is $local_var"
    echo "global variable is $global_var"
}

echo "======================"
display
echo "=======outside ========"
echo "local variable outside function is $local_var"
echo "global variable outside function is $global_var"
</pre>

<p> Running the above produces the following output: </p>

<pre>
======================
local variable is 100
global variable is blessen
=======outside ========
local variable outside function is 
global variable outside function is blessen
</pre>

<p> Note the absence of any value for the local variable outside the
function. </p>


<h3>Input and Output in Shell Scripting</h3>

<p> For accepting input from the keyboard, we use <code>read</code>. This command
will read values typed from the keyboard, and assign each to the variable
specified for it.</p>

<pre>
read &lt;variable_name&gt;
</pre>

<p>
For output, we use the <code>echo</code> command.
</p>

<pre>
echo "statement to be displayed"
</pre>


<h3>Arithmetic Operations in Shell Scripting</h3>

<p> Like other scripting languages, shell scripting also allows us to use
arithmetic operations such as addition, subtraction, multiplication, and
division. To use these, one uses a function called <code>expr</code>; e.g.,
"expr a + b" means 'add a and b'.  </p>

<p>
e.g.: 
</p>

<pre>
sum=`expr 12 + 20`
</pre>

<p>
Similar syntax can be used for subtraction, division, and
multiplication. There is another way to handle arithmetic operations;
enclose the variables and the equation inside a square-bracket expression starting
with a "$" sign. The syntax is</p>

<pre>
$[expression operation statement]
</pre>

<p>
e.g.: 
</p>

<pre>
echo $[12 + 10]
</pre>

<p class="editorial">[ Note that this syntax is not universal; e.g., it
will fail in the Korn shell. The '$((...))' syntax is more shell-agnostic;
better yet, on the general principle of "let the shell do what it does best
and leave the rest to the standard toolkit", use a calculator program such
as 'bc' or 'dc' and command substitution. Also, note that shell arithmetic
is integer-only, while the above two methods have no such problem. -- Ben ]
</p>

<h3>Conditional Statements</h3>

<p>
Let's have some fun with a conditional statement like "if condition".
Most of the time, we shell programmers have situations where we have to
compare two variables, and then execute certain statements depending on
the truth or falsity of the condition. So, in such cases, we
have to use an "if" statement.  The syntax is show below:</p>

<pre>
if [ conditional statement ]
then
	... Any commands/statements ...
fi
</pre>

<p>
The script cited below will prompt for a username, and if
the user name is "blessen", will display a message showing that I
have successfully logged in. Otherwise it will display
the message "wrong username".</p>

<pre class="code">
#!/bin/sh

echo "Enter your username:"
read username

if [ "$username" = "blessen" ]
then
	echo 'Success!!! You are now logged in.'
else
	echo 'Sorry, wrong username.'
fi
</pre>

<p> Remember to always enclose the variable being tested in double quotes;
not doing so will cause your script to fail due to incorrect syntax when
the variable is empty. Also, the square brackets (which are an alias for
the 'test' command) must have a space following the opening bracket and
preceding the closing one.</p>


<h3>Variable Comparison</h3>

<p>
In shell scripting we can perform variable comparison.
If the values of variables to be compared are numerical, then you have
to use these options:</p>

<p>
-eq Equal to<br />
-ne Not Equal to<br />
-lt Less than<br />
-le Less than or equal to<br />
-gt Greater than<br />
-ge Greater then or equal to<br />
</p>

<p>
If they are strings, then you have to
use these options:</p>

<p>
= Equal to<br />
!= Not Equal to<br />
&lt; First string sorts before second<br />
&gt; First string sorts after second<br />
</p> 

<h3>Loops</h3>

<h4>The "for" Loop</h4>

<p>
The most commonly used loop is the "for" loop. In shell scripting,
there are two types: one that is similar to C's "for"
loop, and an iterator (list processing) loop.</p>

<p>
Syntax for the first type of "for" loop (again, this type is only available
in modern shells):
</p> 

<pre>
for ((initialization; condition; increment/decrement))
do
	...statements...
done
</pre>

<p>
Example:
</p>

<pre class="code">
#!/bin/sh

for (( i=1; $i &lt;= 10; i++ ))
do
	echo $i
done
</pre>

<p> This will produce a list of numbers from 1 to 10. The syntax for the
second, more widely-available, type of "for" loop is:
</p> 

<pre>
for &lt;variable&gt; in &lt;list&gt;
do
	...statements...
done
</pre>

<p>
This script will read the contents of '/etc/group'
and display each line, one at a time:</p>

<pre class="code">
#!/bin/sh

count=0
for i in `cat /etc/group`
do
	count=`expr "$count" + 1`
	echo "Line $count is being displayed"
	echo $i
done

echo "End of file"
</pre>

<p>
Another example of the "for" loop uses "seq" to
generate a sequence:</p>

<pre class="code">
#!/bin/sh

for i in `seq 1 5`
do
	echo $i
done
</pre>

<h3>While Loop</h3>

<p> The "while" loop is another useful loop used in all programming
languages; it will continue to execute until the condition specified
becomes false.  </p>

<pre>
while [ condition ]
do
	...statement...
done
</pre>

<p> The following script assigns the value "1" to the variable <code>num</code> and
adds one to the value of <code>num</code> each time it goes around the loop, as
long as the value of <code>num</code> is less than 5.</p>


<pre class="code">
#!/bin/sh

num=1

while [$num -lt 5]; do num=$[$num + 1]; echo $num; done
</pre>

<div class="pullquotes">
<a name="pullquote_133_cherian_2"></a>
<table summary="" border="2">
<tr>
<td align="left" bgcolor="#e5942c">
<sup>Category: Programming</sup>
<br />
<strong>
[Break] code into small chunks called functions, and call them by name in
the main program. This approach helps in debugging, code re-usability, etc.
</strong>
</td>
</tr>
</table>
</div>

<h3>Select and Case Statement</h3>

<p>
Similar to the "switch/case" construct in C programming, the combination of
"select" and "case" provides shell programmers with the same features.
The "select" statement is not part of the "case" statement, but
I've put the two of them together to illustrate how both can be used
in programming.</p>

<p>
Syntax of select:
</p>

<pre>
select &lt;variable&gt; in &lt;list&gt;
do
	...statements...
done
</pre>

<p>
Syntax of case:
</p>

<pre>
case $&lt;variable&gt; in
	&lt;option1&gt;) statements ;;
	&lt;option2&gt;) statements ;;
	*) echo "Sorry, wrong option" ;;
esac
</pre>

<p>
The example below will explain the usage of select and case together,
and display options involving a machine's services needing to be restarted.
When the user selects a particular option, the script starts the
corresponding service.</p>

<pre class="code">
#!/bin/bash

echo "***********************"
select opt in apache named sendmail
	do
	case $opt in
		apache) 	/etc/rc.d/init.d/httpd restart;;
		named) 		/etc/rc.d/init.d/named restart;;
		sendmail)	/etc/rc.d/init.d/sendmail restart;;
		*) 			echo "Nothing will be restarted"
	esac
	echo "***********************"

	# If this break is not here, then we won't get a shell prompt.
	break

done
</pre>

<p class="editorial">[ Rather than using an explicit 'break' statement -
which is not useful if you want to execute more than one of the presented
options - it is much better to include 'Quit' as the last option in the
select list, along with a matching case statement. -- Ben ]
</p>

<h3>Functions</h3>

<p>
In the modern world where all programmers use the OOP model for
programming, even we shell programmers aren't far behind. We too can break
our code into small chunks called functions, and call them by name in
the main program. This approach helps in debugging, code re-usability,
etc.</p>

<p>
Syntax for "function" is:
</p>

<pre>
&lt;name of function&gt; ()
{	# start of function
	statements
} 	# end of function
</pre>

<p> Functions are invoked by citing their names in the main program,
optionally followed by arguments. For example: </p>


<pre class="code">
#!/bin/sh

sumcalc ()
{
	sum=$[$1 + $2]
}

echo "Enter the first number:"
read num1
echo "Enter the second number:"
read num2

sumcalc $num1 $num2

echo "Output from function sumcalc: $sum"
</pre>

<h3>Debugging Shell Scripts</h3>

<p> Now and then, we need to debug our programs.  To do so, we use the '-x'
and '-v' options of the shell. The '-v' option produces verbose output. The
'-x' option will expand each simple command, "for" command, "case" command,
"select" command, or arithmetic "for" command, displaying the expanded
value of PS4, followed by the command and its expanded arguments or
associated word list. Try them in that order - they can be very helpful
when you can't figure out the location of a problem in your script.</p>



</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:133/cherian.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<hr>
<p>
<img align="left" alt="Bio picture" src="../gx/authors/cherian.jpg" class="bio">

<em>

<p> My name is Blessen and I prefer people calling me Bless. I got
interested in Linux when I joined the software firm, <a
href="http://poornam.com">Poornam Info Vision Pvt Ltd</a> also known as <a
href="http://bobcares.com">Bobcares</a>. They gave me exposure to linux.

<p> I am a B.Tech in Computer Science from the College of Engineering,
Chengannur. I passed out in the year 2001 and got into the company that
year. During my work, I was passionate with Linux security and I look
forward to grow in that field.

<p> My hobbies are browsing net, learning new technologies and helping
others. In my free time I also develop open source softwares and one of
them is a scaled down version of formmail. The project is called "Smart
Mail" which is more secure than formmail.

</em>
<br clear="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/cherian.html">Blessen Cherian</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 133 of Linux Gazette, December 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="howell"></a>
<h1>Installing Knoppix</h1>
<p id="by"><b>By <A HREF="../authors/howell.html">Edgar Howell</A></b></p>


</b>
</p>


<p>
<h3>
Polemic
</h3>

<p>
Given the fact that I started this article quite some time ago,
at this writing -- early November 2006 -- events of the last week or
so might make it appear I had uncanny knowledge of the future.
(If you believe that, go to W@hotmail.info and give me your credit card
number and I will tell you what horse to bet on next Saturday.)
</p>

<p>
Well, I was <strong>extremely</strong> unhappy when Novell took over SuSE,
but decided to take a wait-and-see attitude.
Novell, in my assessment, back in the heyday of Netware was as arrogant and
expensive as Microsoft.
Hmmm... maybe it's not surprising that they're sharing a bed these days.
</p>

<p>
Then there is the behavior of -- as someone here put it --
"Oracle's Chief Eccentric".
If people are stupid enough to fall for his ploy, that could
be the demise of Red Hat.
</p>

<p>
Admittedly an extremely pessimistic outlook
(but pessimists aren't disapointed as much as optimists),
what is plan B if the major GNU/Linux distributions on their
respective sides of the Atlantic effectively go belly up?
</p>


<h3>
Installing Knoppix on an 8-Year-Old Notebook
</h3>

<p>
Recently for some reason I thought about trying to get some more use
out of an ancient notebook.
Almost 8 years old, it had served me well for many years,
has crossed the Atlantic with me on numerous occasions.
Still, with only 64 MB of memory and 4 GB of hard drive and a slow CPU
-- in this day and age, anyhow: AMD-K6 475 --
it hasn't seen much use of late.
</p>

<p>
On the other hand, Knoppix has been really impressive the last couple of years,
including excellent hardware-recognition.
Ought to be a snap to install it, particularly on something this old.
</p>

<p>
Well, maybe not.
Notebooks, proprietary as they are,
can be very difficult to install software on.
This one gave me considerable grief early on with SuSE
because there was a problem with PCMCIA on initial boot after installation.
</p>

<p>
Lest anyone think what is described in the following
worked like this off the starting blocks - this was my 3rd attempt.
For me, it's <strong>always</strong> the 3rd attempt that works:
the first time, I learn what is going on;
the second time, I figure out what really makes sense;
and the third time is pretty much what I really wanted in the first place.
</p>

<h3>Preparations for Installation</h3>

<div class="pullquotes">
<a name="pullquote_133_howell_1"></a>
<table border="2">
<tr>
<td align="left" bgcolor="#3acf3a">
<sup>Category: Security</sup>
<br />
<strong>
Blindfolded by people who (maybe) think they are helping to make passwords secure, I am normally forced to use very weak passwords to ensure the ability to enter them correctly again. Believe me, if you can touch-type, you can re-enter the same sequence twice and not know what it was!
</strong>
</td>
</tr>
</table>
</div>

<p>
Since this machine had been in use at one time,
the partitioning was irrelevant and so it was time to re-partition.
And because it has far too little memory for current software,
I gave it a swap partition of 256 MB.
The remainder of the 4 GB was available for Knoppix.
All this, of course, happened after a successful boot from the Knoppix 5.0 CD.
</p>

<p>
By the way, if the combination of main memory and
disk storage is not adequate,
Knoppix complains at length, sounding as if booting will fail.
Same thing booting from the CD with the parameter NOSWAP.
</p>

<p>
But Knoppix boots fine -- it just doesn't boot into KDE.
It announces TWM, which reminds me of FVWM (I think)
-- as in "focus follows cursor" --
and I don't know when last I saw <strong>that</strong>!
Perfectly usable, if you are comfortable with the command line.
</p>

<p>
Also, don't just allocate a partition for swap and expect it to be used.
It must have partition ID 82 and, equally important,
must have been initialized by something like: /sbin/mkswap /dev/hda1.
</p>

<h3>Installation</h3>

<p>
After that, installation was pretty much a piece of cake,
other than a couple of problems discussed below.
First, boot Knoppix from CD or DVD and start the installation process with
"sudo knoppix-installer".
All the pretty pictures aren't really justified, but
just to make clear how straight-forward the process is, here they are:
</p>
<img src="misc/howell/inst_00.jpg" />

<p>
After the introductory screen we select 'Install'
since we haven't yet had Knoppix on this machine.
</p>
<img src="misc/howell/inst_01.jpg" />

<p>
But before starting the installation, there might be a decision or two needed:
</p>
<img src="misc/howell/inst_02.jpg" />

<p>
Initially I had tried to choose 'Knoppix' since I knew it from CD - but ran into problems.
Debian worked fine, despite being the so-called "unstable" version.
</p>
<img src="misc/howell/inst_03.jpg" />

<p>
Other than the swap partition there wasn't much choice.
</p>
<img src="misc/howell/inst_04.jpg" />

<p>
I really wanted ext2 but that not being an option
we (temporarily) live with ext3.
</p>
<img src="misc/howell/inst_05.jpg" />

<p>
Your full name is, of course, up to you.
</p>
<img src="misc/howell/inst_06.jpg" />

<p>
As is, ahh, your user name...
</p>
<img src="misc/howell/inst_07.jpg" />

<p>
...and password.
</p>

<p>
Note the option <strong>not</strong> to hide the password as you enter it.
In my book that is a sign of professionalism.
This is quality software.
Leave it up to me to decide whether it is safe to show what I am typing.
No one can know in advance whether I am in a place
where it is safe for me to look at the password as I enter it.
Blindfolded by people who (maybe) think they are helping to make passwords
secure, I am normally forced to use very weak passwords
to ensure the ability to enter them correctly again.
Believe me, if you can touch-type, you can re-enter the same sequence twice
and not know what it was!
</p>
<img src="misc/howell/inst_08.jpg" />

<p>
Now, we choose the root password...
</p>
<img src="misc/howell/inst_09.jpg" />

<p>
...and the host name.
</p>
<img src="misc/howell/inst_10.jpg" />

<p>
No need to worry about whether to tromp on the MBR - we're overwriting the
entire thing, Master Boot Record included.
</p>
<img src="misc/howell/inst_11.jpg" />

<p>
OK - we have now reached the critical point! Take a deep breath, and start the installation.
</p>
<img src="misc/howell/inst_12.jpg" />

<p>
Yes, do save the configuration (otherwise, Knoppix bails out.)
</p>
<img src="misc/howell/inst_13.jpg" />

<p>
Here is one last chance to review things.
</p>
<img src="misc/howell/inst_14.jpg" />

<p>
And now a couple of informative windows to which no response was needed
(I did reject creation of a boot floppy at one point).
</p>
<img src="misc/howell/inst_15.jpg" />
<br>
<img src="misc/howell/inst_16.jpg" />
<br>
<img src="misc/howell/inst_17.jpg" />

<p>
There were many more such informative windows
but that essentially was the entire installation.
Pretty tame, right?
</p>

<h3>Problems</h3>

<p>
By today's standards this machine with 64 MB is so short of memory
that almost no current OS could run on it.
Even Knoppix can't, without help.
Giving it a large (factor of 4) swap partition
makes it possible for the system to install and function.
But this has consequences that make doing it a judgement call:
slow may be better than dead in the water, but how useful is it?
</p>

<p>
For example, OpenOffice is barely marginally useful.
I used it to start this article because it gave me an HTML framework.
Unlikely that I could have used it beyond that because of the "swapping" --
from hard drive to memory, which isn't there -- and thus to swap,
which is on the hard drive...
</p>

<p>
And I wasn't particularly happy with the file system options.  At least on
this old hardware, which is never going to be run as a multi-user system,
there is absolutely no need for journaling (besides, ":!sync" is powerful
enough for me).  So I turned it off.  That, however, required adjusting the
entry in /etc/fstab as well.
</p>

<pre>
root@1[knoppix]# tune2fs -o ^has_journal /dev/hda2
tune2fs 1.39-wip (09-apr-2006)
root@1[knoppix]# mount /dev/hda2 /mnt
root@1[knoppix]# vi /mnt/etc/fstab
root@1[knoppix]# head /mnt/etc/fstab
# /etc/fstab: filesystem table.
#
# filesystem  mountpoint  type  options  dump  pass
#/dev/hda2  /  ext3  defaults,errors=remount-ro  0  1
/dev/hda2  /  ext2  defaults,errors=remount-ro  0  1         <strong>&lt;&lt;=== here</strong> 

proc  /proc  proc  defaults  0  0
/dev/fd0  /floppy  vfat  defaults,user,noauto,showexec,umask=022  0  0
usbfs  /proc/bus/usb  usbfs  devmode=0666  0  0
sysfs  /sys  sysfs  defaults  0  0
root@1[knoppix]# 
</pre>

<p>
On boot, there were problems with lost IRQs. I tried several other boot
parameters but they made no difference. In any case, it didn't matter: the
default boot paragraph in the Grub configuration file is perfectly
functional.
</p>

<p>
Some versions of Linux mount external devices automatically.
This is not the case with Knoppix.
I like to do "tail /etc/fstab" to find out what has just been made available
and then mount whatever it is.
Alternatively, you can just wait for hotplug to open a window asking about it and
let it mount the device.
</p>

<p>
But the entries in /etc/fstab are not always appropriate.
For example, if the entry for /floppy includes vfat,
it may be necessary to mount it as
"mount -t ext2 /dev/fd0 /floppy".
</p>

<p>
I also had considerable trouble with the UID/GID
inserted into /etc/fstab by Knoppix on hotplug.
Since there is no user or group "knoppix",
I had to remove them to be able to mount as other than root:
</p>

<pre>
web@lohgoamd:~$ tail -3 /etc/fstab
/dev/hda1 /media/hda1 auto noauto,users,exec 0 0
# added by knoppix
/dev/sda1 /media/sda1 vfat noauto,users,exec,umask=000,shortname=winnt,uid=knoppix,gid=knoppix 0 0
web@lohgoamd:~$ su
password:
root@lohgoamd:/home/web# vi /etc/fstab
root@lohgoamd:/home/web# exit
web@lohgoamd:~$ tail -3 /etc/fstab
/dev/hda1 /media/hda1 auto noauto,users,exec 0 0
# added by knoppix
/dev/sda1 /media/sda1 vfat noauto,users,exec,umask=000,shortname=winnt 0 0
web@lohgoamd:~$ mount /media/sda1/
web@lohgoamd:~$     
</pre>

<h3>Philosophy</h3>

<div class="pullquotes">
<a name="pullquote_133_howell_2"></a>
<table border="2" bgcolor="#908E92">
<tr>
<td>
<sup>Category: Old hardware</sup>
<br />
<strong>
So what should we do, long-term, with old -- really old -- hardware? With a notebook likely there isn't much that can be done. But perhaps for an old PC it would be possible to obtain appropriate memory chips -- the most important consideration in improving performance -- such that it becomes responsive enough for use with OpenOffice and Co.
</strong>
</td>
</tr>
</table>
</div>

<p>
Linux is supposed to be able to deal well with "old" hardware.
True? I certainly think so.
This test was unfair in the sense that it involved a notebook.
They are notorious for creating problems... proprietary stuff is like that.
</p>

<p>
In booting this now-ancient notebook, Knoppix had far less trouble than my
favorite distribution at the time.  PCMCIA was a significant problem then.
With Knoppix -- ho, hum...  all my notes about "noacpi" and "nopcmcia" as
kernel boot parameters were suddenly irrelevant.
</p>

<p>
But when is this a reasonable thing to do?
I already mentioned that in my estimation, in this environment
OpenOffice is effectively unusable because it's egregiously slow.
Perhaps OK for collecting e-mail?
Learning how to use OpenOffice?
With only a serial interface available, this machine won't be used
to access the Internet anymore.
</p>
<p>
I still haven't decided whether/how to use this newly available resource.
Somehow, it seems inherently unreasonable to expect
up-to-date desktop performance from old hardware,
regardless of how recent the software release may be.
</p>

<p>
Perhaps I should have tried Damn Small Linux -- I didn't.  Knoppix is BIG.
Their 5.0 version on CD belongs in your tool-box but it isn't a server, and
it wants X and KDE. That's a bit too rich for a basic system.
</p>

<p>
So, what should we do, long-term, with old -- really old -- hardware?
With a notebook likely there isn't much that can be done.
But perhaps for an old PC it would be possible to obtain appropriate
memory chips -- the most important consideration in improving performance
-- such that it becomes responsive enough for use with OpenOffice and Co.
</p>

<p>
Nonetheless, I had no trouble using it -- appropriately -- to write this article.
As so often in life, a matter of picking and choosing one's tools
(in this case Opera and Firefox and vi) and how one uses them.
</p>



<h3>
Installing Knoppix in a Partition on a PC
</h3>

<p>
The procedure in this situation is almost identical,
so I won't bother with screen-shots that are the same.
More important are the preparations beforehand and
what might have to happen afterwards.
</p>

<p>
In this case, Knoppix is not supposed to take over the entire hard drive but
just occupy one partition.
If you don't have a partition available, likely it is best to first
re-partition with familiar tools before starting the installation process.
At least that's what I chose to do.
</p>

<p>
One of the nice things about using Knoppix is that installation
does not take place in an unfamiliar and restricted environment;
it is done through a script that runs after having booted Knoppix.
In other words we have a familiar Linux environment, multiple windows
and virtual terminals, and should the need arise, can do something
that wasn't anticipated without having to cancel the installation
and start over.
</p>

<p>
The installation script shows available partitions and asks you to select
one.  Any partitions that are too small for Knoppix won't be included in
the list, so if you want a particular partition to be used and it isn't
offered, you will have to cancel installation and increase
the size of that partition (very often, that requires re-booting to get the
system to use the new partition table). Unfortunately, Knoppix doesn't tell you
this magic number. The DVD version of Knoppix 5.0.1 required about 11.5 GB.
</p>

<p>
Since this machine already has a couple of installations, it wouldn't be
appropriate to replace the MBR - but that doesn't seem to be an option.
So, let's back it up to a memory stick for later re-installation (thanks to
Kyle Rankin):
</p>

<pre>
sudo dd if=/dev/hda of=/media/sdb1/mbr_pc2 bs=512 count=1
</pre>

<p>
After installation, restore the MBR (with a block size to omit the
partition table) with something like this:
</p>

<pre>
sudo dd if=/media/sdb1/mbr_pc2 of=/dev/hda bs=446 count=1
</pre>

<p>
By the way, having to do it this way isn't necessarily a bug but can be
considered a feature: you don't have to figure out what Grub needs in order
to boot Knoppix. After installation, I copied /boot/grub/menu.lst to
/media/sdb1/knoppix_grub and later copied the relevant sections from it to
the file menu.lst in the partition normally used for booting.
</p>

<p>
Although this worked, it was Debian and I was still interested in having
Knoppix as I know it.  And as it turned out, this wasn't particularly
difficult: when given the option to do so, save the configuration file
somewhere convenient, then make modifications as desired.
<a href="misc/howell/knoppix.conf">Here</a> is what I used.
</p>

<p>
Having done that, you will need to load the configuration
when given the opportunity before starting installation.
</p>
<img src="misc/howell/inst_21.jpg" />

<p>
The screen where you can review the installation options then
reflects these changes.
</p>
<img src="misc/howell/inst_22.jpg" />

<p>
Strangely enough, booting failed with an error message from Grub.
The command "savedefault" was followed by "Error 15: File not found".
I didn't want to change the default anyhow and
just commented out that command.
<a href="misc/howell/menu.lst">Here</a> is what I added to menu.lst.
Since making that change, there have been no problems booting.
</p>

<h3>
Conclusion
</h3>

<p>
By today's standards this PC is getting on in age -- it's almost 3 years
old.  Something newer would definitely boot a bit faster: it takes some 5
minutes from the point in time that Grub is told which partition to boot.
No surprise, considering that Knoppix goes through its usual check of
available hardware.  Maybe Debian would be better?
</p>

<p>
Quite some time ago, I was playing with a system that had an option to
write status information to the swap space when the system was shut down.
This could then be used on boot to speed the process up.  I haven't looked
for this with Knoppix, but it seems like a worthwhile idea.
</p>

<p>
One of the reasons that installation is so easy is that
there are no confusing questions about what software to install.
The downside is that an installation is way over 4 times the size
of what I typically install with SuSE.
Well, today hard drives are huge and cheap.
</p>

<p>
Worth note is that both SuSE and Knoppix start user IDs with 1000 -- I
wonder if that has to do with conformance to LSB?  Well, maybe not: just
checked and Fedora Core 6 uses 500 as did SuSE a couple of releases back.
Heck, I dunno. At least on a SuSE machine making an existing /home
available should be possible (a task for another day.)  The name change of
the first user from whatever to knoppix, I could live with.  Yeah, I know,
that's not useful for a big environment -- but this is a small home office.
</p>

<p>
Before connecting to a network, you ought to consider following
the advice of Klaus Knopper and modify /etc/sudoers.
I did what he suggested and you can see that
<a href="misc/howell/sudoers.txt">here</a>.
</p>

<p>
The use of virtual terminals is different from that of SuSE or Red Hat;
X runs on 5 rather than 7.  Not a problem, but I did have to go looking the
first time I wanted to return to KDE after having used a command line in a
VT.
</p>

<p>
Although Knoppix belongs in everybody's tool box, it may not be your choice
for a desktop environment. However, it is interesting having essentially
the same system (5.0 vs 5.0.1) on both my notebook and my PC.  I am looking
forward to gaining more experience with this configuration once networking
is set up and it is possible to do things like using X11 forwarding to
start OpenOffice on the PC and use it from the notebook.
</p>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:133/howell.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<P>
<img ALIGN="LEFT" ALT="Bio picture" SRC="../gx/2002/note.png" class="bio">
<em>
Edgar is a consultant in the Cologne/Bonn area in Germany.
His day job involves helping a customer with payroll, maintaining
ancient IBM Assembler programs, some occasional COBOL, and
otherwise using QMF, PL/1 and DB/2 under MVS.
<p>
(Note: mail that does not contain "linuxgazette" in the subject will be
rejected.)

</em>
<br CLEAR="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/howell.html">Edgar Howell</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 133 of Linux Gazette, December 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="luana"></a>
<h1>Plotting the spirograph equations with 'gnuplot'</h1>
<p id="by"><b>By <A HREF="../authors/luana.html">V&iacute;ctor Lua&ntilde;a</A></b></p>


</b>
</p>


<p>
<style type="text/css" media="screen, projection">
<!--
   #text { font-size:15px; }
   #luana.dt { margin-top:1em; }
   #sc { font-variant:small-caps; font-style:normal; }
   #address { text-align:center; }
   #abstract {
      padding:15px;
      font-size: 95%;
      }
   #figure {
      text-align:center;
      padding:15px;
      border:2px solid lightgray;
      background-color: lightblue;
      font-size: 95%;
      }
   #eq { text-align:center; }
-->
</style>


  
<div id="text"> <p class="c1" id="address"><a href=
"http://web.uniovi.es/qcg/">Universidad de Oviedo, Departamento de
Qu&iacute;mica F&iacute;sica y Anal&iacute;tica, E-33006-Oviedo, Spain.</a></p>

<p class="editorial">[ The author had specifically requested that we keep
the large font used in his article in order to match the font size of the
equation images; I agreed, since the two would look disproportionate otherwise.
My apologies to anyone whose eyeballs exploded due to the rapid decompression.
<img src="../gx/smile.png" alt=":)"> -- Ben ]</p>

    <p><a href="#gnuplot4"><em id="sc">gnuplot's</em></a> internal
    programming capabilities are used to plot the continuous and
    segmented versions of the spirograph equations. The segmented
    version, in particular, stretches the program model and
    requires the emulation of internal loops and conditional
    sentences. As a final exercise, we will develop an extensible
    mini-language, mixing <em id="sc">gawk</em> and <em id=
    "sc">gnuplot</em> programming, that lets the user combine any
    number of generalized spirographic patterns in a design.</p>

    <p>A <a href="misc/luana/spirograph.pdf">PDF version</a> of
    this article is available for archiving and printing.</p>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <!-- +++++++++++++++++++++++ INTRODUCTION ++++++++++++++++++++++++ -->
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

    <h2><a name="Sec:Introduction" id="Sec:Introduction">I.
    Introduction</a></h2>

    <p>Imagine the movement of a small circle that rolls, without
    slipping, on the inside of a rigid circle. Imagine now that the
    small circle has an arm, rigidly attached, with a plotting pen
    fixed at some point. That is a recipe for drawing the <a href=
    "#mw-hypotrochoid">hypotrochoid</a>, a member of a large family
    of curves including epitrochoids (the moving circle rolls on
    the outside of the fixed one), cycloids (the pen is on the edge
    of the rolling circle), and roulettes (several forms rolling on
    many different types of curves) in general.</p>

    <p>The concept of wheels rolling on wheels can, in fact, be
    generalized to any number of embedded elements. Complex lathe
    engines, known as <em>Guilloch&eacute;</em> machines, have been
    used since the 17th or 18th century for engraving beautiful
    designs onto watches, jewels, and other items of fine
    craftsmanship. Many sources attribute the first use of <a href=
    "#Perez2000">Gilloch&eacute; engravings on a watch</a> to
    Abraham-Louis Breguet in 1786, but the technique was already in
    use on jewelry. Ancient machines are still being used, and can
    be seen at the <a href="#RGM2006">RGM Watch Company
    Web pages</a>. Intricate Guilloch&eacute; patterns are usually
    incorporated on bank notes and official documents to prevent
    forgery. The name "Spirograph" comes, actually, from the trade
    name of a toy invented in 1962 by Denys Fisher, a British
    electronic engineer, and licensed to several toy companies over
    the years.</p>

    <p>Our purpose, however, is not to explore the history or even
    the mathematical aspects of the Spirograph decorations: our
    interest is centered on the techniques needed to use <em id=
    "sc">gnuplot</em> as the drawing engine of the cycloid-related
    curves.</p>

    <p><a href="#Sec:hypotrochoid">Section II</a> presents a simple
    derivation for the hypotrochoid equations and discusses a
    generalization to any number of rolling wheels described by
    <a href="#nw-Farris1996">F. Farris</a>. <a href=
    "#Sec:render">Section III</a> describes the techniques required
    to draw the cycloid-related curves with <em id=
    "sc">gnuplot</em>. From the use of complex arithmetic to the
    simulation of an implicit do loop and the recursive definition
    of user functions, <em id="sc">gnuplot</em> offers a large
    capability for the creation of algorithmic designs. The
    techniques discussed in <a href="#Sec:render">Section III</a>
    are embedded within a simple <em id="sc">gawk</em> filter that
    reads a formal description of a cycloid pattern and uses
    <em id="sc">gnuplot</em> to produce the final plot. The design
    of this filter is the subject of <a href=
    "#Sec:combining">Section IV</a>.</p>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <!-- +++++++++ The hypotrochoid and some related curves ++++++++++ -->
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

    <h2><a name="Sec:hypotrochoid" id="Sec:hypotrochoid">II. The
    hypotrochoid and some related curves</a></h2>

    <p><a href="fig:spiro01">Figure 1</a> shows the formation of a
    hypotrochoid and will help us in determining the parametric
    equations for the curve. Three lengths determine the shape of
    the curve: R, the radius of the fixed circle; r, the radius of
    the moving circle; and p, the distance from the pen to the
    moving circle center. The center of the fixed circle, point O,
    will serve as the origin of the coordinate system. Points O'
    and P designate the current position of the rolling circle
    center and of the pen, respectively.</p>

    <p id="figure"><a name="fig:spiro01" id="fig:spiro01"><img width=388 height=390 src="misc/luana/fig-spiro01.png" alt="Formation of a hypotrochoid curve">
</a><br>
    <b>Figure 1</b> Geometry for the hypotrochoid equations. The
    grayed figure corresponds to R=9, r=2, and p=3.</p>

    <p>The current position for O' is easily described in circular
    coordinates: fixed length <img width=114 height=22 src="misc/luana/eqs-008.png" alt="length(OO') = (R-r)">
 and variable
    angle <img width=11 height=12 src="misc/luana/eqs-009.png" alt="\varphi">
. This is easily translated into Cartesian
    coordinates:</p>

    <p id="eq"><a name="eqn-01" id="eqn-01"><img width=364 height=19 src="misc/luana/eqn-01.png" alt="x_{OO'} = (R-r) \cos\varphi, y_{OO'} = (R-r) \sin\varphi."
>
</a></p>

    <p>Similarly, the position of the pen relative to O' is also
    simple to describe in circular coordinates: fixed length
    <img width=64 height=19 src="misc/luana/eqs-010.png" alt="length(O'P) = p">
 and variable angle <img width=103 height=17 src="misc/luana/eqs-011.png" alt="2\pi-\beta = -\beta"
>
. In Cartesian coordinates:</p>

    <p id="eq"><a name="eqn-02" id="eqn-02"><img width=275 height=17 src="misc/luana/eqn-02.png" alt="x_{O'P} = p \cos\beta, y_{O'P} = -p \sin\beta."
>
</a></p>

    <p>The angles <img width=11 height=12 src="misc/luana/eqs-009.png" alt="\varphi">
 and <img width=11 height=17 src="misc/luana/eqs-012.png"
    alt="\beta">
 are not independent,
    however. The circles roll without slipping. Hence, the arc
    <img width=74 height=24 src="misc/luana/eqs-013.png" alt="arc(QS) = R\varphi">
 on the fixed circle must be identical
    to the arc <img width=114 height=25 src="misc/luana/eqs-014.png" alt="arc(TS) = r(\varphi+\beta)">
 on the
    rolling circle. The relationship <img width=123 height=19 src="misc/luana/eqs-015.png" alt="\beta = (R-r) \varphi / r">
 follows immediately. This equation is easy
    to interpret in terms of a gearing mechanism. The fixed and
    rolling wheels must have teeth of equal size to be able to
    engage together. Therefore, the number of teeth must be
    proportional to the wheel perimeter and, equivalently, to the
    wheel radius.</p>

    <p>Putting all this together, the current position of the pen
    relative to the fixed center O is given by <img width=170 height=18 src="misc/luana/eqs-016.png" alt="\vec{r} = \vec{r}_{OP} = \vec{r}_{OO'} + \vec{r}_{O'P}">
, or, equivalently:</p>

    <p id="eq"><a name="eqn-03" id="eqn-03"><img width=655 height=55 src="misc/luana/eqn-03.png" alt="x(\varphi) = (R-r) \cos\varphi + p \cos((R-r)\varphi/r), y(\varphi) = (R-r) \sin\varphi - p \sin((R-r)\varphi/r).">
</a></p>

    <p>The equations admit r and p being either positive or
    negative. A negative r would represent a moving wheel rolling
    on the outside, rather than the inside, of the fixed
    circumference. I.e., it will be a epitrochoid curve. Choosing p=r
    with r positive or negative will produce hypo or epicycloid
    curves, respectively.</p>

    <p>It is easy to see that multiplying the three parameters R,
    r, and p by a common factor produces a global scaling of the
    curve dimensions but does not change its shape. On the other
    hand, the figure traced by this parametric equation closes only
    if R/r is a rational number. Let us assume that n and m are the
    smallest integers such that |R/r| = n/m, and let g be the
    greatest common divisor of n and m (gcd(n,m)). The curve will
    then close after a total rotation of m/g times <img width=19 height=13 src="misc/luana/eqs-024.png" alt="2\pi">

    (<img width=95 height=19 src="misc/luana/eqs-025.png" alt="\varphi \in [0,2m\pi]">
) and it will show n/g lobes or
    spikes.</p>

    <p>The equations can be generalized for three or more wheels
    rolling one inside the other, and <a href=
    "#nw-Farris1996">Frank Farris</a> did so in a celebrated
    article in <a href=
    "http://www.maa.org/pubs/mathmag.html">Mathematics
    Magazine</a>. At this level, it is better to give up a direct
    simulation of the physical engine gears and examine the
    equations directly. A very compact and powerful notation is
    obtained by using complex variables, with the convention that
    the real and imaginary parts represent the x and y Cartesian
    coordinates, i.e., z=x+iy where i is the imaginary number. The
    general Farris equations are:</p>

    <p id="eq"><a name="eqn-04" id="eqn-04"><img width=275 height=51 src="misc/luana/eqn-04.png" alt="z(t) = \sum_{k=1}^n a_k e^{i2\pi(n_k t+\theta_k)}, t \in [0,1],">
</a></p>

    <p>where n is the number of engaged wheels: wheel k has its
    center fixed on a point of the circumference of wheel (k-1). On
    each wheel, <img width=16 height=12 src="misc/luana/eqs-033.png" alt="a_k">
 is related to the radius, <img width=18 height=12 src="misc/luana/eqs-034.png" alt="n_k">
 to
    the rotation speed, and <img width=15 height=17 src="misc/luana/eqs-035.png" alt="\theta_k">
 is an initial phase angle.
    Farris demonstrated that the z(t) curve has g-fold rotational
    symmetry if all the pairwise differences <img width=64 height=20 src="misc/luana/eqs-038.png" alt="|n_k-n_j|">
 have g as their greatest common divisor.</p>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <!-- +++++++++ Rendering the curves in gnuplot +++++++++++++++++++ -->
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

    <h2><a name="Sec:render" id="Sec:render">III. Rendering the
    curves in gnuplot</a></h2>

    <p>The <a href="#eqn-03">two wheel parametric equations</a> can
    be readily translated into the following <em id=
    "sc">gnuplot</em> drawing code:</p>
    <pre class="code">
 set terminal png size 600,600 \
     x000000 xffffff x404040 xff0000
 set output "fig-spiro02.png"
 set size ratio -1
 set nokey
 set noxtics
 set noytics
 set noborder
 set parametric
#
 x(t)=(R-r)*cos(t) + p*cos((R-r)*t/r)
 y(t)=(R-r)*sin(t) - p*sin((R-r)*t/r)
#
 R=100.0; r=2.0; p=80.0
 set samples 2001
#
 plot [t=0:2*pi] x(t),y(t)
</pre>

    <p>The code saves the image as a PNG file, useful for insertion
    on a Web page, but any <em id="sc">gnuplot</em> terminal could
    be used. An EPS/PDF vector file with white background is better
    for a printed version of the document, whereas an unscaled PNG
    raster file with black background may look better and render
    faster in a Web browser. The use of the PNG terminal is a
    little tricky, as there appear to be two versions that differ
    in the recognized syntax. If <em id="sc">gnuplot</em> chokes on
    the <tt>png size 600,600</tt> part, try using <tt>png picsize
    600 600</tt> instead. Notice that we have removed the default
    axes, labels, and tics. Identical scaling of the axes has also
    been enforced, to avoid distortion of the image. The result can
    be seen in <a href="#fig:spiro02">Fig. 2</a>.</p>

    <p id="figure"><a name="fig:spiro02" id="fig:spiro02"><img width=296 height=296 src="misc/luana/fig-spiro02.png" alt="Hypotrochoid curve">
</a><br>
    <b>Figure 2</b> Hypotrochoid curve for: R=100, r=2 and
    p=80.</p>

    <p>A little exploration will reveal that: (a) p=0 produces a
    circle; (b) an ellipse results if R=2r and p&ne;r, its axes
    being (r+p) and |r-p|; (c) the hypocycloids are obtained by
    choosing p=r; (c) R=2r=2p gives rise to a line of length 2a;
    (d) negative values for p and/or r results in some
    extraordinary specimens.</p>

    <div class="c2">
      <img width=120 height=120 src="misc/luana/fig-adorno03a.png" alt="Decorations" title="Three wheels with speeds [11,-5,3]">

	  <img width=120 height=120 src="misc/luana/fig-adorno03b.png" alt="Decorations" title="Three wheels of size (2,4,1) and speeds [11,-5,3]">
 <img width=120 height=120 src="misc/luana/fig-adorno03c.png"
      alt="Decorations" title="Three wheels of size (2,1,4) and speeds [11,-5,3]">
 <img width=120 height=120 src="misc/luana/fig-adorno03d.png"
      alt="Decorations" title="Three wheels of size (2,1,4) and speeds [11,-5,-3]">
 <img width=120 height=120 src="misc/luana/fig-adorno03c.png"
      alt="Decorations">
 <img width=120 height=120 src="misc/luana/fig-adorno03b.png" alt="Decorations"
>
 <img width=120 height=120 src="misc/luana/fig-adorno03a.png" alt="Decorations">

    </div>

    <p>The beauty and diversity of the trochoid curves call for a
    journey of exploration and discovery. This is much easier if
    the gnuplot code is embedded in a text or graphical user
    interface (TUI <em>vs.</em> GUI). A simple <em id="sc">csh</em>
    script can serve as a rudimentary but effective wrapper:</p>
    <pre class="code">
#! /bin/csh
set code = $0:t
if ($#argv &lt; 3) goto help
set n1 = $1; set n2 = $2; set n3 = $3
set a1 = 1.0; set a2 = 1.0; set a3 = 1.0
set s1 = 0.0; set s2 = 0.0; set s3 = 0.0
if ($#argv &gt;= 4) set a1 = $4
if ($#argv &gt;= 5) set a2 = $5
if ($#argv &gt;= 6) set a3 = $6
if ($#argv &gt;= 7) set s1 = $7
if ($#argv &gt;= 8) set s2 = $8
if ($#argv &gt;= 9) set s3 = $9

cat &lt;&lt; EOF | gnuplot
 set size ratio -1
 set nokey
 set noxtics
 set noytics
 set noborder
 set parametric
#
 n1p = {0,1}*2*pi*${n1}
 n2p = {0,1}*2*pi*${n2}
 n3p = {0,1}*2*pi*${n3}
 s1p = {0,1}*2*pi*${s1}
 s2p = {0,1}*2*pi*${s2}
 s3p = {0,1}*2*pi*${s3}
 z(t) = ${a1}*exp(n1p*t+s1p) \
      + ${a2}*exp(n2p*t+s2p) \
      + ${a3}*exp(n3p*t+s3p)
#
 set terminal png size 600,600 x000000 \
     xffffff x404040 xff0000 xffa500 x66cdaa \
     xcdb5cd xadd8e6 x0000ff xdda0dd x9500d3
 set output "fig-spiro03.png"
#
 set samples 2001
 plot [t=0:1] real(z(t)),imag(z(t))
EOF

xv fig-spiro03.png
exit(0)

help:
cat &lt;&lt; EOF
USE:     $code n1 n2 n3 [a1 a2 a3 [s1 s2 s3]]
PURPOSE: Plot Farris wheels on wheels on wheels
         curve for (n1,n2,n3,a1,a2,a3,s1,s2,s3).
         Default value for a1, a2, a3: 1.0.
         Default value for s1, s2, s3: 0.0.
EXAMPLE: $code 1 7 -17 1 0.5 1.0/3 0 0 0.24
EOF
</pre>

    <p>In this example, we have used Farris equations for three
    wheels. Complex numbers (notice the <tt>{0,1}</tt> constant,
    equivalent to the imaginary number, i, in <em id=
    "sc">gnuplot</em> syntax) are used to evaluate the z(t)
    function, but their real and imaginary parts must be explicitly
    extracted and passed to the <tt>plot</tt> instruction.
    Therefore, z(t), is actually called twice for each point.
    Perhaps future <em id="sc">gnuplot</em> versions will recognize
    a single complex expression as a complete argument of the
    parametric <tt>plot</tt>. In any case, the complex arithmetic
    provides a very compact notation.</p>

    <p id="figure"></p>

    <table align="center">
      <tr>
        <td><img width=200 height=200 src="misc/luana/fig-spiro03a.png" alt="Three wheel pattern 03a">
</td>

        <td><img width=200 height=200 src="misc/luana/fig-spiro03b.png" alt="Three wheel pattern 03b">
</td>

        <td><img width=200 height=200 src="misc/luana/fig-spiro03c.png" alt="Three wheel pattern 03c">
</td>
      </tr>

      <tr>
        <td><img width=200 height=200 src="misc/luana/fig-spiro03d.png" alt="Three wheel pattern 03d">
</td>

        <td><img width=200 height=200 src="misc/luana/fig-spiro03e.png" alt="Three wheel pattern 03e">
</td>

        <td><img width=200 height=200 src="misc/luana/fig-spiro03f.png" alt="Three wheel pattern 03f">
</td>
      </tr>
    </table><a name="fig:spiro03" id="fig:spiro03"><b>Figure
    3</b></a> Typical patterns shown by three rolling wheels of
    equal size. From left to right and top to bottom: (a) [7,-5,2]
    palm leaf, (b) [19,-13,3] daisy flower; (c) [13,-7,-3] cross;
    (d) [19,17,-2] nephroid; (e) [13,-11,-3] 8-point star; (f)
    [11,-7,-3] Maasai shield.

    <p>The script, on the other hand, can be called with anything
    from 3 to 9 parameters. The three obligatory parameters are n1,
    n2, and n3, that adjust the relative speed of the three wheels.
    The next group of three are a1, a2, and a3, related to the
    relative size of the wheels, and a default value of 1.0 is
    assumed for any parameter not given in the input. The last
    group corresponds to the initial phase angles, s1, s2, and s3,
    with a default value of 0.0. The script parameters are used
    only within <em id="sc">gnuplot</em> assignments. This means
    that the user can enter expressions rather than single integer
    or real values. Some care must be taken, however, when entering
    fractions: use 1.0/3 and not 1/3, that would be interpreted by
    <em id="sc">gnuplot</em> as an integer division and would
    produce an unexpected 0.</p>

    <p><a href="#fig:spiro03">Figure 3</a> represents some of the
    most characteristic patterns exhibited by three rolling wheels
    of identical size. These patterns occur when the wheel speeds,
    [n1,n2,n3], their differences, <img width=116 height=19 src="misc/luana/eqs-069.png" alt="\Delta{n_{ij}} = n_j - n_i">
, and the greatest common divisor of
    the differences, <img width=120 height=20 src="misc/luana/eqs-070.png" alt="g = \mathrm{gcd}(|\Delta{n_{ij}}|)">
,
    satisfy appropriate conditions. Large values for g produce
    highly symmetric and generally nice motifs. Some of the most
    pleasant designs, however, show only a moderate symmetry and a
    more subtle interplay between regularity and uniqueness.</p>

    <p>Some trends, found by the observation of a large number of
    cases, can help in the design of a particular motif. Assuming
    that the three wheels are of equal size, differences like
    (-g,2g,3g) can produce g-points stars, whereas g-petal daisies
    tend to happen for ([+/-]2g, [+/-]g, [+/-]g) differences. Palm
    leaves and nephroids occur when two of the <img width=35 height=19 src="misc/luana/eqs-073.png" alt="\Delta{n_{ij}}">
 differences coincide, in absolute value, with two
    of the wheel speeds. Crosses and Maasai shields are <em>rara
    avis</em> that require a large number of conditions to be met:
    the sum of all wheel speeds must be odd (positive or negative),
    g must be a power of 2, and the sum of two of the differences
    must be equal to the third.</p>

    <p>Changing the wheel sizes will also produce significant
    variations in the drawings. Adding small phase angles to one or
    more wheels can be used to introduce some irregularity into an
    otherwise too symmetric and uninteresting motif.</p>

    <div class="c2">
      <img width=120 height=120 src="misc/luana/fig-adorno02a.png" alt="Decorations"
      title="Three wheels with speeds [29,-11,-3]">
 <img width=120 height=120 src="misc/luana/fig-adorno02b.png" alt="Decorations" title="Three wheels of size (2,4,1) and speed [29,-11,-3]">
 <img width=120 height=120 src="misc/luana/fig-adorno02c.png"
      alt="Decorations" title="Three wheels of size (1,4,2) and speed [29,-11,-3]">
 <img width=120 height=120 src="misc/luana/fig-adorno02d.png"
      alt="Decorations" title="Three wheels of size (1,2,4) and speed [29,-11,-3]">
 <img width=120 height=120 src="misc/luana/fig-adorno02c.png"
      alt="Decorations">
 <img width=120 height=120 src="misc/luana/fig-adorno02b.png" alt="Decorations"
>
 <img width=120 height=120 src="misc/luana/fig-adorno02a.png" alt="Decorations">

    </div>

    <p>The two previous examples have used the spirographic
    equations with a large number of sample points, large enough to
    show the true nature of the curves: both continuous and
    derivable, as they are the sums of exponential functions. The
    Web has plenty of simplistic Java applets that poorly render
    the equations by using a small number of points per roll. This
    method, albeit a wrong representation of the true curves, can
    produce quite pleasant images. In a declarative language, this
    type of plot would be produced using a simple loop:</p>
    <pre>
   nturns = abs(rsmall) / gcd(Rbig,abs(rsmall))
   M = nturns * resolution
   inumber = {0,1}
   for (k=0; k&lt;=M; k++) {
      ang1 = inumber * k * 2*pi/M
      ang2 = ang1 * (rsmall-Rbig)/rsmall
      z[k] = (Rbig-rsmall)*exp(ang1) + p*exp(ang2)
      if (k&gt;0) { PLOT LINE from z[k-1] to z[k] }
      }
</pre>

    <p>where <tt>resolution</tt> holds the number of sample points
    used for each roll around the main (fixed) wheel and
    <tt>nturns</tt> is the number of times this wheel must be
    rolled around. The above pseudocode assumes the use of complex
    arithmetic and the availability of a <tt>gcd()</tt>
    function.</p>

    <p>Loops and conditional expressions are not part of the
    <em id="sc">gnuplot</em> language, but there are ways around
    this limitation. First, an implicit loop is automatically
    performed on each plot instruction. We just have to be careful
    to fix an appropriate <tt>samples</tt> value and a correct
    range for the independent variable (the parametric variable, in
    our case). The ternary operator (<tt>a?b:c</tt>, evaluate and
    return <tt>b</tt> if <tt>a</tt> is true, and <tt>c</tt>
    otherwise) can be used as a restricted conditional test.
    <em id="sc">gnuplot's</em> user-defined functions can be
    recursive, on the other hand, and this can also be used as a
    restricted form of loop.</p>

    <p>The next example uses all of the above ideas. Notice, in
    particular, the recursive definition of the <tt>gcd()</tt>
    function, that implements Euclid's algorithm for the greatest
    common divisor. The calculation of the number of turns and
    sample points is simplified by assuming that R and r are
    integers.</p>
    <pre class="code">
 set size ratio -1
 set nokey
 set noxtics
 set noytics
 set noborder
 set parametric
#
 x(t) = (R-r)*cos(t) + p*cos((R-r)*t/r)
 y(t) = (R-r)*sin(t) - p*sin((R-r)*t/r)
#
# Greatest common divisor:
 gcd(x,y) = (x%y==0 ? y : gcd(y,x%y))
#
 R = 100; r = -49; p = -66; res = 10
#
 rr = abs(r)
 nturns = rr / gcd(R,rr)
 samp = 1 + res * nturns
 set samples samp
#
 plot [t=0:nturns*2*pi] x(t),y(t)
</pre>

    <p id="figure"><a name="fig:spiro05" id="fig:spiro05"><img width=496 height=496 src="misc/luana/fig-spiro05.png" alt="Stitching rendering of a hypotrochoid curve"
>
</a><br>
    <b>Figure 4</b> Curve stitching patterns from the hypotrochoid
    curve with: R=100, r=2 and p=70. The three patterns correspond
    to a resolution of 75, 125 and 175 sample points,
    respectively.</p>

    <p>The last example works well for drawing a single curve with
    a given resolution, but the most interesting patterns are
    obtained by mixing several renderings of one or more curves
    with well chosen resolutions. To do this within a single
    <em id="sc">gnuplot</em> run, we have to take explicit control
    of the angles used for each equation. For instance:</p>
    <pre class="code">
 set terminal png size 600,600 x000000 \
     xffffff x404040 xff0000 xffa500 x66cdaa \
     xcdb5cd xadd8e6 x0000ff xdda0dd x9500d3
 set output "fig-spiro05.png"
 set size ratio -1
 set nokey
 set noxtics
 set noytics
 set noborder
 set parametric
#
# General parametric equations:
 x(t,R,r,p) = (R-r)*cos(t) + p*cos((R-r)*t/r)
 y(t,R,r,p) = (R-r)*sin(t) - p*sin((R-r)*t/r)
#
# Values for the dummy parameter:
 t(i,n) = i*2*pi/n
#
# Greatest common divisor:
 gcd(x,y) = (x%y==0 ? y : gcd(y,x%y))
#
# The different curves:
 R1 = 100; r1 = 2; p1 = 70; res1 =  75
 R2 = 100; r2 = 2; p2 = 70; res2 = 125
 R3 = 100; r3 = 2; p3 = 70; res3 = 175
#
 nseg1 = res1 * abs(r1) / gcd(R1,abs(r1))
 nseg2 = res2 * abs(r2) / gcd(R2,abs(r2))
 nseg3 = res3 * abs(r3) / gcd(R3,abs(r3))
 n12 = (nseg1 * nseg2) / gcd(nseg1,nseg2)
 nsamp = (n12 * nseg3) / gcd(n12,nseg3)
 nsamp1 = nsamp + 1
 set samples nsamp1
#
 plot [i=0:nsamp] \
    x(t(i,res1),R1,r1,p1),y(t(i,res1),R1,r1,p1) \
  , x(t(i,res2),R2,r2,p2),y(t(i,res2),R2,r2,p2) \
  , x(t(i,res3),R3,r3,p3),y(t(i,res3),R3,r3,p3)
</pre>

    <p>The result of this code is represented in <a href=
    "#fig:spiro05">figure 4</a>. The intricate embroidery of the
    three curve representations, only recognizable by their
    different colors, show an appealing and delicate beauty that
    deserves further exploration. However, using the same
    <tt>plot</tt> order for the three is far from being effective
    and poses many problems for its generalization to an arbitrary
    number and class of representations. In particular, the number
    of sample points has to be a minimum common multiple of the
    best number of sample points for each independent figure.</p>

    <p>In the case of <a href="#fig:spiro05">figure 4</a>, the
    three curves would need 75, 125 and 175 sample points,
    respectively, but plotting the three simultaneously requires
    2625 samples, instead. So, the first component is repeated 35
    times, 21 times the second, and 15 times the third. This
    repetition will add substantially to the plotting time but, if
    the final result is written to a raster format like PNG, there
    will be no increase on the size of the final file. If we use a
    vector format like EPS or SVG, however, the file size will also
    increase substantially.</p>

    <p>We can avoid the unnecessary repetition by turning to a 
    two-pass method. In the first pass, each curve is created
    independently in <em id="sc">gnuplot</em>, and its points are
    saved in a file using a <tt>set terminal table</tt> output
    mode. The second pass combines the points from all the previous
    files into a single design, that is saved in whatever raster or
    vector format seems appropriate. Instead of providing an
    example of this technique, we will use the idea for our final
    and most ambitious project.</p>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <!-- +++++++++ A minilanguage for spirograph-like patterns +++++++ -->
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

    <h2><a name="Sec:combining" id="Sec:combining">IV. A
    mini-language for combining an arbitrary number of
    spirograph-like patterns</a></h2>

    <p>All the techniques developed in the previous section can be
    made more accessible if we design a simple way of describing a
    plot and we create the tool for translating the description to
    the appropriate <em id="sc">gnuplot</em> instructions. The
    perfect translation tool would hide the details of the <em id=
    "sc">gnuplot</em> syntax from the user while maintaining an
    appropriate degree of flexibility.</p>

    <p>We have written an experimental translator (<a href=
    "misc/luana/spirolang.awk.txt">See/download the translator</a>)
    in awk for rapid prototyping and easy experimentation. We are
    going to describe the language currently recognized. The
    following notation will be used. Fixed names are written in
    <b>boldface</b>. Variable data appears in <i>italica</i>,
    enclosed within square brackets, [], if the data is optional.
    The data type is indicated by the suffix of the variable name:
    <i>var.s</i> (a string sequence); <i>var.i</i> (an integer);
    <i>var.r</i> (a real value); <i>var.c</i> (a complex value in
    <em id="sc">gnuplot</em> notation, i.e.,
    <tt>{real_part,imaginary_part}</tt>); <i>var.re</i> and
    <i>var.ce</i> (a real or complex expression, like
    <tt>pi*{0,1}/12</tt>). Missing values are forbidden within the
    integer, real and complex data and expressions.</p>

    <p>The instructions currently implemented in our translation
    script are:</p>

    <dl>
      <dt class="luana"><b>PROJECT</b> <i>projectname.s</i></dt>

      <dd>The project name serves as root for the names of all the
      files, temporary or final, that the drawing process
      requires.<br>
      Default <i>projectname</i>: <tt>tmp</tt>.</dd>

      <dt class="luana"><b>TERMINAL</b> <i>parameters.s</i></dt>

      <dd>Select a <em id="sc">gnuplot</em> terminal type. Typical
      selections would be PNG or EPS, but any type accepted by
      <em id="sc">gnuplot</em> will serve.<br>
      Default: <tt>png size 600,600 x000000 xffffff x404040
      ...</tt></dd>

      <dt class="luana"><b>CURVE</b> <i>samples.i</i></dt>

      <dd>Start a new curve. A plot is formed by using one or more
      curves. Each curve is made by one or more functions. Each
      curve is computed independently and written to a temporary
      file. All curves are plotted together at the end to form the
      final image. The default number of sample points (2001) can
      be changed independently for each curve. Some special
      function types (like <b>TROCHOID</b>) may take control of
      this and ignore the <i>samples</i> value. The general form of
      a curve is:</dd>

      <dd id="eq"><a name="eqn-05" id="eqn-05"><img width=119 height=51 src="misc/luana/eqn-05.png" alt="z(t) = \sum_{k=1}^N z_k(t)"
>
</a></dd>

      <dd>where t is the independent parameter and <img width=163 height=19 src="misc/luana/eqs-076.png" alt="z_k(t) = x_k(t) + i y_k(t)"
>
 is a complex term contribution to
      the curve.</dd>

      <dt class="luana"><b>ADDTERM LINE</b> <i>z0.ce z1.ce</i></dt>

      <dd>Add a linear term contribution to the current curve:</dd>

      <dd id="eq"><a name="eqn-06" id="eqn-06"><img width=180 height=19 src="misc/luana/eqn-06.png" alt="z_k(t) = z0 + (z1-z0) t">
</a></dd>

      <dd>The line passes through <i>z0</i> and <i>z1</i>, two
      arbitrary points in the complex plane. Remember than complex
      values are entered using the <em id="sc">gnuplot</em>
      notation: <tt>{x,y}</tt> means <img width=47 height=16 src="misc/luana/eqs-077.png" alt="x+iy">
.
      Missing variables must be avoided within each number.</dd>

      <dt class="luana"><b>ADDTERM SPIRAL1</b> <i>a.re n.i</i></dt>

      <dd>Add a generalized Archimedes spiral:</dd>

      <dd>
        <p id="eq"><a name="eqn-07" id="eqn-07"><img width=150 height=21 src="misc/luana/eqn-07.png" alt="z_k(t) = a (2\pi t)^n e^{i2\pi t}">
</a></p>
      </dd>

      <dd>Default: n=1.</dd>

      <dt class="luana"><b>ADDTERM SPIRAL2</b> <i>a.re b.re</i></dt>

      <dd>Add an equiangular spiral:</dd>

      <dd>
        <p id="eq"><a name="eqn-08" id="eqn-08"><img width=150 height=22 src="misc/luana/eqn-08.png" alt="z_k(t) = a e^{t/\tan{b}} e^{i2\pi t}.">
</a></p>
      </dd>

      <dd>Maximize the number of spiral rolls by choosing b close
      to (+/-)&pi;.</dd>

      <dt class="luana"><b>ADDTERM TROCHOID</b> <i>R.re r.re p.re
      [samples.i]</i></dt>

      <dd>Add a trochoid term:</dd>

      <dd>
        <p id="eq"><a name="eqn-09" id="eqn-09"><img width=277 height=22 src="misc/luana/eqn-09.png" alt="z_k(t) = (R-r) e^{i2\pi t} + p e^{-i2\pi(R-r)t/r}.">
</a></p>
      </dd>

      <dd>If <i>samples</i> is given, the number of sampling points
      and the number of curve rollings is internally computed.</dd>

      <dt class="luana"><b>ADDTERM WHEEL</b> <i>a.re n.re s.re</i></dt>

      <dd>Add a Farris rolling wheel term:</dd>

      <dd>
        <p id="eq"><a name="eqn-10" id="eqn-10"><img width=135 height=22 src="misc/luana/eqn-10.png" alt="z_k(t) = a e^{i2\pi (nt+s)}"
>
</a></p>
      </dd>

      <dd>where a is the wheel radius, n the rolling frequency,
      i.e. the number of rolls when t goes from 0 to 1, and s
      determines the initial phase angle. An arbitrary number of
      Farris wheels can be added in a curve.</dd>

      <dt class="luana"><b>STYLE</b> <i>style.s</i></dt>

      <dd>This order takes control of the <em id="sc">gnuplot</em>
      style used on the current curve and its copies (see the
      <b>LOOP</b> order below). The <i>style.s</i> must follow the
      <em id="sc">gnuplot</em> syntax. For example: <tt>style lt
      1</tt> (line type 1 for all copies of the curve), <tt>style
      with points pt -1</tt> (use points instead of lines). The
      default style is to use lines for the curves, increasing the
      line number style for each successive curve, including
      copies.</dd>

      <dt class="luana"><b>LOOP</b> <i>var.s var_ini.r var_end.r
      var_inc.r</i></dt>

      <dd>
        Repeat the current curve according to the next implicit
        loop:
        <pre>
         var = var_ini
         while (var does not reach var_end) do
            # compute and draw a new installment
            # of the current curve
            var = var_ini + (var_inc)
         end
      
</pre>The <i>var.s</i> string can be used as a variable in the
definition of the curve (see the examples below). The
<i>var_inc.r</i> value can be negative. There is currently a limit
of 1000 times for the number of copies produced by this loop.
      </dd>

      <dt class="luana"><b>TRANGE</b> <i>t0.r t1.r</i></dt>

      <dd>Change the default range for the t parametric variable.
      Notice that the presence of a trochoid term may take control
      for t and ignore this input.<br>
      Default: t in [0,1].</dd>

      <dt class="luana"><b>GFACTORS</b> <i>freal.re fimag.re</i></dt>

      <dd>Multiplicative factors for the real and imaginary parts
      of the drawn functions. In other words, the image finally
      drawn is <tt>plot freal*real(z(t)),
      fimag*imag(z(t))</tt>.<br>
      Default: <tt>freal = fimag = 1.0</tt>.</dd>

      <dt class="luana"><b>LABEL</b> <i>x.r y.r text.s</i></dt>

      <dd>Add a <em id="sc">gnuplot</em> label at the indicated
      position. The plot center has the coordinates (0,0). The
      label is centered on the <tt>(x,y)</tt> point. The plot can
      contain any number of labels, but the program makes no
      attempt to avoid collisions between them.</dd>
    </dl>

    <p id="figure"></p>

    <table align="center">
      <tr>
        <td><img width=400 height=400 src="misc/luana/fig-example01.png" alt="Example 01 image">
</td>

        <td><img width=400 height=400 src="misc/luana/fig-example02.png" alt="Example 02 image">
</td>
      </tr>

      <tr>
        <td align="center">(a)</td>

        <td align="center">(b)</td>
      </tr>

      <tr>
        <td><img width=400 height=400 src="misc/luana/fig-example03.png" alt="Example 03 image">
</td>

        <td><img width=400 height=194 src="misc/luana/fig-example04.png" alt="Example 04 image">
</td>
      </tr>

      <tr>
        <td align="center">(c)</td>

        <td align="center">(d)</td>
      </tr>
    </table><a name="fig:spiro06" id="fig:spiro06"><b>Figure
    5</b></a> Example images created with the help of the <a href=
    "misc/luana/spirolang.awk.txt">SpiroLang</a> mini-language. See
    the text for a description of the patterns and the actual
    instructions used to create them. The (d) image has been
    created using an EPS terminal to employ enhanced text
    capabilities, but it has been converted to PNG for display
    here.

    <p>Some examples of the above rules in action may help to
    understand the possibilities. The first example, represented in
    <a href="#fig:spiro06">Fig. 5(a)</a>, shows the use of a simple
    trochoid curve with a small sampling:</p>
    <pre>
   project example01
   terminal png size 600,600 x000000
   curve 10
      addterm trochoid 100 -49 76
</pre>

    <p>The second example shows the use of a loop instruction to
    create copies of a curve, applying a little phase rotation and
    size change to each new copy. See the resulting image in
    <a href="#fig:spiro06">Fig. 5(b)</a>:</p>
    <pre>
   project example02
   terminal png size 600,600 x000000
   curve
      #style lt 1
      loop kkk 0 20 1
      addterm wheel 4*0.98**kkk  -3   kkk/200.
      addterm wheel 5*1.02**kkk   2   kkk/200.
</pre>

    <p>The third image, <a href="#fig:spiro06">Fig. 5(c)</a>,
    corresponds to a multiple copy version of three Farris
    wheels:</p>
    <pre>
   project example03
   terminal png size 600,600 x000000
   curve
      style lt 1
      loop kkk 0 20 1
      addterm wheel 4  -5   -kkk/60.
      addterm wheel 3   2    kkk/60.
      addterm wheel 2   9    0.
</pre>

    <p>Our last example shows a decoration around some text. The decoration was
    designed by starting with a large Farris wheel and adding two other much
    smaller wheels, always maintaining an 8-fold symmetry. The use of
    <tt>gfactors</tt> provides an easy way to stretch an otherwise round
    motif.</p> <pre> project example04 terminal postscript eps enhanced color
"Helvetica" 48 gfactors 1.4 0.7 curve style lt 1 loop kkk 0 10 1 addterm wheel
200*0.96**kkk   1   0.  addterm wheel  10*0.96**kkk   9   0.  addterm wheel
9*0.96**kkk  23   0.  label 0 0 G_nuplot rules!  </pre> 
    <!--
    +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ --> <!--
    ++++++++++++++++++ Final remarks ++++++++++++++++++++++++++++ --> <!--
    +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

    <h2><a name="Sec:final" id="Sec:final">V. Final
    remarks</a></h2>

    <p>We should not end this report without mentioning, at least,
    some of the excellent Java applets that can be found on the
    Internet (<a href="#Paramo2004">Paramo2004</a>, <a href=
    "#Little2001">Little2001</a>, <a href=
    "#Little1997">Little1997</a>, <a href="#Garg">Garg</a>,
    <a href="#Ziring2000">Ziring2000</a>). A well conceived GUI can
    be of great help in the interactive exploration of a designated
    subset of the vast Spirograph parametric space. It is not the
    only approach, however. A custom mini-language can give access
    to an arbitrarily large parametric space and hide the dirty
    details of code generation. The <em id="sc">gnuplot</em> engine
    has been used for years to produce professional quality plots.
    Some of its drawbacks, like the lack of true loop mechanisms,
    can be eliminated with some ingenuity or by embedding the
    engine within a more general programming tool.</p>
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <!-- ++++++++++++++++++ Acknowledgements +++++++++++++++++++++++++ -->
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

    <h2><a name="Sec:Acknowledgements" id=
    "Sec:Acknowledgements">Acknowledgements</a></h2>

    <p>The author thanks the Spanish Ministerio de Educaci&oacute;n
    y Ciencia for financial support under project
    BQU2003-06553.</p><!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->
    <!-- ++++++++++++++++++ References +++++++++++++++++++++++++++++++ -->
    <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ -->

    <h2><a name="Sec:References" id=
    "Sec:References">References</a></h2>

    <ol>
      <li><a name="gnuplot4" id="gnuplot4">T. Williams, L. Hecking,
      and H.-B. Broeker,</a> <i><em id="sc">gnuplot</em>, version
      4</i> (2004), based on the original version released by
      Thomas Williams and Colin Kelley in 1986. <a href=
      "http://www.gnuplot.info/">http://www.gnuplot.info/</a></li>

      <li><a name="mw-hypotrochoid" id="mw-hypotrochoid">E. W.
      Weisstein,</a> <i>Hypotrochoid</i>, from <a href=
      "http://mathworld.wolfram.com/">MathWorld-A Wolfram Web
      Resource</a> (last accessed 2006-09-06). <a href=
      "http://mathworld.wolfram.com/Hypotrochoid.html">http://mathworld.wolfram.com/Hypotrochoid.html</a></li>

      <li><a name="Perez2000" id="Perez2000">C. P&eacute;rez,</a>
      <i>L'ancien regime. Part 2: The heritage of the classical
      wristwatch</i>, (2000, last accessed 2006-09-06). <a href=
      "http://people.timezone.com/msandler/Articles/CarlosClassical/Classical.html">
      http://people.timezone.com/msandler/Articles/CarlosClassical/Classical.html</a></li>

      <li><a name="RGM2006" id="RGM2006">RGM watches company,</a>
      <i>Engine-turning ``guilloche''</i>, (last accessed
      2006-09-06). <a href=
      "http://www.rgmwatches.com/engine.html">http://www.rgmwatches.com/engine.html</a></li>

      <li><a name="nw-Farris1996" id="nw-Farris1996">F. Farris,</a>
      <i>Wheels on Wheels on Wheels - Surprising Symmetry</i>, in
      <i>Mathematics Magazine</i> <b>69</b> (1996) 185-189,</li>

      <li><a name="Paramo2004" id="Paramo2004">A. P&aacute;ramo
      Fonseca,</a> <i>La gran belleza de las trocoides</i>, (2004,
      last accessed 2006-09-30). <a href=
      "http://temasmatematicos.uniandes.edu.co/Trocoides/paginas/introduccion.htm">
      http://temasmatematicos.uniandes.edu.co/Trocoides/paginas/introduccion.htm</a></li>

      <li><a name="Little2001" id="Little2001">D. Little,</a>
      <i>Spirograph</i>, (2001, last accessed 2006-09-30). <a href=
      "http://www.math.psu.edu/dlittle/java/parametricequations/spirograph/index.html">
      http://www.math.psu.edu/dlittle/java/parametricequations/spirograph/index.html</a></li>

      <li><a name="Little1997" id="Little1997">D. Little,</a>
      <i>Spirograph v1.0</i>, (1997, last accessed 2006-09-30).
      <a href=
      "http://www.math.psu.edu/dlittle/java/parametricequations/spirograph/SpiroGraph1.0/index.html">
      http://www.math.psu.edu/dlittle/java/parametricequations/spirograph/SpiroGraph1.0/index.html</a></li>

      <li><a name="Garg" id="Garg">A. Garg,</a> <i>Spirograph</i>,
      (last accessed 2006-09-30). <a href=
      "http://www.wordsmith.org/anu/java/spirograph.html">http://www.wordsmith.org/anu/java/spirograph.html</a></li>

      <li><a name="Ziring2000" id="Ziring2000">N. Ziring,</a>
      <i>Spiro applet version 1.0</i>, (2000, last accessed
      2006-09-30). <a href=
      "http://cgibin.erols.com/ziring/cgi-bin/spiro.pl/spiro.html">http://cgibin.erols.com/ziring/cgi-bin/spiro.pl/spiro.html</a></li>
</ol>
</div>

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:133/luana.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/authors/luana.jpg" class="bio">
</p>

<em>

<p>
I'm a Spaniard, living in Oviedo, close to the northern coast of Spain.
Married, with a teenager daughter ("hey, dad, this spiro thing is cool!"),
I teach Physical Chemistry and do research on Theoretical Chemistry for a
living. I have programmed on all sort of machines, from the mythical HP41C
to the not less mythical Cray X and Y supercomputers (the end of an era
left us short of a good <strong>crazy</strong> machine), for the last 25
years. I was captivated by linux around 1993, when our research group
discovered the first Slackware distribution. Our current infrastructure is
based on Debian and includes a half-mounted Top500
<strong>wannabee</strong> shared among many research groups.
</p>

<p>
On the left: self portrait in front of a mirror (Feb. 2006). Yes, I truly
love photography, but I don't like appearing on images myself. Anyway, this
self portrait has something that I don't dislike too much. The band on my
left hand has disappeared long ago.
</p>

</em>

<br clear="all">


<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/luana.html">V&iacute;ctor Lua&ntilde;a</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 133 of Linux Gazette, December 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="renker"></a>
<h1>Poor Man's Laptop: Richer Features</h1>
<p id="by"><b>By <A HREF="../authors/renker.html">Gerrit Renker</A></b></p>


</b>
</p>


<p>

<p>The <a href="../132/renker.html">first part of this article</a>
introduced the basic idea of using an inexpensive USB stick instead of a
laptop for home/work demands. This part turns the bare-bones script (a
glorified wrapper around <tt>tar</tt>) into a robust, conveniently usable
day-to-day solution.</p>

<img src="misc/renker/help_screen.png" border="0" alt="help screen" align="right">

<p>One of the main drawbacks of the basic version is that one has to 
explicitly state the maximum age of files (<tt>--days x</tt> option),
and this is the first thing that can/will go wrong - especially when
synchronising only once in a while. Imagine taking your last batch of
files home, going on vacation and then coming back after some weeks. The
question then is '<em>When was it I last synced my files from work ... 3
days or ... wait a minute ... could be 5 ... better make it 7?</em>'
This is tedious, therefore a <em>timestamping mechanism</em>
is implemented.</p>

<p>The <em>second aspect</em> that complicates usage is that directories
can be synchronised as they grow, but not as they shrink - and this
is again tedious to keep track of. A simple script to automate this
process is presented.</p>

<p>The remainder of this article contains brief discussions of further
add-ons. These can be used as-is, but the intention is rather to
illustrate that a usable solution requires neither expensive hardware
nor complicated programs.</p>

<div class="pullquotes">
<a name="pullquote_133_renker_1"></a>
<table border="2">
<tr>
<td align="left" bgcolor="#bd3a3a">
<sup>Category: File synchronisation</sup>
<br />
<strong>
Imagine taking your last batch of files home, going on vacation and then coming back after some weeks. The question then is 'When was it I last synced my files from work ... 3 days or ... wait a minute ... could be 5 ... better make it 7?'
</strong>
</td>
</tr>
</table>
</div>


		<h2>A More Usable Script</h2> 

<p>To recap the last part, the <a href="misc/renker/pack.pl.txt">main
script</a> uses a <a href="misc/renker/pack.list-example.txt">configuration file</a>, <tt>$config</tt>, which
stores (tagged) names of directories or files that are to be
tracked.  A good idea is to put it in a fixed location
(e.g., <tt>/etc/pack.list</tt>), and allow all USB stick users write
access to that file. Then, it is possible to simply add a new directory,
in the following manner:</p>

<pre class="code">
pwd &gt;&gt; /etc/pack.list
</pre>

<p>To resolve the question '<em>But how do I keep my configuration files
themselves synchronised?</em>', a second level of configurability is
implemented in form of the <tt>essential()</tt> routine. It provides
robustness against overwriting by tracking a few selected, important
files - among these <tt>$config</tt> itself:</p>

<pre class="code">
sub essential {
  open( ESSENTIAL, "&gt;$tmpconf") || die "can't store essential files in $tmpconf: $!\n";
  print ESSENTIAL "/home/gerrit/.{bash?[place]*,alias,functions,dircolors}\n";
  # ...
  print ESSENTIAL "${config}\n";
  close ESSENTIAL;
}
</pre>

<p>An alternative is to always carry around the configuration file
list on the stick. There is support for such a solution: a directory
<tt>$confdir = $flashdir/.conf.d</tt> exists, and is heavily used by
the other functions that will now be discussed.</p>


		   <h3>Time-stamping</h3>

<p>It is easy to get the number of days (in the <tt>--days x</tt>
option) wrong, and then one ends up with stale files - a nuisance.
The timestamping mechanism is superior to the day-wise backup, and makes
the usage much simpler. It is based on recording a timestamp value in
a file, much like the files <tt>anacron(8)</tt> uses. The important bits
are:</p> 
<ul>
  <li>each host gets its own <em>timestamp file</em>, named <tt>$confdir/timestamp-<em>hostname</em></tt></li>
  <li>when <em>unpacking</em> a file from another host, the timestamp for this host is updated</li>
  <li>when <em>packing</em> a new archive, the timestamp for <em>this</em> host (if there) is consulted</li>
  <li>all file modification times are tracked relative to this timestamp</li>
</ul> 

So the mechanism is: <em>at work</em> - create archive, <em>at home</em> -
unpack archive, update timestamp. Then, after doing some work,
create a new archive with pack: only those tracked files are archived
that are newer than the last recorded timestamp.

<p>If you look inside the timestamp file, there is just a single
number (epoch time in seconds). It is easy to make the contents
human-readable:</p>

<pre class="code">
alias seconds_to_timestring="perl -le 'for (&lt;STDIN&gt;) { print \$_=localtime(\$_) }'"
</pre>
<img src="misc/renker/decoding_timestamp.png"  border="0" alt="Decoding a timestamp" align="top">

<p> With <tt>pack --info</tt>, you can see timestamps of all hosts you
use; <a href="misc/renker/packinfo.png">here</a> is an example screenshot.
(The script recognises which timestamp is local.)  To bootstrap this
mechanism, the <tt>--days x</tt> option is still needed - once, for initial
creation of timestamps.</p>

<p>Since several functions (archive label and timestamping) depend
on <em>distinct hostnames</em>, the source and target PCs should use
different ones (e.g., not both '<tt>localhost.localdomain</tt>').</p>


         <h3>Remote command execution</h3>

<p>An archive can only transport, not delete, files.  While it is not
possible to mimic the <tt>--delete</tt> flag of e.g. <tt>rsync</tt>,
a useful approximation is possible, and not too complicated to implement.
It is based on executing commands that change the structure of directories
(e.g., new owners, file deletion, file access times ...) locally and,
when successful, <em>recording</em> them for later use. The principle is
simple: in essence, the <a href="misc/renker/cmd.bash.txt">script</a>
does the following:</p>

<pre class="code">
cmds=$confdir/commands
while read -p'#' line; do  eval $line &amp;&amp; echo $line &gt;&gt; $cmds; done
</pre>

<p>The <a href="misc/renker/cmd.bash.txt">actual script</a> is a bit more
sophisticated: it keeps track of the <em>current working directory </em>
(as most commands use relative, not absolute directory names); performs
<em>alias expansion</em>; and uses '<tt>su</tt>' to track file ownership.

<p>The output generated by this script is in turn an executable,
'<em>write-once-execute-once</em>', shell script.  If you supplied such a
file in <tt>$confdir</tt>, <tt>pack</tt> will automatically execute
it within the <tt>execute_cmds()</tt> routine - which looks like this:</p>

<pre class="code">
sub execute_cmds {
  (-s $cmds) || return;             # ignore empty files
  # ...
  system "bash $cmds";              # execute commands
  system "mv $cmds /tmp/commands";  # store in /tmp
}
</pre>

To merely <em>see</em> what would happen (without executing), you can use <tt>pack --show</tt>. 

Here is an <a href="misc/renker/removing_a_kernel.jpg">example</a>
where a kernel is removed both locally and remotely (the remote side
is shown further below).  When using such a script, asterisks and
other shell-special characters  need to be escaped, as shown in <a
href="misc/renker/cleaning_up_maildir.jpg">this</a> example.


            <h2>Extensibility</h2>
	    
   <h3>The 'pre.2' and 'add.2' archive files</h3>

<p>Often the one-off situation arises to just carry some files home
once, e.g., some source files or PDF files to read. To provide a simpler
alternative to day-to-day tracking, there are two <em>archives with special names</em>
that will automatically be unpacked:</p>
<ul>
  <li><tt>$pret</tt> (defaults to `pre.2') is unpacked <em>before</em> the main archive is unpacked</li>
  <li><tt>$addt</tt> (defaults to `add.2') is unpacked <em>after</em> the main archive is unpacked</li>
</ul>

<p>The former is useful if there is overlap with files that are already
tracked; the latter is a good all-round default.  The convenience of this
solution is the automatic unpacking via the script - no more forgotten archives.
To create either of the two files, use the <tt>-j</tt> option
(bzip2 compression) and the <tt>-P</tt> option (to not strip leading
'/') with <tt>tar</tt>.  For example, I often do this:</p>

<pre class="code">
tar -jcpPvf  /vol/flash/<b>add.2</b>    /usr/src/patches/  /home/bin
</pre>


   <h3>Automatic unpacking at boot-time</h3>

<div class="pullquotes">
<a name="pullquote_133_renker_2"></a>
<table border="2">
<tr>
<td align="left" bgcolor="#3acf3a">
<sup>Category: Security</sup>
<br />
<strong>
Using a synchroniser system, potentially with command execution, short-circuits all the hard work other hackers have done to make your Linux box a safe place.
</strong>
</td>
</tr>
</table>
</div>

<p>Archives of tracked files need to be unpacked before any running
program has a chance of overwriting them. Un-packing is thus
best performed either at boot-time or before the window manager
starts. KDE for instance provides a place for such executables in
<tt>~/.kde/Autostart</tt>. Since not everyone uses KDE, I will present the
former alternative.</p>

<p>But not without a <b>BIG FAT WARNING</b>: Using a synchroniser system,
potentially with command execution, short-circuits all the hard work
other hackers have done to make your Linux box a safe place. A malicious
'<em>bad guy</em>' could feed your computer garbage archives or venomous
scripts which render your system unusable.</p>

<p>At the very least, use some form of authorization; a
simple, but efficient, variant is presented below.  The automatic <a
href="misc/renker/unpackUSB.txt">unpack script</a> is a
standard SysV init script; place or symlink it into <tt>/etc/init.d</tt>
and create a symlink for the appropriate runlevel. (On my Debian box, I use
<tt>/etc/rc2.d/S30unpackUSB</tt>, RH/Fedora
are similar and there is <tt>chkconfig</tt> support.)  When invoked with
the `<tt>start</tt>' argument at boot-time, the script will:</p>

<ul>
  <li>verify that the archive was not created on this host</li>
  <li>authorise the USB stick (described below)</li>
  <li>call <tt>pack --unpack</tt></li>
  <li>create a log of the transaction, both in <tt>/var/log</tt> and in <tt>$confdir</tt> on the USB stick</li>
</ul>

<p>The authentication mechanism uses a MD5 hash of a well-known file.
(Below, it is the script itself.)</p>

<pre class="code">
idfile=$confdir/.idfile
serialnum=$confdir/.serialnum
md5sum $0 | tee ${serialnum} | tee "$(&lt;${idfile})"
</pre>

<p>The <tt>$serialnum</tt> will be automatically created in <tt>$confdir</tt>.
The <tt>$idfile</tt> contains the location (absolute path) of some file known only to the user.
This file must be manually edited (e.g. <tt>echo `pwd`/mysecretfile &gt; $idfile</tt>).
The trick is that the file <em>pointed to by</em> <tt>$idfile</tt> contains the same
hash value as the <tt>$serialnum</tt>.  Hence, the following happens at script invocation time: </p>

<pre class="code">
if ! [ -e "${serialnum}" -a -e "${idfile}" ] || [ "$(&lt;$(&lt;${idfile}))" != "$(&lt;${serialnum})" ]
then
   echo "Authentication procedure failed." &gt;&amp;2
   exit 1
fi
</pre>
<p>This means if some malicious other person tries to compromise your
computer with his forged USB stick, the process will fail
if (1) there is no <tt>$serialnum</tt> on the stick, (2) there is no <tt>$idfile</tt>
on the stick. Both of these could be accomplished but cost hacking and spoofing effort,
and more protection is provided by number (3):</p>

<pre class="code">
"$(&lt;$(&lt;${idfile}))" != "$(&lt;${serialnum})"
</pre>

<p>Translated: '<i>The contents of the file pointed to by <tt>$idfile</tt>
must match the contents of <tt>$serialnum</tt></i>'. To accomplish
this, intrusive hacking is needed. If you are paranoid about
security (sometimes not a bad idea), you can disable this mechanism
entirely. Statistically speaking, however, the theft of a laptop is far more
likely than such a planned intrusion.</p>

		<h3>The Big Picture</h3>

<p>Returning to the above screenshot with the local removal of a kernel,
this <a href="misc/renker/unpack_LOG.png">screenshot</a> shows the
log of what subsequently happened on the remote computer.  First the
'pre.2' file (a new kernel) is unpacked, followed by command execution
(where the old kernel is removed), finally the main archive is unpacked.</p>


	<h2>Further extensions</h2>

<div class="pullquotes">
<a name="pullquote_133_renker_3"></a>
<table border="2">
<tr>
<td align="left" bgcolor="#e5942c">
<sup>Category: Programming</sup>
<br />
<strong>
Creativity is not as easily exhausted as money.
</strong>
</td>
</tr>
</table>
</div>

<p>The next extension is a kind of <em>personal organiser</em> for taking
day-to-day notes such as important things to do, buy, or organise;
telephone numbers and URLs that are not to be forgotten; and the
like. It is actually very useful, as everything is in one place.</p> 


	      <h3>Note-taker</h3>
<p>Palmtops are horribly and unnecessarily expensive. Let's
code a part of their luxuriant functionality by storing notes in
<tt>$confdir</tt>; <a href="misc/renker/note-taking.png">here</a>
is an example screenshot. Since there are so many scripts already, a
(bash) <a href="misc/renker/note-function.txt">shell function</a>
is used for a change:</p>

<pre class="code">
function note() {
   test -t 0  &amp;&amp;  echo "Type in text, terminated by CTRL-D."
   if note=$(fold -s) &amp;&amp; test -n "$note";  then
      echo "at $(date): ${note}"  &gt;&gt;/vol/flash/.conf.d/notes
   fi
}
</pre>

The first test checks if input is from a keyboard (terminal) and prints
a prompt if so.  Otherwise, it will simply pipe from stdin into the
file. This allows very practical uses such as the following:

<pre class="code">
echo "CVS commit ID was $(cat /tmp/commit-id), done at $(date)" <b>| note</b>
</pre>


<p>To make this a complete system, convenient access to the notes is required.
One is built into the script already: notes can be accessed using <tt>pack --read</tt>.
More convenient is an <a href="misc/renker/read_pack_notes.sh.txt">Autostart script</a> 
(placed in <tt>~/.kde/Autostart</tt>). This  has the following core:</p>
<pre class="code">
kedit --caption "PACK NOTES" $notes &amp;
</pre>
This can easily be changed to suit your individual text viewer/editor of choice.
		
		<h3>How many MBRs fit on one stick?</h3>

<p>Nowadays, hard drive sizes of up to 500GB are no exception. However, on any
such disk there are 64 bytes which, when corrupted, can create a real hell
for an afternoon or two - the <em>partition table</em>, located in the
MBR. I've experienced it more than once that an MBR became damaged at some
time. I wouldn't wish the painful process of restoration to anyone.</p>

<p class="editorial">[ ...but see "<a
href="../issue63/okopnik.html">Clearing out the Master Boot Record</a>" in
issue 63. Perhaps this will convince you of the necessity of following
Gerrit's advice, if nothing else will. :) -- Ben ]
</p>

<p>Code to save the MBR on the stick is easy enough to add. Procedure
<tt>save_mbr</tt> is invoked before creating the archive and will copy
the MBR into <tt>$confdir</tt>.  It uses <tt>rdev(8)</tt> to determine
your root device:</p>

<pre class="code">
sub save_mbr {
  my $rdev = qx{/usr/sbin/rdev 2&gt;&amp;1}; 
  # ...
  system("dd if=$rdev of=$mbr bs=512 count=1") == 0 ||  warn "Cannot save MBR";
} 
</pre>

<p>
The warning shown in the last line will in particular appear if you
don't have read access to the device - you should make sure that you do,
which usually means running the script as root.
</p>


		<h2>Conclusions</h2> 

<p>
What I have presented here has evolved from real day-to-day use over the
period of three and a half years.
</p>

<p>I found the system so useful that I still prefer it to buying a laptop. 
Not only has it saved the expense of buying
costly gadgets, it is amazing how long the lifetime of a 'cheap' USB
stick actually is.  The most fragile part is the connector, for which
a warranty is given (usually about 10000 plug-ins and pull-outs). Mine
had cracked circuits, so I must have been past that - but it was easy to
fix; all that was needed was a soldering iron. On another occasion, I
accidentally forgot the stick in the laundry. After
drying, it worked fine ever after. I don't think
a laptop would survive comparable treatment: it is strange that more
expensive things are usually also more fragile.</p>

<p>I hope that the many programming hints throughout these two
parts will aid in modifying, to fit individual ideas and
requirements - creativity is not as easily exhausted as money.</p>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:133/renker.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/2002/note.png" class="bio">
</p>

<em>
<p>
<br clear="all">
</p>
</em>

<br clear="all">


<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/renker.html">Gerrit Renker</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 133 of Linux Gazette, December 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="saha"></a>
<h1>Learning about Linux Processes</h1>
<p id="by"><b>By <A HREF="../authors/saha.html">Amit Saha</A></b></p>


</b>
</p>


<p>

<h3>So, What Is A Process?</h3>

<p>Quoting from Robert Love's book <em>Linux Kernel
Development</em>, "The Process is one of the fundamental
abstractions in Unix Operating Systems, the other fundamental
abstraction being files." A <em>process</em> is a program in
execution. It consists of the executing program code, a set of
resources such as open files, internal kernel data, an address
space, one or more threads of execution and a data section
containing global variables.</p>

<h3>Process Descriptors</h3>

<p>Each process has <em>process descriptors</em> associated with it. These
hold the information used to keep track of a process in memory.  Among the
various pieces of information stored about a process are its PID, state,
parent process, children, siblings, processor registers, list of open files
and address space information.</p>

<p>The Linux kernel uses a circular doubly-linked list of <tt>struct
task_struct</tt>s to store these process descriptors.  This structure is
declared in <i>linux/sched.h</i>. Here are a few fields from kernel
2.6.15-1.2054_FC5, starting at line 701:</p>

<pre class="code">
    701 struct task_struct {
    702         volatile long state;    /* -1 unrunnable, 0 runnable, &gt;0 stopped */
    703         struct thread_info *thread_info;
     .
     .
    767         /* PID/PID hash table linkage. */
    768         struct pid pids[PIDTYPE_MAX];
     .
     .
    798         char comm[TASK_COMM_LEN]; /* executable name excluding path
</pre>
<!-- 20061129 dsrich - Deleted line numbers from all other listings 
Left them here to give the flavor of how much was left out -->

<p>The first line of the structure defines the field <tt>state</tt>
as <tt>volatile long</tt>. This variable is used to keep track of
the execution state of the process, defined by the following
macros:</p>

<pre class="code">
#define TASK_RUNNING            0
#define TASK_INTERRUPTIBLE      1
#define TASK_UNINTERRUPTIBLE    2
#define TASK_STOPPED            4
#define TASK_TRACED             8
/* in tsk-&gt;exit_state */
#define EXIT_ZOMBIE             16
#define EXIT_DEAD               32
/* in tsk-&gt;state again */
#define TASK_NONINTERACTIVE     64
</pre>

<p>The <strong>volatile</strong> keyword is worth noting - see
<a href=
"http://www.kcomputing.com/volatile.html">http://www.kcomputing.com/volatile.html</a>
for more information.</p>

<h3>Linked Lists</h3>

<p>Before we look at how tasks/processes (we will use the two words
as synonyms) are stored by the kernel, we need to understand how
the kernel implements circular linked lists. The implementation
that follows is a standard that is used across all the kernel sources.
The linked list is declared in <i>linux/list.h</i> and the data
structure is simple:</p>

<pre class="code">
 struct list_head {
         struct list_head *next, *prev;
 };
</pre>

<p>This file also defines several ready-made macros and functions
which you can use to manipulate linked lists. This standardizes the
linked list implementation to prevent people "reinventing the
wheel" and introducing new bugs.</p>

<p>Here are some kernel linked list references:</p>

<ul>
<li>Suman Adak has an excellent entry in his blog at <a href=
"http://sumanadak.blogspot.com/2006/09/linux-kernel-linked-list.html">
this link</a></li>

<li>Linux kernel source: &lt;include/linux/list.h&gt;, &lt;include/linux/sched.h&gt;</li>

<li>"Linux Kernel Development", by Robert Love (Appendix A)</li>

<li><a href=
"http://www.win.tue.nl/~aeb/linux/lk/lk-2.html">http://www.win.tue.nl/~aeb/linux/lk/lk-2.html</a>
</li>
</ul>

<h3>The Kernel Task List</h3>

<p>Let us now see how the linux kernel uses circular doubly-linked
lists to store the records of processes. Searching for <tt>struct
list_head</tt> inside the definition of <tt>struct task_struct</tt>
gives us:</p>

<pre>
struct list_head tasks;
</pre>

<p>This line shows us that the kernel is using a circular linked
list to store the tasks. Thsi means we can use the standard kernel
linked list macros and functions to traverse through the complete
task list.</p>

<p><i>init</i> is the "mother of all processes" on a
Linux system. Thus it is represented at the beginning of the list,
although strictly speaking there is no head since this is a
<b>circular</b> list. The <i>init</i> task's process descriptor is
statically allocated:</p>

<pre class="code">
extern struct task_struct init_task;
</pre>

<p>The following shows the linked list representation of processes
in memory:</p>

<p><img src="misc/saha/l-list.png" alt="Linked List Figure">
</p>
<!-- 20061128 dsrich - Redrew artwork -->

<p>Several other macros and functions are available to help us
traverse this list:</p>

<p><tt>for_each_process()</tt> is a macro which iterates over the
entire task list. It is defined as follows in linux/sched.h:</p>

<pre class="code">
#define for_each_process(p) \
        for (p = &amp;init_task ; (p = next_task(p)) != &amp;init_task ; )
</pre>

<p><tt>next_task()</tt> is a macro defined in linux/sched.h which
returns the next task in the list:</p>

<pre class="code">
#define next_task(p)    list_entry((p)-&gt;tasks.next, struct task_struct, tasks)
</pre>

<p><tt>list_entry()</tt> is a macro defined in linux/list.h:</p>

<pre>
/*
 * list_entry - get the struct for this entry
 * @ptr:        the &amp;struct list_head pointer.
 * @type:       the type of the struct this is embedded in.
 * @member:     the name of the list_struct within the struct.
 */
#define list_entry(ptr, type, member) \
        container_of(ptr, type, member)
</pre>

<p>The macro <tt>container_of()</tt> is defined as follows:</p>

<pre>
#define container_of(ptr, type, member) ({                      \
        const typeof( ((type *)0)-&gt;member ) *__mptr = (ptr);    \
        (type *)( (char *)__mptr - offsetof(type,member) );})
</pre>
<!-- 
<p>The purpose of this macro is that it returns the inode number of
the node.</p>
 -->
<!-- 20061129 dsrich - inode?  this is not a file system...? -->

<p>Thus if we can traverse through the entire task list we can have
all the processes running on the system. This can be done with the
macro for_each_process(task) , where task is a pointer of struct
task_struct type. Here is an example kernel module, from <em>Linux
Kernel Development</em>:</p>
<!-- 20061129 dsrich - wonder which kernel version this is for? -->

<pre class="code">
    /* ProcessList.c 
    Robert Love Chapter 3
    */
    #include &lt; linux/kernel.h &gt;
    #include &lt; linux/sched.h &gt;
    #include &lt; linux/module.h &gt;

    int init_module(void)
    {
    struct task_struct *task;
    for_each_process(task)
    {
    printk("%s [%d]\n",task-&gt;comm , task-&gt;pid);
    }
   
    return 0;
    }
   
    void cleanup_module(void)
    {
    printk(KERN_INFO "Cleaning Up.\n");
    }
</pre>

<p>The <tt>current</tt> macro is a link to the process descriptor
(a pointer to a <tt>task_struct</tt>)of the currently executing
process. How <tt>current</tt> achieves its task is architecture
dependent. On an x86 this is done by the function
<tt>current_thread_info()</tt> in <tt>asm/thread_info.h</tt></p>

<pre class="code">
   /* how to get the thread information struct from C */
   static inline struct thread_info *current_thread_info(void)
   {
           struct thread_info *ti;
           __asm__("andl %%esp,%0; ":"=r" (ti) : "0" (~(THREAD_SIZE - 1)));
           return ti;
   }
</pre>

<p>Finally <tt>current</tt> dereferences the <tt>task</tt> member
of the <tt>thread_info</tt> structure which is reproduced below
from <tt>asm/thread_info.h</tt> by
<tt>current_thread_info()-&gt;task;</tt></p>

<pre class="code">
   struct thread_info {
           struct task_struct      *task;          /* main task structure */
           struct exec_domain      *exec_domain;   /* execution domain */
           unsigned long           flags;          /* low level flags */
           unsigned long           status;         /* thread-synchronous flags */
           __u32                   cpu;            /* current CPU */
           int                     preempt_count;  /* 0 =&gt; preemptable, &lt;0 =&gt; BUG */
   
   
           mm_segment_t            addr_limit;     /* thread address space:
                                                      0-0xBFFFFFFF for user-thread
                                                      0-0xFFFFFFFF for kernel-thread
                                                   */
           void                    *sysenter_return;
           struct restart_block    restart_block;
   
           unsigned long           previous_esp;   /* ESP of the previous stack in case
                                                      of nested (IRQ) stacks
                                                   */
           __u8                    supervisor_stack[0];
   };
</pre>
<!--<p>I did wonder a bit about why the current process
descriptor is obtained from the <tt>thread_info</tt> structure and I
reasoned to myself that since a thread is a unit of dispatch so the
current process information is obviously going to be obtained from
the currently executing thread.</p>-->
<!-- 20061129 dsrich - Hunh? -->

<p>Using the <tt>current</tt> macro and <tt>init_task</tt> we can
write a kernel module to trace from the current process back to
<i>init</i>.</p>

<pre class="code">
/*
Traceroute to init
   traceinit.c
Robert Love Chapter 3
*/
  #include &lt; linux/kernel.h &gt;
  #include &lt; linux/sched.h &gt;
  #include &lt; linux/module.h &gt;
 
  int init_module(void)
  {
  struct task_struct *task;
  
   for(task=current;task!=&amp;init_task;task=task-&gt;parent)
   //current is a macro which points to the current task / process
   {
   printk("%s [%d]\n",task-&gt;comm , task-&gt;pid);
   }
  
   return 0;
   }
   
   void cleanup_module(void)
   {
   printk(KERN_INFO "Cleaning up 1.\n");
   }
</pre>

<p>Well, we have just started in our quest to learn about one of
the fundamental abstractions of a linux system &mdash; the process.
In (possible) future extensions of this, we shall take a look at several
others. 
</p>

<p>
'Till then, Happy hacking!
</p>

<h3>Other Resources:</h3>

<ul>
<li><a href="http://tldp.org/LDP/lkmpg/2.6/html/index.html">The
Linux Kernel Module Programming Guide</a> for 2.6.x kernels</li>
<li>Makefile used to compile the kernel modules:</li>
</ul>

<pre>
     obj-m +=ProcessList.o
     obj-m +=traceinit.o
     all:
             make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules
     
     clean:
             make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean
</pre>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:133/saha.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<hr>
<p>
<img align="left" alt="Bio picture" src="../gx/authors/saha.jpg" class="bio">
</p>

<p>
<em>

The author is a 3rd year Computer Engineering Undergraduate at Haldia
Institute of Technology, Haldia. His interests include Network Protocols,
Network Security, Operating systems, and Microprocessors. He is a Linux fan
and loves to hack the Linux kernel.

</em>

</p>
<br clear="all">


<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/saha.html">Amit Saha</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 133 of Linux Gazette, December 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="tag"></a>
<h1>The Monthly Troubleshooter: The USB Subsystem</h1>
<p id="by"><b>By <A HREF="../authors/tag.html">The Answer Gang</A></b></p>


</b>
</p>


<p>
<p class="editorial">
<strong>From the Editor's Desk</strong><br>
Once again, it is time for The Answer Gang's free-for-all - The Monthly
Troubleshooter. Just as a reminder (and perhaps as a bit of stimulation for
future topics), The Troubleshooter begins as a post sent to <a
href="mailto:tag@lists.linuxgazette.net">The Answer Gang</a> in order to create
discussion on a specific topic - one that will hopefully be interesting and
educational to our readers - and consists of a "brain dump" (i.e., a
summary of the author's knowledge) on that topic. As is usually the case,
other Gangsters jump in and contribute their own comments, clarifications,
and corrections - and the result is eventually published here, with the TAG
byline.
</p>

<p class="editorial">
The important thing to note here is that the Troubleshooter
<strong>requires</strong> that initial brain dump: without it, there's no
discussion, no conversation, no new perspectives on what may be somewhat
outdated knowledge. Without it, there's no Monthly - or any -
Troubleshooter. Dear readers... if you are well-versed in some facet of
Linux and believe that a discussion of it would benefit others,
<strong>please</strong> do write it up and send it to <a
href="mailto:tag@lists.linuxgazette.net">TAG</a> with "Monthly Troubleshooter:
&lt;topic&gt;" as the subject. You'd be helping your community, educating
other Linux users, and perhaps learning a few things yourself. I look
forward to hearing from you.<br>
 -- Ben Okopnik, Editor-in-Chief
</p>

<hr>

<h2>The Basics of USB</h2>
<p>
USB generally tends to be a trouble-free area of Linux: most modern distros
handle it very well, and the degree to which it's become automated is very
impressive (kudos to all the people involved - especially from those of us
who remember the early days!) However, when it does break, troubleshooting
can be rather difficult: there are a number of pieces that all have to work
together. Even more problematic, <strong>which</strong> pieces have to work
in <strong>what</strong> situation varies...  and not all of these have
'usb' in the name.
</p>

<p>
With that in mind, let's take a look at what happens in some USB-related
situations - including how the individual pieces break, and what can be
done about them in the rare case when they do.
</p>


<h3>Inserting a USB pen-drive</h3>
<p>
So, what actually happens when we grab one of those ubiquitous pen-drive
gadgets and insert it into a USB port? Let's watch the log (by running
'tail -f /var/log/messages') as we plug in and find out.
</p>

<pre class="code">
Sep 17 19:58:47 Fenrir kernel: usb 4-1: new high speed USB device using ehci_hcd and address 3
Sep 17 19:58:47 Fenrir kernel: usb 4-1: Product: Geek Squad
Sep 17 19:58:47 Fenrir kernel: usb 4-1: Manufacturer: SanDisk Corporation
Sep 17 19:58:47 Fenrir kernel: usb 4-1: SerialNumber: SNDK14050503CBF08502
Sep 17 19:58:47 Fenrir kernel: usb 4-1: configuration #1 chosen from 1 choice
Sep 17 19:58:47 Fenrir kernel: scsi1 : SCSI emulation for USB Mass Storage devices
Sep 17 19:58:47 Fenrir usb.agent[4021]:      usb-storage: already loaded
Sep 17 19:58:52 Fenrir kernel:   Vendor:           Model: Geek Squad        Rev: 0.2 
Sep 17 19:58:52 Fenrir kernel:   Type:   Direct-Access                      ANSI SCSI revision: 02
Sep 17 19:58:52 Fenrir kernel: SCSI device sda: 2001888 512-byte hdwr sectors (1025 MB)
Sep 17 19:58:52 Fenrir kernel: sda: Write Protect is off
Sep 17 19:58:52 Fenrir kernel: SCSI device sda: 2001888 512-byte hdwr sectors (1025 MB)
Sep 17 19:58:52 Fenrir kernel: sda: Write Protect is off
Sep 17 19:58:52 Fenrir kernel:  sda:&lt;7&gt;usb-storage: queuecommand called
Sep 17 19:58:52 Fenrir kernel:  sda1
Sep 17 19:58:52 Fenrir kernel: sd 1:0:0:0: Attached scsi removable disk sda
Sep 17 19:58:53 Fenrir scsi.agent[4058]:      sd_mod: loaded successfully (for disk)
</pre>

<p>
That's a lot of info... fortunately, it's mostly self-explanatory.
</p>

<p>
The fact may not be all that clearly visible here, since it's all lumped
under "kernel:" messages, but - the 'hotplug' system detected a change on
one of the ports that it was watching. After the initial handshake, which
gave it a bunch of data, it assigned address '3' to the device (these
device numbers are sequential: the last USB device I used, which just
happened to be the same pen-drive, got a '2'.) It then logged a bunch of
human-readable data telling me what the device reported itself to be,
loaded any required modules that had not yet been loaded, and attached the
device via the appropriate driver (i.e., created an access point for it in
the file system) to a "special" file in the "/dev" directory, at
"/dev/sda1". This, in turn, allows us to mount the device on a directory
in our file system in the usual way.
</p>


<h3>Famous Last Words ("What Could Possibly Go Wrong?")</h3>
<p>
If the "hotplug" system doesn't work, the game is over before it even
starts: no detection means no device identification means no module
loading means no driver installation means no mounting. End of game, thank
you for playing. So, what can we do if there are no messages whatsoever in
the log no matter how frantically we fiddle and frob the USB dongle?
</p>

<p>
First, check to see that "hotplug" is installed on your system. In
Debian, for example, the package system is easily queried:
</p>

<pre class="code">
ben@Fenrir:~$ dpkg -l hotplug
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Installed/Config-files/Unpacked/Failed-config/Half-installed
|/ Err?=(none)/Hold/Reinst-required/X=both-problems (Status,Err: uppercase=bad)
||/ Name                       Version                    Description
+++-==========================-==========================-=====================
ii  hotplug                    0.0.20040329-25            Linux Hotplug Scripts
</pre>

<p>
In this case, "hotplug" is fully installed. The next question is, has
hotplug support been compiled into the kernel?
</p>

<pre class="code">
ben@Fenrir:~$ ls -l /proc/sys/kernel/hotplug
-rw-r--r-- 1 root root 0 2006-09-17 20:32 /proc/sys/kernel/hotplug
</pre>

<p>
Yep, the entry for it exists in "/proc". Next, is it running? Well...
the problem is that 'hotplug' doesn't really have a daemon in the
classic sense - it's integrated into the driver core in the kernel - so
there's nothing to check for in the process table. What to do, what to
do... oh, it's simple - we'll just start the system manually, no harm in
that.
</p>

<pre class="code">
ben@Fenrir:~$ su -c '/etc/init.d/hotplug start'
Password: 
Starting hotplug subsystem:
   pci     
     intel-agp: already loaded
     uhci-hcd: loaded successfully
     uhci-hcd: already loaded
     uhci-hcd: already loaded
     ehci-hcd: loaded successfully
     snd-intel8x0: already loaded
     ignoring pci display device 01:00.0
     b44: already loaded
     ipw2200: already loaded
     yenta_socket: already loaded
     ohci-hcd: loaded successfully
     ohci-hcd: already loaded
   pci      [success]
   usb     
     usb-storage: already loaded
     cdc-acm: already loaded
   usb      [success]
   isapnp  
   isapnp   [success]
   ide     
   ide      [success]
   input   
   input    [success]
   scsi    
     sd_mod: loaded successfully (for disk)
   scsi     [success]
done.
</pre>
Your list of modules will almost certainly be different; the important
thing is that you see a list of modules loading under the 'pci', 'usb',
and [possibly, depending on what you've compiled in your kernel] 'scsi'
subheadings.
</p>

<p>
At this point, your basic hotplug system should be OK.
</p>


<h3>USBFS</h3>
<p>
Something that comes in very useful when troubleshooting USB is the 'usbfs'
virtual file system. To get access to it, compile this option into the
kernel (CONFIG_USB_DEVICEFS=y) and list it in '/etc/fstab' (the relevant
line reads "none /proc/bus/usb usbfs noauto 0 0", and it is loaded by the
kernel when the USB subsystem is detected.) The result is a series of
entries (directories) in "/proc/bus/usb", one for each detected device plus
a "devices" file containing human-readable descriptions. With this, it's
very easy to tell if your system recognizes a given USB device or not - and
if you end up with some truly strange USB device that isn't listed in the
hotplug system's device database, you can even create your own usermap for
it in "/etc/hotplug/usb/" (the necessary 'match_flags', 'idVendor', and
'idProduct' information is shown in the "devices" file.) What more could
you possibly want?
</p>


<h3>Modules</h3>
<p>
So, we've detected the device and identified it... but let's say that
there's <em>still</em> no joy in Mudville. In the most common scenario, the
log would look something like this:
</p>

<pre>
Sep 17 19:43:08 Fenrir kernel: usb 4-1: new high speed USB device using ehci_hcd and address 2
Sep 17 19:43:08 Fenrir kernel: usb 4-1: Product: Geek Squad
Sep 17 19:43:08 Fenrir kernel: usb 4-1: Manufacturer: SanDisk Corporation
Sep 17 19:43:08 Fenrir kernel: usb 4-1: SerialNumber: SNDK14050503CBF08502
Sep 17 19:43:08 Fenrir kernel: usb 4-1: configuration #1 chosen from 1 choice
Sep 17 19:43:08 Fenrir kernel: scsi0 : SCSI emulation for USB Mass Storage devices
Sep 17 19:43:09 Fenrir usb.agent[3687]:      usb-storage: already loaded
Sep 17 19:43:13 Fenrir kernel:   Vendor:           Model: Geek Squad        Rev: 0.2
Sep 17 19:43:13 Fenrir kernel:   Type:   Direct-Access                      ANSI SCSI revision: 02
Sep 17 19:43:13 Fenrir scsi.agent[3730]:      sd_mod: can't be loaded (for disk)
</pre>

<p>
<em><strong>Whoops!</strong></em> What do you mean, "can't be loaded"? Oh,
right, right... there's still the small matter of having the appropriate
module. USB is only the interface method; at the end of all that
connecting, the important bit is what device we're connecting <strong>TO</strong>.
In the case of the pen-drive, it's fairly common to have it show up as
"/dev/sda1" or "/dev/sdb1" (or, less commonly, "/dev/sda") - in any case,
it looks like a SCSI device, which means that we need to have SCSI support
(and specifically SCSI disk support) in the kernel. It's preferable to have
the latter compiled as a module, so the relevant kernel options look like
this:
</p>

<pre class="code">
# SCSI device support
#
CONFIG_SCSI=y

...

# SCSI support type (disk, tape, CD-ROM)
#
CONFIG_BLK_DEV_SD=m
</pre>

<p>
The above is, of course, highly variable and dependent on the device
you're inserting.
</p>


<h3>And Then What?</h3>
<p>
Assuming that you have your "/etc/fstab" properly configured - i.e., you
have entries that look something like this:
</p>

<pre class="code">
ben@Fenrir:~$ grep sd /etc/fstab
/dev/sda   /mnt/sda   vfat  user,noauto,gid=103,rw,fmask=113   0   0
/dev/sda1  /mnt/sda1  vfat  user,noauto,gid=103,rw,fmask=113   0   0
/dev/sdb   /mnt/sdb   vfat  user,noauto,gid=103,rw,fmask=113   0   0
/dev/sdb1  /mnt/sdb1  vfat  user,noauto,gid=103,rw,fmask=113   0   0
/dev/sdc   /mnt/sdc   vfat  user,noauto,gid=103,rw,fmask=113   0   0
</pre>

<p>
 - the rest is very simple:
</p>

<pre>
ben@Fenrir:~$ mount /mnt/sda1
ben@Fenrir:~$ mount|grep sda1
/dev/sda1 on /mnt/sda1 type vfat (rw,noexec,nosuid,nodev,gid=103,fmask=113,user=ben)
</pre>

<h3>Wrap-up</h3>
<p>
As I mentioned originally, the USB subsystem in Linux is well-configured
and as automatic as anything related to computers can hope to be;
usually, it's no trouble at all. However, for those few times when it
doesn't behave quite right, I hope I've given you some good tools for
getting it back in shape. Good luck!
</p>

<p>
-- <br>
<strong>* Ben Okopnik * Editor-in-Chief, Linux Gazette * http://LinuxGazette.NET *</strong>
</p>
<hr>

<p>
[Kapil Hari Paranjape] Hello,
</p>

<pre>
On Sun, 17 Sep 2006, Benjamin A. Okopnik wrote:
&gt;
&gt; The Monthly Troubleshooter: The USB Subsystem
</pre>

<p>
In this context you might find the following post interesting.<br>
<a href="http://www.infodrom.org/~joey/log/?200609102259">http://www.infodrom.org/~joey/log/?200609102259</a><br>
The rest is out-of-band for the USB subsystem.
</p>

<p>
Of course, the question does arise: How will people learn about
GNU and Linux once everything starts working smoothly? I can
certainly vouch for the fact that many of the things I learnt about
computers, I learnt <strong>because</strong> the computer was not doing things the
way I wanted it to.
</p>

<pre>
From Personal Experience:

	There are two types of mathematics books.

        There are those where the author has taken great pains to
        construct the most illuminating exercises for the student
        to solve at the end of each chapter.

	... And then there are the books where there are mistakes
	<strong>in</strong> the text.
</pre>

<p>
[Thomas Adam]
</p>

<pre>
Kapil Hari Paranjape &lt;kapil at imsc.res.in&gt; wrote:
&gt; 
&gt; Of course, the question does arise: How will people learn about
&gt; GNU and Linux once everything starts working smoothly? I can
&gt; certainly vouch for the fact that many of the things I learnt about
&gt; computers, I learnt <strong>because</strong> the computer was not doing things the
&gt; way I wanted it to.
</pre>

<p>
They don't need to worry about that anymore.  With the use of GNOME and
KDE, all of those worries are hidden behind flashy buttons and dialogue
windows.
</p>

<p>
[Ben Okopnik]
<p>

<pre>
Kapil Hari Paranjape wrote:
&gt; 
&gt; Of course, the question does arise: How will people learn about
&gt; GNU and Linux once everything starts working smoothly?
</pre>

<p>
Well... as reliable and tough as Linux software tends to be (after it's
had all the bugs beaten out of it by insane^Whyper-focused^Wdetermined
users, it doesn't <strong>dare</strong> do anything else), there are still hardware
failures, new or odd peripherals [1], strange USB configurations, and
experimentation. The thing that I appreciate about the 'hotplug' system
in this regard is how <em>open</em> (whodathunk it?) the system is to hacking
in new bits - that's a <strong>good</strong> piece of design, especially considering
how byzantine the ins and outs of that system used to be. A kernel-based
driver with a shell-script "interface" is a very cool idea.
</p>

<p>
[1] The first portable MP3 player I had was a Samsung Yepp - an odd
gadget that looked like a flattened egg and could store something like
32MB. Someone had written a piece of software that would perform the
necessary functions for it, but getting it connected to my machine so
that the software could read it was quite the fraught process. I ended
up studying the 'hotplug' system (mostly by reading the scripts in
'/etc/hotplug'), and writing a usermap and a connector script for it,
both of which went into '/etc/hotplug/usb':
</p>

<p>
(yepp.usermap)
</p>

<pre class="code">
# usb module         match_flags idVendor idProduct bcdDevice_lo bcdDevice_hi bDeviceClass bDeviceSubClass bDeviceProtocol bInterfaceClass bInterfaceSubClass bInterfaceProtocol driver_info
yepp                 0x0003      0x04e8   0x5a03    0x0000       0x0000       0x00         0x00            0x00            0x00            0x00               0x00               0x00000000
</pre>

<p>
(yepp)
</p>

<pre class="code">
#!/bin/sh
. /etc/hotplug/hotplug.functions
mesg setting permissions of $DEVICE
chgrp staff $DEVICE
chmod g+w $DEVICE
</pre>
The info for the usermap came from the USBFS device descriptions, as I
mentioned in the article. From then on, all I ever had to do was plug
the Yepp's cable into a USB port and fire up the software.
</p>

<pre>
&gt; I can
&gt; certainly vouch for the fact that many of the things I learnt about
&gt; computers, I learnt <strong>because</strong> the computer was not doing things the
&gt; way I wanted it to.
</pre>

<p>
[nod] That's exactly what I'm trying to replicate in the Monthly
Troubleshooter series - the (fortunately) rare bits of experience that I
hope our readers will never run into, but will now have some clues on
handling if they ever do.
</p>

<p>
I'm also hoping that our readers who <em>have</em> successfully dealt with
problems in the various Linux subsystems, especially if it's happened more
than once (I am, of course, including everyone on this list) will write us
at <a
href="mailto:tag@lists.linuxgazette.net">tag@lists.linuxgazette.net</a> and
tell us about their solutions - preferably including the words "Monthly
Troubleshooter:" in the subject.  I really liked the discussion that
happened around the printer topic because other people had included their
experiences; as a result, I think that a lot of people will benefit from
that one.
</p>


<p>
<pre>
&gt; From Personal Experience:
&gt; 
&gt; 	There are two types of mathematics books.
&gt; 
&gt;         There are those where the author has taken great pains to
&gt;         construct the most illuminating exercises for the student
&gt;         to solve at the end of each chapter.
&gt; 
&gt; 	... And then there are the books where there are mistakes
&gt; 	<strong>in</strong> the text.
</pre>
</p>

<p>
[chuckle] Both types can be very educational, although in somewhat
different ways; the second type may require a brick wall and a strong
forehead. On the other hand, it does have the benefit (which the first
type lacks) of instilling the idea of checking <em>everything</em> - and that
even the reference material could be wrong, which is a lesson that can
come at a high cost if not learned early on.
<br>
<a href="http://www.readbookonline.net/readOnLine/2437/">http://www.readbookonline.net/readOnLine/2437/</a>
</p>


<p>
[Martin Hooper]
</p>

<pre>
On 20/09/2006 Benjamin A. Okopnik wrote:
&gt; 
&gt; <a href="http://www.readbookonline.net/readOnLine/2437/">http://www.readbookonline.net/readOnLine/2437/</a>
</pre>

<p>
I don't know if anyone else is using Firefox to view that page 
but it doesn't work.
</p>

<p>
I'm guessing that if I use IE then it would...
</p>


<p>
[Ben Okopnik]
</p>

<pre>
Martin Hooper wrote:
&gt; On 20/09/2006 Benjamin A. Okopnik wrote:
&gt; 
&gt; &gt; <a href="http://www.readbookonline.net/readOnLine/2437/">http://www.readbookonline.net/readOnLine/2437/</a>
&gt; 
&gt; I don't know if anyone else is using Firefox to view that page 
&gt; but it doesn't work.
</pre>

<p>
Works fine in Mozilla, Firefox, dillo, w3m, and Lynx.
</p>

<pre>
ben@Fenrir:~$ mozilla-suite -v
Mozilla 1.7.13, Copyright (c) 2003-2004 mozilla.org, build 2006080919
ben@Fenrir:~$ firefox -v
Mozilla Firefox 1.5.0.6, Copyright (c) 1998 - 2006 mozilla.org
ben@Fenrir:~$ dillo -v
Dillo 0.8.5-i18n-misc
</pre>

<pre>
&gt; I'm guessing that if I use IE then it would...
</pre>

<p>
Have you tried scrolling down? The text doesn't start until well down
the page.
</p>

<p>
[Martin Hooper]
</p>

<pre>
Benjamin A. Okopnik wrote:
&gt; Have you tried scrolling down? The text doesn't start until well down
&gt; the page.
</pre>

<p>
Ah yes - Got there now!! Just that there's a lot of white space 
between the top of the page and the content.. ;)
</p>



<p>
[Ben Okopnik]
</p>

<pre>
On Wed, Sep 20, 2006 at 01:41:27PM +0100, Thomas Adam wrote:
&gt; Kapil Hari Paranjape &lt;kapil at imsc.res.in&gt; wrote:
&gt; &gt; 
&gt; &gt; Of course, the question does arise: How will people learn about
&gt; &gt; GNU and Linux once everything starts working smoothly? I can
&gt; &gt; certainly vouch for the fact that many of the things I learnt about
&gt; &gt; computers, I learnt <strong>because</strong> the computer was not doing things the
&gt; &gt; way I wanted it to.
&gt; 
&gt; They don't need to worry about that anymore.  With the use of GNOME and
&gt; KDE, all of those worries are hidden behind flashy buttons and dialogue
&gt; windows.
</pre>

<p>
Wind0ws? Did somebody just mention Wind0ws? <img src="../gx/smile.png" alt=":)">
</p>

<p>
In my opinion, KDE and Gnome are very nice tools... but the intended use
for those tools has nothing to do with administering or maintaining
Linux. It has to do with easing people from the Wind0ws world past the
oh-so-terrifying idea that another OS will slit their throats, rape
their Chihuahuas, and run away to Monaco with their money - and into
using the same applications in pretty much the same way as they always
have, marketing hype to the contrary notwithstanding.
</p>

<p>
It's possible to debate the long-term usefulness of this approach. I,
for example, have strong reservations about it maintaining the
irresponsible mindset that is trained into many Wind0ws users by the
shiny, glitzy interface ("just put gas into it, and leave Complicated
Stuff like checking the oil to the professional mechanics!") - this is
what allows viruses, etc. to propagate - but there are many people whose
only reason for switching to Linux was the ability to "keep doing the
same thing as before". Perhaps the question is, would it be better to
have a huge slew of ignorant users on vulnerability-riddled platforms,
or to have them using an OS which is well-designed and stable? The
concerns and the answers regarding the uses of KDE, etc. are not
mutually exclusive, but rather orthogonal.
</p>

<p>
[Thomas Adam]
</p>

<pre>
"Benjamin A. Okopnik" &lt;ben at linuxgazette.net&gt; wrote:
&gt; In my opinion, KDE and Gnome are very nice tools... but the intended
&gt; use for those tools has nothing to do with administering or
&gt; maintaining Linux. It has to do with easing people from the Wind0ws
&gt; world past the oh-so-terrifying idea that another OS will slit their
&gt; throats, rape their Chihuahuas, and run away to Monaco with their
&gt; money - and into using the same applications in pretty much the same
&gt; way as they always have, marketing hype to the contrary
&gt; notwithstanding.
</pre>

<p>
That is as maybe -- and whether or not KDE and GNOME <strong>are</strong> out on a
mission to wean people using Windows to Linux, the fact remains that
with GNOME (especially in Ubuntu, for example), the de facto
functionality <strong>is</strong> to automount and run Nautilus for any device that
you can shove into one of the many orifices your computer comes with
nowadays; USB included. :P
</p>

<p>
Whilst that could be deemed appropriate for someone new to Linux, it
could also be considered one of convenience for the more experienced
user.  Of course, what it doesn't do is allow you to easily see what is
happening behind the scenes.  Maybe in some instances this is a good
thing; I am not sure whether it is or not at the moment.  
</p>

<p>
But the whole USB subsystem is getting much better than it used to be.
By that, I really mean hotplug.  It used to be an abomination a few
years ago; using some form of black magic (tm) to somehow select the
devices, etc.  But it is by no means perfect.  I think one of the
biggest issues that throws people is the lack of consistency between
the device mappings between unplugging and replugging the devices --
especially if it is a mass-storage device (c.f. /dev/sda1, /dev/sda2,
etc.)  This gets slightly better if you're one of these people who
subscribes to the whole "udev" experience.  But as I am known for
making my views all too clear about why I hate udev, I do not use
it.  :P
</p>

<pre>
&gt; It's possible to debate the long-term usefulness of this approach. I,
&gt; for example, have strong reservations about it maintaining the
&gt; irresponsible mindset that is trained into many Wind0ws users by the
&gt; shiny, glitzy interface ("just put gas into it, and leave Complicated
&gt; Stuff like checking the oil to the professional mechanics!") - this is
&gt; what allows viruses, etc. to propagate - but there are many people
&gt; whose only reason for switching to Linux was the ability to "keep
&gt; doing the same thing as before". Perhaps the question is, would it be
</pre>

<p>
I'm not going to rehash this one -- around issue #96 onwards I
published several exchanges like the one here for 'Windows Defectors'.
So I'll point any readers to those.  Plus it saves me typing.  <img src="../gx/smile.png" alt=":)">
</p>

<p>
[Pedro Fraile P&eacute;rez] I am running Ubuntu Dapper here, and the USB subsystem
works as is to be expected, only the package 'hotplug' does not exist any
more. In fact, it is not to be found among the repositories. I remember I
was confused for quite some time when I upgraded from Breezy, and found out
that most of my /etc/hotplug* was gone, there was no /sbin/hotplug, and
some things were not working any more ... until I (correctly) installed
udev. Your message has finally impulsed me to try to find out for sure what
happened, and the answer seems to lie withing these threads (please correct
me if I am wrong)
</p>

<p>
<a href="http://lists.debian.org/debian-devel/2005/08/msg01454.html">http://lists.debian.org/debian-devel/2005/08/msg01454.html</a><br>
<a href="http://lists.debian.org/debian-devel/2005/09/msg00732.html">http://lists.debian.org/debian-devel/2005/09/msg00732.html</a>
</p>

<p>
One thing I am still missing is the knowledge on how to troubleshoot
the combination udev / hal / sysfs (Does hal has something to do with
the other two?). I have minor glitches with a couple of things: an USB
stick that is automounted on a back slot of a Dell box, but not on a
front one - and no hardware problem here, for sure -, or a DVD writer
that takes all the /dev/{cdr*,dvd*} symlinks, instead of leaving
the /dev/cdrom to the other CD reader. In the all days, I would have
modified some script under /etc/hotplug.d/ to log some information on a
temporary file, but I do not know of a similar strategy with udev. I
have to admit that I have not invested tons of time on it though ...
</p>

<pre>
&gt; Something that comes in very useful when troubleshooting USB is the
&gt; 'usbfs' virtual file system. To get access to it, compile this option
&gt; into the kernel (CONFIG_USB_DEVICEFS=y) and list it in
&gt; '/etc/fstab' (the relevant line reads "none /proc/bus/usb usbfs
&gt; noauto 0 0", and it is loaded by the kernel when the USB subsystem is
&gt; detected.) 
</pre>

<p>
No usbfs entry in my /etc/fstab either, but procbususb
gets mounted on /proc/bus/usb at boot anyway ...
</p>

<pre>
&gt; Assuming that you have your "/etc/fstab" properly configured - i.e.,
&gt; you have entries that look something like this:
&gt; 
&gt; ``
&gt; ben@Fenrir:~$ grep sd /etc/fstab
&gt; /dev/sda   /mnt/sda   vfat  user,noauto,gid=103,rw,fmask=113   0   0
&gt; /dev/sda1  /mnt/sda1  vfat  user,noauto,gid=103,rw,fmask=113   0   0
&gt; /dev/sdb   /mnt/sdb   vfat  user,noauto,gid=103,rw,fmask=113   0   0
&gt; /dev/sdb1  /mnt/sdb1  vfat  user,noauto,gid=103,rw,fmask=113   0   0
&gt; /dev/sdc   /mnt/sdc   vfat  user,noauto,gid=103,rw,fmask=113   0   0
</pre>

<p>
Another difference here is the use of 'pmount'. From 'aptitude show
pmount':
</p>

<pre>
	Description: mount removable devices as normal user
</pre>

<p>
The net result being that (under gnome, at least) any removable media
gets mounted on an ad-hoc created /media/whatever with the right
user permissions, without any entry in fstab. Cannot say I dislike
it ...
</p>


<p>
[Ben Okopnik]
</p>

<pre>
On Thu, Sep 21, 2006 at 08:58:33AM +0100, Thomas Adam wrote:
&gt; "Benjamin A. Okopnik" &lt;ben at linuxgazette.net&gt; wrote:
&gt; &gt; In my opinion, KDE and Gnome are very nice tools... but the intended
&gt; &gt; use for those tools has nothing to do with administering or
&gt; &gt; maintaining Linux. It has to do with easing people from the Wind0ws
&gt; &gt; world past the oh-so-terrifying idea that another OS will slit their
&gt; &gt; throats, rape their Chihuahuas, and run away to Monaco with their
&gt; &gt; money - and into using the same applications in pretty much the same
&gt; &gt; way as they always have, marketing hype to the contrary
&gt; &gt; notwithstanding.
&gt; 
&gt; That is as maybe -- and whether or not KDE and GNOME <strong>are</strong> out on a
&gt; mission to wean people using Windows to Linux, the fact remains that
&gt; with GNOME (especially in Ubuntu, for example), the de facto
&gt; functionality <strong>is</strong> to automount and run Nautilus for any device that
&gt; you can shove into one of the many orifices your computer comes with
&gt; nowadays; USB included.  :P
</pre>

<p>
I'll have to install Gnome and try shoving a screwdriver into the fan
vent. The mounting procedure ought to be interesting, to say the least.
<img src="../gx/smile.png" alt=":)">
</p>

<pre>
&gt; I think one of the
&gt; biggest issues that throws people is the lack of consistency between
&gt; the device mappings between unplugging and replugging the devices --
&gt; especially if it is a mass-storage device (c.f. /dev/sda1, /dev/sda2,
&gt; etc.)
</pre>

<p>
Really? I actually have symlinks in my '/mnt' that are hard-wired to
specific devices:
</p>

<pre class="code">
r!ls -FAlS /mnt
total 36
drwxrwxr-x 2 root staff 4096 2005-11-22 16:19 hda1/
drwxr-xr-x 2 root root  4096 2005-11-22 16:09 hdc/
drwxr-xr-x 2 root root  4096 2005-11-22 16:09 sda/
drwxr-xr-x 2 root root  4096 2005-11-22 16:09 sda1/
drwxr-xr-x 2 root root  4096 2005-11-22 16:09 sdb/
drwxr-xr-x 2 root root  4096 2005-11-22 16:09 sdb1/
drwxr-xr-x 2 root root  4096 2006-04-26 13:28 sdc/
drwxr-xr-x 2 root root  4096 2005-11-22 16:09 sr0/
drwxr-xr-x 2 root root  4096 2004-05-10 20:26 test/
lrwxrwxrwx 1 root root     4 2005-11-22 16:10 olympus -&gt; sda1/
lrwxrwxrwx 1 root root     4 2005-11-22 16:19 puppy -&gt; hda1/
lrwxrwxrwx 1 root root     4 2005-11-22 16:12 sdcard -&gt; sdb1/
lrwxr-xr-x 1 root root     3 2005-12-08 12:31 dvd -&gt; sr0/
lrwxrwxrwx 1 root root     3 2005-11-22 16:11 dvd-scsi -&gt; sr0/
lrwxrwxrwx 1 root root     3 2005-11-22 16:11 flash -&gt; sdb/
</pre>

<p>
'olympus' (my digital camera), 'sdcard' (the SD card from my Palm
Pilot), and 'flash' (my USB thumb drive) are absolutely consistent in
the device names that they get assigned to.
</p>

<pre>
&gt; This gets slightly better if you're one of these people who
&gt; subscribes to the whole "udev" experience.  But as I am known for
&gt; making my views all too clear about why I hate udev, I do not use
&gt; it.  :P
</pre>

<p>
I've tried 'udev' at one point, and gave up on it - I don't recall why.
Perhaps I caught something from you via email. <img src="../gx/smile.png" alt=":)">
</p>

<p>
[Kapil Hari Paranjape]
</p>

<pre>
On Thu, 21 Sep 2006, Pedro Fraile P&eacute;rez wrote:
&gt; El Sun, 17 Sep 2006 21:47:54 -0400
&gt; "Benjamin A. Okopnik" &lt;ben at linuxgazette.net&gt; wrote:
&gt; &gt; 
&gt; &gt; The Monthly Troubleshooter: The USB Subsystem
&gt; &gt; =============================================
&gt; &gt; 
&gt; ... until I (correctly)
&gt; installed udev. Your message has finally impulsed me to try to find out
&gt; for sure what happened, and the answer seems to lie withing these
&gt; threads (please correct me if I am wrong)
&gt; 
&gt; <a href="http://lists.debian.org/debian-devel/2005/08/msg01454.html">http://lists.debian.org/debian-devel/2005/08/msg01454.html</a>
&gt; <a href="http://lists.debian.org/debian-devel/2005/09/msg00732.html">http://lists.debian.org/debian-devel/2005/09/msg00732.html</a>
</pre>

<p>
Indeed. This is a problem for all those udev-haters out there <img src="../gx/smile.png" alt=":)">
The udev and hotplug systems have been merged in Debian sid/etch and
also in Ubuntu (thank or revile Marco D'Itri as per your preference). 
</p>

<pre>
&gt; One thing I am still missing is the knowledge on how to troubleshoot
&gt; the combination udev / hal / sysfs (Does hal has something to do with
&gt; the other two?).
</pre>

<p>
Absolutely. HAL is the AI in the system <img src="../gx/smile.png" alt=":)">. To quote from the udev FAQ:
</p>

<pre>
Q: Can I use udev to automount a USB device when I connect it?
A: Technically, yes, but udev is not intended for this. All major distributions
   use HAL (<a href="http://freedesktop.org/wiki/Software_2fhal">http://freedesktop.org/wiki/Software_2fhal</a>) for this, which also
   watches devices with removable media and integrates the Desktop environment.
</pre>

<p>
   Alternatively, it is easy to add the following to fstab:<br>
     /dev/disk/by-label/PENDRIVE /media/PENDRIVE  vfat user,noauto 0 0
</p>

<p>
   This means that users can access the device with:<br>
     $mount /media/PENDRIVE<br>
   and doen't have to be root, but will get full permissions on the device.
   Using the persistent disk links (label, uuid) will always catch the
   same device regardless of the actual kernel name.
</p>

<pre>
&gt; I have minor glitches with a couple of things: an USB
&gt; stick that is automounted on a back slot of a Dell box, but not on a
&gt; front one - and no hardware problem here, for sure -,
</pre>

<p>
Actually this <strong>is</strong> probably a hardware problem as I discovered.
</p>

<p>
The problem is that there are two types of USB ports. Those that
supply suficient power and those that do not. If you have a device
which requires power to be supplied through the USB socket and you
connect to a USB port that does not supply power (or does not supply
enough of it) then the device will not work.
</p>

<p>
I found this out when I was trying to connect an external USB disk to
a Mac PowerBook (inappropriately named!). It turns out that the
PowerBook only has low/no power USB sockets and so the disk needs
external power in order to work (the disk happily had a socket for
such an adapter). In the process I also discovered why this disk had
ben behaving exactly as you described with another Intel-based
machine that had Front and Back USB ports.
</p>

<pre>
&gt; In the all days, I would have
&gt; modified some script under /etc/hotplug.d/ to log some information on a
&gt; temporary file, but I do not know of a similar strategy with udev. I
&gt; have to admit that I have not invested tons of time on it though ...
</pre>

<p>
Again quoting from the udev NEWS.Debian:
</p>

<pre>
  Scripts in /etc/dev.d/ and /etc/hotplug.d/ are not supported
  anymore unless the hotplugd.rules rules file is manually enabled.
     -- Marco d'Itri &lt;md at linux.it&gt;  Thu, 17 Aug 2006 14:40:34 +0200
</pre>

<p>
So if you have a recent sid/etch then you <strong>can</strong> enable the scripts
but its going to take some work.
</p>

<pre>
&gt; The net result being that (under gnome, at least) any removable media
&gt; gets mounted on an ad-hoc created /media/whatever with the right
&gt; user permissions, without any entry in fstab. Cannot say I dislike
&gt; it ...
</pre>

<p>
I think the problem is what-if. What if there is a device that I do
not want automounted? There is perhaps not an easy way to prevent
that from happening.
</p>


<p>
[Rick Moen]
</p>

<pre>
Quoting Kapil Hari Paranjape (kapil at imsc.res.in):
&gt; Absolutely. HAL is the AI in the system <img src="../gx/smile.png" alt=":)">. To quote from the udev FAQ:
&gt; 
&gt; Q: Can I use udev to automount a USB device when I connect it?
&gt; A: Technically, yes, but udev is not intended for this. All major
&gt; distributions use HAL (<a href="http://freedesktop.org/wiki/Software_2fhal">http://freedesktop.org/wiki/Software_2fhal</a>) for
&gt; this, which also watches devices with removable media and integrates
&gt; the Desktop environment.
</pre>

<p>
Ugh.  That's repulsive -- if only because of the dependency on glib 
(about which it's said "this dep will be dropped soon").  Something with
the smell of GNOME about it has no business getting anywhere near my
kernels.
</p>


<p>
[Kapil Hari Paranjape]
</p>

<pre>
On Thu, 21 Sep 2006, Rick Moen wrote:
&gt; 
&gt; Ugh.  That's repulsive -- if only because of the dependency on glib 
&gt; (about which it's said "this dep will be dropped soon").  Something with
&gt; the smell of GNOME about it has no business getting anywhere near my
&gt; kernels.
</pre>
</p>

<p>
One alternative is "usbmount" which specifically indicates:
</p>

<pre>
	USBmount is intended as a lightweight solution which is
	independent of a desktop environment. Users which would
	like an icon to appear when an USB device is plugged in
	should use the pmount and hal packages instead.
</pre>

<p>
There is also the more general purpose "am-utils" but using this when
one only wants to mounts USB sticks is perhaps excessive.
</p>


<p>
[Pedro Fraile P&eacute;rez]
</p>

<pre>
Kapil Hari Paranjape &lt;kapil at imsc.res.in&gt; escribi?:
&gt; 
&gt; On Thu, 21 Sep 2006, Pedro Fraile P?rez wrote:
&gt; 
&gt; &gt; I have minor glitches with a couple of things: an USB
&gt; &gt; stick that is automounted on a back slot of a Dell box, but not on a
&gt; &gt; front one - and no hardware problem here, for sure -,
&gt; 
&gt; Actually this <strong>is</strong> probably a hardware problem as I discovered.
&gt; 
&gt; The problem is that there are two types of USB ports. Those that
&gt; supply suficient power and those that do not. If you have a device
&gt; which requires power to be supplied through the USB socket and you
&gt; connect to a USB port that does not supply power (or does not supply
&gt; enough of it) then the device will not work.
</pre>

<p>
Hello Kapil,
</p>

<p>
That's a good piece of info, but I am afraid it is not my case. Under
several versions of Windows, the memory stick is mounted both in the
front and back slots, so there must be some kind of driver issue here.
</p>

<pre>
&gt; &gt; The net result being that (under gnome, at least) any removable
&gt; &gt; media gets mounted on an ad-hoc created /media/whatever with the
&gt; &gt; right user permissions, without any entry in fstab. Cannot say I
&gt; &gt; dislike it ...
&gt; 
&gt; I think the problem is what-if. What if there is a device that I do
&gt; not want automounted? There is perhaps not an easy way to prevent
&gt; that from happening.
</pre>

<p>
Yes, I agree. You can disable the automounting process for all
removable devices, but I have not yet found out how you can do it on a
per-device basis.
</p>


<p>
[Kapil Hari Paranjape]
</p>

<pre>
On Fri, 22 Sep 2006, Kapil Hari Paranjape wrote: (quoting from the udev FAQ)
&gt;    Alternatively, it is easy to add the following to fstab:
&gt;      /dev/disk/by-label/PENDRIVE /media/PENDRIVE  vfat user,noauto 0 0
&gt; 
&gt;    This means that users can access the device with:
&gt;      $mount /media/PENDRIVE
&gt;    and doen't have to be root, but will get full permissions on the device.
&gt;    Using the persistent disk links (label, uuid) will always catch the
&gt;    same device regardless of the actual kernel name.
</pre>

<p>
These instructions seem to work ...
	but you don't need udev to make this work!
</p>

<p>
When you make the file system give it a "label". Most filesystem
types (even DOS and Windows types like FAT and VFAT) allow you to
set a label. You can then mount the system by
</p>

<pre>
   	mount -L &lt;your label&gt; &lt;mount point&gt;
</pre>

<p>
Alternatively your fstab could contain entries like:
</p>
<pre>
	LABEL=DOST  /media/DOST  vfat  rw,user,noauto  0  0
	LABEL=LEAN  /media/LEAN  ext2  rw,user,noauto  0  0
</pre>

<p>
You can then mount the disks (as a user) with a command like:<br>
	mount /media/DOST
</p>

<p>
This doesn't work for those cameras that appear as USB memory devices
to your computer unless the manufacturer is kind enough to give the
device a label when it is formatted.
</p>

</p>

<p>
[Martin Hooper]
</p>

<pre>
On 29/09/2006 Kapil Hari Paranjape wrote:
&gt;        mount -L &lt;your label&gt; &lt;mount point&gt;
&gt; 
&gt; Alternatively your fstab could contain entries like:
&gt;     LABEL=DOST  /media/DOST  vfat  rw,user,noauto  0  0
&gt;     LABEL=LEAN  /media/LEAN  ext2  rw,user,noauto  0  0
</pre>

<p>
How do you create labels then??  I guess its an option to mkfs...
</p>

<p>
[Ben Okopnik]
</p>

<pre>
On Thu, Sep 21, 2006 at 09:16:57PM +0200, Pedro Fraile P?rez wrote:
&gt; 
&gt; One thing I am still missing is the knowledge on how to troubleshoot
&gt; the combination udev / hal / sysfs (Does hal has something to do with
&gt; the other two?).
</pre>

<p>
Hmmm, you've got me; I'm still using hotplug. Anybody else care to comment?
</p>

<pre>
&gt; &gt; Something that comes in very useful when troubleshooting USB is the
&gt; &gt; 'usbfs' virtual file system. To get access to it, compile this option
&gt; &gt; into the kernel (CONFIG_USB_DEVICEFS=y) and list it in
&gt; &gt; '/etc/fstab' (the relevant line reads "none /proc/bus/usb usbfs
&gt; &gt; noauto 0 0", and it is loaded by the kernel when the USB subsystem is
&gt; &gt; detected.) 
&gt; 
&gt; No usbfs entry in my /etc/fstab either, but procbususb
&gt; gets mounted on /proc/bus/usb at boot anyway ...
</pre>

<p>
Actually, given that the entry in my '/etc/fstab' says "noauto", I was
wondering about that. I used to mount it manually, but looking at it
now, it's clearly being mounted by the kernel - perhaps when USB support
gets loaded? It would have made sense to automate it, since it's such a
useful gadget. Looking at 'dmesg' output, there's nothing noting it... I
suspect that '/etc/fstab' line is no longer necessary.
</p>

<p>
[Thomas Adam]
</p>

<pre>
Benjamin A. Okopnik &lt;ben at linuxgazette.net&gt; wrote:
&gt; On Thu, Sep 21, 2006 at 09:16:57PM +0200, Pedro Fraile P?rez wrote:
&gt; &gt; 
&gt; &gt; One thing I am still missing is the knowledge on how to troubleshoot
&gt; &gt; the combination udev / hal / sysfs (Does hal has something to do
&gt; &gt; with the other two?).
&gt; 
&gt; Hmmm, you've got me; I'm still using hotplug. Anybody else care to
&gt; comment?
</pre>

<p>
HAL works by abstraction.  Essentially by the time HAL kicks in, it
will have already realised what the interface is that $DEVICE is
using.  So of course before that can happen, hotplug must have been
working to recognise the device.  It has to load the driver, manage
what's in /dev, and provide some mechanism of accessing it.
</p>

<p>
It's mounted, which of course means that applications such as GNOME can
then shunt a nice icon on its desktop for users to use.
</p>


<p>
[Kapil Hari Paranjape]
</p>

<pre>
On Fri, 29 Sep 2006, Martin Hooper wrote:
&gt; On Fri, 29 Sep 2006, Kapil Hari Paranjape wrote:
&gt; &gt; When you make the file system give it a "label". Most filesystem
&gt; &gt; types (even DOS and Windows types like FAT and VFAT) allow you to
&gt; &gt; set a label.
&gt; How do you create labels then??  I guess its an option to mkfs...
</pre>
</p>

<p>
To make this more clear:
</p>
<pre>
	mkdosfs -n &lt;your label&gt; &lt;other options&gt;
	mke2fs -L &lt;your label&gt; &lt;other options&gt;
</pre>
<p>
Perhaps those who use other file systems can pitch in with
what is required for xfs, jfs, reiserfs, ...
</p>

<p>
[John Karns]
</p>

<pre>
On Sat, 30 Sep 2006, Kapil Hari Paranjape wrote:
&gt; On Fri, 29 Sep 2006, Kapil Hari Paranjape wrote:
&gt;&gt; When you make the file system give it a "label". Most filesystem
&gt;&gt; types (even DOS and Windows types like FAT and VFAT) allow you to
&gt;&gt; set a label.
&gt;
&gt; To make this more clear:
&gt; 	mkdosfs -n &lt;your label&gt; &lt;other options&gt;
&gt; 	mke2fs -L &lt;your label&gt; &lt;other options&gt;
&gt; Perhaps those who use other file systems can pitch in with
&gt; what is required for xfs, jfs, reiserfs, ...
</pre>

<p>
A quick check of the man pages for the filesystems mentioned above shows
that the convention is mkfs.&lt;type&gt; "-L &lt;label&gt;" (for xfs, jfs and
reiserfs4).  The older reiserfs (pre-version 4) is an exception and calls
for the flag as lowercase "-l &lt;label&gt;".
</p>


</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:133/tag.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<hr>
<p>
<img align="left" alt="Bio picture" src="../gx/2002/note.png" class="bio">
</p>

<em>
<p>
<a href="http://linuxgazette.net/tag/ask-the-gang.html">The Answer Gang</a>
consists of a group of volunteers at the Linux Gazette. It is the source of
the Gazette's tech support columns (The Mailbag, 2-Cent Tips, Talkback,
Followups, etc.) as well as the major contributor to our <a
href="http://linuxgazette.net/tag/kb.html">KnowledgeBase</a>. To gather
relevant questions to respond to, we run an open mailing list where anyone
is welcome to ask their Linux-related questions; we also have a standing
invitation for people knowledgeable in Linux to join us.
</p>
</em>

<br clear="all">


<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/tag.html">The Answer Gang</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 133 of Linux Gazette, December 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="collinge"></a>
<h1>HelpDex</h1>
<p id="by"><b>By <A HREF="../authors/collinge.html">Shane Collinge</A></b></p>


</b>
</p>


<p>
<p>
<em>These images are scaled down to minimize horizontal scrolling.</em>
<p>


<p>
<a href="http://linuxgazette.net/124/misc/nottag/flash.html"><b>Flash problems?</b></a>
<br>

<div class="cartoon">

<object>
<embed src="misc/collinge/580why.swf" bgcolor="#ffffff" width="600" />
</object>

<a href="misc/collinge/580why.swf"><p>Click here to see the full-sized image</p></a>

</div>
<div class="cartoon">

<object>
<embed src="misc/collinge/594_Larry.swf" bgcolor="#ffffff" width="600" />
</object>

<a href="misc/collinge/594_Larry.swf"><p>Click here to see the full-sized image</p></a>

</div>
<div class="cartoon">

<object>
<embed src="misc/collinge/603object.swf" bgcolor="#ffffff" width="600" />
</object>

<a href="misc/collinge/603object.swf"><p>Click here to see the full-sized image</p></a>

</div>

<p> All HelpDex cartoons are at Shane's web site,
<a href="http://www.shanecollinge.com/">www.shanecollinge.com</a>.

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:133/collinge.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<P>
<img ALIGN="LEFT" ALT="Bio picture" SRC="../gx/2002/note.png" class="bio">
<em>
Part computer programmer, part cartoonist, part Mars Bar. At night, he runs
around in his brightly-coloured underwear fighting criminals. During the
day... well, he just runs around in his brightly-coloured underwear. He
eats when he's hungry and sleeps when he's sleepy.
</em>
<br CLEAR="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/collinge.html">Shane Collinge</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 133 of Linux Gazette, December 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="ecol"></a>
<h1>Ecol</h1>
<p id="by"><b>By <A HREF="../authors/malonda.html">Javier Malonda</A></b></p>


</b>
</p>


<p>
The Ecol comic strip is written for <a
href="http://escomposlinux.org">escomposlinux.org</a> (ECOL), the web site that
supports es.comp.os.linux, the Spanish USENET newsgroup for Linux.  The
strips are drawn in Spanish and then translated to English by the author.
<p>
<em>These images are scaled down to minimize horizontal scrolling.</em>
<p>


<p>

<div class="cartoon">
<a href="misc/ecol/tiraecol_en-243.png">
<img alt="[cartoon]" src="misc/ecol/tiraecol_en-243.png"><p>Click here to see the full-sized image</a>
</div>
<div class="cartoon">
<a href="misc/ecol/tiraecol_en-244.png">
<img alt="[cartoon]" src="misc/ecol/tiraecol_en-244.png"><p>Click here to see the full-sized image</a>
</div>


All Ecol cartoons are at
<a href="http://tira.escomposlinux.org/">tira.escomposlinux.org</a> (Spanish),
<a href="http://comic.escomposlinux.org/">comic.escomposlinux.org</a> (English) 
and
<a href="http://tira.puntbarra.com/">http://tira.puntbarra.com/</a> (Catalan).
The Catalan version is translated by the people who run the site; only a few
episodes are currently available.

<p> <small>These cartoons are copyright Javier Malonda.  They may be copied,
linked or distributed by any means.  However, you may not distribute
modifications.  If you link to a cartoon, please <a
href="mailto:jmr@escomposlinux.org">notify</a> Javier, who would appreciate
hearing from you.
</small>

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:133/ecol.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<!-- *** BEGIN bio *** -->
<hr>
<!-- P>
<img ALIGN="LEFT" ALT="Bio picture" SRC="../gx/2002/note.png" class="bio">
<em>
</em>
<br CLEAR="all" -->
<!-- *** END bio *** -->

<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/malonda.html">Javier Malonda</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 133 of Linux Gazette, December 2006
</p>

</div>

</div>


<div class="content lgcontent">

<a name="bisbee"></a>
<h1>The Geekword Puzzle</h1>
<p id="by"><b>By <A HREF="../authors/bisbee.html">Samuel Kotel Bisbee-vonKaufmann</A></b></p>


</b>
</p>


<p>

<!-- NOTE: This is the part of the crossword template that activates the
JavaScript, and must remain here for the fillout functionality to work. -->
<link rel="StyleSheet" href="../gx/js/cwd.css" type="text/css"/>
<script type="text/javascript" src="../gx/js/cwd.js"></script>
<body onkeypress="return keypress(getkey(event));" onblur="unset();">

<!-- Personal comments -->
<!-- Personal comments -->

<!-- New crossword HTML -->


<table border="1" class="cwd" id="cwd" ondblclick="chgdir();">
  
    <tr>
      
        
          <td class="cell" title="Across:Linux used on this satellite; Down:Fans _ the system" onclick="setxyd(0,0,2);">
             <div class="tag">1</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="&quot;Dude, _ to archive files&quot;" onclick="setxyd(1,0,0);">
             <div class="tag">2</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="Make _ changed modules when run again" onclick="setxyd(2,0,0);">
             <div class="tag">3</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="pppd creates _ connection" onclick="setxyd(3,0,0);">
             <div class="tag">4</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="black" title="" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="Across:!lows; Down:Award winner" onclick="setxyd(5,0,2);">
             <div class="tag">5</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="`echo &quot;ISDFWICSDOFW&quot; | sed -e 's/./&amp; /g' | awk '{print $1$5$10$12}'`" onclick="setxyd(6,0,0);">
             <div class="tag">6</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="Fundamental recursive acronym" onclick="setxyd(7,0,0);">
             <div class="tag">7</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="_-and-egg problem" onclick="setxyd(8,0,0);">
             <div class="tag">8</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="SPF mechanism to prevent sender forgery" onclick="setxyd(9,0,0);">
             <div class="tag">9</div>
             <div class="sol"></div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="Spanish and English designations" onclick="setxyd(0,1,1);">
             <div class="tag">10</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(1,1,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(2,1,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(3,1,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="black" title="" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="Free Software focuses less on this" onclick="setxyd(5,1,1);">
             <div class="tag">11</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(6,1,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(7,1,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(8,1,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(9,1,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="Copy again" onclick="setxyd(0,2,1);">
             <div class="tag">12</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(1,2,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(2,2,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(3,2,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="black" title="" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="wn's -grepn searches for" onclick="setxyd(5,2,1);">
             <div class="tag">13</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(6,2,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(7,2,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(8,2,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(9,2,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="_ approach" onclick="setxyd(0,3,1);">
             <div class="tag">14</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(1,3,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(2,3,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(3,3,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(4,3,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(5,3,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(6,3,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(7,3,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="black" title="" onclick="unset();">*</td>
        
      
        
          <td class="black" title="" onclick="unset();">*</td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="Root wants a _ proof system" onclick="setxyd(0,4,1);">
             <div class="tag">15</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(1,4,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(2,4,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(3,4,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(4,4,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(5,4,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="black" title="" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="ESR co-founded this" onclick="setxyd(7,4,1);">
             <div class="tag">16</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="* * * 9 &amp; * * * 11 to cron" onclick="setxyd(8,4,0);">
             <div class="tag">17</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="Jun. 2003 insider trading case players" onclick="setxyd(9,4,0);">
             <div class="tag">18</div>
             <div class="sol"></div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="A business's systems unified under one sys." onclick="setxyd(0,5,1);">
             <div class="tag">19</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(1,5,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(2,5,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="black" title="" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="A coder that layers loops" onclick="setxyd(4,5,1);">
             <div class="tag">20</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(5,5,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="_less computing, same data on every device" onclick="setxyd(6,5,0);">
             <div class="tag">21</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(7,5,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(8,5,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(9,5,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="black" title="" onclick="unset();">*</td>
        
      
        
          <td class="black" title="" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="Formatting is common _" onclick="setxyd(2,6,1);">
             <div class="tag">22</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="PHP-_, content management system" onclick="setxyd(3,6,0);">
             <div class="tag">23</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(4,6,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(5,6,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(6,6,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(7,6,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(8,6,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(9,6,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="Across:How much a variable is worth; Down:VCR is the most common type of this" onclick="setxyd(0,7,2);">
             <div class="tag">24</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="pi _ squared" onclick="setxyd(1,7,0);">
             <div class="tag">25</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(2,7,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(3,7,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(4,7,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="black" title="" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="&quot;Boten _&quot;, song about a female IRC user" onclick="setxyd(6,7,1);">
             <div class="tag">26</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(7,7,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(8,7,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(9,7,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="&quot;Turnabout Intruder&quot;, Star _ last episode" onclick="setxyd(0,8,1);">
             <div class="tag">27</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(1,8,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(2,8,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(3,8,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(4,8,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="black" title="" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="116 105 111 116" onclick="setxyd(6,8,1);">
             <div class="tag">28</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(7,8,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(8,8,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(9,8,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="Another way to run tset" onclick="setxyd(0,9,1);">
             <div class="tag">29</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(1,9,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(2,9,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(3,9,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(4,9,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="black" title="" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="Two ways to run Vim " onclick="setxyd(6,9,1);">
             <div class="tag">30</div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(7,9,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(8,9,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
        
          <td class="cell" title="" onclick="setxyd(9,9,-1);">
             <div class="tag"></div>
             <div class="sol"></div>
          </td>
        
      
    </tr>    
  
</table>


<!-- New crossword HTML -->
<!-- Credit to 'cwd' author, etc. -->
<p><br clear="all">
</p>
<small><strong>[ Crossword formatting and JavaScript via Alon
Altman's <a href="http://freshmeat.net/projects/cwd/">cwd</a>. The
ASCII-art, printable version is available <a href=
"misc/bisbee/xwd.html">here</a>. ]</strong></small>
<p>&nbsp;</p>
<!-- Credit to 'cwd' author, etc. -->

<!-- Clues (from 'xwd' output) go here; copy from
"<div id='clues'>" to the next closing "</div>" -->

<div id='clues'>
<table border='0'>
<tr>
<td valign='top'>
<strong>Across</strong><br />
<br />
1: Linux used on this satellite<br />
5: !lows<br />
10: Spanish and English designations<br />
11: Free Software focuses less on this<br />
12: Copy again<br />
13: wn's -grepn searches for<br />
14: _ approach<br />
15: Root wants a _ proof system<br />
16: ESR co-founded this<br />
19: A business's systems unified under one sys.<br />
20: A coder that layers loops<br />
22: Formatting is common _<br />
24: How much a variable is worth<br />
26: "Boten _", song about a female IRC user<br />
27: "Turnabout Intruder", Star _ last episode<br />
28: 116 105 111 116<br />
29: Another way to run tset<br />
30: Two ways to run Vim <br />
</td>
<td valign='top'>
<strong>Down</strong><br />
<br />
1: Fans _ the system<br />
2: "Dude, _ to archive files"<br />
3: Make _ changed modules when run again<br />
4: pppd creates _ connection<br />
5: Award winner<br />
6: `echo "ISDFWICSDOFW" | sed -e 's/./& /g' | awk '{print $1$5$10$12}'`<br />
7: Fundamental recursive acronym<br />
8: _-and-egg problem<br />
9: SPF mechanism to prevent sender forgery<br />
17: * * * 9 & * * * 11 to cron<br />
18: Jun. 2003 insider trading case players<br />
21: _less computing, same data on every device<br />
23: PHP-_, content management system<br />
24: VCR is the most common type of this<br />
25: pi _ squared<br />
</td>
</tr>
</table>
</div>

<!-- Clues -->
<p>&nbsp;</p>

<hr>

<strong>Solution to the last month's Geekword (ASCII version <a
href="misc/bisbee/xwd.html#last">here</a>):</strong>
<p>&nbsp;</p>

<small>

<!-- Last month's solved puzzle HTML -->

<table border="1" class="cwd" id="cwd" ondblclick="chgdir();">
  
    <tr>
      
        
          <td class="cell" title="(0,0)" onclick="setxyd(0,0,2);">
             <div class="tag">1</div>
             <div class="sol">O</div>
          </td>
        
      
        
          <td class="cell" title="(0,1)" onclick="setxyd(1,0,0);">
             <div class="tag">2</div>
             <div class="sol">W</div>
          </td>
        
      
        
          <td class="cell" title="(0,2)" onclick="setxyd(2,0,0);">
             <div class="tag">3</div>
             <div class="sol">N</div>
          </td>
        
      
        
          <td class="cell" title="(0,3)" onclick="setxyd(3,0,0);">
             <div class="tag">4</div>
             <div class="sol">E</div>
          </td>
        
      
        
          <td class="cell" title="(0,4)" onclick="setxyd(4,0,0);">
             <div class="tag">5</div>
             <div class="sol">R</div>
          </td>
        
      
        
          <td class="black" title="(0,5)" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="(0,6)" onclick="setxyd(6,0,2);">
             <div class="tag">6</div>
             <div class="sol">S</div>
          </td>
        
      
        
          <td class="cell" title="(0,7)" onclick="setxyd(7,0,0);">
             <div class="tag">7</div>
             <div class="sol">P</div>
          </td>
        
      
        
          <td class="cell" title="(0,8)" onclick="setxyd(8,0,0);">
             <div class="tag">8</div>
             <div class="sol">A</div>
          </td>
        
      
        
          <td class="cell" title="(0,9)" onclick="setxyd(9,0,0);">
             <div class="tag">9</div>
             <div class="sol">M</div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="(1,0)" onclick="setxyd(0,1,1);">
             <div class="tag">10</div>
             <div class="sol">C</div>
          </td>
        
      
        
          <td class="cell" title="(1,1)" onclick="setxyd(1,1,-1);">
             <div class="tag"></div>
             <div class="sol">R</div>
          </td>
        
      
        
          <td class="cell" title="(1,2)" onclick="setxyd(2,1,-1);">
             <div class="tag"></div>
             <div class="sol">I</div>
          </td>
        
      
        
          <td class="cell" title="(1,3)" onclick="setxyd(3,1,-1);">
             <div class="tag"></div>
             <div class="sol">M</div>
          </td>
        
      
        
          <td class="cell" title="(1,4)" onclick="setxyd(4,1,-1);">
             <div class="tag"></div>
             <div class="sol">E</div>
          </td>
        
      
        
          <td class="black" title="(1,5)" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="(1,6)" onclick="setxyd(6,1,1);">
             <div class="tag">11</div>
             <div class="sol">H</div>
          </td>
        
      
        
          <td class="cell" title="(1,7)" onclick="setxyd(7,1,-1);">
             <div class="tag"></div>
             <div class="sol">U</div>
          </td>
        
      
        
          <td class="cell" title="(1,8)" onclick="setxyd(8,1,-1);">
             <div class="tag"></div>
             <div class="sol">G</div>
          </td>
        
      
        
          <td class="cell" title="(1,9)" onclick="setxyd(9,1,-1);">
             <div class="tag"></div>
             <div class="sol">E</div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="(2,0)" onclick="setxyd(0,2,1);">
             <div class="tag">12</div>
             <div class="sol">T</div>
          </td>
        
      
        
          <td class="cell" title="(2,1)" onclick="setxyd(1,2,-1);">
             <div class="tag"></div>
             <div class="sol">R</div>
          </td>
        
      
        
          <td class="cell" title="(2,2)" onclick="setxyd(2,2,-1);">
             <div class="tag"></div>
             <div class="sol">I</div>
          </td>
        
      
        
          <td class="cell" title="(2,3)" onclick="setxyd(3,2,-1);">
             <div class="tag"></div>
             <div class="sol">A</div>
          </td>
        
      
        
          <td class="cell" title="(2,4)" onclick="setxyd(4,2,-1);">
             <div class="tag"></div>
             <div class="sol">L</div>
          </td>
        
      
        
          <td class="black" title="(2,5)" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="(2,6)" onclick="setxyd(6,2,1);">
             <div class="tag">13</div>
             <div class="sol">I</div>
          </td>
        
      
        
          <td class="cell" title="(2,7)" onclick="setxyd(7,2,-1);">
             <div class="tag"></div>
             <div class="sol">B</div>
          </td>
        
      
        
          <td class="cell" title="(2,8)" onclick="setxyd(8,2,-1);">
             <div class="tag"></div>
             <div class="sol">U</div>
          </td>
        
      
        
          <td class="cell" title="(2,9)" onclick="setxyd(9,2,-1);">
             <div class="tag"></div>
             <div class="sol">M</div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="black" title="(3,0)" onclick="unset();">*</td>
        
      
        
          <td class="black" title="(3,1)" onclick="unset();">*</td>
        
      
        
          <td class="black" title="(3,2)" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="(3,3)" onclick="setxyd(3,3,1);">
             <div class="tag">14</div>
             <div class="sol">C</div>
          </td>
        
      
        
          <td class="cell" title="(3,4)" onclick="setxyd(4,3,-1);">
             <div class="tag"></div>
             <div class="sol">E</div>
          </td>
        
      
        
          <td class="cell" title="(3,5)" onclick="setxyd(5,3,0);">
             <div class="tag">15</div>
             <div class="sol">R</div>
          </td>
        
      
        
          <td class="cell" title="(3,6)" onclick="setxyd(6,3,-1);">
             <div class="tag"></div>
             <div class="sol">N</div>
          </td>
        
      
        
          <td class="cell" title="(3,7)" onclick="setxyd(7,3,-1);">
             <div class="tag"></div>
             <div class="sol">L</div>
          </td>
        
      
        
          <td class="cell" title="(3,8)" onclick="setxyd(8,3,-1);">
             <div class="tag"></div>
             <div class="sol">I</div>
          </td>
        
      
        
          <td class="cell" title="(3,9)" onclick="setxyd(9,3,-1);">
             <div class="tag"></div>
             <div class="sol">B</div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="(4,0)" onclick="setxyd(0,4,2);">
             <div class="tag">16</div>
             <div class="sol">B</div>
          </td>
        
      
        
          <td class="cell" title="(4,1)" onclick="setxyd(1,4,0);">
             <div class="tag">17</div>
             <div class="sol">O</div>
          </td>
        
      
        
          <td class="cell" title="(4,2)" onclick="setxyd(2,4,0);">
             <div class="tag">18</div>
             <div class="sol">N</div>
          </td>
        
      
        
          <td class="cell" title="(4,3)" onclick="setxyd(3,4,-1);">
             <div class="tag"></div>
             <div class="sol">S</div>
          </td>
        
      
        
          <td class="cell" title="(4,4)" onclick="setxyd(4,4,-1);">
             <div class="tag"></div>
             <div class="sol">A</div>
          </td>
        
      
        
          <td class="cell" title="(4,5)" onclick="setxyd(5,4,-1);">
             <div class="tag"></div>
             <div class="sol">I</div>
          </td>
        
      
        
          <td class="black" title="(4,6)" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="(4,7)" onclick="setxyd(7,4,1);">
             <div class="tag">19</div>
             <div class="sol">I</div>
          </td>
        
      
        
          <td class="cell" title="(4,8)" onclick="setxyd(8,4,-1);">
             <div class="tag"></div>
             <div class="sol">D</div>
          </td>
        
      
        
          <td class="cell" title="(4,9)" onclick="setxyd(9,4,-1);">
             <div class="tag"></div>
             <div class="sol">U</div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="(5,0)" onclick="setxyd(0,5,1);">
             <div class="tag">20</div>
             <div class="sol">R</div>
          </td>
        
      
        
          <td class="cell" title="(5,1)" onclick="setxyd(1,5,-1);">
             <div class="tag"></div>
             <div class="sol">S</div>
          </td>
        
      
        
          <td class="cell" title="(5,2)" onclick="setxyd(2,5,-1);">
             <div class="tag"></div>
             <div class="sol">U</div>
          </td>
        
      
        
          <td class="black" title="(5,3)" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="(5,4)" onclick="setxyd(4,5,1);">
             <div class="tag">21</div>
             <div class="sol">S</div>
          </td>
        
      
        
          <td class="cell" title="(5,5)" onclick="setxyd(5,5,-1);">
             <div class="tag"></div>
             <div class="sol">P</div>
          </td>
        
      
        
          <td class="cell" title="(5,6)" onclick="setxyd(6,5,0);">
             <div class="tag">22</div>
             <div class="sol">A</div>
          </td>
        
      
        
          <td class="cell" title="(5,7)" onclick="setxyd(7,5,-1);">
             <div class="tag"></div>
             <div class="sol">C</div>
          </td>
        
      
        
          <td class="cell" title="(5,8)" onclick="setxyd(8,5,-1);">
             <div class="tag"></div>
             <div class="sol">E</div>
          </td>
        
      
        
          <td class="cell" title="(5,9)" onclick="setxyd(9,5,-1);">
             <div class="tag"></div>
             <div class="sol">S</div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="(6,0)" onclick="setxyd(0,6,1);">
             <div class="tag">23</div>
             <div class="sol">U</div>
          </td>
        
      
        
          <td class="cell" title="(6,1)" onclick="setxyd(1,6,-1);">
             <div class="tag"></div>
             <div class="sol">P</div>
          </td>
        
      
        
          <td class="cell" title="(6,2)" onclick="setxyd(2,6,-1);">
             <div class="tag"></div>
             <div class="sol">K</div>
          </td>
        
      
        
          <td class="cell" title="(6,3)" onclick="setxyd(3,6,0);">
             <div class="tag">24</div>
             <div class="sol">E</div>
          </td>
        
      
        
          <td class="cell" title="(6,4)" onclick="setxyd(4,6,-1);">
             <div class="tag"></div>
             <div class="sol">E</div>
          </td>
        
      
        
          <td class="cell" title="(6,5)" onclick="setxyd(5,6,-1);">
             <div class="tag"></div>
             <div class="sol">P</div>
          </td>
        
      
        
          <td class="cell" title="(6,6)" onclick="setxyd(6,6,-1);">
             <div class="tag"></div>
             <div class="sol">D</div>
          </td>
        
      
        
          <td class="black" title="(6,7)" onclick="unset();">*</td>
        
      
        
          <td class="black" title="(6,8)" onclick="unset();">*</td>
        
      
        
          <td class="black" title="(6,9)" onclick="unset();">*</td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="(7,0)" onclick="setxyd(0,7,1);">
             <div class="tag">25</div>
             <div class="sol">T</div>
          </td>
        
      
        
          <td class="cell" title="(7,1)" onclick="setxyd(1,7,-1);">
             <div class="tag"></div>
             <div class="sol">R</div>
          </td>
        
      
        
          <td class="cell" title="(7,2)" onclick="setxyd(2,7,-1);">
             <div class="tag"></div>
             <div class="sol">I</div>
          </td>
        
      
        
          <td class="cell" title="(7,3)" onclick="setxyd(3,7,-1);">
             <div class="tag"></div>
             <div class="sol">G</div>
          </td>
        
      
        
          <td class="black" title="(7,4)" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="(7,5)" onclick="setxyd(5,7,1);">
             <div class="tag">26</div>
             <div class="sol">E</div>
          </td>
        
      
        
          <td class="cell" title="(7,6)" onclick="setxyd(6,7,-1);">
             <div class="tag"></div>
             <div class="sol">D</div>
          </td>
        
      
        
          <td class="cell" title="(7,7)" onclick="setxyd(7,7,0);">
             <div class="tag">27</div>
             <div class="sol">G</div>
          </td>
        
      
        
          <td class="cell" title="(7,8)" onclick="setxyd(8,7,0);">
             <div class="tag">28</div>
             <div class="sol">E</div>
          </td>
        
      
        
          <td class="cell" title="(7,9)" onclick="setxyd(9,7,0);">
             <div class="tag">29</div>
             <div class="sol">S</div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="(8,0)" onclick="setxyd(0,8,1);">
             <div class="tag">30</div>
             <div class="sol">E</div>
          </td>
        
      
        
          <td class="cell" title="(8,1)" onclick="setxyd(1,8,-1);">
             <div class="tag"></div>
             <div class="sol">E</div>
          </td>
        
      
        
          <td class="cell" title="(8,2)" onclick="setxyd(2,8,-1);">
             <div class="tag"></div>
             <div class="sol">N</div>
          </td>
        
      
        
          <td class="cell" title="(8,3)" onclick="setxyd(3,8,-1);">
             <div class="tag"></div>
             <div class="sol">G</div>
          </td>
        
      
        
          <td class="black" title="(8,4)" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="(8,5)" onclick="setxyd(5,8,1);">
             <div class="tag">31</div>
             <div class="sol">R</div>
          </td>
        
      
        
          <td class="cell" title="(8,6)" onclick="setxyd(6,8,-1);">
             <div class="tag"></div>
             <div class="sol">O</div>
          </td>
        
      
        
          <td class="cell" title="(8,7)" onclick="setxyd(7,8,-1);">
             <div class="tag"></div>
             <div class="sol">O</div>
          </td>
        
      
        
          <td class="cell" title="(8,8)" onclick="setxyd(8,8,-1);">
             <div class="tag"></div>
             <div class="sol">T</div>
          </td>
        
      
        
          <td class="cell" title="(8,9)" onclick="setxyd(9,8,-1);">
             <div class="tag"></div>
             <div class="sol">S</div>
          </td>
        
      
    </tr>    
  
    <tr>
      
        
          <td class="cell" title="(9,0)" onclick="setxyd(0,9,1);">
             <div class="tag">32</div>
             <div class="sol">S</div>
          </td>
        
      
        
          <td class="cell" title="(9,1)" onclick="setxyd(1,9,-1);">
             <div class="tag"></div>
             <div class="sol">Y</div>
          </td>
        
      
        
          <td class="cell" title="(9,2)" onclick="setxyd(2,9,-1);">
             <div class="tag"></div>
             <div class="sol">S</div>
          </td>
        
      
        
          <td class="cell" title="(9,3)" onclick="setxyd(3,9,-1);">
             <div class="tag"></div>
             <div class="sol">S</div>
          </td>
        
      
        
          <td class="black" title="(9,4)" onclick="unset();">*</td>
        
      
        
          <td class="cell" title="(9,5)" onclick="setxyd(5,9,1);">
             <div class="tag">33</div>
             <div class="sol">S</div>
          </td>
        
      
        
          <td class="cell" title="(9,6)" onclick="setxyd(6,9,-1);">
             <div class="tag"></div>
             <div class="sol">N</div>
          </td>
        
      
        
          <td class="cell" title="(9,7)" onclick="setxyd(7,9,-1);">
             <div class="tag"></div>
             <div class="sol">O</div>
          </td>
        
      
        
          <td class="cell" title="(9,8)" onclick="setxyd(8,9,-1);">
             <div class="tag"></div>
             <div class="sol">O</div>
          </td>
        
      
        
          <td class="cell" title="(9,9)" onclick="setxyd(9,9,-1);">
             <div class="tag"></div>
             <div class="sol">P</div>
          </td>
        
      
    </tr>    
  
</table>

<!-- Last month's solved puzzle HTML -->
</small>

<p>&nbsp;</p>

<br clear="all" />

</p>

<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:133/bisbee.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
	<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/authors/bisbee.jpg" class="bio">
</p>

<em>
<p>
Samuel Kotel Bisbee-vonKaufmann was born ('87) and raised in the Boston, MA
area. His interest in all things electronics was established early as his
father was an electrician. Teaching himself HTML and web design at the age
of 10, Sam has spiraled deeper into the confusion that is computer science
and the FOSS community, running his first distro, Red Hat, when he was
approximately 13 years old. Entering boarding high school in 2002,
Northfield Mount Hermon, he found his way into the school's computer club,
GEECS for Electronics, Engineering, Computers, and Science (a recursive
acronym), which would allow him to share in and teach the Linux experience
to future generations. Also during high school Sam was abducted into the
Open and Free Technology Community (<a
href="http://www.oftc.org">http://www.oftc.org</a>), had his first article
published, and became more involved in various communities and projects.
</p>

<p>
Sam is currently pursuing a degree in Computer Science at Boston University and
continues to be involved in the FOSS community. Other hobbies include martial
arts, writing, buildering, working, chess, and crossword puzzles.  Then there
is something about Linux, algorithms, programing, etc., but who makes money
doing that?
</p>

<p>
Sam prefers programming in C++ and Bash, is fluent in Java and PHP, and while
he can work in Perl, he hates it. If you would like to know more then feel free
to ask.
</p>

</em>

<br clear="all">


<!-- *** END author bio *** -->




<div id="articlefooter">



<p>
Copyright &copy; 2006, <A HREF="../authors/bisbee.html">Samuel Kotel Bisbee-vonKaufmann</A>. Released under the
<a href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>



<p>
Published in Issue 133 of Linux Gazette, December 2006
</p>

</div>

</div>


<div id="navigation">

<a href="../index.html">Home</a>
<a href="../faq/index.html">FAQ</a>
<a href="../lg_index.html">Site Map</a>
<a href="../mirrors.html">Mirrors</a>
<a href="../mirrors.html">Translations</a>
<a href="../search.html">Search</a>
<a href="../archives.html">Archives</a>
<a href="../authors/index.html">Authors</a>
<a href="http://lists.linuxgazette.net/mailman/listinfo/">Mailing Lists</a>
<a href="../jobs.html">Join Us!</a>
<a href="../contact.html">Contact Us</a>
</div>

<div id="breadcrumbs">

<a href="../index.html">Home</a> &gt;
<a href="index.html">December 2006 (#133)</a> &gt;
TWDT

</div>


<img src="../gx/tux_86x95_indexed.png" id="tux" alt="Tux"/>

<br />

</body>
</html>


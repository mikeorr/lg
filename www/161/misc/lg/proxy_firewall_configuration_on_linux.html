<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
		 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' lang='utf-8' xml:lang='utf-8'>
<head>
<title>Proxy + firewall configuration on linux</title>
<meta http-equiv='Content-Type; charset=utf-8' />
<link rel='stylesheet' type='text/css' href='../../../lg.css' />
</head>
<body>
<a href="../../../"><img alt="Linux Gazette" src="../../../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" /></a><img alt="Tux" src="../../../gx/tux_86x95_indexed.png" id="tux" /><p id="fun">...making Linux just a little more fun!</p><div class='content articlecontent'><a name="top"></a><h3>Proxy + firewall configuration on linux</h3>
<p>
<b><p>
Deividson Okopnik [deivid.okop at gmail.com]

</p>
</b><br />
<b>Wed, 4 Mar 2009 11:52:42 -0300</b>
</p>

<p>
Hello everyone.
</p>

<p>
Im needing to configure a temporary internet server here, and after
reading a lot, I'm kinda confused :P
</p>

<p>
I need a non-transparent proxy (asks users for theyr username/pass),
with the ability to block access to certain pages and services (like
www.orkut.com or MSN), plus the ability to generate usage reports.
</p>

<p>
I saw several programs that can do that, but each article I read uses
a diferent combo - thats what confused me <img src="../gx/smile.png" alt=":)">
</p>

<p>
So, the question is, what software would you use to create such a
configuration?
</p>

<p>
Thanks for the input
</p>

<p>
Deividson
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-proxy_firewall_configuration_on_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ren&eacute; Pfeiffer [lynx at luchs.at]

</p>
</b><br />
<b>Wed, 4 Mar 2009 17:19:32 +0100</b>
</p>

<p>
On Mar 04, 2009 at 1152 -0300, Deividson Okopnik appeared and said:
</p>

<pre>
&gt; Hello everyone.
&gt; 
&gt; Im needing to configure a temporary internet server here, and after
&gt; reading a lot, I'm kinda confused :P
&gt; 
&gt; I need a non-transparent proxy (asks users for theyr username/pass),
&gt; with the ability to block access to certain pages and services (like
&gt; www.orkut.com or MSN), plus the ability to generate usage reports.
&gt; 
&gt; I saw several programs that can do that, but each article I read uses
&gt; a diferent combo - thats what confused me <img src="../gx/smile.png" alt=":)">
</pre>

<p>
I'd use Squid+Netfilter. Squid offers authentication and can use
external filters to block access to certain URLs. You can even check
downloads for viruses, if needed. The plugins doing the URL checks are
called "redirectors". Basically Squid hands every request to an external
script, this script parses the URL and returns the URL that Squid should
fetch. Squirm is one redirector, but I am not sure if it's still
maintained yet (<a href='http://squirm.foote.com.au/'>http://squirm.foote.com.au/</a>). A simple Perl script can
do the job, though.
</p>

<p>
Best,
</p>

<p>
Ren&eacute;.
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-proxy_firewall_configuration_on_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Francis Daly [francis at daoine.org]

</p>
</b><br />
<b>Wed, 4 Mar 2009 16:26:25 +0000</b>
</p>

<p>
On Wed, Mar 04, 2009 at 11:52:42AM -0300, Deividson Okopnik wrote:
</p>

<p>
Hi there,
</p>


<pre>
&gt; I need a non-transparent proxy (asks users for theyr username/pass),
&gt; with the ability to block access to certain pages and services (like
&gt; www.orkut.com or MSN), plus the ability to generate usage reports.
</pre>


<pre>
&gt; So, the question is, what software would you use to create such a
&gt; configuration?
</pre>

<p>
I use squid as a http proxy, although I don't currently require
authentication to use it. (Did use an ldap-backed authentication method
in the past, though, so I know it's doable.) I use squidguard to block
access to certain domain suffixes, url prefixes, and url regexes, plus
a thttpd to serve my "this was blocked" response. That might be adequate
for your list of pages and services.
</p>

<p>
I don't generate usage reports, but you can pick your favourite program
to do that. Either it will accept the default squid log format, or
you can modify the squid log to the "common log format" that many http
servers generate. "analog" and "webalizer" are familiar names. Find one
that advertises reports that you like the look of, and you're done.
</p>

<p>
Good luck,
</p>

<p>
	f
<pre>-- 
Francis Daly        francis@daoine.org
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-proxy_firewall_configuration_on_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Predrag Ivanovic [predivan at nadlanu.com]

</p>
</b><br />
<b>Tue, 10 Mar 2009 17:02:50 +0100</b>
</p>

<p>
On Wed, 04 Mar 2009 11:52:42 -0300
Deividson Okopnik wrote:
</p>


<pre>
&gt;Hello everyone.
&gt;
&gt;Im needing to configure a temporary internet server here, and after
&gt;reading a lot, I'm kinda confused :P
&gt;
&gt;I need a non-transparent proxy (asks users for theyr username/pass),
&gt;with the ability to block access to certain pages and services (like
&gt;www.orkut.com or MSN), plus the ability to generate usage reports.
</pre>

<p>
Check out SafeSquid, it is  'Content Filtering Internet Proxy'&lt;/buzzword&gt;.
It can be used alone, and in combination with Squid.
Version for internal use, up to 20 users, is free. 
</p>

<p>
There is a lot of documentation on the site[1], and feature comparasion of different 
editions is at [2].
</p>

<p>
[1]<a href='http://www.safesquid.com/html/portal.php'>http://www.safesquid.com/html/portal.php</a>
</p>

<p>
[2]<a href='http://www.safesquid.com/html/portal.php?page=89'>http://www.safesquid.com/html/portal.php?page=89</a>
</p>

<p>
Pedja
<pre>-- 
 People usually get what's coming to them ... unless it's been mailed.
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-proxy_firewall_configuration_on_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas.adam22 at gmail.com]

</p>
</b><br />
<b>Tue, 10 Mar 2009 16:12:00 +0000</b>
</p>

<p>
2009/3/10 Predrag Ivanovic &lt;predivan@nadlanu.com&gt;:
</p>

<pre>
&gt; On Wed, 04 Mar 2009 11:52:42 -0300
&gt; Deividson Okopnik wrote:
&gt;
&gt;&gt;Hello everyone.
&gt;&gt;
&gt;&gt;Im needing to configure a temporary internet server here, and after
&gt;&gt;reading a lot, I'm kinda confused :P
&gt;&gt;
&gt;&gt;I need a non-transparent proxy (asks users for theyr username/pass),
&gt;&gt;with the ability to block access to certain pages and services (like
&gt;&gt;www.orkut.com or MSN), plus the ability to generate usage reports.
&gt;
&gt; Check out SafeSquid, it is  'Content Filtering Internet Proxy'&lt;/buzzword&gt;.
&gt; It can be used alone, and in combination with Squid.
&gt; Version for internal use, up to 20 users, is free.
</pre>

<p>
I'd go with DansGuardian myself (www.dansguardian.org) but then I am biased.  :P
</p>

<p>
-- Thomas Adam
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-proxy_firewall_configuration_on_linux">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Deividson Okopnik [deivid.okop at gmail.com]

</p>
</b><br />
<b>Tue, 10 Mar 2009 13:52:58 -0300</b>
</p>

<pre>
&gt; On Wed, 04 Mar 2009 11:52:42 -0300
&gt; Deividson Okopnik wrote:
&gt;
&gt;&gt;Hello everyone.
&gt;&gt;
&gt;&gt;Im needing to configure a temporary internet server here, and after
&gt;&gt;reading a lot, I'm kinda confused :P
&gt;&gt;
&gt;&gt;I need a non-transparent proxy (asks users for theyr username/pass),
&gt;&gt;with the ability to block access to certain pages and services (like
&gt;&gt;www.orkut.com or MSN), plus the ability to generate usage reports.
&gt;
&gt; Check out SafeSquid, it is  'Content Filtering Internet Proxy'&lt;/buzzword&gt;.
&gt; It can be used alone, and in combination with Squid.
&gt; Version for internal use, up to 20 users, is free.
</pre>

<p>
I'd rather go with something really free - using squid atm, and it's
working great <img src="../gx/smile.png" alt=":)"> (plus i have more than 20 users :X)
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-proxy_firewall_configuration_on_linux">Back</a><hr width="50%" align="left" /><p><br /></p></div>
</body>
</html>
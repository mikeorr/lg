<html>
<head>
<link href="../lg.css" rel="stylesheet" type="text/css" media="screen, projection"  />
<title>The Answer Gang: LG 103: Network Connection Problem</title>

<style type="text/css" media="screen, projection">
<!--
.articlecontent {
        position:absolute;
        top:143px;
}
-->
</style>
</head>
<body>
<img src="../../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" alt="Linux Gazette"/>
<p id="fun">...making Linux just a little more fun!</p>


<div class="content articlecontent">

<div id="previousnexttop">
<A HREF="../lg_tips.html" >&lt;-- 2c Tips</A> 
| <A HREF="../lg_answer.html">TAG Index</a> | <A HREF="1.html">1</a> | <A HREF="2.html">2</a> | <A HREF="3.html">3</a>
| <a href="../../tag/kb.html">Knowledge Base</a>
| <A HREF="../lg_bytes.html" >News Bytes --&gt;</A>
</div>



<h1 align="center"><IMG SRC="../../gx/dennis/qbubble.gif" align="left"> The Answer Gang <IMG SRC="../../gx/dennis/bbubble.gif" align="right"></h1>

<p align="center">By Jim Dennis, Karl-Heinz Herrmann, Breen, Chris, and... 
	(<A HREF="../../tag/bios.html">meet the Gang</A>) ... 
	the Editors of <I>Linux Gazette</I>... and 
	<a href="../../tag/ask-the-gang.html">You</a>!</p>
<br clear="both">
<HR>
<!-- begin 1 -->
<H3 align="left"><img src="../../gx/dennis/qbubble.gif" 
	height="50" width="60" alt="(?) " border="0"
	>Network Connection Problem</H3>


<p><strong>From Chris Gibbs 
</strong></p> 
<p></strong></p>
<P><STRONG>
Hi ya,
</STRONG></P>
<P><STRONG>
I think this is more a Microslop question, but maybe you can help.
</STRONG></P>
<P><STRONG>
I have 2 PC's on 10baseT network, normally both run linux and everything
is
fine.  I have a fairly paranoid setup where hawklord.universe.com is
192.168.0.1 and cannot ftp gigahawk.universe.com.  But hawklord can http
gigahawk ok. (confession... my modem is ISA, hawklord has ISA slots,
gigahawk
does not...  so hawklord is just a box I can ssh to and run Netscape
from, its
also where I keep documentation on an <A HREF="http://www.apache.org/">Apache</A> server, so the ability to
http
hawklord would be good)
</STRONG></P>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Faber] 
I didn't quite follow this.  I think you're saying that everything works
the way you want it to, right?
</blockQuote>
<blockQuote>
And are these names related to that Saturday morning cartoon where all
the heroes had wings? I think one of them was called Hawkman.
</blockQuote>
<P><STRONG>
<IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
gigahawk (192.168.0.2) can ftp hawklord, http hawklord whatever.
Security don't
matter at all for hawklord, I just assume its insecure.
</STRONG></P>
<P><STRONG>
If I boot Windoze ME on gigahawk I just can't find hawklord. ping just
times out.
</STRONG></P>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Faber] 
Oh, that's easy enough to fix.  Don't boot into Windows ME!
&lt;bah-da dump&gt; &lt;rimshot&gt;
</blockQuote>
<P><STRONG>
<IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
So like er, how do I get MS ping to find the linux box?  Everything on
hawklord
works fine.
</STRONG></P>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Faber] 
You <EM>can</EM> ping hawklord by IP address, right?  Go no further until you
do can that.  Run winipcfg to make sure it has the IP Address/subnet
mask you think it does. If you can ping hawklord by the IP Address (NOT
the name!), then you may read on.
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Ben] 
If you can't find "winipcfg", try "ipconfig" from the CLI. There are
several versions of Wind0ws that don't have the GUI version.
</blockQuote>
<P><STRONG>
<IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
People complain Linux is hard to configure but is (at
least for me)
simplistic compared to Wintendo.  I've found places in Windoze to put
DNS numbers,
what I can't find is hosts.allow;
</STRONG></P>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Faber]
</blockQuote>
<blockQuote>
And you won't. 
<IMG SRC="../../gx/dennis/smily.gif" ALT=":-)" 
		height="24" width="20" align="middle">  What you're looking for it the <TT>/etc/hosts</TT> file.
hosts.allow is used only for, IIRC, tcp-wrappers.
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Ben] 
BZZT. It's just a host access control mechanism, not dependent on TCP
wrappers AFAIK (although you can do some interesting additional stuff if
you have it; see "man hosts.allow".)
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [JimD]
</blockQuote>
<blockQuote>
Well, actually, hosts.allow and hosts.deny are used by tcpd <EM>and</EM>
other programs compiled against libwrap (the TCP Wrappers libraries)
which include things like the Linux portmapper (used by NFS, and
other ONC RPC services).
</blockQuote>
<blockQuote>
So you're sort of both right, depending on what you mean by "TCP
Wrappers" (the binary <TT>/usr/sbin/tcpd</TT>, or the library, libwrap.so
against which it's linked).
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Faber] 
The file you want is in $(WINDIR)/System32/etc/hosts.sam (I'm pretty
sure that's where it is.  At worst, search for "etc").  You need to
populate it and rename it to simply "hosts".
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Ben] 
"hosts" does not have the functionality of "hosts.allow" or
"hosts.deny"; it just does IP to-hostname-mapping. Chris is right:
there's no equivalent file in Wind0ws - although you can get the
functionality in other ways (not that I'm an expert on obsolete OSes,
but I've had to set up a few mixed networks.)
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Faber] 
You will also see a "lmhosts.sam"; don't bother with that unless you
have Samba running on hawklord.  And if you're going to play with Samba
and lmhosts, be sure to read up on MS netbios technology; that oughtta
make you not want to do it. 
<IMG SRC="../../gx/dennis/smily.gif" ALT=":-)" 
		height="24" width="20" align="middle">
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [JimD] 
If you can't ping it by IP address, and it's on your LAN; that
</blockQuote>
<blockQuote>
suggests an ARP problem on one side or the other.  Try arp -d $IPADDR
on the Linux side of things.  Then try running tcpdump -e -v
to watch the ARPs and other traffic between the two.  The -e will
force tcpdump to print MAC addressing info on each dataframe it
captures --- so you can spot if some other ethernet card is responding
to the ARP requests.  Of course you can use ethereal or "tethereal"
(the text mode of ethereal) in lieu of tcpdump if you prefer.
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Ben]
</blockQuote>
<blockQuote>
BTW, there's a really good intro to reading what I think of as "libpcap
syntax" - the stuff that's put out by tcpdump, ethereal, etc., by Karen
Kent Frederick at SecurityFocus. In fact, it's a four-part series:
</blockQuote>
<blockQuote><BLOCKQuote>
"Studying Normal Traffic":
</BLOCKQuote></blockQuote>
<blockQuote>
&lt;<A HREF="http://www.securityfocus.com/infocus/1221/&gt"
	>http://www.securityfocus.com/infocus/1221/&gt</A>;
&lt;<A HREF="http://www.securityfocus.com/infocus/1222/&gt"
	>http://www.securityfocus.com/infocus/1222/&gt</A>;
&lt;<A HREF="http://www.securityfocus.com/infocus/1223/&gt"
	>http://www.securityfocus.com/infocus/1223/&gt</A>;
</blockQuote>
<blockQuote>
"Abnormal Traffic":
</blockQuote>
<blockQuote><BLOCKQuote>
&lt;<A HREF="http://www.securityfocus.com/infocus/1200/&gt"
	>http://www.securityfocus.com/infocus/1200/&gt</A>;
</BLOCKQuote></blockQuote>
<P><STRONG>
<IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
Ok I tried  winipcfg and I think it gives the clue cause there is a tick
in
the NetBIOS Resolution Uses DNS checkbox.  Apart from that its what I
expect.   ping 192.168.0.1 continues to time out.
</STRONG></P>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Faber] 
Since you're pinging the IP address, name resolution (DNS, <TT>/etc/hosts</TT>,
etc.) doesn't work into it. (But does Windows try to do a NetBIOS name
resolution with the IP Address?  Hmm...)
</blockQuote>
<blockQuote>
If you can't ping using the IP address, something is screwed up on your
network, either the IP address (the other box isn't on the
192.168.[something other than 0] network, is it?), the subnet mask is
wrong, or the Windows box isn't configured for networks.
</blockQuote>
<blockQuote>
Did you try Jim's suggestion about ARP?  That information would be
useful.
</blockQuote>
<P><STRONG>
<IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> 
Does that mean I <em>  must  </em> set up a name server on hawklord?
Also I'm confused about bindings seems I must check client for MS
networks or
printer sharing else I don't get anything.  I don't really seem able to
alter anything (situation normal for me in Microkak)
</STRONG></P>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Faber] 
Get it to ping ith the IP Address, then we'll worry about name servers
(but in general, no you don't have to set up a name server).
</blockQuote>
<blockQuote>
You <EM>do</EM> have TCP/IP installed on the Windows box, yes?  "Client for MS
networks" enables SMB/NEtBIOS stuff.  PRinter sharing uses the same
stuff; I don't know why they're separate.
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [David] 
Silly idea, try having the MS boxen ping itself. Have seen times that
the MS boxen was so confused that it could not ping itself let alone
someone else. It took a reboot, removal of all networking, reboot,
reinstall networking, reboot and finally it would ping itself and low
and behold it could ping the rest of the network too.
</blockQuote>
<blockQuote>
<IMG SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0"
	> [Ben] 
I'm with David on this one, and will confirm the above as standard
behavior (I've seen it a number of times), although I think of it in
different terms:
</blockQuote>

<blockquote><pre>ping 127.1		# Test the local TCP/IP stack
ping localhost		# Test the local hosts file
ping xxx.xxx.xxx.xxx	# Test "outside" - ping the immediate upstream IP
ping foo.bar		# Test all by pinging an "outside" host by name
</pre></blockquote>
<blockQuote>
Finding out where this breaks is the first key to troubleshooting this
kind of problems, whatever the OS.
</blockQuote>

<!-- end 1 -->
<hr>
<p><CENTER><Font face="Helvetica"><STRONG>
This page edited and maintained by the Editors of <I>Linux Gazette</I>
<br>HTML script maintained by
        <A HREF="mailto:star@starshine.org">Heather Stern</a> of
        Starshine Technical Services,
<A HREF="http://www.starshine.org/">http://www.starshine.org/</A></STRONG></Font></CENTER></p>
<hr>

<div id="articlefooter">
<p>
Each TAG thread <a href="http://linuxgazette.net/copying.html"
        >Copyright &copy;</a> its authors, 2004
</p>
<p>
Published in issue 103 of <I>Linux Gazette</I> June 2004
</p>
</div>


<div id="previousnextbottom">
<A HREF="../lg_tips.html" >&lt;-- 2c Tips</A> 
| <A HREF="../lg_answer.html">TAG Index</a> | <A HREF="1.html">1</a> | <A HREF="2.html">2</a> | <A HREF="3.html">3</a>
| <a href="../../tag/kb.html">Knowledge Base</a>
| <A HREF="../lg_bytes.html" >News Bytes --&gt;</A>
</div>
</div>

<div id="navigation">
<a href="../../index.html">Home</a>
<a href="../../faq/index.html">FAQ</a>
<a href="../../lg_index.html">Site Map</a>
<a href="../../mirrors.html">Mirrors</a>
<a href="../../mirrors.html">Translations</a>
<a href="../../search.html">Search</a>
<a href="../../archives.html">Archives</a>
<a href="../../authors/index.html">Authors</a>
<a href="../../contact.html">Contact Us</a>
</div>

<div id="breadcrumbs">
<a href="../../index.html">Home</a> &gt; 
<a href="../index.html">June 2004 ()</a> &gt; 
<a href="../lg_answer.html">The Answer Gang</a> &gt; 
Thread
</div>

<img src="../../gx/2003/sit3-shine.7-2.gif" id="tux" alt="Tux"/>

</body>
</html>

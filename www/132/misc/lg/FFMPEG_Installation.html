<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>Mailbag::Thread</title>
<link rel="stylesheet" type="text/css" href="../../../lg.css" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body>
<a href="../../../"><img alt="Linux Gazette" src="../../../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" /></a><img alt="Tux" src="../../../gx/tux_86x95_indexed.png" id="tux" /><p id="fun">...making Linux just a little more fun!</p><div class='content articlecontent'><a name="top"></a><h3>FFMPEG Installation</h3>
<p>
<b>Suramya Tomar [suramya at suramya.com]</b><br />
<b>Tue, 10 Oct 2006 17:04:22 -0400</b>
</p>

<p>
Hey Everyone,
  Got the questions below via email and I was hoping one of you might 
have an answer for him (The stuff in brackets are my questions):
</p>

<p>
1. If /tmp partition is mounted with noexec and nosuid flags, is it not 
possible to run ./configure? If so how can we bypass this?
</p>

<p>
(I remember reading somewhere that mounting /tmp with noexec and nosuid 
is a good security precaution, but if it causes trouble with the 
./configure then is it worth it?)
</p>

<p>
2. How to modify (RPM - atrpms.net) installation of FFMPEG to include 
the amr_nb / amr_wb fixes in order for me to be able to convert 3GPP 
video to FLV.
</p>

<p>
Thanks for the help.
</p>

<p>
- Suramya
</p>

<p>
-------- Original Message --------
<pre>
Subject: Re: FFMPEG Installation
Date: Tue, 10 Oct 2006 17:57:20 +0100
From: &lt;markw2@fireflyuk.net&gt;
To: TAG &lt;tag@lists.linuxgazette.net&gt;
To: Suramya Tomar &lt;suramya at suramya.com&gt;
</pre>References: &lt;004901c6ea0e$05b24a10$0502a8c0 at MARKDESKTOP&gt; 
&lt;452BC78B.9040008 at suramya.com&gt;
</p>

<p>
Hi Suramya, thanks for your reply. It's really appreciated.
</p>

<p>
Please feel free to forward my e-mail to this group as it would be great 
to have a solution to this.
</p>

<p>
Thanks again and best regards
</p>

<p>
Mark
</p>

<p>
PS. Would you know of any guide/tutorial that explains how to 
create/modify RPM's, where files are stored and where spec files can be 
found, once they are installed on a system?
</p>

<p>
----- Original Message -----
<pre>
From: "Suramya Tomar" &lt;suramya@suramya.com&gt;
To: TAG &lt;tag@lists.linuxgazette.net&gt;
To: &lt;markw2 at fireflyuk.net&gt;
</pre>Sent: Tuesday, October 10, 2006 5:17 PM
<pre>
Subject: Re: FFMPEG Installation
</pre>
</p>


<p>
<pre>
&gt; Hey Mark,
&gt;  I don't know a solution to your problem off the top of my head, but I 
&gt; know someone who does, Basically its a group called The Answer Gang (TAG) 
&gt; at the linuxgazette.net (Of which I am also a member) which answers linux 
&gt; related questions and the resulting exchange/solutions are printed in the 
&gt; next issue of the LG so that others can also benefit from it.
&gt;
&gt;  If you don't mind then I will forward your mail to them and hopefully we 
&gt; will have a solution for this soon.
&gt;
&gt; Let me know.
&gt;
&gt; Thanks,
&gt;  Suramya
&gt;
&gt;&gt; Hi there,
&gt;&gt;  I saw your tutorial on the Installation of ffmpeg at 
&gt;&gt; <a href="http://www.linuxjournal.com/article/8517">http://www.linuxjournal.com/article/8517</a>.
&gt;&gt;  I'd like to ask if it would be at all possible for some assistance from 
&gt;&gt; yourself to modify my (RPM - atrpms.net) installation of FFMPEG to 
&gt;&gt; include the amr_nb / amr_wb fixes in order for me to be able to convert 
&gt;&gt; 3GPP video to FLV.
&gt;&gt;  I've just purchased a new dedicated server with CentOS 4.4 and 
&gt;&gt; WHM/cPanel, and my problems have started because I can't install FFMPEG 
&gt;&gt; directly using subversion and the standard make install method, because 
&gt;&gt; /tmp partition is mounted with noexec and nosuid flags, so it's not 
&gt;&gt; possible to run the ./configure command.
&gt;&gt; Unless there's some kind of simple method which allows me to temporarily 
&gt;&gt; alter how ./configure operates, so that it doesn't try to store files in 
&gt;&gt; /tmp, I really don't know what to do, other than what I've already done; 
&gt;&gt; installing an RPM version of which I don't know how to add on the amr 
&gt;&gt; fixes.
&gt;&gt;  The reason I contacted you in particular is because you wrote a tutorial 
&gt;&gt; on the subject off ffmpeg and from looking through your website, you have 
&gt;&gt; a great deal of expertise in managing Linux.
&gt;&gt;  If you could please get back to me with how much you would charge etc to 
&gt;&gt; do this, I would very much appreciate it. It would just be nice to be 
&gt;&gt; able to talk to somebody trustworthy, who understands and is willing to 
&gt;&gt; assist me with these issues.
&gt;&gt;  Best regards
&gt;&gt; Mark Worthington
&gt;
&gt;
&gt; -- 
&gt; -----------------------------------------------------------------
&gt; Name : Suramya Tomar                  email: suramya at suramya.com
&gt; Yahoo ID: suramya                     AIM: SuramyaTomar
&gt; Homepage URL: <a href="http://www.suramya.com">http://www.suramya.com</a>
&gt; -----------------------------------------------------------------
&gt;
&gt; <strong>**********************************************************</strong>
&gt; Disclaimer:
&gt; Any errors in spelling, tact, or fact are transmission errors.
&gt; <strong>**********************************************************</strong> 
</pre>
</p>


<p>
<pre>-- 
<pre>
Name : Suramya Tomar                  email: suramya at suramya.com
Yahoo ID: suramya                     AIM: SuramyaTomar
Homepage URL: <a href="http://www.suramya.com">http://www.suramya.com</a>
</pre>
</pre>************************************************************
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-FFMPEG_Installation">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b>Predrag Ivanovic [predivan at ptt.yu]</b><br />
<b>Wed, 18 Oct 2006 18:05:05 +0200</b>
</p>

<p>
On Tue, 10 Oct 2006 17:04:22 -0400
Suramya Tomar wrote:
</p>


<p>
<pre>
&gt; 2. How to modify (RPM - atrpms.net) installation of FFMPEG to include 
&gt; the amr_nb / amr_wb fixes in order for me to be able to convert 3GPP 
&gt; video to FLV.
&gt; 
</pre>
</p>

<p>
You'll have to rebuild ffmpeg if you want that, so you'll need ffmpeg src.rpm[1], amr-nb[2] and amr-wb source[3].
<pre>
[1]<a href="http://dl.atrpms.net/all/ffmpeg-0.4.9-17_r6524.at.src.rpm">http://dl.atrpms.net/all/ffmpeg-0.4.9-17_r6524.at.src.rpm</a> or
 <a href="http://dag.wieers.com/packages/ffmpeg/ffmpeg-0.4.9-0.6.20060918.rf.src.rpm">http://dag.wieers.com/packages/ffmpeg/ffmpeg-0.4.9-0.6.20060918.rf.src.rpm</a>
[2]<a href="http://www.3gpp.org/ftp/Specs/archive/26_series/26.104/26104-510.zip">http://www.3gpp.org/ftp/Specs/archive/26_series/26.104/26104-510.zip</a>
[3]<a href="http://www.3gpp.org/ftp/Specs/archive/26_series/26.204/26204-510.zip">http://www.3gpp.org/ftp/Specs/archive/26_series/26.204/26204-510.zip</a>
</pre>
It's been years since I used rpm-based distros, so you'll have to work out details yourself[4][6], but procedure is as follows:
</p>

<p>
install src.rpm with rpm -ivv and check the output to see where it installed
 sources and spec file.
 
</p>

<p>
In this case source is ffmpeg-0.4.9 tar.bz2.
</p>

<p>
 
Extract it with 'tar -xjf ffmpeg-0.4.9.tar.bz2'.
</p>

<p>
 
Then unzip [2] to ffmpeg-0.4.9/libavcodec/amr_float, 
and [3] to ffmpeg-0.4.9/libavcodec/amrwb_float.
</p>

<p>
 
After that, recreate ffmpeg tarball with 'tar -cjf ffmpeg-0.4.9.tar.bz2 ffmpeg-0.4.9'.
</p>

<p>
 
Now, you'll have to edit spec file.
</p>

<p>
 
Open it in editor, and find %build section in it.
</p>

<p>
 
Add '--enable-amr-wb'  as ./configure switch(amr_float is enabled by default)[5].
</p>

<p>
 
Save spec file.
</p>

<p>
 
Build and install it:
</p>

<p>
<pre>
rpm -ba ffmpeg.spec  
</pre>
That's it.Hopefully ;)
 
</p>

<p>
<pre>
&gt; Mark
&gt; 
&gt; PS. Would you know of any guide/tutorial that explains how to 
&gt; create/modify RPM's, where files are stored and where spec files can be 
&gt; found, once they are installed on a system?
</pre>
<pre>
<a href="http://dag.wieers.com/howto/rpm/">http://dag.wieers.com/howto/rpm/</a>
<a href="http://www-106.ibm.com/developerworks/library/l-rpm1/">http://www-106.ibm.com/developerworks/library/l-rpm1/</a>
<a href="http://www.centos.org/modules/newbb/index.php">http://www.centos.org/modules/newbb/index.php</a>
man rpm
[4]<a href="http://www.rpm.org/max-rpm/s1-rpm-miscellania-srpms.html">http://www.rpm.org/max-rpm/s1-rpm-miscellania-srpms.html</a>
[5] According to avcodec/amr.c 
[6]<a href="http://www.rpm.org/max-rpm/ch-rpm-b-command.html">http://www.rpm.org/max-rpm/ch-rpm-b-command.html</a>
</pre>
HTH.
</p>

<p>
Pedja
<pre>-- 
 To set aside my fears over the car going bang I have built an ingenious
 squirrel trap from a cat basket, some elastic bands, two cable ties, a
 cork and a piece of string  --  Adrian Foden seeks lunch, in #ukmg
</pre>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-FFMPEG_Installation">Back</a><hr width="50%" align="left" /><p><br /></p></div>
</body>
</html>
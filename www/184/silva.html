<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="utf-8" xml:lang="utf-8">
<head>
<title>The reason why I have switched to zsh - Part 2 LG #184</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../lg.css" type="text/css" media="screen, projection"  />
<link rel="alternate" type="application/rss+xml" title="LG RSS" href="../lg.rss" />
<link rel="alternate" type="application/rdf+xml" title="LG RDF" href="../lg.rdf" />
<!-- link rel="alternate" type="application/atom+xml" title="LG Atom" href="lg.atom.xml" / -->
<link rel="shortcut icon" href="../favicon.ico" />

<style type="text/css" media="screen, projection">
<!--

-->
</style>

</head>
<body>

<a href="../">
<img src="../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" alt="Linux Gazette"/>
</a>
<p id="fun">...making Linux just a little more fun!</p>

<div id="navigation">
<table summary="masthead" width="100%">
<tr>
<td align="center" colspan="3" style="font-size: 10px; font-weight: bold">
<a href="../index.html">Home</a>
<a href="http://linuxgazette.net">Main Site</a>
<a href="../faq/index.html">FAQ</a>

<a href="../lg_index.html">Site Map</a>
<a href="../mirrors.html">Mirrors</a>
<a href="../mirrors.html">Translations</a>
<a href="../search.html">Search</a>
<a href="../archives.html">Archives</a>
<a href="../authors/index.html">Authors</a>
<a href="http://lists.linuxgazette.net/listinfo.cgi">Mailing Lists</a>
<a href="../jobs.html">Join Us!</a>
<a href="../contact.html">Contact Us</a>

<hr width="99%" style="border: 1px inset #000033">
</td>
</tr>
<tr>
<td width="40%" align="left" style="font-size: 10px; font-weight: bold">
The Free International Online Linux Monthly
</td>
<td width="20%" align="center" style="font-size: 10px; font-weight: bold">
ISSN: 1934-371X
</td>
<td width="40%" align="right" style="font-size: 10px; font-weight: bold">
Main site: <a href="http://linuxgazette.net">http://linuxgazette.net</a> 
</td>
</table>
</div>


<div id="breadcrumbs1">

<a href="../index.html">Home</a> &gt; 
<a href="index.html">March 2011 (#184)</a> &gt; 
Article

</div>

<div class="articlecontent1">
<div class="content">

<div id="previousnexttop">
<A HREF="okopnik.html" >&lt;-- prev</A> | <A HREF="silva2.html" >next --&gt;</A>
</div>

<h1>The reason why I have switched to zsh - Part 2</h1>
<p id="by"><b>By <a href="../authors/silva.html">Anderson Silva</a> and <a href="../authors/woodson.html">Matt Woodson</a></b></p>

<p>
<a href=
"http://linuxgazette.net/183/silva.html">Last month</a>, Matt and I decided to 
share with you why zsh is worth a try. Matt shared his .zshrc in the article, 
and we started
to walk you through a few of the &lsquo;goodies&rsquo; available under zsh. We
concluded the first part of this zsh series by promising you we would tackle a
few more zsh features this month. Well, here they are:</p>

<h3>Spelling correction</h3>

<p>In bash, mistype vim and you will likely get the
infamous: &nbsp;&ldquo;command not found&rdquo; message on your terminal. In
zsh:</p>

<pre class="code">
$ ivm <br>
zsh: correct 'ivm' to 'vim' [nyae]?
</pre>

<p>To turn on this feature add: setopt CORRECT to your .zshrc</p>

<p>If you feel really lucky, you can tell zsh to
try to correct your mispellings even in the argument list by using: setopt
CORRECT_ALL.</p>

<h3>Extended Globbing</h3>

<p>Do you find &lsquo;find&rsquo; (no pun intended)
a bit too cumbersome to use? Don&rsquo;t get me wrong, I love the find command,
but zsh gobbling makes some forms of the find command look a bit
ugly.</p>

<p>Here&rsquo;s a few examples:</p>

<p>1. Find all executable files by owner under
current directory and sub-directories:</p>

<p>With find:</p>

<pre class="code">
$ find . -perm -u+x -type -f
</pre>

<p>With zsh:</p>

<pre class="code">
$ ls -s **/*(.x)
</pre>

<p>2. Find files that are larger than 100MB in size
under current directory and sub-directories:</p>

<p>With find:</p>

<pre class="code">
$ find . -type f -size 10M
</pre>

<p>With zsh:</p>

<pre class="code">
$ ls **/*(.Lm+100)
</pre>

<p>3. List all non jpg files under directory and
sub-directories:</p>

<p>With zsh:</p>

<pre class="code">
$ ls **/^*.jpg
</pre>

<p>You can turn on extended globbing on your .zshrc
by adding:</p>

<p>setopt extendedglob</p>

<p>If you would like to see all the globbing
options for ls zsh support enter:</p>

<pre class="code">
$ ls *(&lt;tab&gt;
completing glob qualifier
% &nbsp;-- device files
) &nbsp;-- end of qualifiers
* &nbsp;-- executable plain files
+ &nbsp;-- + command name
- &nbsp;-- follow symlinks toggle
. &nbsp;-- plain files
/ &nbsp;-- directories
: &nbsp;-- modifier
= &nbsp;-- sockets
@ &nbsp;-- symbolic links
...
</pre>

<h3>Aliases</h3>

<p>zsh has many different types of aliases,
including regular, suffix, and global.</p>

<p>Regular aliases are treated the same as in bash.
&nbsp;These alias need to be run in the command position (first thing typed) on
the terminal. e.g:</p>

<pre class="code">
alias ll=&rsquo;ls -la&rsquo;
</pre>

<p>Suffix aliases execute a command based on a
file&rsquo;s extension. Suffix aliases are used with the alias -s command.
&nbsp;Here&rsquo;s my favorite feature of aliases in zsh. &nbsp;By adding this
line:</p>

<pre class="code">
alias -s html=vim
</pre>

<p>when you enter a file name with the .html
extension, something like:</p>

<pre class="code">
$ index.html
</pre>

<p>zsh will automatically invoke vim to open up
that file.</p>

<p>Global aliases can be used anywhere in the
command line, not just the command position. &nbsp;This is best seen by
example. &nbsp;The global alias defined:</p>

<pre class="code">
alias -g G=&rsquo;|grep &lsquo;'
</pre>

<p>This would be invoked like this:</p>

<pre class="code">
$ cat /var/log/messages G ERROR
</pre>

<p>This will put it in the pipe with the grep
command. </p>

<h3>Floating Point Math</h3>

<p>Given the following shell script:</p>

<pre class="code">
(( X = 5.0 + 0.5 ))
(( Y = 33.0 / 9.0 ))
echo $X
echo $Y
</pre>

<p>Output:</p>
<pre class="code">
5.5000000000
3.6666666667
</pre>

<p>Many times in bash I have needed to do floating
point math calculations for a variety of reasons. &nbsp;Now, with zsh, you
don&rsquo;t need to invoke external programs like bc or perl just to do a
floating point math calculation.</p>

<h3>Version Control Information on Your
Prompt</h3>

<p>If you ever used git, you probably have checked
a branch, and then forgot what branch you were in, and ran: <em>git branch -a</em> to locate yourself within the repo.
In zsh, a person can set up their prompt so it will display all the relevant
information needed while navigating some of the most populate version control
systems out there.</p>

<p>The following needs to happen to get your VCS
information displayed:</p>

<p>1. Load the vcs_info module into zsh. You can
achieve this by adding the following to your .zshrc:</p>

<pre class="code">autoload -Uz vcs_info</pre>

<p>2. Set the zstyles for the vcs_info. Here, you
will be able to tell what type of VCS it should detect, and how it should
behave. For a more in depth look at zstyles for vcs_info check out the zsh
manual page. &nbsp;</p>

<p>zstyle ':vcs_info:*' enable git cvs
svn</p>

<p>If you take a look at Matt&rsquo;s zshrc file
from<a href=
"http://linuxgazette.net/183/silva.html">
last month</a>, you will see a few other zstyles
configured to manage color and behavior of the vcs_info function.</p>

<p>3. Call vcs_info function before each prompt.
This will be accomplished by a really interesting zsh function called precmd(),
which will discuss on part three of the zsh series.</p>

<pre class="code">
precmd() {<br>
&nbsp;vcs_info &lsquo;prompt&rsquo;</br>
}<br>
</pre>

<p>4. Set the PROMPT variable with vcs_info_msg_0_
variable. In zsh, PROMPT is the same as PS1.</p>

<pre class="code">
PROMPT='${vcs_info_msg_0_}%B%F{blue}]&#9472;&gt;
%f%b&rsquo;'
</pre>

<p><img height="258" src="misc/silva/zsh-p2.png" width="584"></p>
<p>In this screenshot, my prompt tells me what vcs
I am using, git, in which branch of the repository I have currently checked
out, master, and in what stage of the commit is currently being displayed. The
yellow asterisk &lsquo;*&rsquo;, means I have modified a file.</p>
<p>The yellow plus &lsquo;+&rsquo;, means I have
added the file, but still need to commit it.</p>

<h3>Vertical Argument History</h3>

<p>Ok, I made up the name &lsquo;Vertical Argument
History&rsquo;, but bear with me. Do you know how in bash (and zsh), while on
the command line one can use the up and down keys to move through the shell
history?</p>

<p>In bash, you may be familiar with Alt-., which
takes you to the last argument of the previous entry from your history. Well,
in zsh, one can use: Alt-/ (slash) and Alt-, (comma) to move through the
argument history of your shell history... Get it? Check this out:</p>

<pre class="code">
$ touch 1 2 3 4 5
1 2 3 4 5
$ cp &lt;Alt-Slash&gt; /tmp
</pre>

<p>The above command with the Alt-/ shortcut will
generate:</p>

<pre class="code">$ cp 5 /tmp/</pre>

<p>Hit Alt-/ twice, instead of once and it will
execute:</p>

<pre class="code">$ cp 4 /tmp/</pre>

<p>As you hit Alt-/ and go through the list of
previous arguments, you can use Alt-, to go back through the
arguments.</p>

<h3>Conclusion</h3>

<p>I don&rsquo;t claim to be a zsh expert, and
during the past few weeks, I have been picking Matt&rsquo;s brain every time I
have a question about it, and every time he figures out a new feature he is
kind enough to share with me. Hopefully, the above has given you a few more
reasons to give zsh a try, and we look forward to finishing up the zsh series
next month when we will write about the precmd() and preexec() functions in zsh
and give you an example or two of how to use it.


<br clear="all" />

<table align='center' cellspacing='10'>
<tr>
<td>
<script type='text/javascript'>
digg_url = 'http://linuxgazette.net/184/silva.html';
digg_title = 'The reason why I have switched to zsh - Part 2';
digg_bodytext = '<p> Last month, Matt and I decided to  share with you why zsh is worth a try. Matt shared his .zshrc in the article,  and we started to walk you through a few of the &lsquo;goodies&rsquo; available under zsh. We concluded the first part of this zsh series by promising you we would tackle a few more zsh features this month. Well, here they are:</p> ';
digg_topic = 'linux_unix';
</script>
<script src="http://digg.com/tools/diggthis.js" type="text/javascript"></script>
</td>
<td>
<a name="fb_share" type="box_count" href="http://www.facebook.com/sharer.php">Share</a>
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript"></script>
</td>
<td>
<a href="http://twitter.com/home?status=Currently%20reading:%20http://linuxgazette.net/184/silva.html%20at%20Linux%20Gazette%20%23linuxgazette" title="Click to share this post on Twitter"><img src="../gx/twitter.png" width="50" height="85" border="0"></a>
</td>
</tr>
</table>


<p class="talkback">
Talkback: <a
href="mailto:tag@lists.linuxgazette.net?subject=Talkback:184/silva.html">Discuss this article with The Answer Gang</a>
</p>

<!-- *** BEGIN author bio *** -->
<H4>Anderson Silva</H4>
<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/authors/silva.jpg" class="bio">
</p>

<em>
<p>
Anderson Silva works as an IT Release Engineer at Red Hat, Inc. He holds a
BS in Computer Science from Liberty University, a MS in Information Systems
from the University of Maine. He is a Red Hat Certified Architect and has
authored several Linux based articles for publications like: Linux Gazette,
Revista do Linux, and Red Hat Magazine. Anderson has been married to his
High School sweetheart, Joanna (who helps him edit his articles before
submission), for 11 years, and has 3 kids. When he is not working or
writing, he enjoys photography, spending time with his family,  road
cycling, watching Formula 1 and Indycar races, and taking his boys karting,
</p>

</em>

<br clear="all">


<H4>Matt Woodson</H4>
<hr>
<p>
<img align="left" alt="[BIO]" src="../gx/2002/note.png" class="bio">
</p>

<em>
<p>
Matt Woodson works as an IT Software Enginner at Red Hat, Inc. Matt has
 been involved with many different postitions at multiple Linux companies
 including Red Hat, Novell, and Caldera. He has done jobs that range from
 systems administration, networking, to quality engineering. He is a Red
 Hat Certified Engineer, who spent time teaching RHCE classes in all
 parts of the country. Matt, and his wife Mariah, of 3 years, are
 expecting their first daughter in Feb 2011.
</p>



</em>

<br clear="all">



<!-- *** END author bio *** -->

<div id="articlefooter">

<p>
Copyright &copy; 2011, Anderson Silva and Matt Woodson. Released under the <a
href="http://linuxgazette.net/copying.html">Open Publication License</a>
unless otherwise noted in the body of the article.
<!-- Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc. -->
</p>

<p>
Published in Issue 184 of Linux Gazette, March 2011
</p>

</div>

<div id="previousnextbottom">
<A HREF="okopnik.html" >&lt;-- prev</A> | <A HREF="silva2.html" >next --&gt;</A>
</div>

</div>
</div>

<script src="http://www.google-analytics.com/urchin.js"
type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1204316-1";
urchinTracker();
</script>







<img src="../gx/tux_86x95_indexed.png" id="tux" alt="Tux"/>

</body>
</html>


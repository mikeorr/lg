<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
		 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' lang='utf-8' xml:lang='utf-8'>
<head>
<title>Disk Errors causing machine to freeze</title>
<meta http-equiv='Content-Type; charset=utf-8' />
<link rel='stylesheet' type='text/css' href='../../../lg.css' />
</head>
<body>
<a href="../../../"><img alt="Linux Gazette" src="../../../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" /></a><img alt="Tux" src="../../../gx/tux_86x95_indexed.png" id="tux" /><p id="fun">...making Linux just a little more fun!</p><div class='content articlecontent'><a name="top"></a><h3>Disk Errors causing machine to freeze</h3>
<p>
<b><p>
Ben Whyte [ben at whyte-systems.co.uk]

</p>
</b><br />
<b>Sat, 07 Feb 2009 11:55:03 +0000</b>
</p>

<p>
Hi
</p>

<p>
When I am writing to my disk every now and again, the machine stops
responding for a period.  When I look in syslog I see messages like this
</p>

<p>
<pre class='code'>
Feb  7 11:18:02 thor kernel: [ 1515.415879] ata1.00: exception Emask 0x0
SAct 0x0 SErr 0x0 action 0x6 frozen
Feb  7 11:18:02 thor kernel: [ 1515.415896] ata1.00: cmd
35/00:e0:57:5c:8e/00:03:08:00:00/e0 tag 0 dma 507904 out
Feb  7 11:18:02 thor kernel: [ 1515.415899]          res
40/00:00:00:00:00/00:00:00:00:00/00 Emask 0x4 (timeout)
Feb  7 11:18:02 thor kernel: [ 1515.415905] ata1.00: status: { DRDY }
Feb  7 11:18:02 thor kernel: [ 1515.415923] ata1: soft resetting link
Feb  7 11:18:03 thor kernel: [ 1515.964911] ata1.00: configured for UDMA/133
Feb  7 11:18:03 thor kernel: [ 1515.964911] ata1: EH complete
Feb  7 11:18:03 thor kernel: [ 1515.964911] sd 0:0:0:0: [sda] 1953523055
512-byte hardware sectors (1000204 MB)
Feb  7 11:18:03 thor kernel: [ 1515.964911] sd 0:0:0:0: [sda] Write
Protect is off
Feb  7 11:18:03 thor kernel: [ 1515.964911] sd 0:0:0:0: [sda] Mode
Sense: 00 3a 00 00
Feb  7 11:18:03 thor kernel: [ 1515.964911] sd 0:0:0:0: [sda] Write
cache: enabled, read cache: enabled, doesn't support DPO or FUA
Feb  7 11:21:07 thor kernel: [ 1709.741765] ata1.00: exception Emask 0x0
SAct 0x0 SErr 0x0 action 0x6 frozen
Feb  7 11:21:07 thor kernel: [ 1709.741780] ata1.00: cmd
35/00:e8:4f:76:ad/00:01:0a:00:00/e0 tag 0 dma 249856 out
Feb  7 11:21:07 thor kernel: [ 1709.741782]          res
40/00:00:00:00:00/00:00:00:00:00/00 Emask 0x4 (timeout)
Feb  7 11:21:07 thor kernel: [ 1709.741785] ata1.00: status: { DRDY }
Feb  7 11:21:07 thor kernel: [ 1709.741799] ata1: soft resetting link
Feb  7 11:21:08 thor kernel: [ 1710.444091] ata1.00: configured for UDMA/133
Feb  7 11:21:08 thor kernel: [ 1710.444091] ata1: EH complete
Feb  7 11:21:08 thor kernel: [ 1710.444091] sd 0:0:0:0: [sda] 1953523055
512-byte hardware sectors (1000204 MB)
Feb  7 11:21:08 thor kernel: [ 1710.444091] sd 0:0:0:0: [sda] Write
Protect is off
Feb  7 11:21:08 thor kernel: [ 1710.444091] sd 0:0:0:0: [sda] Mode
Sense: 00 3a 00 00
Feb  7 11:21:08 thor kernel: [ 1710.459700] sd 0:0:0:0: [sda] Write
cache: enabled, read cache: enabled, doesn't support DPO or FUA
</pre>

<p>
So far this appears to cause the hard drive to collect errors and
eventually for filesystem corruption to occur.
</p>

<p>
Has anyone seen this sort of thing before and are you able to shed any
light on what might be happening.
</p>

<p>
This has been on going for a while now, and I have tried different
drives and different cables.
</p>

<p>
Although it may not be immediately obvious its using SATA
</p>

<p>
Thanks
</p>

<p>
Ben
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-disk_errors_causing_machine_to_freeze">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas.adam22 at gmail.com]

</p>
</b><br />
<b>Sat, 7 Feb 2009 12:01:38 +0000</b>
</p>

<p>
2009/2/7 Ben Whyte &lt;ben@whyte-systems.co.uk&gt;:
</p>

<pre>
&gt; Hi
&gt;
&gt; When I am writing to my disk every now and again, the machine stops
&gt; responding for a period.  When I look in syslog I see messages like this
&gt;
&gt; Feb  7 11:18:02 thor kernel: [ 1515.415879] ata1.00: exception Emask 0x0
&gt; SAct 0x0 SErr 0x0 action 0x6 frozen
</pre>

<p>
<a href='http://lists.debian.org/debian-powerpc/2007/08/msg00155.html'>http://lists.debian.org/debian-powerpc/2007/08/msg00155.html</a>
</p>

<p>
-- Thomas Adam
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-disk_errors_causing_machine_to_freeze">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Whyte [ben at whyte-systems.co.uk]

</p>
</b><br />
<b>Sat, 07 Feb 2009 12:07:36 +0000</b>
</p>

<pre>
&gt; <a href='http://lists.debian.org/debian-powerpc/2007/08/msg00155.html'>http://lists.debian.org/debian-powerpc/2007/08/msg00155.html</a>
&gt;
&gt; -- Thomas Adam
&gt;   
</pre>

<p>
Thomas
</p>


<p>
Thanks for your reply, I am not sure what the relevant section of that 
link is.
</p>

<p>
I have the ide-core module when I do a lsmod
</p>

<p>
I am 99.9% certain that this is not a problem with the disk as this is a 
brand new disk, and it has done this with 4 different hard disks now.
</p>

<p>
Ben
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-disk_errors_causing_machine_to_freeze">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas.adam22 at gmail.com]

</p>
</b><br />
<b>Sat, 7 Feb 2009 12:16:03 +0000</b>
</p>

<p>
2009/2/7 Ben Whyte &lt;ben@whyte-systems.co.uk&gt;:
</p>

<pre>
&gt; Thanks for your reply, I am not sure what the relevant section of that link
&gt; is.
</pre>

<p>
Read the entire thread, it suggests that your problem is either that
your disk is on the way out, or more likely the initrd (and initfs) is
incompatible with the kernel you're running.
</p>

<p>
-- Thomas Adam
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-disk_errors_causing_machine_to_freeze">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Whyte [ben at whyte-systems.co.uk]

</p>
</b><br />
<b>Sat, 07 Feb 2009 12:20:40 +0000</b>
</p>

<pre>
&gt; Read the entire thread, it suggests that your problem is either that
&gt; your disk is on the way out, or more likely the initrd (and initfs) is
&gt; incompatible with the kernel you're running.
&gt;
&gt; -- Thomas Adam
&gt;   
</pre>

<p>
How can I try and identify if the initrd and initfs are incompatable, 
this is a installation of debian unstable using the kernel 2.6.26-1.
</p>

<p>
As I said this is the 4th drive in a row to report this error.
</p>

<p>
I am starting to think that I  may have a problem with the motherboard.
</p>

<p>
Ben
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-disk_errors_causing_machine_to_freeze">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Chris Bannister [mockingbird at earthlight.co.nz]

</p>
</b><br />
<b>Sat, 14 Feb 2009 23:20:29 +1300</b>
</p>

<p>
On Sat, Feb 07, 2009 at 12:20:40PM +0000, Ben Whyte wrote:
</p>

<pre>
&gt; 
&gt; &gt; Read the entire thread, it suggests that your problem is either that
&gt; &gt; your disk is on the way out, or more likely the initrd (and initfs) is
&gt; &gt; incompatible with the kernel you're running.
&gt; &gt;
&gt; &gt; -- Thomas Adam
&gt; &gt;   
&gt; 
&gt; How can I try and identify if the initrd and initfs are incompatable, 
&gt; this is a installation of debian unstable using the kernel 2.6.26-1.
</pre>

<p>
"dpkg-reconfigure linux-image-2.6.26-1-686" should do it.
 
</p>

<pre>
&gt; As I said this is the 4th drive in a row to report this error.
</pre>

<p>
Same type of drives? Maybe the driver is too generic?
</p>


<pre>
&gt; I am starting to think that I  may have a problem with the motherboard.
</pre>

<p>
I would suggest subscribing to debian-user@lists.debian.org and asking
your question there. You could try a latter kernel and see if that fixes
it, particularly if your hardware is fairly new.
</p>

<pre>-- 
Chris.
======
I contend that we are both atheists. I just believe in one fewer god
than you do. When you understand why you dismiss all the other
possible gods, you will understand why I dismiss yours.
                                           -- Stephen F Roberts
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-disk_errors_causing_machine_to_freeze">Back</a><hr width="50%" align="left" /><p><br /></p></div>
</body>
</html>
<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>lpr works for user not root in Basiclinux 2.1</title>
<link rel="stylesheet" type="text/css" href="../../../lg.css" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body>
<a href="../../../"><img alt="Linux Gazette" src="../../../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" /></a><img alt="Tux" src="../../../gx/tux_86x95_indexed.png" id="tux" /><p id="fun">...making Linux just a little more fun!</p><div class='content articlecontent'><a name="top"></a><h3>lpr works for user not root in Basiclinux 2.1</h3>
<p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Wed, 24 Jan 2007 11:43:43 -0500 (EST)</b>
</p>

<p>
<a href="http://www.ibiblio.org/pub/linux/distributions/baslinux">http://www.ibiblio.org/pub/linux/distributions/baslinux</a>
Current version 3.40 based on Slackware 4.0 and uClibc
</p>

<p>
<a href="http://www.ibiblio.org/pub/linux/distributions/baslinux/bl2/index.htm">http://www.ibiblio.org/pub/linux/distributions/baslinux/bl2/index.htm</a>
Previous version 2.1 based on Slackware 7.1
</p>

<p>
Basiclinux 2.1 comes with a 'user', 3.40 does not.
</p>

<p>
The author (Steven Darnold) and some highly experienced support mailing 
list members have not solved this problem in four years.
</p>

<p>
cat filename &gt; /dev/lp0 works for root, so does gs used CLI without lpr, 
or pbmtolj from netpbm.
</p>

<p>
lpr used from Opera, lpr filename or even cat filename | lpr work for 
'user', but for root they do not send anything to the print queue (lpq 
shows no entries).  No error messages.  I just get another prompt.
</p>

<p>
Permissions for lpr are unchanged from Slackware 7.1:
<pre>
-r-s--s--x 1 root lp
</pre>
(Must be s to print as user).
</p>

<pre>
lp0 is crw-r--r-- 1 root root
</pre>
chmod a+w lp0 did not help (crw-rw-rw-) nor did chmod 777 (crwxrwxrwx). 
lp0 works for root except with lpr.
</p>

<p>
In order to work as user I have had to change permissions on /dev/null 
(w), ttyp* and ptyp* (rw), set suid XVESA and anything svgalib (links2, 
zgv, gs), make /var/lock writeable, make any scripts suid or executable as 
user, etc.  An education.  I can now suid user (or login as user), dial, 
load Xvesa, icewm, and rxvt and Opera and print as user.
</p>

<p>
ssh still says 'host key verification failed' though telnet works.
</p>

<p>
I would like to quit struggling with permissions every time I try to work 
as user, and be able to print as root.  I do know I should not work as 
root online but I am not running any servers while online with my modem.
If you scold me please explain why.
</p>

<p>
Also BL3.40 comes with only root not user, so it would be helpful to print 
as root.  Both distributions were designed to be used as root, and the 
author is therefore not interested in solving the problem.
</p>

<p>
No other distribution seems to have this problem.  I read your knowledge 
base and various HOWTOs.
</p>

<p>
Does lpr depend on some other program, library, or device that I need to 
change permissions for?  Can YOU print with lpr as root?
</p>

<p>
Back around 2002 you explained how to use a 2-floppy disk Basiclinux 1 
with mdacon when I had no modprobe or telinit.  I am typing this on my 
dual-head system on the amber TTL monitor.  You also helped me with OSS 
and I can now record midi files from the 1986 Yamaha electronic piano to 
libc5 Rosegarden.
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Kapil Hari Paranjape [kapil at imsc.res.in]
</p>
</b><br />
<b>Thu, 25 Jan 2007 10:37:42 -0800</b>
</p>

<p>
Hello,
</p>

<p>
On Thu, 25 Jan 2007, Sindi Keesan wrote:
</p>

<pre>
&gt; (I am sending a copy to one of our list members who has tried to figure 
&gt; out this lpr problem, as well as to The Answer Gang.
</pre>

<p>
Oops. Did I forget to include the list in my reply? Sorry about that.
</p>


<pre>
&gt; What I want help with is printing as root so I won't need to jump
&gt; through hoops to get every program working as 'user'.  I must not
&gt; have made this clear.
</pre>

<p>
I understand that you want to avoid doing things as "root" and prefer
to do things as "user". That is a very good thing <img src="../gx/smile.png" alt=":-)">
</p>


<pre>
&gt; There is no .perm file listed in the lpr.tgz package which I added.
&gt; I don't think we have LPRng.
</pre>

<p>
I'm still not clear on which print package you have. Perhaps it is
the "classical" BSD lpr package. I don't recall that package
disabling printing as root. However, this may have been added as a
security measure --- explanation follows:
</p>

<p>
1.  Some printing filters like "gs" are interpreters for the
	programming language that describes the page that they are
	about to print.
</p>

<p>
2.	Files to be printed should then be treated as programs
	for these interpreters.
</p>

<p>
3. 	Since printing by "root" would lead (possibly
	inadvertently) to the execution of these "programs" it is
	often disabled.
</p>


<pre>
&gt; &gt;&gt;ssh still says 'host key verification failed' though telnet works.
&gt; 
&gt; The key works for root, not user.
</pre>

<p>
I didn't understand this. Which key works? Just a quick explanation
of ssh host keys:
</p>

<p>
1.  Each SSH server has a key called the "host" key.
</p>

<p>
2.  When a client connects to the server it tries to verify
	this host key in order to ensure that it is connecting to the
	correct server by comparing the key presented to it with the
	key in its "known_hosts" file.
</p>

<p>
3. 	Users often ignore ignore this verification by using
<pre>
		rm ~/.ssh/known_hosts
		or 
		ssh -o UserKnownHostsFile=/dev/null server-name
</pre>
	Of course this defeats half of the security of SSH <img src="../gx/smile.png" alt=":-)">
</p>

<p>
4.  A better solution is to add the correct host key to the
	known hosts file.
</p>

<p>
I have simplified this somewhat but perhaps not too significantly!
</p>

<p>
Hope this helps,
</p>

<p>
Kapil.
--
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Thu, 25 Jan 2007 14:48:18 -0500 (EST)</b>
</p>

<p>
On Thu, 25 Jan 2007, Kapil Hari Paranjape wrote:
</p>


<pre>
&gt;&gt; What I want help with is printing as root so I won't need to jump 
&gt;&gt; through hoops to get every program working as 'user'.  I must not have 
&gt;&gt; made this clear.
&gt;
&gt; I understand that you want to avoid doing things as "root" and prefer
&gt; to do things as "user". That is a very good thing <img src="../gx/smile.png" alt=":-)">
</pre>

<p>
No, I want to do everything as root (which is how our distributions were 
designed to work) and nothing as user, which is much more complicated to 
set up.  Right now I need to suid user to print with lpr.
</p>


<pre>
&gt;&gt; I don't think we have LPRng.
</pre>


<pre>
&gt; I'm still not clear on which print package you have. Perhaps it is
&gt; the "classical" BSD lpr package. I don't recall that package
</pre>

<p>
The lpr man page refers to BSD4.
</p>


<pre>
&gt; disabling printing as root. However, this may have been added as a
&gt; security measure --- explanation follows:
&gt; 	1. Some printing filters like "gs" are interpreters for the
&gt; 	programming language that describes the page that they are
&gt; 	about to print.
&gt; 	2. Files to be printed should then be treated as programs
&gt; 	for these interpreters.
&gt; 	3. Since printing by "root" would lead (possibly
&gt; 	inadvertently) to the execution of these "programs" it is
&gt; 	often disabled.
</pre>

<p>
How is it disabled?
</p>

<p>
gs works as root if I print from the command line.  lpr does not.
</p>

<p>
As root, I can print to a .ps file instead of the printer, and then print 
the .ps file with gs.  But I am setting up small linuxes for friends who 
just want to print formatted files directly with a wordprocessor or 
browser, and it is complicated to make our linux work as user for every 
program when it is designed to be used as root only.
</p>


<pre>
&gt;&gt;&gt;&gt; ssh still says 'host key verification failed' though telnet works.
&gt;&gt;
&gt;&gt; The key works for root, not user.
</pre>

<p>
After it did not work for 'user' without known_hosts, I copied known_hosts 
from /root/.ssh to /home/user/.ssh without changing the permissions.
</p>


<pre>
&gt; I didn't understand this. Which key works? Just a quick explanation
&gt; of ssh host keys:
&gt; 	1. Each SSH server has a key called the "host" key.
&gt; 	2. When a client connects to the server it tries to verify
&gt; 	this host key in order to ensure that it is connecting to the
&gt; 	correct server by comparing the key presented to it with the
&gt; 	key in its "known_hosts" file.
&gt; 	3. Users often ignore ignore this verification by using
&gt; 		rm ~/.ssh/known_hosts
</pre>

<p>
I tried deleting this file again.  It won't work with or without it.
Thanks for the explanation.
</p>


<pre>
&gt; 		or
&gt; 		ssh -o UserKnownHostsFile=/dev/null server-name
&gt; 	Of course this defeats half of the security of SSH <img src="../gx/smile.png" alt=":-)">
&gt; 	4. A better solution is to add the correct host key to the
&gt; 	known hosts file.
</pre>

<p>
This happened automatically when I went to any new URL as root.  I was 
asked first whether to add that key.  User was not asked whether to add a 
key and may not have the right to.  Do I need to change permissions on 
the known_hosts file from /root/.ssh to use it as user?
</p>


<pre>
&gt; I have simplified this somewhat but perhaps not too significantly!
&gt;
&gt; Hope this helps,
</pre>

<p>
Yes, I am starting to understand ssh, but not lpr ;=(
</p>

<p>
Running Linux lists a lot of permissions for printing-related files and 
user seems to always have more permissions than root.  I have been 
changing permissions on one or two files at a time in /var/spool.  Maybe I 
need to change several at once?
</p>

<p>
Would you like a complete list of permissions for /var/spool/* ?
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Kapil Hari Paranjape [kapil at imsc.res.in]
</p>
</b><br />
<b>Thu, 25 Jan 2007 14:09:40 -0800</b>
</p>

<p>
Hello,
</p>

<p>
On Thu, 25 Jan 2007, Sindi Keesan wrote:
</p>

<pre>
&gt; &gt;	3. Since printing by "root" would lead (possibly
&gt; &gt;	inadvertently) to the execution of these "programs" it is
&gt; &gt;	often disabled.
&gt; 
&gt; How is it disabled?
</pre>

<p>
In one of (at least) three ways that I know of:
<pre>
	a. When lpr is run it checks whether it is being run
	   as root and in that case it just drops the job.
	b. When lpr is run it checks whether it is being run
	   as root and in that case it refuses to use any filters.
	c. The filters themselves check to see whether they are
	   being run as root and in that case they refuse to run.
</pre>
I believe that (b) is quite common.
</p>


<pre>
&gt; But I am setting up small linuxes for friends who 
&gt; just want to print formatted files directly with a wordprocessor or 
&gt; browser, and it is complicated to make our linux work as user for every 
&gt; program when it is designed to be used as root only.
</pre>

<p>
As Ben has already pointed out: Running everything as root especially
when the users are non-technical is probably not very safe.
</p>


<pre>
&gt; This happened automatically when I went to any new URL as root.  I was 
&gt; asked first whether to add that key.  User was not asked whether to add a 
&gt; key and may not have the right to.  Do I need to change permissions on 
&gt; the known_hosts file from /root/.ssh to use it as user?
</pre>

<p>
Certainly, if the user wants to write to that file. The SSH client
pobably wants to do this on behalf of the user if the user home
directory is set as /root.
</p>

<p>
I still feel that you are conflating a lot of different issues:
<pre>
	a. Permissions (Running as root vs. running as user.)
	b. Problems with lpr.
	c. Problems with ssh.
</pre>
If you separated out these issues it might be easier to diagnose and
solve the problems. (a) and (b) may be related but I tend to think
that this is a configuration/program issue rather than a permissions
issue. There <strong>may</strong> be a relation between (a) and (c) but again this
may be because the $HOME directory of the user is configured in a
non-standard way. (b) and (c) are most probably[*] un-related.
</p>

<p>
However, here is a general remark. Given the security-related history
of "lpr" and the security-related use of "ssh", both are probably
quite finicky about file permissions and access and will often refuse
to run or give dire warnings (in their default configuration) if they
find something "screwy" like unusual permissions on a directory or
file.
</p>

<p>
Regards,
</p>

<p>
Kapil.
[*] I originally wrote "certainly" but the mathematician in me
prevailed to make it "most probably" <img src="../gx/smile.png" alt=":-)">
--
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Thu, 25 Jan 2007 21:48:18 -0500 (EST)</b>
</p>

<p>
On Thu, 25 Jan 2007, Kapil Hari Paranjape wrote:
</p>


<pre>
&gt; Hello,
&gt;
&gt; On Thu, 25 Jan 2007, Sindi Keesan wrote:
&gt;&gt;&gt; 	3. Since printing by "root" would lead (possibly
&gt;&gt;&gt; 	inadvertently) to the execution of these "programs" it is
&gt;&gt;&gt; 	often disabled.
&gt;&gt;
&gt;&gt; How is it disabled?
&gt;
&gt; In one of (at least) three ways that I know of:
&gt; 	a. When lpr is run it checks whether it is being run
&gt; 	   as root and in that case it just drops the job.
&gt; 	b. When lpr is run it checks whether it is being run
&gt; 	   as root and in that case it refuses to use any filters.
&gt; 	c. The filters themselves check to see whether they are
&gt; 	   being run as root and in that case they refuse to run.
&gt; I believe that (b) is quite common.
</pre>


<p>
I hope it is just a permissions problem.
</p>


<pre>
&gt;
&gt;&gt; But I am setting up small linuxes for friends who
&gt;&gt; just want to print formatted files directly with a wordprocessor or
&gt;&gt; browser, and it is complicated to make our linux work as user for every
&gt;&gt; program when it is designed to be used as root only.
&gt;
&gt; As Ben has already pointed out: Running everything as root especially
&gt; when the users are non-technical is probably not very safe.
</pre>

<p>
I will try to set them up as user.  But I can always reinstall the 40MB of 
software if they break it (and keep a backup .tgz of it on their drive in 
a DOS partition).
</p>



<pre>
&gt;&gt; This happened automatically when I went to any new URL as root.  I was
&gt;&gt; asked first whether to add that key.  User was not asked whether to add a
&gt;&gt; key and may not have the right to.  Do I need to change permissions on
&gt;&gt; the known_hosts file from /root/.ssh to use it as user?
&gt;
&gt; Certainly, if the user wants to write to that file. The SSH client
&gt; pobably wants to do this on behalf of the user if the user home
&gt; directory is set as /root.
</pre>

<p>
known_hosts is -rw------- 1 root root
I copied it to /home/user/.ssh
I did a chown known_hosts user and now my error message is
<pre>
Permission denied, please try again.
Permission denied (publickey,password,keyboard-interactive)
</pre>
I do not need to run ssh as user, I was just using it as an example of how 
much more complicated it is to make things work as user in our 
distribution.
</p>


<pre>
&gt; I still feel that you are conflating a lot of different issues:
&gt;
&gt; 	a. Permissions (Running as root vs. running as user.)
</pre>
Not necessary if I can get lpr to run as root.
</p>


<pre>
&gt; 	b. Problems with lpr.
</pre>
This is what I wanted help with.
</p>


<pre>
&gt; 	c. Problems with ssh.
&gt;
&gt; If you separated out these issues it might be easier to diagnose and
&gt; solve the problems. (a) and (b) may be related but I tend to think
&gt; that this is a configuration/program issue rather than a permissions
&gt; issue. There <strong>may</strong> be a relation between (a) and (c) but again this
&gt; may be because the $HOME directory of the user is configured in a
&gt; non-standard way. (b) and (c) are most probably[*] un-related.
</pre>


<pre>
&gt; However, here is a general remark. Given the security-related history
&gt; of "lpr" and the security-related use of "ssh", both are probably
&gt; quite finicky about file permissions and access and will often refuse
&gt; to run or give dire warnings (in their default configuration) if they
&gt; find something "screwy" like unusual permissions on a directory or
&gt; file.
</pre>

<p>
Lots of things in our distribution are screwy.  But it boots in 15 seconds 
and works well (once you get it working) on old hardware.  I am trying to 
make the old hardware work for friends who want to print webpages.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Kapil Hari Paranjape [kapil at imsc.res.in]
</p>
</b><br />
<b>Thu, 25 Jan 2007 14:22:22 -0800</b>
</p>

<p>
On Thu, 25 Jan 2007, Sindi Keesan wrote:
</p>

<pre>
&gt; On Thu, 25 Jan 2007, Kapil Hari Paranjape wrote:
&gt; &gt;I understand that you want to avoid doing things as "root" and prefer
&gt; &gt;to do things as "user". That is a very good thing <img src="../gx/smile.png" alt=":-)">
&gt; 
&gt; No, I want to do everything as root (which is how our distributions were 
&gt; designed to work) and nothing as user, which is much more complicated to 
&gt; set up.  Right now I need to suid user to print with lpr.
</pre>

<p>
But you don't need a password to do that. So you can just do something
like 
<pre>
	alias lpr 'su user lpr'
</pre>
and your problem is solved!
</p>

<p>
As root you can do "su user" whenever you want to do less powerful
things.
</p>

<p>
As user you can do "sudo" whenever you want to do more powerful
things.
</p>

<p>
The difference is like that between a democracy, where the chief
executive can occasionally assume emergency powers, and a monarchy,
where the ruler sometimes travels "incognito" to gauge the mood of the
people. <img src="../gx/smile.png" alt=":-)">
</p>

<p>
Regards,
</p>

<p>
Kapil.
--
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Thu, 25 Jan 2007 23:38:55 -0500 (EST)</b>
</p>

<p>
The author of Basiclinux suggested making a script ps-print and filling it 
in as 'printer program' in Opera instead of using 'lp' or another filter 
used by printcap, and printing with gs but without lpr (or su, or user, or 
adduser, or changes in permissions).  It works.
</p>

<pre>
gs -q -dSAFER -sDEVICE=deskjet -r300x300 -sPAPERSIZE=letter -sOutputFile=- 
- &gt; /dev/lp0
</pre>
It worked (even with a missing space after letter).
</p>

<p>
I use the same script but with &lt; $1 before the &gt; to print ps or pdf from 
the command line.  Or I convert a pdf or an image to a pbm and print with 
pbmtolj.
</p>

<p>
We have a script for printing plain text (involving dos2unix and cat).
On an inkjet printer you may need to hit the paper feed button.
</p>

<p>
I am still curious why lpr won't work as root.
</p>

<p>
I will attempt to fix the permissions for ssh to work as user, and maybe 
use opera su user.  Lynx and links already work for user without 
permission changes.
</p>

<p>
Thanks,
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Benjamin A. Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Fri, 26 Jan 2007 10:51:43 -0500</b>
</p>

<p>
On Thu, Jan 25, 2007 at 11:38:55PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; The author of Basiclinux suggested making a script ps-print and filling it 
&gt; in as 'printer program' in Opera instead of using 'lp' or another filter 
&gt; used by printcap, and printing with gs but without lpr (or su, or user, or 
&gt; adduser, or changes in permissions).  It works.
&gt; 
&gt; gs -q -dSAFER -sDEVICE=deskjet -r300x300 -sPAPERSIZE=letter -sOutputFile=- 
&gt; - &gt; /dev/lp0
&gt; 
&gt; It worked (even with a missing space after letter).
</pre>

<p>
This may handle printing from Opera, but I doubt that it will handle the
general problem of printing as root. E.g., printing an image or a PDF
isn't going to work with the above method.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Fri, 26 Jan 2007 14:26:48 -0500 (EST)</b>
</p>

<p>
On Fri, 26 Jan 2007, Benjamin A. Okopnik wrote:
</p>


<pre>
&gt; On Thu, Jan 25, 2007 at 11:38:55PM -0500, Sindi Keesan wrote:
&gt;&gt; The author of Basiclinux suggested making a script ps-print and filling it
&gt;&gt; in as 'printer program' in Opera instead of using 'lp' or another filter
&gt;&gt; used by printcap, and printing with gs but without lpr (or su, or user, or
&gt;&gt; adduser, or changes in permissions).  It works.
&gt;&gt;
&gt;&gt; gs -q -dSAFER -sDEVICE=deskjet -r300x300 -sPAPERSIZE=letter -sOutputFile=-
&gt;&gt; - &gt; /dev/lp0
</pre>



<pre>
&gt; This may handle printing from Opera, but I doubt that it will handle the
&gt; general problem of printing as root. E.g., printing an image or a PDF
&gt; isn't going to work with the above method.
</pre>

<p>
It printed a PDF file with xpdf when I entered ps-print as the printer 
command (rather than lp).  Should work with Abiword similarly because 
Abiword converts to ps to print.
</p>

<p>
I print images with netpbm's pbmtolj after converting to pbm format.  (I 
print color photos at the store on rare occasions.)  But xv probably also 
converts to ps so would work with this script.
</p>

<p>
I just compiled convertors for Excel and Powerpoint formats to HTML and 
Opera can print HTML (via ps).  Abiword can display/print RTF.  To print 
WORD files I used pdfonline (via lynx at the shell account where I get 
mail) to convert to pdf first, and then downloaded the pdf files from my 
shell account, after Antiword could not handle complex formatting that I 
was required to preserve.
</p>

<p>
Antiword does a perfect job with other character sets in WORD, which WORD 
cannot export properly to text.
</p>

<p>
Who needs OpenOffice?
</p>

<p>
Someone will send me some format I cannot handle, I am sure.
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Benjamin A. Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Thu, 25 Jan 2007 16:23:27 -0500</b>
</p>

<p>
On Wed, Jan 24, 2007 at 11:43:43AM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; 
&gt; cat filename &gt; /dev/lp0 works for root, so does gs used CLI without lpr, 
&gt; or pbmtolj from netpbm.
&gt; 
&gt; lpr used from Opera, lpr filename or even cat filename | lpr work for 
&gt; 'user', but for root they do not send anything to the print queue (lpq 
&gt; shows no entries).  No error messages.  I just get another prompt.
&gt; 
&gt; Permissions for lpr are unchanged from Slackware 7.1:
&gt; -r-s--s--x 1 root lp
&gt; (Must be s to print as user).
&gt; 
&gt; lp0 is crw-r--r-- 1 root root
</pre>

<p>
Just for comparison, mine are
</p>

<pre>
ben at Fenrir:~$ ls -l `which lpr` /dev/lp0
crw-rw---- 1 root lp   6, 0 2004-04-28 23:43 /dev/lp0
-rwxr-xr-x 1 root root 9888 2006-11-17 20:46 /usr/bin/lpr
</pre>
At least a little different - although that's not necessarily the cause.
</p>


<pre>
&gt; chmod a+w lp0 did not help (crw-rw-rw-) nor did chmod 777 (crwxrwxrwx). 
&gt; lp0 works for root except with lpr.
&gt; 
&gt; In order to work as user I have had to change permissions on /dev/null 
&gt; (w), ttyp* and ptyp* (rw), set suid XVESA and anything svgalib (links2, 
&gt; zgv, gs), make /var/lock writeable, make any scripts suid or executable as 
&gt; user, etc.  An education.  I can now suid user (or login as user), dial, 
&gt; load Xvesa, icewm, and rxvt and Opera and print as user.
</pre>

<p>
It sounds like BasicLinux still needs a bit of refining.
 
</p>

<pre>
&gt; ssh still says 'host key verification failed' though telnet works.
</pre>

<p>
The two are, of course, unrelated.
 
</p>

<pre>
&gt; I would like to quit struggling with permissions every time I try to work 
&gt; as user, and be able to print as root.  I do know I should not work as 
&gt; root online but I am not running any servers while online with my modem.
&gt; If you scold me please explain why.
</pre>

<p>
No scolding, but just a note: as root, one tiny mistype is all it takes
to wipe out your system. As well, <strong>any</strong> programs you execute that create
an externally-accessible network socket (are you sure you know what all
of those are?) are running with root privileges - meaning that if
someone manages to crack one, they 0wn your system.
</p>

<p>
So, I'm not going to say "don't do that". I'm just going to note that
the cost of doing so can be rather high.
</p>


<pre>
&gt; Does lpr depend on some other program, library, or device that I need to 
&gt; change permissions for?  
</pre>

<p>
Maybe - or maybe not, depending on how yours is configured and what
version of "lpr" you're using (in theory, you can minimize external
processing by trying to print a plain text file, e.g., '/etc/passwd'.)
In any case, it's a question that you yourself can answer by executing
"lpr" with "strace", something like this:
</p>

<pre>
ben at Fenrir:~$ su -
Password: 
root at Fenrir:~# strace -o lpr.out /usr/bin/lpr file
</pre>
After that, read the resulting file ('lpr.out', in the above case) and
see where things failed. If you need a baseline for comparison, you can
always run the above "strace" line as a non-root user.
</p>


<pre>
&gt; Can YOU print with lpr as root?
</pre>

<p>
Yep. I don't recall that ever being a problem, although I've seen the
opposite happen.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Thu, 25 Jan 2007 13:34:39 -0800</b>
</p>

<p>
Quoting Benjamin A. Okopnik (ben at linuxgazette.net):
</p>


<pre>
&gt; &gt; I would like to quit struggling with permissions every time I try to work 
&gt; &gt; as user, and be able to print as root.  I do know I should not work as 
&gt; &gt; root online but I am not running any servers while online with my modem.
&gt; &gt; If you scold me please explain why.
&gt; 
&gt; No scolding, but just a note: as root, one tiny mistype is all it takes
&gt; to wipe out your system. As well, <strong>any</strong> programs you execute that create
&gt; an externally-accessible network socket (are you sure you know what all
&gt; of those are?) are running with root privileges - meaning that if
&gt; someone manages to crack one, they 0wn your system.
&gt; 
&gt; So, I'm not going to say "don't do that". I'm just going to note that
&gt; the cost of doing so can be rather high.
</pre>

<p>
Also, I'd like to point out that the Unix world was ecstatic about the
rise of CUPS specifically because it allowed us to finally get rid of
lpd / lprNG, which was hopeless spaghetti code, derived from ancient BSD
efforts among nameless student coders at University of California at
Berkeley.  One of the worst of the many bad aspects of lpd / lprNG is
that its security profile and history were and are utterly dreadful.
</p>

<p>
Using either BSD lpd or its lprNG offshoot is, by itself, cause for
alarm.  Using it on a machine where you purposefully do everything as
root seems to be not only courting catastrophe but also sending out 
formal catastrophe invitations and publishing announcements in the
local catastrophe newsletter.
</p>

<pre>-- 
"Is it not the beauty of an asynchronous form of discussion that one can go and 
make cups of tea, floss the cat, fluff the geraniums, open the kitchen window 
and scream out it with operatic force, volume, and decorum, and then return to 
the vexed glowing letters calmer of mind and soul?" -- The Cube, forum3000.org
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Benjamin A. Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Fri, 26 Jan 2007 10:35:48 -0500</b>
</p>

<p>
On Thu, Jan 25, 2007 at 09:38:24PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; On Thu, 25 Jan 2007, Benjamin A. Okopnik wrote:
&gt; 
&gt; &gt;No scolding, but just a note: as root, one tiny mistype is all it takes
&gt; &gt;to wipe out your system. As well, <strong>any</strong> programs you execute that create
&gt; &gt;an externally-accessible network socket (are you sure you know what all
&gt; &gt;of those are?) are running with root privileges - meaning that if
&gt; &gt;someone manages to crack one, they 0wn your system.
&gt; &gt;
&gt; &gt;So, I'm not going to say "don't do that". I'm just going to note that
&gt; &gt;the cost of doing so can be rather high.
&gt; 
&gt; I have the same system on several computers so can easily restore it.
&gt; My super-duper full-size linux is about 1GB including a lot of music and 
&gt; photos and kernel source code.  The little one about 100MB.
</pre>

<p>
That's not exactly the point. Skript kiddies aren't interested in
destroying your system - they want your resources. E.g., once they crack
in, they'll set up a mail relay on your machine and use it to broadcast
spam - this is, in fact, how most spam is propagated these days.
 
</p>

<pre>
&gt; &gt;&gt;Does lpr depend on some other program, library, or device that I need to
&gt; &gt;&gt;change permissions for?
&gt; &gt;
&gt; &gt;Maybe - or maybe not, depending on how yours is configured and what
&gt; &gt;version of "lpr" you're using (in theory, you can minimize external
&gt; &gt;processing by trying to print a plain text file, e.g., '/etc/passwd'.)
&gt; &gt;In any case, it's a question that you yourself can answer by executing
&gt; &gt;"lpr" with "strace", something like this:
&gt; &gt;
&gt; &gt;``
&gt; &gt;ben at Fenrir:~$ su -
&gt; &gt;Password:
&gt; &gt;root at Fenrir:~# strace -o lpr.out /usr/bin/lpr file
&gt; &gt;''
&gt; 
&gt; I had to download the strace.tgz package first.  Running it from a 
&gt; temporary directory without installing the package.
&gt; 
&gt; ptrace:  umoven:  Input/output error (four lines of this).
&gt; 
&gt; But it made lpr.out, a couple pages or more.
&gt; 
&gt; &gt;After that, read the resulting file ('lpr.out', in the above case) and
&gt; &gt;see where things failed. If you need a baseline for comparison, you can
&gt; &gt;always run the above "strace" line as a non-root user.
&gt; 
&gt; I can't make much sense of the results.
&gt; See attached lpr.out (root) and lpr2.out (user).
</pre>

<p>
I'm afraid you forgot to attach them - but attaching large files to list
email is a bad idea anyway. Put them up somewhere (if you don't have web
space of your own, you can use, e.g., <a href="http://www.filewind.com/">http://www.filewind.com/</a>) and send
us the URLs.
 
</p>

<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Fri, 26 Jan 2007 14:18:46 -0500 (EST)</b>
</p>

<pre>
&gt;&gt;
&gt;&gt; I have the same system on several computers so can easily restore it.
&gt;&gt; My super-duper full-size linux is about 1GB including a lot of music and
&gt;&gt; photos and kernel source code.  The little one about 100MB.
&gt;
&gt; That's not exactly the point. Skript kiddies aren't interested in
&gt; destroying your system - they want your resources. E.g., once they crack
&gt; in, they'll set up a mail relay on your machine and use it to broadcast
&gt; spam - this is, in fact, how most spam is propagated these days.
&gt;
</pre>

<p>
Please explain how they can get into my linux system when I am dialed in 
via modem, and set up a mail relay that will work when I don't have 
standard mailing programs.  We use a 76K 'pmail' which is nonstandard.
I am not running any telnet or ssh servers.  Once in a while pure-ftpd or 
mini-httpd.
</p>

<p>
95% of the time I use the internet via ssh to a shell account (or direct 
dial to it).
</p>

<p>
Nobody has hijacked my system in four years.  Unless there are some hidden 
files I have not run across.
</p>

<p>
If it were in fact safer to use ssh or browsers as 'user', I would figure 
out the permissions for that but probably dial as 'root' first.  Is that 
okay?
</p>


<pre>
&gt;&gt; I can't make much sense of the results.
&gt;&gt; See attached lpr.out (root) and lpr2.out (user).
&gt;
&gt; I'm afraid you forgot to attach them - but attaching large files to list
&gt; email is a bad idea anyway. Put them up somewhere (if you don't have web
&gt; space of your own, you can use, e.g., <a href="http://www.filewind.com/">http://www.filewind.com/</a>) and send
&gt; us the URLs.
</pre>

<p>
<a href="http://www.grex.org/~keesan/lpr.out">http://www.grex.org/~keesan/lpr.out</a> (root)
<a href="http://www.grex.org/~keesan/lpr2.out">http://www.grex.org/~keesan/lpr2.out</a> (user)
</p>

<p>
About 8K each.
</p>

<p>
The problem has become purely academic, since I will not be using lpr now 
that I can print with a script directly with gs.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Kapil Hari Paranjape [kapil at imsc.res.in]
</p>
</b><br />
<b>Fri, 26 Jan 2007 13:17:26 -0800</b>
</p>

<p>
Hello,
</p>

<p>
On Fri, 26 Jan 2007, Sindi Keesan wrote:
</p>

<pre>
&gt; Nobody has hijacked my system in four years.  Unless there are some hidden 
&gt; files I have not run across.
</pre>

<p>
Whatever works for you is of course what you should choose. 
</p>

<p>
The following is a suggestion not to you specifically but to all
those who ask questions on lists like this one.
</p>

<p>
Generally speaking the more "finely localised and tuned" the system,
the harder it is to find someone to diagnose its problems over
e-mail/IRC/Usenet.
</p>

<p>
For example, someone could make some tweaks to the Linux kernel
so that it ignores access control (both for filesystems and
processes) entirely. A system built with this "feature" might even
be significantly smaller than the existing system as a number of
utilities and library calls would be eliminated. But I think that a
question about such a system could not really be called a "GNU/Linux
system question" as most people answering would be mislead by this
title.
</p>

<p>
I believe (and it is only a belief since I have not actually tried to
build such a system recently[*]) that it is possible to take "standard"
components of a "standard" distribution like Debian and build a
"small" distribution which is standard-enough so that questions about
it would be answerable by a large number of people and which is small
enough to boot on old hardware.
</p>

<p>
Regards,
</p>

<p>
Kapil.
</p>

<p>
[*] The last time I built such a system was in 1996 when we had a
single floppy boot of an "Xterm on a 386" --- it was built using Debian
0.9x.
--
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Kapil Hari Paranjape [kapil at imsc.res.in]
</p>
</b><br />
<b>Thu, 25 Jan 2007 12:44:36 -0800</b>
</p>

<p>
Hello,
</p>

<p>
On Wed, 24 Jan 2007, Sindi Keesan wrote:
</p>

<pre>
&gt; <a href="http://www.ibiblio.org/pub/linux/distributions/baslinux">http://www.ibiblio.org/pub/linux/distributions/baslinux</a>
&gt; Current version 3.40 based on Slackware 4.0 and uClibc
&gt; 
&gt; <a href="http://www.ibiblio.org/pub/linux/distributions/baslinux/bl2/index.htm">http://www.ibiblio.org/pub/linux/distributions/baslinux/bl2/index.htm</a>
&gt; Previous version 2.1 based on Slackware 7.1
&gt; 
&gt; Basiclinux 2.1 comes with a 'user', 3.40 does not.
</pre>

<p>
I'm sure this has been suggested and tried but it would be nice to
know the outcome.
<pre>
	"Can't we just add the user after booting the system?"
</pre>

<pre>
&gt; lpr used from Opera, lpr filename or even cat filename | lpr work for 
&gt; 'user', but for root they do not send anything to the print queue (lpq 
&gt; shows no entries).  No error messages.  I just get another prompt.
</pre>

<p>
The problem may be that "root" and other system accounts are
prevented from printing. I know that this is possible in some print
systems like LPRng for example. There is ".perm" file that lists
those you are allowed/disallowed.
</p>


<pre>
&gt; ssh still says 'host key verification failed' though telnet works.
</pre>

<p>
This may mean that you have the wrong key in your $HOME/.ssh/known_hosts
or /etc/ssh/known_hosts. You might be able to remove the offending
entry from this file with
<pre>
	ssh-keygen -R "the name of the host you are trying to connect to"
</pre>
Though all the problems that you list are in one sense or another
"permission problems" they seem to originate from different causes.
</p>

<p>
Regards,
</p>

<p>
Kapil.
--
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Fri, 26 Jan 2007 02:09:35 -0800</b>
</p>

<p>
----- Forwarded message from Sindi Keesan &lt;keesan at grex.cyberspace.org&gt; -----
</p>

<pre>
Date: Thu, 25 Jan 2007 22:15:47 -0500 (EST)
From: Sindi Keesan &lt;keesan@grex.cyberspace.org&gt;
To: TAG &lt;tag@lists.linuxgazette.net&gt;
To: Rick Moen &lt;rick at linuxmafia.com&gt;
Subject: Re: [TAG] lpr works for user not root in Basiclinux 2.1
</pre>
On Thu, 25 Jan 2007, Rick Moen wrote:
</p>


<pre>
&gt;Courtesy copy, just in case you're not on the mailing list (though you
&gt;probably are).
</pre>

<p>
This is the only copy I got of this mail from rick.  I am not on a TAG 
mailing list.
</p>


<pre>
&gt;
&gt;----- Forwarded message from rick -----
&gt;
&gt;Date: Thu, 25 Jan 2007 13:34:39 -0800
&gt;To: tag at lists.linuxgazette.net
&gt;Subject: Re: [TAG] lpr works for user not root in Basiclinux 2.1
&gt;
&gt;Quoting Benjamin A. Okopnik (ben at linuxgazette.net):
&gt;
&gt;&gt;&gt;I would like to quit struggling with permissions every time I try to work
&gt;&gt;&gt;as user, and be able to print as root.  I do know I should not work as
&gt;&gt;&gt;root online but I am not running any servers while online with my modem.
&gt;&gt;&gt;If you scold me please explain why.
&gt;&gt;
&gt;&gt;No scolding, but just a note: as root, one tiny mistype is all it takes
&gt;&gt;to wipe out your system. As well, <strong>any</strong> programs you execute that create
&gt;&gt;an externally-accessible network socket (are you sure you know what all
&gt;&gt;of those are?) are running with root privileges - meaning that if
&gt;&gt;someone manages to crack one, they 0wn your system.
&gt;&gt;
&gt;&gt;So, I'm not going to say "don't do that". I'm just going to note that
&gt;&gt;the cost of doing so can be rather high.
</pre>

<p>
I don't even know what a network socket is.  Nobody in their right mind 
would want my system.  The software is 8 years out of date (the hardware 
is older than that) and the connection is dialup.  Should I be worried 
anyway?
</p>


<pre>
&gt;Also, I'd like to point out that the Unix world was ecstatic about the
&gt;rise of CUPS specifically because it allowed us to finally get rid of
&gt;lpd / lprNG, which was hopeless spaghetti code, derived from ancient BSD
&gt;efforts among nameless student coders at University of California at
&gt;Berkeley.  One of the worst of the many bad aspects of lpd / lprNG is
&gt;that its security profile and history were and are utterly dreadful.
</pre>

<p>
Do I need security to print on my own single-user system?
</p>


<pre>
&gt;Using either BSD lpd or its lprNG offshoot is, by itself, cause for
&gt;alarm.  Using it on a machine where you purposefully do everything as
&gt;root seems to be not only courting catastrophe but also sending out
&gt;formal catastrophe invitations and publishing announcements in the
&gt;local catastrophe newsletter.
</pre>

<p>
No catastrophes have occurred among any of our distribution's users yet 
that I know of, in 4 years or so, apart from hardware failures.  I have 
the same files on several computers in case I need to restore everything.
</p>

<p>
CUPS is said to be useful in a local network that has both linux and 
Windows computers.  My win98 hard drive died a while ago and I never 
printed with Windows.
</p>

<p>
If I want to switch printers I use a printer switch box, and the deskjet 
driver works for both the deskjet and the laserjet.  I use the dot-matrix 
printer only with plain text files (cat textfile &gt; /dev/lp0 as root).  I 
print images with pbmtolj (netpbm), as root.
</p>

<p>
The people we are giving 200MHz computers to don't have networks.  But 
they do need to print formatted papers for school, and webpages.
</p>

<p>
I don't think I need CUPS.
</p>



<pre>
&gt;----- End forwarded message -----
&gt;
</pre>

<p>
Sindi Keesan
</p>

<p>
----- End forwarded message -----
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Benjamin A. Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Fri, 26 Jan 2007 11:41:11 -0500</b>
</p>

<p>
On Fri, Jan 26, 2007 at 02:09:35AM -0800, Sindi Keesan wrote:
</p>

<pre>
&gt; 
&gt; I don't even know what a network socket is.
</pre>

<p>
That's pretty much my point. The majority of those who run their
machines as root literally have <em>no</em> idea of how exposed and vulnerable
they are.
</p>

<p>
Sockets and ports are methods by which local and remote clients can
connect to your machine. Try running 'netstat'; this will show you a
list of your currently-open sockets and ports.
</p>


<pre>
&gt;  Nobody in their right mind 
&gt; would want my system.  The software is 8 years out of date (the hardware 
&gt; is older than that) and the connection is dialup.  Should I be worried 
&gt; anyway?
</pre>

<p>
See my earlier point about resources. There are Russian and Polish
companies (and probably lots of others, but those seem to be at the
forefront) who will sell you their spam-distribution services and boast
of "thousands of 'captured' machines" that they use for the purpose.
It's a popular dodge for spammers these days, since it essentially
counters IP blocking.
 
</p>

<pre>
&gt; &gt;Also, I'd like to point out that the Unix world was ecstatic about the
&gt; &gt;rise of CUPS specifically because it allowed us to finally get rid of
&gt; &gt;lpd / lprNG, which was hopeless spaghetti code, derived from ancient BSD
&gt; &gt;efforts among nameless student coders at University of California at
&gt; &gt;Berkeley.  One of the worst of the many bad aspects of lpd / lprNG is
&gt; &gt;that its security profile and history were and are utterly dreadful.
&gt; 
&gt; Do I need security to print on my own single-user system?
</pre>

<p>
I don't know how to emphasize this enough, but given that a very large
percentage of system break-ins in the past occurred via 'lpr/lprng', the
answer is a very definite "YES".
 
</p>

<pre>
&gt; The people we are giving 200MHz computers to don't have networks.  But 
&gt; they do need to print formatted papers for school, and webpages.
&gt; 
&gt; I don't think I need CUPS.
</pre>

<p>
Given the above, why are you using a print server/scheduler at all? I
ran my system with nothing more than 'magicfilter' and a script to send
it to the appropriate filter for a couple of years when I was in a
similar situation, and it worked fine.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Fri, 26 Jan 2007 13:18:56 -0500 (EST)</b>
</p>

<p>
On Fri, 26 Jan 2007, Benjamin A. Okopnik wrote:
</p>


<pre>
&gt; On Fri, Jan 26, 2007 at 02:09:35AM -0800, Sindi Keesan wrote:
&gt;&gt;
&gt;&gt; I don't even know what a network socket is.
&gt;
&gt; That's pretty much my point. The majority of those who run their
&gt; machines as root literally have <em>no</em> idea of how exposed and vulnerable
&gt; they are.
&gt;
&gt; Sockets and ports are methods by which local and remote clients can
&gt; connect to your machine. Try running 'netstat'; this will show you a
&gt; list of your currently-open sockets and ports.
</pre>

<pre>
bash:  netstat:  command not found
</pre>
You are making too many assumptions about my linux ;=)
</p>


<pre>
&gt;&gt;  Nobody in their right mind
&gt;&gt; would want my system.  The software is 8 years out of date (the hardware
&gt;&gt; is older than that) and the connection is dialup.  Should I be worried
&gt;&gt; anyway?
</pre>


<pre>
&gt; See my earlier point about resources. There are Russian and Polish
&gt; companies (and probably lots of others, but those seem to be at the
&gt; forefront) who will sell you their spam-distribution services and boast
&gt; of "thousands of 'captured' machines" that they use for the purpose.
&gt; It's a popular dodge for spammers these days, since it essentially
&gt; counters IP blocking.
</pre>

<p>
I thought they went after broadband.  And Windows.  How exactly would they 
attack a linux machine using dialup internet, without me noticing?
</p>

<p>
I do most of my browsing and emailing via a shell account to which I ssh 
as root.  Am I still vulnerable to attack?
</p>


<pre>
&gt;&gt;&gt; Also, I'd like to point out that the Unix world was ecstatic about the
&gt;&gt;&gt; rise of CUPS specifically because it allowed us to finally get rid of
&gt;&gt;&gt; lpd / lprNG, which was hopeless spaghetti code, derived from ancient BSD
&gt;&gt;&gt; efforts among nameless student coders at University of California at
&gt;&gt;&gt; Berkeley.  One of the worst of the many bad aspects of lpd / lprNG is
&gt;&gt;&gt; that its security profile and history were and are utterly dreadful.
&gt;&gt;
&gt;&gt; Do I need security to print on my own single-user system?
&gt;
&gt; I don't know how to emphasize this enough, but given that a very large
&gt; percentage of system break-ins in the past occurred via 'lpr/lprng', the
&gt; answer is a very definite "YES".
</pre>

<p>
I had not been using lpr until now and now have a script to print with 
using gs directly, tested in Opera and xpdf.
</p>


<pre>
&gt;
&gt;&gt; The people we are giving 200MHz computers to don't have networks.  But
&gt;&gt; they do need to print formatted papers for school, and webpages.
&gt;&gt;
&gt;&gt; I don't think I need CUPS.
&gt;
&gt; Given the above, why are you using a print server/scheduler at all? I
&gt; ran my system with nothing more than 'magicfilter' and a script to send
&gt; it to the appropriate filter for a couple of years when I was in a
&gt; similar situation, and it worked fine.
</pre>

<p>
I don't know what magicfilter is, but I have a script that will let me 
print from within X programs now, and don't even need a filter.  A few 
years ago people using our distribution worked out how to use lpr and 
printcap, but there is no need for them now.  I guess I should stop being 
curious why lpr won't work for root.
</p>

<p>
Now I need to figure out why your email ended up in my spam folder....
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Benjamin A. Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Fri, 26 Jan 2007 20:02:37 -0500</b>
</p>

<p>
On Fri, Jan 26, 2007 at 01:18:56PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; On Fri, 26 Jan 2007, Benjamin A. Okopnik wrote:
&gt; 
&gt; &gt;On Fri, Jan 26, 2007 at 02:09:35AM -0800, Sindi Keesan wrote:
&gt; &gt;&gt;
&gt; &gt;&gt;I don't even know what a network socket is.
&gt; &gt;
&gt; &gt;That's pretty much my point. The majority of those who run their
&gt; &gt;machines as root literally have <em>no</em> idea of how exposed and vulnerable
&gt; &gt;they are.
&gt; &gt;
&gt; &gt;Sockets and ports are methods by which local and remote clients can
&gt; &gt;connect to your machine. Try running 'netstat'; this will show you a
&gt; &gt;list of your currently-open sockets and ports.
&gt; 
&gt; bash:  netstat:  command not found
&gt; 
&gt; You are making too many assumptions about my linux ;=)
</pre>

<p>
Perhaps you're making too few assumptions about the necessary tools that
belong on a Linux box. <img src="../gx/smile.png" alt=":)">
 
</p>

<pre>
&gt; &gt;&gt; Nobody in their right mind
&gt; &gt;&gt;would want my system.  The software is 8 years out of date (the hardware
&gt; &gt;&gt;is older than that) and the connection is dialup.  Should I be worried
&gt; &gt;&gt;anyway?
&gt; 
&gt; &gt;See my earlier point about resources. There are Russian and Polish
&gt; &gt;companies (and probably lots of others, but those seem to be at the
&gt; &gt;forefront) who will sell you their spam-distribution services and boast
&gt; &gt;of "thousands of 'captured' machines" that they use for the purpose.
&gt; &gt;It's a popular dodge for spammers these days, since it essentially
&gt; &gt;counters IP blocking.
&gt; 
&gt; I thought they went after broadband.  And Windows.  How exactly would they 
&gt; attack a linux machine using dialup internet, without me noticing?
</pre>

<p>
None of these attacks would be problems if the user on the system
noticed when they happened. They happen without you noticing *by
definition*. As to how, the answer is "via ports and sockets". For a
longer answer, I teach a five-day security course for Sun Microsystems
on that, $3495 per student. <img src="../gx/smile.png" alt=":)"> Or you could study up via the resources
available in many places on the Net.
 
</p>

<pre>
&gt; I do most of my browsing and emailing via a shell account to which I ssh 
&gt; as root.  Am I still vulnerable to attack?
</pre>

<p>
Are we still talking about your system, or did you just introduce
another one into the equation? Every open port and socket that you have
is a way for other systems to connect to yours. Each of them has its own
pros and cons. I couldn't begin to estimate what your exposure is,
except that everything I've heard from you so far tells me that you're
pretty vulnerable.
 
</p>

<pre>
&gt; &gt;&gt;The people we are giving 200MHz computers to don't have networks.  But
&gt; &gt;&gt;they do need to print formatted papers for school, and webpages.
&gt; &gt;&gt;
&gt; &gt;&gt;I don't think I need CUPS.
&gt; &gt;
&gt; &gt;Given the above, why are you using a print server/scheduler at all? I
&gt; &gt;ran my system with nothing more than 'magicfilter' and a script to send
&gt; &gt;it to the appropriate filter for a couple of years when I was in a
&gt; &gt;similar situation, and it worked fine.
&gt; 
&gt; I don't know what magicfilter is, but I have a script that will let me 
&gt; print from within X programs now, and don't even need a filter.  A few 
&gt; years ago people using our distribution worked out how to use lpr and 
&gt; printcap, but there is no need for them now.  I guess I should stop being 
&gt; curious why lpr won't work for root.
</pre>

<p>
You can find out about "magicfilter" by searching for it, and you have a
script that will print <em>some</em> things but not others. I've been answering
the question that you asked initially; since you now appear to have
changed the question in the middle of the discussion, and since I'm not
interested in providing ongoing support for every possible problem in
your system, I'm going to call my end of it finished. Good luck.
</p>

<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Fri, 26 Jan 2007 23:01:17 -0500 (EST)</b>
</p>

<pre>
&gt;&gt;&gt; Sockets and ports are methods by which local and remote clients can
&gt;&gt;&gt; connect to your machine. Try running 'netstat'; this will show you a
&gt;&gt;&gt; list of your currently-open sockets and ports.
&gt;&gt;
&gt;&gt; bash:  netstat:  command not found
&gt;&gt;
&gt;&gt; You are making too many assumptions about my linux ;=)
&gt;
&gt; Perhaps you're making too few assumptions about the necessary tools that
&gt; belong on a Linux box. <img src="../gx/smile.png" alt=":)">
</pre>

<p>
I did not create this distribution.  Why is netstat necessary?  Can I look 
in some directory under /proc instead?  (I do this instead of lspci).
</p>


<pre>
&gt;
&gt;&gt;&gt;&gt; Nobody in their right mind
&gt;&gt;&gt;&gt; would want my system.  The software is 8 years out of date (the hardware
&gt;&gt;&gt;&gt; is older than that) and the connection is dialup.  Should I be worried
&gt;&gt;&gt;&gt; anyway?
&gt;&gt;
&gt;&gt;&gt; See my earlier point about resources. There are Russian and Polish
&gt;&gt;&gt; companies (and probably lots of others, but those seem to be at the
&gt;&gt;&gt; forefront) who will sell you their spam-distribution services and boast
&gt;&gt;&gt; of "thousands of 'captured' machines" that they use for the purpose.
&gt;&gt;&gt; It's a popular dodge for spammers these days, since it essentially
&gt;&gt;&gt; counters IP blocking.
&gt;&gt;
&gt;&gt; I thought they went after broadband.  And Windows.  How exactly would they
&gt;&gt; attack a linux machine using dialup internet, without me noticing?
&gt;
&gt; None of these attacks would be problems if the user on the system
&gt; noticed when they happened. They happen without you noticing *by
&gt; definition*. As to how, the answer is "via ports and sockets". For a
&gt; longer answer, I teach a five-day security course for Sun Microsystems
&gt; on that, $3495 per student. <img src="../gx/smile.png" alt=":)"> Or you could study up via the resources
&gt; available in many places on the Net.
</pre>

<p>
Can you suggest an online primer on ports and sockets?
</p>


<pre>
&gt;&gt; I do most of my browsing and emailing via a shell account to which I ssh
&gt;&gt; as root.  Am I still vulnerable to attack?
</pre>


<pre>
&gt; Are we still talking about your system, or did you just introduce
&gt; another one into the equation? Every open port and socket that you have
&gt; is a way for other systems to connect to yours. Each of them has its own
&gt; pros and cons. I couldn't begin to estimate what your exposure is,
&gt; except that everything I've heard from you so far tells me that you're
&gt; pretty vulnerable.
</pre>

<p>
I boot into DOS, thence with loadlin into linux, then dial an ISP, and 
then ssh to a shell account.  Or dial directly to that shell account and 
ssh to another shell account.  I can kermit files from the second shell 
account to my own computer.  What part of this setup is vulnerable and why 
has nothing bad happened in four years?  I am not running any servers 
(even lpd) on my own computer that I know of.   Is Xvesa a server?  I 
think it uses a socket.
</p>


<pre>
&gt;&gt; I don't know what magicfilter is, but I have a script that will let me
&gt;&gt; print from within X programs now, and don't even need a filter.  A few
&gt;&gt; years ago people using our distribution worked out how to use lpr and
&gt;&gt; printcap, but there is no need for them now.  I guess I should stop being
&gt;&gt; curious why lpr won't work for root.
&gt;
&gt; You can find out about "magicfilter" by searching for it, and you have a
&gt; script that will print <em>some</em> things but not others. I've been answering
&gt; the question that you asked initially; since you now appear to have
&gt; changed the question in the middle of the discussion, and since I'm not
&gt; interested in providing ongoing support for every possible problem in
&gt; your system, I'm going to call my end of it finished. Good luck.
</pre>

<p>
I can print any format that I need to now, with gs or netpbm.
</p>

<p>
Since I no longer need to print as root with lpr it is indeed time to drop 
the original discussion.  Thanks for all your help, and for pointing out 
that lpr is a security risk.  I will read online about linux and security 
and maybe ssh as user once I figure out how.
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Neil Youngman [ny at youngman.org.uk]
</p>
</b><br />
<b>Sat, 27 Jan 2007 09:40:31 +0000</b>
</p>

<pre>
&gt; On Fri, Jan 26, 2007 at 01:18:56PM -0500, Sindi Keesan wrote:
&gt; &gt; I thought they went after broadband.  And Windows.  How exactly would
&gt; &gt; they attack a linux machine using dialup internet, without me noticing?
</pre>

<p>
They would attack a dialup machine in exactly the same way they would attack a 
broadband machine. How would they know your machine was on dialup? It's just 
another IP address to them.
</p>

<p>
Being on Linux is no guarantee either. There are enough Linux servers out 
there with a lot of bandwidth to be valuable targets and the programs that go 
scanning for vulnerable machines neither know, nor care, that yours is a puny 
little 200 MHz machine on dialup.
</p>

<p>
How would they attack without you noticing? Well, how would you notice? Are 
you even looking?
</p>

<p>
Do you monitor the logs? Do you run chkrootkit regularly? Do you monitor 
portscans? 
</p>

<p>
Neil Youngman
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Sat, 27 Jan 2007 10:16:00 -0500 (EST)</b>
</p>

<p>
On Sat, 27 Jan 2007, Neil Youngman wrote:
</p>


<pre>
&gt;&gt; On Fri, Jan 26, 2007 at 01:18:56PM -0500, Sindi Keesan wrote:
&gt;&gt;&gt; I thought they went after broadband.  And Windows.  How exactly would
&gt;&gt;&gt; they attack a linux machine using dialup internet, without me noticing?
&gt;
&gt; They would attack a dialup machine in exactly the same way they would attack a
&gt; broadband machine. How would they know your machine was on dialup? It's just
&gt; another IP address to them.
</pre>

<p>
Okay.  A friend said they could sniff my packets for my login and 
password.  But how would they put any files onto my machine?  I am not 
running lpd, telnetd, ftpd or even httpd.  Can they transfer files when I 
simply run pppd and ssh or lynx?
</p>


<pre>
&gt; Being on Linux is no guarantee either. There are enough Linux servers out
&gt; there with a lot of bandwidth to be valuable targets and the programs that go
&gt; scanning for vulnerable machines neither know, nor care, that yours is a puny
&gt; little 200 MHz machine on dialup.
&gt;
&gt; How would they attack without you noticing? Well, how would you notice? Are
&gt; you even looking?
&gt;
&gt; Do you monitor the logs? Do you run chkrootkit regularly? Do you monitor
&gt; portscans?
</pre>

<p>
/var/log/ shows which packages were installed not portscan info.
We do not have chrootkit.
</p>

<p>
I found a Wiki-type entry about portscan, a series of probes sent to one 
or more ports of a target system looking for information.  Most linux 
distributions don't include the tools to monitor them.  (Not just ours).
</p>

<p>
We have an nmap add-on for scanning hosts on the network and determining 
which services they are running.  Downloaded it.  No documentation.
101 pages of man page online.  I don't understand much of it.
</p>

<pre>
nmap -A -T4 127.0.0.1  				(localhost)
All 1663 scanned ports are closed.
</pre>
I found lists of open ports at my two shell account providers.
</p>

<p>
I will ask on our list for instructions.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Neil Youngman [ny at youngman.org.uk]
</p>
</b><br />
<b>Sat, 27 Jan 2007 20:53:57 +0000</b>
</p>

<p>
On or around Saturday 27 January 2007 15:16, Sindi Keesan reorganised a bunch 
of electrons to form the message:
</p>

<pre>
&gt; Okay.  A friend said they could sniff my packets for my login and
&gt; password.  But how would they put any files onto my machine?  I am not
&gt; running lpd, telnetd, ftpd or even httpd.  Can they transfer files when I
&gt; simply run pppd and ssh or lynx?
</pre>

<p>
If your ssh package provides scp or sftp, then yes, if they've cracked your 
machine they would be able to copy stuff onto it.
</p>


<pre>
&gt; &gt; How would they attack without you noticing? Well, how would you notice?
&gt; &gt; Are you even looking?
&gt; &gt;
&gt; &gt; Do you monitor the logs? Do you run chkrootkit regularly? Do you monitor
&gt; &gt; portscans?
&gt;
&gt; /var/log/ shows which packages were installed not portscan info.
&gt; We do not have chrootkit.
</pre>

<p>
It sounds like you wouldn't notice.
</p>


<pre>
&gt; I found a Wiki-type entry about portscan, a series of probes sent to one
&gt; or more ports of a target system looking for information.  Most linux
&gt; distributions don't include the tools to monitor them.  (Not just ours).
&gt;
&gt; We have an nmap add-on for scanning hosts on the network and determining
&gt; which services they are running.  Downloaded it.  No documentation.
&gt; 101 pages of man page online.  I don't understand much of it.
&gt;
&gt; nmap -A -T4 127.0.0.1  				(localhost)
&gt; All 1663 scanned ports are closed.
</pre>

<p>
I'm no expert either, but I would say that's encouraging.
</p>

<p>
Neil
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Sat, 27 Jan 2007 18:35:11 -0500 (EST)</b>
</p>

<p>
On Sat, 27 Jan 2007, Neil Youngman wrote:
</p>


<pre>
&gt; On or around Saturday 27 January 2007 15:16, Sindi Keesan reorganised a bunch
&gt; of electrons to form the message:
</pre>


<pre>
&gt;&gt; Okay.  A friend said they could sniff my packets for my login and
&gt;&gt; password.  But how would they put any files onto my machine?  I am not
&gt;&gt; running lpd, telnetd, ftpd or even httpd.  Can they transfer files when I
&gt;&gt; simply run pppd and ssh or lynx?
</pre>


<pre>
&gt; If your ssh package provides scp or sftp, then yes, if they've cracked your
&gt; machine they would be able to copy stuff onto it.
</pre>

<p>
My 'package' consists of ssh.gz and ssh.1 (man page).
</p>


<pre>
&gt;&gt; We have an nmap add-on for scanning hosts on the network and determining
&gt;&gt; which services they are running.  Downloaded it.  No documentation.
&gt;&gt; 101 pages of man page online.  I don't understand much of it.
&gt;&gt;
&gt;&gt; nmap -A -T4 127.0.0.1  				(localhost)
&gt;&gt; All 1663 scanned ports are closed.
&gt;
&gt; I'm no expert either, but I would say that's encouraging.
</pre>

<p>
The author of our distribution said to try this while running X (which is 
a server) and port 6000 was then open.  I don't normally run X while I am 
online.  Should I unload X before using ssh or lynx from a console?  He 
advises using our X browser Opera as user.  I could also load Xvesa as 
user.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Sun, 28 Jan 2007 01:09:30 -0800</b>
</p>

<p>
Quoting Sindi Keesan (keesan at grex.cyberspace.org):
</p>


<pre>
&gt; The author of our distribution said to try this while running X (which is 
&gt; a server) and port 6000 was then open.
</pre>

<p>
Please see my separate reply to Neil.  Starting up the X11 server makes
port 6000 and adjoining ports be reachable from localhost.
</p>


<pre>
&gt; I don't normally run X while I am online. 
</pre>

<p>
That's really rather pointless as a security measure, except in the
sesne of minimising the amount of code you're running with root
authority -- but you'd be smarter just not to run X11 as root at all.
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Sat, 27 Jan 2007 18:01:07 -0800</b>
</p>

<p>
Quoting Neil Youngman (ny at youngman.org.uk):
</p>


<pre>
&gt; &gt; &gt; Do you monitor the logs? Do you run chkrootkit regularly? Do you
&gt; &gt; &gt; monitor portscans?
&gt; &gt;
&gt; &gt; /var/log/ shows which packages were installed not portscan info.  We
&gt; &gt; do not have chrootkit.
&gt; 
&gt; It sounds like you wouldn't notice.
</pre>

<p>
Neil, chkrootkit (and/or rkhunter) is probably a good thing to suggest
as a retroactive measure for someone like Sindi who might have reason to
worry about system security.  Although I have problems (to be detailed
below) with its general approach, your suggestion is commendable in this
(limited) context.
</p>

<p>
Sindi, one might describe chkrootkit / rkhunter (both of which you can
easily find and download) as attempts at "paranoia in a can" -- tools
that search your filesystems for patterns of files that typically exist
as artifacts/after-effects of intruder breakin activity, e.g.,
replacements of system facilities with trojaned equivalents, malware
installed that keeps UDP-based backdoor methods of re-entry open, etc.
</p>

<p>
Taking the longer view for a moment, both tools exemplify a losing
strategy that Marcus J. Ranum dubs "enumerating badness" in his essay
"The Six Dumbest Ideas in Computer Security" -- with that concept
qualifying as one of the six:
<a href="http://www.ranum.com/security/computer_security/editorials/dumb/">http://www.ranum.com/security/computer_security/editorials/dumb/</a>
</p>

<p>
The problem with enumerating badness is that it comes in vastly too many
varieties, and so you end up knowing only that <em>known</em>, i.e., sloppy and
incompetent badness has been found.  Which is better than nothing -- but
should make one wonder if we can't do better.
</p>

<p>
I would suggest there definitely is -- but that the superior tools in
that area are prospective-looking tools you need to install / configure
when the system is new or at least healthy, i.e. file-based intrusion
detection systems (IDSes), such as AIDE, Prelude-IDS, Samhain, etc.
</p>

<p>
It would be good if future distros installed with AIDE configured and
issuing daily reports by default -- and less reliance on chkrootkit /
rkhunter, which are in the final analysis just glorified virus-checkers,
and we can <em>sure</em> do better than that.  There are an increasing number
of write-ups about how to configure AIDE manually, e.g.,
<a href="http://www.debuntu.org/intrusion-detection-with-aide">http://www.debuntu.org/intrusion-detection-with-aide</a> .
</p>

<p>
My point about chkrootkit/rkhunter as opposed to IDSes in Sindi's
particular situation is that IDSes require a normal-operation baseline
for configuration.  If you're already worried about intrusion, it's too
late to set one up.
</p>


<pre>
&gt; &gt; We have an nmap add-on for scanning hosts on the network and determining
&gt; &gt; which services they are running.  Downloaded it.  No documentation.
&gt; &gt; 101 pages of man page online.  I don't understand much of it.
&gt; &gt;
&gt; &gt; nmap -A -T4 127.0.0.1  				(localhost)
&gt; &gt; All 1663 scanned ports are closed.
&gt; 
&gt; I'm no expert either, but I would say that's encouraging.
</pre>

<p>
Yes.  That's a TCP-port scan of localhost (only one of several major
scan modes nmap can do).  Ordinarily, I would caution that nmap must
always be run from a nearby-on-network node (which, yes, could be 
talking to one's temporary dial-up IP from elsewhere), and <em>never</em> used
by a host to scan itself, because the report would include local-only
network services, which obviously <em>cannot</em> be attacked from remote
locations.  (Thus, you tend to think you have remote vulnerabilities
that really don't exist.  This is a very common error.)
</p>

<p>
However, in this case, Sindi's results suggest there are <em>zero</em>
TCP-based network services at all, so whether they're strictly local or
not is entirely moot.
</p>

<p>
For the record, this is how I tend to do TCP-service, UDP-service, and
TCP ACK Ping scans, respectively, using nmap:
</p>

<pre>
# nmap -vv -sT -sR -O -o N /tmp/nmap-tcp.log -n 157.22.20.227
# nmap -vv -sU -sR -O -n -oN /tmp/nmap-udp.log -n 157.22.20.227 
# nmap -vv -sA -sR -O -n -oN /tmp/nmap-ack.log -n 157.22.20.227 
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Sat, 27 Jan 2007 22:51:56 -0500 (EST)</b>
</p>

<p>
On Sat, 27 Jan 2007, Rick Moen wrote:
</p>


<pre>
&gt; Quoting Neil Youngman (ny at youngman.org.uk):
&gt;
&gt;&gt;&gt;&gt; Do you monitor the logs? Do you run chkrootkit regularly? Do you
&gt;&gt;&gt;&gt; monitor portscans?
&gt;&gt;&gt;
&gt;&gt;&gt; /var/log/ shows which packages were installed not portscan info.  We
&gt;&gt;&gt; do not have chrootkit.
&gt;&gt;
&gt;&gt; It sounds like you wouldn't notice.
&gt;
&gt; Neil, chkrootkit (and/or rkhunter) is probably a good thing to suggest
&gt; as a retroactive measure for someone like Sindi who might have reason to
&gt; worry about system security.  Although I have problems (to be detailed
&gt; below) with its general approach, your suggestion is commendable in this
&gt; (limited) context.
&gt;
&gt; Sindi, one might describe chkrootkit / rkhunter (both of which you can
&gt; easily find and download) as attempts at "paranoia in a can" -- tools
&gt; that search your filesystems for patterns of files that typically exist
&gt; as artifacts/after-effects of intruder breakin activity, e.g.,
&gt; replacements of system facilities with trojaned equivalents, malware
&gt; installed that keeps UDP-based backdoor methods of re-entry open, etc.
&gt;
&gt; Taking the longer view for a moment, both tools exemplify a losing
&gt; strategy that Marcus J. Ranum dubs "enumerating badness" in his essay
&gt; "The Six Dumbest Ideas in Computer Security" -- with that concept
&gt; qualifying as one of the six:
&gt; <a href="http://www.ranum.com/security/computer_security/editorials/dumb/">http://www.ranum.com/security/computer_security/editorials/dumb/</a>
&gt;
&gt; The problem with enumerating badness is that it comes in vastly too many
&gt; varieties, and so you end up knowing only that <em>known</em>, i.e., sloppy and
&gt; incompetent badness has been found.  Which is better than nothing -- but
&gt; should make one wonder if we can't do better.
&gt;
</pre>

<p>
But if I run chrootkit and it finds nothing, and I am not running any 
network services when I go online, can I continue as root without 
worrying?  I have switched Opera to run as user (in the menu) because it 
uses an X server.  After inserting modules and dialing as root.
</p>


<pre>
&gt; I would suggest there definitely is -- but that the superior tools in
&gt; that area are prospective-looking tools you need to install / configure
&gt; when the system is new or at least healthy, i.e. file-based intrusion
&gt; detection systems (IDSes), such as AIDE, Prelude-IDS, Samhain, etc.
&gt;
&gt; It would be good if future distros installed with AIDE configured and
&gt; issuing daily reports by default -- and less reliance on chkrootkit /
&gt; rkhunter, which are in the final analysis just glorified virus-checkers,
&gt; and we can <em>sure</em> do better than that.  There are an increasing number
&gt; of write-ups about how to configure AIDE manually, e.g.,
&gt; <a href="http://www.debuntu.org/intrusion-detection-with-aide">http://www.debuntu.org/intrusion-detection-with-aide</a> .
&gt;
&gt; My point about chkrootkit/rkhunter as opposed to IDSes in Sindi's
&gt; particular situation is that IDSes require a normal-operation baseline
&gt; for configuration.  If you're already worried about intrusion, it's too
&gt; late to set one up.
&gt;
</pre>

<p>
I was told if I have no open ports I don't need to worry.  I ran telnetd 
once for 30 seconds on another computer.
</p>


<pre>
&gt;&gt;&gt; We have an nmap add-on for scanning hosts on the network and determining
&gt;&gt;&gt; which services they are running.  Downloaded it.  No documentation.
&gt;&gt;&gt; 101 pages of man page online.  I don't understand much of it.
&gt;&gt;&gt;
&gt;&gt;&gt; nmap -A -T4 127.0.0.1  				(localhost)
&gt;&gt;&gt; All 1663 scanned ports are closed.
&gt;&gt;
&gt;&gt; I'm no expert either, but I would say that's encouraging.
&gt;
&gt; Yes.  That's a TCP-port scan of localhost (only one of several major
&gt; scan modes nmap can do).  Ordinarily, I would caution that nmap must
&gt; always be run from a nearby-on-network node (which, yes, could be
&gt; talking to one's temporary dial-up IP from elsewhere), and <em>never</em> used
&gt; by a host to scan itself, because the report would include local-only
&gt; network services, which obviously <em>cannot</em> be attacked from remote
&gt; locations.  (Thus, you tend to think you have remote vulnerabilities
&gt; that really don't exist.  This is a very common error.)
&gt;
&gt; However, in this case, Sindi's results suggest there are <em>zero</em>
&gt; TCP-based network services at all, so whether they're strictly local or
&gt; not is entirely moot.
</pre>

<p>
I told you I had no servers running except sometimes X, and I usually go 
online with ssh or lynx.
</p>


<pre>
&gt; For the record, this is how I tend to do TCP-service, UDP-service, and
&gt; TCP ACK Ping scans, respectively, using nmap:
&gt;
&gt; # nmap -vv -sT -sR -O -o N /tmp/nmap-tcp.log -n 157.22.20.227
&gt; # nmap -vv -sU -sR -O -n -oN /tmp/nmap-udp.log -n 157.22.20.227
&gt; # nmap -vv -sA -sR -O -n -oN /tmp/nmap-ack.log -n 157.22.20.227
</pre>

<p>
You are way beyond me already.  It was a major accomplishment running nmap 
on localhost.  Should I do the same as above but substitute the IP address 
assigned when I dial the ISP?
</p>

<p>
I will look for chrootkit.  Thanks for all the info.
</p>

<p>
Is this discussion being archived so I can point other list members at it?
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Sun, 28 Jan 2007 00:11:26 -0800</b>
</p>

<p>
Quoting Sindi Keesan (keesan at grex.cyberspace.org):
</p>


<pre>
&gt; But if I run chrootkit and it finds nothing, and I am not running any 
&gt; network services when I go online, can I continue as root without 
&gt; worrying?
</pre>

<p>
No.  Your question is a complete and total non-sequitur to what I just
got through saying, and carrying out online activity as the root user,
or indeed any activity at all that doesn't require root access, remains
reckless and ill-advised for reasons that frankly should be obvious --
completely without regard to whether you're even running network daemons
at all.
</p>

<p>
The non-sequitur nature of that question suggests to me that you
probably are not really heeding what people are saying, in this thread,
or it seems likely that you would not make such comments.
</p>


<pre>
&gt; &gt;# nmap -vv -sT -sR -O -o N /tmp/nmap-tcp.log -n 157.22.20.227
&gt; &gt;# nmap -vv -sU -sR -O -n -oN /tmp/nmap-udp.log -n 157.22.20.227
&gt; &gt;# nmap -vv -sA -sR -O -n -oN /tmp/nmap-ack.log -n 157.22.20.227
&gt; 
&gt; You are way beyond me already.
</pre>

<p>
No, I'm certainly not.  For heaven's sake, if you're curious about what
those options mean, they're detailed right in the manpage.
</p>


<pre>
&gt; Should I do the same as above but substitute the IP address 
&gt; assigned when I dial the ISP?
</pre>

<p>
You should re-read the explanation of why scanning a host from itself
would normally be pointless.
</p>


<pre>
&gt; I will look for chrootkit. 
</pre>

<p>
chkrootkit is a last-gasp but highly fallible attempt to detect security
disasters after all your real defences and precautions have failed.
Your biggest problem is that you're going around defeating precautions
(e.g., insisting on using the root account routinely) and eschewing
defences.  <em>That</em> is what should be getting your attention.
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Sat, 27 Jan 2007 23:44:27 -0500 (EST)</b>
</p>

<pre>
&gt;
&gt;&gt;&gt;&gt; Do you monitor the logs? Do you run chkrootkit regularly? Do you
&gt;&gt;&gt;&gt; monitor portscans?
</pre>

<p>
I downloaded (about 40K) chkrootkit.tar.gz, unpackaged and typed make 
sense and it produced chkrootkit and some other files.
</p>

<p>
./chkrootkit wanted netstat.  It was a 7 min download in a package and I 
extracted it with tar -zxvf tcpicp1.tgz bin/netstat and put into /bin.
</p>

<p>
chkrootkit then told me I had six infected files:
</p>

<p>
basename dirname echo env ifconfig and traceroute.
</p>

<p>
These are all part of busybox 1.1.0 compiled statically against uClibc.
Are they really infected (with what?) or is uClibc confusing chkrootkit?
They are not in the typical locations but are on the path.
</p>

<p>
telnetd and su in busybox are not infected.
</p>

<p>
``Checking 'date' ... bash
/bin/csh
INFECTED
''
</p>

<p>
(I have a /bin/bash but no csh.  Command not found.)
</p>

<p>
How do I interpret the above?
</p>


<p>
Some things it could not find, some it said were not infected, such as 
cron.  I don't have a cron.  Same for ldsopreload and sshd and write.
</p>

<p>
''
Checking 'lkm'...You have 13  process hidden for ps command
chkproc:  Warning:  Possible LKM Trojan installed.
 
no rootkits or worms found..
''
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Sun, 28 Jan 2007 00:58:13 -0800</b>
</p>

<p>
Quoting Sindi Keesan (keesan at grex.cyberspace.org):
</p>


<pre>
&gt; How do I interpret the above?
</pre>

<p>
My guess:  Probably chkrootkit being stupid.
</p>

<p>
chkrootkit is built on an ultimately stupid approach -- stupid by
design:  It does pattern-matching in an attempt to, as Marcus J. Ranum
puts it, "enumerate badness", which is an inherently fallible, losing
strategy.
</p>

<p>
So, you read chkrootkit FAQs and other documentation about known false
positives, if necessary you read the chkrootkit script to determine what
it's checking, and you decide for yourself whether it's talking nonsense
or not.
</p>

<p>
However, if you've put yourself in a position where you're actually
<em>relying</em> on chkrootkit for anything but a quick cross-check against
your primary security measures, I'd say you have a lot bigger problems.
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Neil Youngman [ny at youngman.org.uk]
</p>
</b><br />
<b>Sun, 28 Jan 2007 10:00:19 +0000</b>
</p>

<p>
On or around Sunday 28 January 2007 08:58, Rick Moen reorganised a bunch of 
electrons to form the message:
</p>

<pre>
&gt; Quoting Sindi Keesan (keesan at grex.cyberspace.org):
&gt; &gt; How do I interpret the above?
&gt;
&gt; My guess:  Probably chkrootkit being stupid.
</pre>

<p>
his thread on puppy Linux states that chkrootkit doesn't like busybox, so 
that's probably right. 
</p>

<p>
<a href="http://murga-linux.com/puppy/viewtopic.php?t=10056">http://murga-linux.com/puppy/viewtopic.php?t=10056</a>
</p>

<p>
Neil
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
sindi keesan [keesan at sdf.lonestar.org]
</p>
</b><br />
<b>Sun, 28 Jan 2007 16:22:24 +0000 (UTC)</b>
</p>

<p>
On Sun, 28 Jan 2007, Rick Moen wrote:
</p>


<pre>
&gt; Quoting Sindi Keesan (keesan at grex.cyberspace.org):
&gt;
&gt;&gt; How do I interpret the above?
&gt;
&gt; My guess:  Probably chkrootkit being stupid.
</pre>

<p>
The LKM Trojan thing is said to be a bug.
</p>

<p>
I ran chrootkit on a small ramdisk version of our distribution with an 
older busybox, after mounting the ext2 partition so I could symlink to the 
three missing binaries (netstat, awk and echo) and it found the same 
infected files except ifconfig was okay.  I really doubt any hacker could 
have infected my DOS file that contains the files, which load to ramdisk.
</p>

<p>
Therefore my system, which I have been running as root for four years, 
seems not to have been hacked.  I can still run Opera as su user just in 
case.  (And in case I want to print with some other printer on my list of 
filters, such as draft or 600 dpi, without changing the custom script).
</p>



<pre>
&gt; chkrootkit is built on an ultimately stupid approach -- stupid by
&gt; design:  It does pattern-matching in an attempt to, as Marcus J. Ranum
&gt; puts it, "enumerate badness", which is an inherently fallible, losing
&gt; strategy.
</pre>


<p>
So it found the patterns of some known worms in uClibc-static busybox?
</p>


<pre>
&gt; So, you read chkrootkit FAQs and other documentation about known false
&gt; positives, if necessary you read the chkrootkit script to determine what
&gt; it's checking, and you decide for yourself whether it's talking nonsense
&gt; or not.
&gt;
&gt; However, if you've put yourself in a position where you're actually
&gt; <em>relying</em> on chkrootkit for anything but a quick cross-check against
&gt; your primary security measures, I'd say you have a lot bigger problems.
&gt;
</pre>


<p>
I don't appear to have any security problems.  I was warned again not to 
run the telnetd that I compiled.  I would only do so offline.  We have 
instructions on using ipchains and default gateways to hook up two 
computers now so both can go online over the same modem. (Or I can use a 
wireless laptop to pick up our free county wireless signal and a cable to 
convey it to a desktop).
</p>

<p>
I once used in.telnetd and a nullmodem cable and telnet with root access 
online for 30 sec to share a connection, but nobody seems to have 
successfully hacked my computers.  Out little linux is recommended for 
making very old computers into terminals, with X.
</p>

<p>
I can thus make old linux computers for people to use the internet with, 
and not worry about them become spammers by accident.
</p>

<p>
Our author says busybox and uClibc and the lack of expected binaries would 
make it difficult for hackers to find their way around even if we did have 
open ports, but he goes online with Opera as 'user' in case of any 
vulnerabilities in the X server or Opera.
</p>

<p>
  keesan at sdf.lonestar.org
SDF Public Access UNIX System - <a href="http://sdf.lonestar.org">http://sdf.lonestar.org</a>
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
sindi keesan [keesan at sdf.lonestar.org]
</p>
</b><br />
<b>Sun, 28 Jan 2007 17:12:27 +0000 (UTC)</b>
</p>

<pre>
&gt;
&gt; Our author says busybox and uClibc and the lack of expected binaries would 
&gt; make it difficult for hackers to find their way around even if we did have 
&gt; open ports, but he goes online with Opera as 'user' in case of any 
&gt; vulnerabilities in the X server or Opera.
</pre>

<p>
List members suggested online port scanners, but I think the one I used at 
<a href="http://www.hq42.net/net_tools">http://www.hq42.net/net_tools</a> scanned my ISP though it listed my IPLOCAL 
number because it listed about 900 ports including netstat (which I am not 
running) and mentioned the name of the nearest large city.
</p>

<p>
<a href="http://bcheck.scanit.be">http://bcheck.scanit.be</a> found 0 vulnerabilities in Opera 8.52.  I cannot 
check non-javascript browsers (lynx and probably links).
</p>

<p>
Another list member pointed out that startx allows only local access to 
the X server so is also not vulnerable.  startxt is vulnerable (it allows 
us to use one old computer as a terminal, in X, to another faster one).  I 
don't run that because I have plenty of 'new' computers now (200MHz and 
up).
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
=?iso-8859-15?Q?Ren=E9?= Pfeiffer [lynx at luchs.at]
</p>
</b><br />
<b>Sun, 28 Jan 2007 19:19:41 +0100</b>
</p>

<p>
On Jan 28, 2007 at 1712 +0000, sindi keesan appeared and said:
</p>

<pre>
&gt; &gt; Our author says busybox and uClibc and the lack of expected binaries would 
&gt; &gt; make it difficult for hackers to find their way around even if we did have 
&gt; &gt; open ports, but he goes online with Opera as 'user' in case of any 
&gt; &gt; vulnerabilities in the X server or Opera.
&gt; 
&gt; List members suggested online port scanners, but I think the one I used at 
&gt; <a href="http://www.hq42.net/net_tools">http://www.hq42.net/net_tools</a> scanned my ISP though it listed my IPLOCAL 
&gt; number because it listed about 900 ports including netstat (which I am not 
&gt; running) and mentioned the name of the nearest large city.
</pre>

<p>
Open ports are not the only security problem. You already got many hints
from the TAG subscribers. Security is not a state that is either
switched on or off by configuration. It is a process and considering the
code people usually run on workstations (graphically or not) it is next
to impossible to predict what code will do in all possible
circumstances.
</p>


<pre>
&gt; <a href="http://bcheck.scanit.be">http://bcheck.scanit.be</a> found 0 vulnerabilities in Opera 8.52. [...]
</pre>

<p>
If you try <a href="http://www.securityfocus.com/vulnerabilities">http://www.securityfocus.com/vulnerabilities</a> instead and
enter "Opera Software" and then "Opera Web Browser" in the search form
you get a long list of (known) bugs along with their security
implications and possible fixes or upgrades. A Google search for '"opera
8.52" security bugs' has <a href="http://security.nnov.ru/soft/8550.html">http://security.nnov.ru/soft/8550.html</a> as first
search result. This page says:
</p>

<pre>
"Integer overflow on long stylsheet sttribute. Can potentially be
used for hidden malware installation."
</pre>
A lot of online scanners are woefully incomplete and only check for the
top 10 (100 or 1000) bugs and a good part of them is designed to work
with MS Windows clients. These scanners are only a part of a security
strategy and their output should be treated as such.
</p>


<pre>
&gt; Another list member pointed out that startx allows only local access to 
&gt; the X server so is also not vulnerable.
</pre>

<p>
Some GNU/Linux distributions (such as Debian) also deactivate X's port
6000 by default. Of course this doesn't protect you against running an X
session with lots of software (which is not designed to run as root)
with root privileges.
</p>

<p>
Apologies for repeating things others have said in this thread. The part
about online scanners and Opera 8.52 made a little noise on my email
radar. <img src="../gx/smile.png" alt=":)">
</p>

<p>
Best wishes,
Ren&Atilde;&copy;
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
sindi keesan [keesan at sdf.lonestar.org]
</p>
</b><br />
<b>Sun, 28 Jan 2007 19:55:57 +0000 (UTC)</b>
</p>

<p>
On Sun, 28 Jan 2007, [iso-8859-15] Ren&Atilde;&copy; Pfeiffer wrote:
</p>

<p>
......
</p>


<pre>
&gt; Open ports are not the only security problem. You already got many hints
&gt; from the TAG subscribers. Security is not a state that is either
&gt; switched on or off by configuration. It is a process and considering the
&gt; code people usually run on workstations (graphically or not) it is next
&gt; to impossible to predict what code will do in all possible
&gt; circumstances.
</pre>

<p>
Sometimes even linux crashes.
</p>



<pre>
&gt;&gt; <a href="http://bcheck.scanit.be">http://bcheck.scanit.be</a> found 0 vulnerabilities in Opera 8.52. [...]
&gt;
&gt; If you try <a href="http://www.securityfocus.com/vulnerabilities">http://www.securityfocus.com/vulnerabilities</a> instead and
&gt; enter "Opera Software" and then "Opera Web Browser" in the search form
&gt; you get a long list of (known) bugs along with their security
&gt; implications and possible fixes or upgrades. A Google search for '"opera
&gt; 8.52" security bugs' has <a href="http://security.nnov.ru/soft/8550.html">http://security.nnov.ru/soft/8550.html</a> as first
&gt; search result. This page says:
&gt;
&gt; "Integer overflow on long stylsheet sttribute. Can potentially be
&gt; used for hidden malware installation."
</pre>


<p>
Thanks.
</p>


<pre>
&gt; A lot of online scanners are woefully incomplete and only check for the
&gt; top 10 (100 or 1000) bugs and a good part of them is designed to work
&gt; with MS Windows clients. These scanners are only a part of a security
&gt; strategy and their output should be treated as such.
</pre>

<p>
Okay.
</p>


<pre>
&gt;&gt; Another list member pointed out that startx allows only local access to
&gt;&gt; the X server so is also not vulnerable.
&gt;
&gt; Some GNU/Linux distributions (such as Debian) also deactivate X's port
&gt; 6000 by default. Of course this doesn't protect you against running an X
&gt; session with lots of software (which is not designed to run as root)
&gt; with root privileges.
</pre>

<p>
How would this affect online security?
</p>


<pre>
&gt; Apologies for repeating things others have said in this thread. The part
&gt; about online scanners and Opera 8.52 made a little noise on my email
&gt; radar. <img src="../gx/smile.png" alt=":)">
</pre>

<p>
Thanks.  I have already changed opera to su user.  I could do the same for 
lynx.  Make scripts.  And move files that I download from /home/user to 
where I want them as root.
</p>

<p>
I shared your information with my linux list.  We are having an 
interesting discussion now about security, portscanners, and nmap (which 
the author recently compiled for our use).  This business of whether to 
run as root is important to our distribution.  Several people here know 
much more than I do about security.  (I know next to nothing).
</p>

<p>
Sindi
</p>

<p>
keesan at sdf.lonestar.org
SDF Public Access UNIX System - <a href="http://sdf.lonestar.org">http://sdf.lonestar.org</a>
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Sun, 28 Jan 2007 16:24:49 -0800</b>
</p>

<p>
Quoting sindi keesan (keesan at sdf.lonestar.org):
</p>


<pre>
&gt; List members suggested online port scanners,
</pre>

<p>
To reiterate:  If you have to rely on vulnerability scanners as a
primary security measure, you're already following a losing strategy.
</p>

<p>
Relying on remote Web-based scanners is particularly foolish, since you
have no idea what port-blocking, proxying, etc. between you and them may
tend to make results meaningless.
</p>


<pre>
&gt; Another list member pointed out that startx allows only local access to 
&gt; the X server so is also not vulnerable.
</pre>

<p>
For values of "vulnerable" entailing remote direct attack, yes.
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Sun, 28 Jan 2007 16:31:37 -0800</b>
</p>

<p>
Quoting sindi keesan (keesan at sdf.lonestar.org):
</p>

<p>
[chkrootkit:]
</p>


<pre>
&gt; The LKM Trojan thing is said to be a bug.
</pre>

<p>
Picture me being extremely not surprised.
</p>


<pre>
&gt; Therefore my system, which I have been running as root for four years, 
&gt; seems not to have been hacked.
</pre>

<p>
Non sequitur.  Of course, being both lucky and reckless is certainly not 
unheard-of.
</p>


<pre>
&gt; So it found the patterns of some known worms in uClibc-static busybox?
</pre>

<p>
Sorry, you need to review the context in which you're asking me that
question:  I regard chkrootkit / rkhunter as a generally foolish
approach, justified only as a last-gasp check when someone has suddenly
woken up to a pattern of negligence and wants a quick'n'dirty check -- 
with the proviso that the onus is on the user to decide what scan
results make sense, and why.
</p>

<p>
The "user" in this case would be you, not me.
</p>

<p>
I am also particularly disinclined to go to any special lengths to help
such a user feel good about inherently bad system usage decisions such
as running routinely as the root user.  So, sorry, no, I will not help
you patch up your bad model.
</p>


<pre>
&gt; I don't appear to have any security problems. 
</pre>

<p>
Good luck with that.  You'll need it.
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
sindi keesan [keesan at sdf.lonestar.org]
</p>
</b><br />
<b>Mon, 29 Jan 2007 04:33:28 +0000 (UTC)</b>
</p>

<p>
On Sun, 28 Jan 2007, Rick Moen wrote:
</p>


<pre>
&gt; Quoting sindi keesan (keesan at sdf.lonestar.org):
&gt;
&gt; [chkrootkit:]
</pre>


<pre>
&gt;
&gt;&gt; Therefore my system, which I have been running as root for four years,
&gt;&gt; seems not to have been hacked.
&gt;
&gt; Non sequitur.  Of course, being both lucky and reckless is certainly not
&gt; unheard-of.
</pre>

<p>
The system was designed to be safe to run as root, I think.  Nobody else 
has reported being hacked either.  Someone reported attempts at hacking 
when they were running some server and some program that logs things and 
probably something protective.
</p>


<pre>
&gt;
&gt;&gt; So it found the patterns of some known worms in uClibc-static busybox?
&gt;
&gt; Sorry, you need to review the context in which you're asking me that
&gt; question:  I regard chkrootkit / rkhunter as a generally foolish
&gt; approach, justified only as a last-gasp check when someone has suddenly
&gt; woken up to a pattern of negligence and wants a quick'n'dirty check --
&gt; with the proviso that the onus is on the user to decide what scan
&gt; results make sense, and why.
</pre>

<p>
Someone in TAG asked if I had run it so I went and got and compiled and 
ran it.  I am following instructions, I think.
</p>

<p>
I am also following instructions from our group to use Opera as user and 
run other programs offline as root.
</p>

<p>
I tried to su user lynx and it would not but I could login as user then 
run lynx and then I could not save configuration file settings.  I am sure 
there is some workaround.
</p>


<pre>
&gt; The "user" in this case would be you, not me.
&gt;
&gt; I am also particularly disinclined to go to any special lengths to help
&gt; such a user feel good about inherently bad system usage decisions such
&gt; as running routinely as the root user.  So, sorry, no, I will not help
&gt; you patch up your bad model.
&gt;
&gt;&gt; I don't appear to have any security problems.
&gt;
&gt; Good luck with that.  You'll need it.
</pre>


<p>
I don't think I was asking for patches, just grateful for any helpful 
info.  It is interesting learning about these things.
</p>

<p>
Thank you.
</p>

<p>
Sindi
</p>

<p>
keesan at sdf.lonestar.org
SDF Public Access UNIX System - <a href="http://sdf.lonestar.org">http://sdf.lonestar.org</a>
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Sun, 28 Jan 2007 22:16:39 -0800</b>
</p>

<p>
Quoting sindi keesan (keesan at sdf.lonestar.org):
</p>


<pre>
&gt; The system was designed to be safe to run as root, I think.
</pre>

<p>
This remains nonsense, as it's been every other time you've said it,
too.  I can only suggest you learn some security, to figure out what the
idea is foolish, as evidently we're not getting through to you -- and
frankly I have more rewarding things to do.
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Benjamin A. Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Fri, 26 Jan 2007 10:43:02 -0500</b>
</p>

<p>
----- Forwarded message from Sindi Keesan &lt;keesan at grex.cyberspace.org&gt; -----
</p>

<pre>
Date: Thu, 25 Jan 2007 21:38:24 -0500 (EST)
From: Sindi Keesan &lt;keesan@grex.cyberspace.org&gt;
To: TAG &lt;tag@lists.linuxgazette.net&gt;
To: "Benjamin A. Okopnik" &lt;ben at linuxgazette.net&gt;
Subject: Re: [TAG] lpr works for user not root in Basiclinux 2.1
</pre>Sender: Sindi Keesan &lt;keesan at cyberspace.org&gt;
</p>

<p>
On Thu, 25 Jan 2007, Benjamin A. Okopnik wrote:
</p>


<pre>
&gt;On Wed, Jan 24, 2007 at 11:43:43AM -0500, Sindi Keesan wrote:
&gt;&gt;
&gt;&gt;cat filename &gt; /dev/lp0 works for root, so does gs used CLI without lpr,
&gt;&gt;or pbmtolj from netpbm.
&gt;&gt;
&gt;&gt;lpr used from Opera, lpr filename or even cat filename | lpr work for
&gt;&gt;'user', but for root they do not send anything to the print queue (lpq
&gt;&gt;shows no entries).  No error messages.  I just get another prompt.
&gt;&gt;
&gt;&gt;Permissions for lpr are unchanged from Slackware 7.1:
&gt;&gt;-r-s--s--x 1 root lp
&gt;&gt;(Must be s to print as user).
&gt;&gt;
&gt;&gt;lp0 is crw-r--r-- 1 root root
&gt;
&gt;Just for comparison, mine are
&gt;
&gt;``
&gt;ben at Fenrir:~$ ls -l `which lpr` /dev/lp0
&gt;crw-rw---- 1 root lp   6, 0 2004-04-28 23:43 /dev/lp0
&gt;-rwxr-xr-x 1 root root 9888 2006-11-17 20:46 /usr/bin/lpr
&gt;''
</pre>

<p>
I think I tried making both these files rwx for everyone.  Will try again 
to match yours.
</p>


<pre>
&gt;
&gt;At least a little different - although that's not necessarily the cause.
&gt;
&gt;&gt;chmod a+w lp0 did not help (crw-rw-rw-) nor did chmod 777 (crwxrwxrwx).
&gt;&gt;lp0 works for root except with lpr.
&gt;&gt;
&gt;&gt;In order to work as user I have had to change permissions on /dev/null
&gt;&gt;(w), ttyp* and ptyp* (rw), set suid XVESA and anything svgalib (links2,
&gt;&gt;zgv, gs), make /var/lock writeable, make any scripts suid or executable as
&gt;&gt;user, etc.  An education.  I can now suid user (or login as user), dial,
&gt;&gt;load Xvesa, icewm, and rxvt and Opera and print as user.
&gt;
&gt;It sounds like BasicLinux still needs a bit of refining.
</pre>

<p>
Basiclinux is designed to work only as root, and to be small and fast.
</p>


<pre>
&gt;&gt;ssh still says 'host key verification failed' though telnet works.
&gt;
&gt;The two are, of course, unrelated.
</pre>

<p>
I know.
</p>


<pre>
&gt;&gt;I would like to quit struggling with permissions every time I try to work
&gt;&gt;as user, and be able to print as root.  I do know I should not work as
&gt;&gt;root online but I am not running any servers while online with my modem.
&gt;&gt;If you scold me please explain why.
&gt;
&gt;No scolding, but just a note: as root, one tiny mistype is all it takes
&gt;to wipe out your system. As well, <strong>any</strong> programs you execute that create
&gt;an externally-accessible network socket (are you sure you know what all
&gt;of those are?) are running with root privileges - meaning that if
&gt;someone manages to crack one, they 0wn your system.
&gt;
&gt;So, I'm not going to say "don't do that". I'm just going to note that
&gt;the cost of doing so can be rather high.
</pre>


<p>
I have the same system on several computers so can easily restore it.
My super-duper full-size linux is about 1GB including a lot of music and 
photos and kernel source code.  The little one about 100MB.
</p>


<pre>
&gt;&gt;Does lpr depend on some other program, library, or device that I need to
&gt;&gt;change permissions for?
&gt;
&gt;Maybe - or maybe not, depending on how yours is configured and what
&gt;version of "lpr" you're using (in theory, you can minimize external
&gt;processing by trying to print a plain text file, e.g., '/etc/passwd'.)
&gt;In any case, it's a question that you yourself can answer by executing
&gt;"lpr" with "strace", something like this:
&gt;
&gt;``
&gt;ben at Fenrir:~$ su -
&gt;Password:
&gt;root at Fenrir:~# strace -o lpr.out /usr/bin/lpr file
&gt;''
</pre>

<p>
I had to download the strace.tgz package first.  Running it from a 
temporary directory without installing the package.
</p>

<p>
ptrace:  umoven:  Input/output error (four lines of this).
</p>

<p>
But it made lpr.out, a couple pages or more.
</p>


<pre>
&gt;After that, read the resulting file ('lpr.out', in the above case) and
&gt;see where things failed. If you need a baseline for comparison, you can
&gt;always run the above "strace" line as a non-root user.
</pre>

<p>
I can't make much sense of the results.
See attached lpr.out (root) and lpr2.out (user).
</p>

<p>
It is supposed to be writing a file to /var/spool/lpd/postscript, 
and the permissions on that directory are drwxr-xr-x.  Should I change to 
drwxrwxrwx?
</p>

<p>
I probably created the directories after installing linux.
</p>


<pre>
&gt;&gt;Can YOU print with lpr as root?
&gt;
&gt;Yep. I don't recall that ever being a problem, although I've seen the
&gt;opposite happen.
&gt;
</pre>

<p>
I ran across several complaints of the opposite.
</p>


<p>
Sindi Keesan
</p>

<p>
----- End forwarded message -----
</p>

<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Sun, 28 Jan 2007 16:21:21 -0800</b>
</p>

<p>
----- Forwarded message from Sindi Keesan &lt;keesan at grex.cyberspace.org&gt; -----
</p>

<pre>
Date: Sun, 28 Jan 2007 13:02:38 -0500 (EST)
From: Sindi Keesan &lt;keesan@grex.cyberspace.org&gt;
To: TAG &lt;tag@lists.linuxgazette.net&gt;
To: Rick Moen &lt;rick at linuxmafia.com&gt;
Subject: Re: [TAG] Re: lpr works for user not root in Basiclinux 2.1
</pre>
On Sun, 28 Jan 2007, Rick Moen wrote:
</p>


<pre>
&gt;Quoting Sindi Keesan (keesan at grex.cyberspace.org):
&gt;
&gt;&gt;But if I run chrootkit and it finds nothing, and I am not running any
&gt;&gt;network services when I go online, can I continue as root without
&gt;&gt;worrying?
&gt;
&gt;No.  Your question is a complete and total non-sequitur to what I just
&gt;got through saying, and carrying out online activity as the root user,
&gt;or indeed any activity at all that doesn't require root access, remains
&gt;reckless and ill-advised for reasons that frankly should be obvious --
&gt;completely without regard to whether you're even running network daemons
&gt;at all.
</pre>

<p>
I mentioned a while ago that I had clones of the same linux on several 
computers so I am not concerned about accidentally wiping out files.
And from what various people have told me one cannot hack my system if I 
have no network daemons running and X only has local access and Opera has 
no vulnerabilities.  And chkrootkit found nothing after four years.   So 
it is not obvious.  I am not trying to be intentionally stupid.
</p>


<pre>
&gt;The non-sequitur nature of that question suggests to me that you
&gt;probably are not really heeding what people are saying, in this thread,
&gt;or it seems likely that you would not make such comments.
</pre>

<p>
I don't claim to understand it all.
</p>


<pre>
&gt;&gt;&gt;# nmap -vv -sT -sR -O -o N /tmp/nmap-tcp.log -n 157.22.20.227
&gt;&gt;&gt;# nmap -vv -sU -sR -O -n -oN /tmp/nmap-udp.log -n 157.22.20.227
&gt;&gt;&gt;# nmap -vv -sA -sR -O -n -oN /tmp/nmap-ack.log -n 157.22.20.227
&gt;&gt;
&gt;&gt;You are way beyond me already.
&gt;
&gt;No, I'm certainly not.  For heaven's sake, if you're curious about what
&gt;those options mean, they're detailed right in the manpage.
</pre>

<p>
I don't have enough background to understand 99% of what is in manpages 
starting with the vocabulary, and this one was about 100 pages long.  I 
was rather surprised that I managed to use nmap at all.  I am not a 
computer professional, just don't like MS or GUIs in general and am 
willing to work hard to bypass them.  I found a chapter in Running Linux 
ver 3 about TCP UDP and ACK which I will read.
</p>



<pre>
&gt;&gt;Should I do the same as above but substitute the IP address
&gt;&gt;assigned when I dial the ISP?
&gt;
&gt;You should re-read the explanation of why scanning a host from itself
&gt;would normally be pointless.
</pre>

<p>
I tried to scan from a website and it listed a lot of things that are 
probably at my ISP since I don't have them running here, even though it 
was using my IPLOCAL number.  My linux list members will explain this.
</p>


<pre>
&gt;&gt;I will look for chrootkit.
&gt;
&gt;chkrootkit is a last-gasp but highly fallible attempt to detect security
&gt;disasters after all your real defences and precautions have failed.
&gt;Your biggest problem is that you're going around defeating precautions
&gt;(e.g., insisting on using the root account routinely) and eschewing
&gt;defences.  <em>That</em> is what should be getting your attention.
</pre>

<p>
I understand this is like using f-prot rather than being careful not to 
download viruses in the first place.
</p>

<p>
Our linux was designed to be used as root.  The author and other users who 
understand security say this is safe in our case.  There is no evidence 
yet in 4 years that this makes it insecure.  It did not come with network 
servers (I added the telnetd in busybox).  And it is a great deal of 
trouble and is more likely to cause problems if I keep changing 
permissions on all sorts of things each time I want to use another program 
as user.
</p>

<p>
Which is why I asked for help with lpr.
</p>

<p>
Is this discussion online so other users of our linux can read it and 
comment?
</p>

<p>
I am grateful for the education and I apologize for my ignorance.
</p>

<p>
Sindi Keesan
</p>

<p>
----- End forwarded message -----
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas.adam22 at gmail.com]
</p>
</b><br />
<b>Mon, 29 Jan 2007 00:30:07 +0000</b>
</p>

<p>
[ Hopefully I haven't completely messed up attribution. ]
</p>

<p>
On Sun, Jan 28, 2007 at 04:21:21PM -0800, Rick Moen wrote:
</p>

<pre>
&gt; ----- Forwarded message from Sindi Keesan &lt;keesan at grex.cyberspace.org&gt; -----
&gt;
&gt; I mentioned a while ago that I had clones of the same linux on several 
&gt; computers so I am not concerned about accidentally wiping out files.
</pre>

<p>
That depends on the files you backup, and how you clone them.  There are
various filesystems out there which operate in this way to do just that.
</p>


<pre>
&gt; And from what various people have told me one cannot hack my system if I 
&gt; have no network daemons running and X only has local access and Opera has 
&gt; no vulnerabilities.  And chkrootkit found nothing after four years.   So 
&gt; it is not obvious.  I am not trying to be intentionally stupid.
</pre>

<p>
Well, the X11 issue comes down to access control (see 'man xhost').  And
it's still a bogus comment since it's not so much access control that's
the issue, as it is having the program run as user root in the first
place.
</p>

<p>
Take for example, a copy of gvim.  Guess what happens if that's started
as root.  
</p>

<p>
-- Thomas Adam
</p>

<pre>-- 
"Wanting to feel; to know what is real.  Living is a lie." -- Purpoise
Song, by The Monkees.
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Sun, 28 Jan 2007 22:47:25 -0500 (EST)</b>
</p>

<p>
On Mon, 29 Jan 2007, Thomas Adam wrote:
</p>


<pre>
&gt; [ Hopefully I haven't completely messed up attribution. ]
&gt;
&gt; On Sun, Jan 28, 2007 at 04:21:21PM -0800, Rick Moen wrote:
&gt;&gt; ----- Forwarded message from Sindi Keesan &lt;keesan at grex.cyberspace.org&gt; -----
&gt;&gt;
&gt;&gt; I mentioned a while ago that I had clones of the same linux on several
&gt;&gt; computers so I am not concerned about accidentally wiping out files.
&gt;
&gt; That depends on the files you backup, and how you clone them.  There are
&gt; various filesystems out there which operate in this way to do just that.
</pre>

<pre>
cp -a /hda1/* /hdc1
  
ext2
</pre>
Is there something more suitable for copying 500-1000MB of files?  I tried 
dd between identical drives, with bs=64k or larger.
</p>

<p>
I spend time in three places, have 2-3 computers with the same software at 
each place, and keep anything I need to access online at a shell account 
where I do not have root privileges.
</p>

<p>
The computers are all free because our friends need newer ones for 
Windows.  We are setting up linux/Opera for other friends on 500MB drives, 
when their 20GB XP drive dies.  I will set them up as user for added 
security.
</p>


<pre>
&gt;&gt; And from what various people have told me one cannot hack my system if I
&gt;&gt; have no network daemons running and X only has local access and Opera has
&gt;&gt; no vulnerabilities.  And chkrootkit found nothing after four years.   So
&gt;&gt; it is not obvious.  I am not trying to be intentionally stupid.
</pre>


<pre>
&gt; Well, the X11 issue comes down to access control (see 'man xhost').  And
&gt; it's still a bogus comment since it's not so much access control that's
&gt; the issue, as it is having the program run as user root in the first
&gt; place.
&gt;
&gt; Take for example, a copy of gvim.  Guess what happens if that's started
&gt; as root.
</pre>

<p>
I have never heard of gvim before.  I compiled busybox vi but have not 
learned to use it.  I use pico in console mode and am trying to learn to 
write simple rtf, maybe by changing the keycodes for the function keys so 
F1 is bold-on and F2 is bold-off, etc., to avoid needing X at all.  I 
could not find a console wordprocessor for linux, and wordperfect and VDE 
don't work correctly in dosemu or qemu.
</p>

<p>
If I do have to use Opera, does it matter whether I load X and dial as 
root or user before using Opera as user?
</p>

<p>
Thanks to all of you for the helpful ideas.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Sun, 28 Jan 2007 22:19:01 -0800</b>
</p>

<p>
Quoting Sindi Keesan (keesan at grex.cyberspace.org):
</p>


<pre>
&gt; Is there something more suitable for copying 500-1000MB of files?  
</pre>

<p>
"Copying Directory Trees" on <a href="http://linuxmafia.com/kb/Admin/">http://linuxmafia.com/kb/Admin/</a>
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Mon, 29 Jan 2007 02:14:32 -0500 (EST)</b>
</p>

<p>
On Sun, 28 Jan 2007, Rick Moen wrote:
</p>


<pre>
&gt; Quoting Sindi Keesan (keesan at grex.cyberspace.org):
&gt;
&gt;&gt; Is there something more suitable for copying 500-1000MB of files?
&gt;
&gt; "Copying Directory Trees" on <a href="http://linuxmafia.com/kb/Admin/">http://linuxmafia.com/kb/Admin/</a>
&gt;
&gt;
</pre>

<p>
Sindi Keesan
</p>

<p>
Thanks.  I will read this more carefully when it is not 2 am.
</p>

<p>
I have used dd to clone between two identical drives.  I experimented
with cloning partitions in order to copy Win98 and it created problems. 
(Windows would tell us the drive was full when it was not).
</p>

<p>
I have used tar -zcvf to copy files via a FAT-formatted USB flash drive 
without losing long file names.  Or to make one big copy of a file system 
that was small enough to fit into a DOS partition on an old laptop.  The 
gzipping takes a long time but might be worth it if you are copying via 
PLIP rather than ethernet.
</p>

<p>
I normally use cp without gzipping, on individual files or a .tar file, 
because the gzip takes longer than the file transfer on our older 
computers.
</p>

<p>
We do not have rsync, dump, or restore.  I met TAG in the first place 
because we also do not have modprobe or telinit.
</p>

<p>
Sindi
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Sun, 28 Jan 2007 16:45:37 -0800</b>
</p>

<p>
Quoting Sindi Keesan (keesan at grex.cyberspace.org):
</p>

<p>
[running routinely as root:]
</p>


<pre>
&gt; So it is not obvious. 
</pre>

<p>
Please understand I have nothing particularly to gain from convincing
you, so basically you're going to have to figure this out on your own.  
</p>

<p>
You might wish to read "Firewalls" on <a href="http://linuxmafia.com/kb/Security/">http://linuxmafia.com/kb/Security/</a>, 
which links to the complete 1994 book text of Cheswick &amp; Bellovin's
classic "Firewalls and Internet Security: Repelling the Wily Hacker", 
first edition, which explains basic principles of security such as why
you want to always run processes with the minimum possible authority.
</p>

<p>
[nmap:]
</p>


<pre>
&gt; I don't have enough background to understand 99% of what is in manpages 
&gt; starting with the vocabulary, and this one was about 100 pages long.
</pre>

<p>
<em>Obviously</em> you don't read the whole thing.  Looking up and
understanding the options I cited would take you all of 15 minutes.
</p>


<pre>
&gt; &gt;You should re-read the explanation of why scanning a host from itself
&gt; &gt;would normally be pointless.
&gt; 
&gt; I tried to scan from a website 
</pre>

<p>
That would be pointless for two different reasons:  (1) Results would
often be inherently meaningless because of port-blocking, proxying,
etc., between you and the Web site.  (2) You have no control or
knowledge of how they're implementing their scans, and cannot know
whether what they're doing is meaningless junk -- as is generally the
case, with, e.g., Gibson Research's "Shields Up" site, for example.
</p>


<pre>
&gt; Our linux was designed to be used as root.
</pre>

<p>
Which is a bad design, ab initio.  Again, I have nothing to gain from
convincing you of this.  However, I <em>can</em> avoid wasting my time helping
you tweak a setup I regard as misbegotten in the first place.
</p>


<pre>
&gt; Is this discussion online so other users of our linux can read it and 
&gt; comment?
</pre>

<p>
Ben would have to explain to you why our mailing list archive isn't
accessible to the general public, since for the life of me I cannot.
</p>




<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Sun, 28 Jan 2007 22:36:27 -0500 (EST)</b>
</p>

<p>
On Sun, 28 Jan 2007, Rick Moen wrote:
</p>


<pre>
&gt; Quoting Sindi Keesan (keesan at grex.cyberspace.org):
&gt;
&gt; [running routinely as root:]
&gt;
&gt;&gt; So it is not obvious.
&gt;
&gt; Please understand I have nothing particularly to gain from convincing
&gt; you, so basically you're going to have to figure this out on your own.
&gt;
&gt; You might wish to read "Firewalls" on <a href="http://linuxmafia.com/kb/Security/">http://linuxmafia.com/kb/Security/</a>,
&gt; which links to the complete 1994 book text of Cheswick &amp; Bellovin's
&gt; classic "Firewalls and Internet Security: Repelling the Wily Hacker",
&gt; first edition, which explains basic principles of security such as why
&gt; you want to always run processes with the minimum possible authority.
</pre>

<p>
Thanks.
</p>

<pre>
&gt;
&gt; [nmap:]
&gt;
&gt;&gt; I don't have enough background to understand 99% of what is in manpages
&gt;&gt; starting with the vocabulary, and this one was about 100 pages long.
&gt;
&gt; <em>Obviously</em> you don't read the whole thing.  Looking up and
&gt; understanding the options I cited would take you all of 15 minutes.
</pre>

<p>
But I don't understand the words they are using to explain the concepts. 
The only computer course I ever took was Fortran IV.  I will try to start 
with some basic reading.  I am not trying to be a system administrator, 
just to put together something I can use myself.
</p>


<pre>
&gt;&gt;&gt; You should re-read the explanation of why scanning a host from itself
&gt;&gt;&gt; would normally be pointless.
&gt;&gt;
&gt;&gt; I tried to scan from a website
&gt;
&gt; That would be pointless for two different reasons:  (1) Results would
&gt; often be inherently meaningless because of port-blocking, proxying,
&gt; etc., between you and the Web site.  (2) You have no control or
&gt; knowledge of how they're implementing their scans, and cannot know
&gt; whether what they're doing is meaningless junk -- as is generally the
&gt; case, with, e.g., Gibson Research's "Shields Up" site, for example.
</pre>

<p>
If I cannot scan from my own computer or while online, how do I scan?
</p>


<pre>
&gt;&gt; Our linux was designed to be used as root.
&gt;
&gt; Which is a bad design, ab initio.  Again, I have nothing to gain from
&gt; convincing you of this.  However, I <em>can</em> avoid wasting my time helping
&gt; you tweak a setup I regard as misbegotten in the first place.
&gt;
&gt;&gt; Is this discussion online so other users of our linux can read it and
&gt;&gt; comment?
&gt;
&gt; Ben would have to explain to you why our mailing list archive isn't
&gt; accessible to the general public, since for the life of me I cannot.
</pre>

<p>
Okay.  If you want to read our discussions of nmap and security bugs 
search on basiclinux archives for Jan 2007.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Sun, 28 Jan 2007 21:57:33 -0800</b>
</p>

<p>
Quoting Sindi Keesan (keesan at grex.cyberspace.org):
</p>

<p>
[nmap:]
</p>


<pre>
&gt; &gt;_Obviously_ you don't read the whole thing.  Looking up and
&gt; &gt;understanding the options I cited would take you all of 15 minutes.
&gt; 
&gt; But I don't understand the words they are using to explain the concepts. 
</pre>

<p>
[Rick reviews the manpage.]
</p>

<p>
No, that objection really isn't reasonable.  Quoting the options'
explanations:
<pre>
    -v: Increase verbosity level (use twice for more effect)
</pre>
Show more detail.
<pre>
    -sT (TCP connect() scan)
              TCP Connect() scan is the default TCP scan type when SYN scan
              is not an option....  This is the same high-level system 
              call that web browsers, P2P clients, and most other 
              network-enabled applications use to establish a connection.
</pre>
Test using the same TCP connection type most apps use.
<pre>
    -sR (RPC scan)
              ...takes all the TCP/UDP ports found open and floods them 
              with SunRPC program NULL commands in an attempt to
              determine whether they are RPC ports....
</pre>
So, adds a check for some particular -type- of connection (called
"SunRPC" -- which happens to be, FYI, used primarily for NFS/NIS).
<pre>
     -O: Enable OS detection
</pre>
Self-explanatory.
<pre>
      -oN ...: Output scan in normal... format....
</pre>
Self-explanatory.
<pre>
      /tmp/nmap-tcp.log
</pre>
Where to log to, instead of just echoing to screen.
<pre>
      -n ...: Never do DNS resolution....
</pre>
Self-explanatory.
<pre>
      157.22.20.227
</pre>
What IP I, in my particular case, was telling nmap to scan, at that
time.
<pre>
      -sU (UDP scans)
      Nmap can help inventory UDP ports.  UDP scan is activated 
      with the -sU option.
</pre>
Finds UDP-oriented services.
<pre>
      -sA (TCP ACK scan)
       ...is used to map out firewall rulesets, determining whether they 
       are stateful or not and which ports are filtered.
</pre>
Self-explanatory.
</p>

<p>
Now, if you'd asked our help in interpreting results of such scans, that
I could have respected.  But saying "I can't deal with that" is
difficult to respect.
</p>


<pre>
&gt; If I cannot scan from my own computer or while online, how do I scan?
</pre>

<p>
A second, network-wise "nearby" machine would be best.  It could be
something as simple as a borrowed PC running a Knoppix live CD,
connected to yours via a crossover cable between the two machines'
ethernet ports.  <em>Or</em> it could be a second dial-in machine connected to
the same ISP point of presence, so that you have minimal circuitry
between the machines.
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Mon, 29 Jan 2007 01:41:13 -0500 (EST)</b>
</p>

<p>
On Sun, 28 Jan 2007, Rick Moen wrote:
</p>


<pre>
&gt; Quoting Sindi Keesan (keesan at grex.cyberspace.org):
&gt;
&gt; [nmap:]
&gt;
&gt;&gt;&gt; <em>Obviously</em> you don't read the whole thing.  Looking up and
&gt;&gt;&gt; understanding the options I cited would take you all of 15 minutes.
&gt;&gt;
&gt;&gt; But I don't understand the words they are using to explain the concepts.
&gt;
&gt; [Rick reviews the manpage.]
&gt;
&gt; No, that objection really isn't reasonable.  Quoting the options'
&gt; explanations:
&gt;
&gt;    -v: Increase verbosity level (use twice for more effect)
</pre>

<p>
I understand this part.
</p>


<pre>
&gt;
&gt; Show more detail.
&gt;
&gt;    -sT (TCP connect() scan)
&gt;              TCP Connect() scan is the default TCP scan type when SYN scan
&gt;              is not an option....  This is the same high-level system
&gt;              call that web browsers, P2P clients, and most other
&gt;              network-enabled applications use to establish a connection.
</pre>

<p>
I never heard of SYN or P2P.  I have heard of TCP but don't understand it.
</p>

<p>
Is P2P the same as pointopoint used by PLIP?
</p>


<pre>
&gt; Test using the same TCP connection type most apps use.
&gt;
&gt;    -sR (RPC scan)
&gt;              ...takes all the TCP/UDP ports found open and floods them
&gt;              with SunRPC program NULL commands in an attempt to
&gt;              determine whether they are RPC ports....
&gt;
&gt; So, adds a check for some particular -type- of connection (called
&gt; "SunRPC" -- which happens to be, FYI, used primarily for NFS/NIS).
</pre>

<p>
I never heard of any of this except NFS (something that lets you share 
files between computers) and Sun (a type of hardware).  I am rather fuzzy 
about what a port is other than a number at the end of an IP address.
(I am not asking you for an explanation here, just pointing out why I 
cannot make sense of the man pages).
</p>


<pre>
&gt;     -O: Enable OS detection
&gt;
&gt; Self-explanatory.
&gt;
&gt;      -oN ...: Output scan in normal... format....
&gt;
&gt; Self-explanatory.
&gt;
&gt;      /tmp/nmap-tcp.log
&gt;
&gt; Where to log to, instead of just echoing to screen.
&gt;
&gt;      -n ...: Never do DNS resolution....
&gt;
&gt; Self-explanatory.
&gt;
&gt;      157.22.20.227
&gt;
&gt; What IP I, in my particular case, was telling nmap to scan, at that
&gt; time.
</pre>

<p>
I still don't understand if I am supposed to be scanning my own system 
from my own system or from somewhere else or not scanning my own system at 
all - lots of apparently conflicting information from various people.
</p>

<p>
I spent about 15 minutes looking for my temporary IP number in my own 
computer.  It was not in dmesg.  The online site provided it. I was rather 
proud of myself for figuring out the local host IP number so I could scan 
that.
</p>

<p>
I do not have any formal computer training except a semester of Fortran 
IV.  I never had any reason to study TCP stuff before on my own.  I am 
teaching myself enough linux to do what I want it to do.  I feel like I am 
usually in way over my head.  Our little distribution is friendly to 
beginners.  I contacted TAG when nobody in four years figured out why lpr 
was not working for root, partly because I got an email a year or two ago 
asking for new topics from people who had asked for help before, and I 
could not find any answers on the web.  You are overestimating my 
abilities and experience.
</p>


<pre>
&gt;
&gt;      -sU (UDP scans)
&gt;      Nmap can help inventory UDP ports.  UDP scan is activated
&gt;      with the -sU option.
&gt;
&gt; Finds UDP-oriented services.
</pre>

<p>
I don't know what UDP is other than a word that shows up in dmesg near 
TCP.
</p>



<pre>
&gt;      -sA (TCP ACK scan)
&gt;       ...is used to map out firewall rulesets, determining whether they
&gt;       are stateful or not and which ports are filtered.
&gt;
&gt; Self-explanatory.
</pre>

<p>
Not if you don't know what an ACK or ruleset is or what stateful means or 
what it means for a port to be filtered or what a port even is.
</p>

<p>
I have a vague idea what a firewall is because I was given instructions to 
type two lines to create one when I was trying to go online with two 
computers at the same time without a telnetd.
</p>


<pre>
&gt; Now, if you'd asked our help in interpreting results of such scans, that
&gt; I could have respected.  But saying "I can't deal with that" is
&gt; difficult to respect.
</pre>

<p>
I could give you a few sentences to translate from Turkish or Albanian 
using an online dictionary if you want to know what it is like to be faced 
with pages on pages of text full of words you don't know used for concepts 
you know even less about.  (I work as a translator and have studied both 
languages).  All you need to do is look up the words and teach yourself a 
bit of grammar and hope you understand the subject matter enough to help 
make sense of it all.
</p>



<pre>
&gt;&gt; If I cannot scan from my own computer or while online, how do I scan?
</pre>


<pre>
&gt; A second, network-wise "nearby" machine would be best.  It could be
&gt; something as simple as a borrowed PC running a Knoppix live CD,
&gt; connected to yours via a crossover cable between the two machines'
&gt; ethernet ports.  <em>Or</em> it could be a second dial-in machine connected to
&gt; the same ISP point of presence, so that you have minimal circuitry
&gt; between the machines.
</pre>


<p>
Why would I want to use a live CD rather than two computers with the same 
linux on them?  I am not familiar with Knoppix and I do know how to use my 
own linux to some degree.  We have lots of old computers given to us by 
friends who can't use them for the latest MS OS.  The reason I wanted to 
use lpr is because we are setting them up for friends and people on the 
local freecycle list to use and most of them want to print from a browser 
or wordprocessor, which I never needed to do in linux.  Some of them have 
had lots of problems with Windows viruses and spyware, etc, and are 
willing to try linux instead.
</p>

<p>
I cannot dial into the ISP from two computers at the same time, if that is 
what you are suggesting.
</p>

<p>
I can try to set up a firewall with ipchains and default gateway again 
with crossover cable (if I can find my notes).  And dial with the default 
gateway.  Is that what you meant by 'same ISP point of presence'?
</p>

<p>
I assign each computer an IP number with ifconfig to establish a local 
network (after inserting network modules).  The ISP assigns the computer I 
dial with another IP number.  Do I run a scan on the IP number assigned by 
the ISP or the one I assigned to that same computer?
</p>

<p>
And what would I learn other than that I do not have any open ports 
because I am not running any servers (unless a default gateway in my own 
local network is a server of some sort)?
</p>

<p>
I will try to make some sense of the chapter in Running Linux.
</p>

<p>
I am afraid that you have overestimated my knowledge.  I have similar 
problems if I pronounce things properly and use the correct syntax in 
another language - people talk back to me much too quickly with unfamiliar 
vocabulary.
</p>

<p>
Thanks for your time
</p>

<p>
Naten e mire (Albanian for 'good night' - it got to be 1:35 am here).
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Mon, 29 Jan 2007 02:00:19 -0800</b>
</p>

<p>
Quoting Sindi Keesan (keesan at grex.cyberspace.org):
</p>


<pre>
&gt; I never heard of SYN or P2P.  I have heard of TCP but don't understand it.
</pre>

<p>
For your purposes, it probably doesn't matter, right?  You can look it
up when you need to know.  (I could explain, but have no reason to think
you need that information right now.
</p>


<pre>
&gt; Is P2P the same as pointopoint used by PLIP?
</pre>

<p>
In this context (the "-sT" option portion of the nmap manpage), "P2P"
just meant peer-to-peer, a family of Internet applications.
</p>


<pre>
&gt; I never heard of any of this except NFS (something that lets you share 
&gt; files between computers) and Sun (a type of hardware).  I am rather fuzzy 
&gt; about what a port is other than a number at the end of an IP address.
</pre>

<p>
I'm sure you'll learn more when you need to learn more.  My point is that
you don't need to understand everything in the nmap manpage to know how
to use it.  It should suffice for you to understand that I mentioned
three types of nmap scans you can do, and gave sample syntax for each:
(1) a scan of "TCP"-type services, (2) a scan of "UDP"-type services,
and (3) an "ACK" scan that test firewall rules.  
</p>

<p>
You can use that information without knowing exactly what TCP is or what
UDP is, just using the additional information (also readily
comprehensible by novices from the quoted manpage portions) that
TCP/IP-using applications generally divide between those using TCP
connections and those using UDP connections.
</p>


<pre>
&gt; (I am not asking you for an explanation here, just pointing out why I 
&gt; cannot make sense of the man pages).
</pre>

<p>
And I'm saying that's nonsense.
</p>



<pre>
&gt; I still don't understand if I am supposed to be scanning my own system 
&gt; from my own system or from somewhere else or not scanning my own system at 
&gt; all - lots of apparently conflicting information from various people.
</pre>

<p>
You're a bright guy.  Figure it out.
</p>

<p>
You already know that some network services, if enabled at all, are
reachable only from the machine itself.  This should point out to you
the limited usefulness of scanning a machine from itself:  It's a bit
like twisting your house's doorknobs from <em>inside</em> the house to
determine whether or not your house is locked.  You're not really
seeking to find out if people <em>inside</em> the house can open the doors, but
rather whether people <em>outside</em> can.
</p>


<pre>
&gt; I spent about 15 minutes looking for my temporary IP number in my own 
&gt; computer.
</pre>

<pre>
/sbin/ifconfig -a
</pre>

<pre>
&gt; I feel like I am 
&gt; usually in way over my head.
</pre>

<p>
The feeling will eventually come to seem familiar, maybe even welcome.
;-&gt;
</p>



<pre>
&gt; Why would I want to use a live CD rather than two computers with the same 
&gt; linux on them?
</pre>

<p>
If you don't happen to <em>have</em> that second Linux machine, but can borrow
an other-OS box briefly, possession of a live CD can be extremely handy.
</p>



<pre>
&gt; I can try to set up a firewall with ipchains and default gateway again 
&gt; with crossover cable (if I can find my notes). 
</pre>

<p>
Sure, if you wish.
</p>

<p>
I hope you realise that your prior postings indicated that you'd nmapped
the machine (well, for TCP services, anyway) from localhost, and found 
nothing at all running.  Assuming that is reliable information (e.g.,
that no intruder has installed a trojaned copy of nmap that omits
crucial data), then obviously your host has nothing running (using TCP
ports, anyway), and re-doing that check from a nearby host wouldn't tell
you more.
</p>

<p>
The reason why nmapping from localhost is a bad idea (leaving aside the 
problem of trojaned copies) is that it <em>overreports</em> by including
services reachable only locally, whereas what's actually of interest are
those services that other machines will see and can use.
</p>



<pre>
&gt; Is that what you meant by 'same ISP point of presence'?
</pre>

<p>
A "point of presence" (in this context) is basically a cluster of
dial-in numbers that reach the same ISP router.
</p>


<pre>
&gt; And what would I learn other than that I do not have any open ports 
&gt; because I am not running any servers (unless a default gateway in my own 
&gt; local network is a server of some sort)?
</pre>

<p>
I didn't tell you to run nmap.
</p>

<p>
I was just suggesting ways to use it effectively <em>if</em> you have reason to
use nmap -- and also proving to you that, no, you certainly do not need
to understand its 100 pages of manpage, to use it.
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Mon, 29 Jan 2007 17:41:21 -0500 (EST)</b>
</p>

<p>
On Mon, 29 Jan 2007, Rick Moen wrote:
</p>


<pre>
&gt; Quoting Sindi Keesan (keesan at grex.cyberspace.org):
&gt;
&gt;&gt; I never heard of SYN or P2P.  I have heard of TCP but don't understand it.
&gt;
&gt; For your purposes, it probably doesn't matter, right?  You can look it
&gt; up when you need to know.  (I could explain, but have no reason to think
&gt; you need that information right now.
</pre>

<p>
I have Running Linux ver 3 and some day will find time to read more of it.
There is a chapter on networking.
</p>



<pre>
&gt;&gt; Is P2P the same as pointopoint used by PLIP?
&gt;
&gt; In this context (the "-sT" option portion of the nmap manpage), "P2P"
&gt; just meant peer-to-peer, a family of Internet applications.
</pre>


<pre>
&gt;&gt; I never heard of any of this except NFS (something that lets you share
&gt;&gt; files between computers) and Sun (a type of hardware).  I am rather fuzzy
&gt;&gt; about what a port is other than a number at the end of an IP address.
</pre>


<pre>
&gt; I'm sure you'll learn more when you need to learn more.  My point is that
&gt; you don't need to understand everything in the nmap manpage to know how
&gt; to use it.  It should suffice for you to understand that I mentioned
&gt; three types of nmap scans you can do, and gave sample syntax for each:
&gt; (1) a scan of "TCP"-type services, (2) a scan of "UDP"-type services,
&gt; and (3) an "ACK" scan that test firewall rules.
</pre>

<p>
Do I need to test firewalls when I don't have one?   I set one up once 
when using one computer as a gateway, following simple instructions.
Do I need a firewall if I am not running servers and use a modem?
</p>

<pre>
TCP Transmission Control Protocol send packets that are acknowledged
UDP User Datagram Protocol
ACK acknowledge
</pre>
I found 30 pages online at <a href="http://www.yiluda.net/manual/linux/rute/node29.html">http://www.yiluda.net/manual/linux/rute/node29.html</a>, 
of which the first 5 are semiunderstandable without a dictionary.
</p>


<pre>
&gt; You can use that information without knowing exactly what TCP is or what
&gt; UDP is, just using the additional information (also readily
&gt; comprehensible by novices from the quoted manpage portions) that
&gt; TCP/IP-using applications generally divide between those using TCP
&gt; connections and those using UDP connections.
&gt;
&gt;&gt; (I am not asking you for an explanation here, just pointing out why I
&gt;&gt; cannot make sense of the man pages).
&gt;
&gt; And I'm saying that's nonsense.
&gt;
&gt;
&gt;&gt; I still don't understand if I am supposed to be scanning my own system
&gt;&gt; from my own system or from somewhere else or not scanning my own system at
&gt;&gt; all - lots of apparently conflicting information from various people.
&gt;
&gt; You're a bright guy.  Figure it out.
</pre>

<p>
I am not a guy.
</p>


<pre>
&gt; You already know that some network services, if enabled at all, are
&gt; reachable only from the machine itself.  This should point out to you
&gt; the limited usefulness of scanning a machine from itself:  It's a bit
&gt; like twisting your house's doorknobs from <em>inside</em> the house to
&gt; determine whether or not your house is locked.  You're not really
&gt; seeking to find out if people <em>inside</em> the house can open the doors, but
&gt; rather whether people <em>outside</em> can.
&gt;
&gt;&gt; I spent about 15 minutes looking for my temporary IP number in my own
&gt;&gt; computer.
&gt;
&gt; /sbin/ifconfig -a
</pre>

<p>
ifconfig:  ifconfig was not compiled with interface status display support 
Part of busybox that I compiled.  I should compile it again with this 
support.  The older /bin/busybox ifconfig that I replaced gives ppp0 inet 
addr which looks like my IPLOCAL address.
</p>

<p>
I found my IPLOCAL number in /var/run/pppd.tdb, as the last of many.  (It 
matched what the website said it was).
</p>


<pre>
&gt;&gt; I feel like I am
&gt;&gt; usually in way over my head.
&gt;
&gt; The feeling will eventually come to seem familiar, maybe even welcome.
&gt; ;-&gt;
</pre>

<p>
Translating is like that much of the time.  One day I need to understand 
the rudiments of mine sweeping or guided missles, another day gamma 
globulin or organophosphates.  I do a lot of surficial online research.
</p>


<pre>
&gt;&gt; Why would I want to use a live CD rather than two computers with the same
&gt;&gt; linux on them?
&gt;
&gt; If you don't happen to <em>have</em> that second Linux machine, but can borrow
&gt; an other-OS box briefly, possession of a live CD can be extremely handy.
</pre>

<p>
We have the same linux on (let me count) 5 laptop computers, 9 desktops 
here, 3 at each of two other locations, and a few test machines and spare 
hard drives.  I thought I had mentioned having lots of identical setups to 
copy between if one failed, which they do once in a while when the hard 
drive or motherboard dies.  They all came to us free from friends, 
neighbors, the curb, dumpsters, etc.  We have several other computers that 
I want to set up for friends and freecyclers with linux (Opera and 
Abiword) instead of Win98 (WORD and IE).  I can fit linux nicely into 
under 100MB so have also added it to friend's working MS computers.
</p>


<pre>
&gt;&gt; I can try to set up a firewall with ipchains and default gateway again
&gt;&gt; with crossover cable (if I can find my notes).
&gt;
&gt; Sure, if you wish.
</pre>


<pre>
&gt; I hope you realise that your prior postings indicated that you'd nmapped
&gt; the machine (well, for TCP services, anyway) from localhost, and found
&gt; nothing at all running.  Assuming that is reliable information (e.g.,
&gt; that no intruder has installed a trojaned copy of nmap that omits
&gt; crucial data), then obviously your host has nothing running (using TCP
&gt; ports, anyway), and re-doing that check from a nearby host wouldn't tell
&gt; you more.
</pre>

<p>
That is why I asked if there is any point to doing this, other than for 
practice.
</p>

<p>
How would someone install a trojanned copy of nmap when I never have any 
ports open to come through?  If I had a trojanned copy, why did I not 
find it with 'which nmap', which finds any executables on the path, when I 
renamed the downloaded nmap temporarily?
</p>

<p>
How can someone put files on my computer if I am not running a server and 
I don't even download emails to my own computer (I use pine at a shell 
account)?  I even delete Opera cache on exit and it is not on the path 
anyway.
</p>


<pre>
&gt; The reason why nmapping from localhost is a bad idea (leaving aside the
&gt; problem of trojaned copies) is that it <em>overreports</em> by including
&gt; services reachable only locally, whereas what's actually of interest are
&gt; those services that other machines will see and can use.
</pre>

<p>
The X server is my only service, and it is only reachable locally.
So in my case why should I run nmap to scan my system if I am not running 
any servers on it besides X?
</p>


<pre>
&gt;&gt; Is that what you meant by 'same ISP point of presence'?
&gt;
&gt; A "point of presence" (in this context) is basically a cluster of
&gt; dial-in numbers that reach the same ISP router.
</pre>

<p>
I cannot dial in twice at the same time to the same ISP without having two 
accounts.  If I tried they might be annoyed.
</p>


<pre>
&gt;&gt; And what would I learn other than that I do not have any open ports
&gt;&gt; because I am not running any servers (unless a default gateway in my own
&gt;&gt; local network is a server of some sort)?
&gt;
&gt; I didn't tell you to run nmap.
</pre>

<p>
Someone on the TAG list asked about chkrootkit and someone said to scan my 
ports so I downloaded programs to do both, and neither of them found any 
problems or potential problems.  I am at least learning a lot.
</p>


<pre>
&gt; I was just suggesting ways to use it effectively <em>if</em> you have reason to
&gt; use nmap -- and also proving to you that, no, you certainly do not need
&gt; to understand its 100 pages of manpage, to use it.
</pre>

<p>
If I understand correctly, I have no reason to use it unless I want to run 
things like ftpd or sshd while I am online.  I ran pureftpd once as an 
experiment to check if I had a way to transfer files via ethernet to and 
from a Windows computer.  Offline.
</p>

<p>
I will, unless someone explains why not to, set up friends to load X and 
rxvt as root, insert modules and dial as root, then go online su user with 
Opera, just in case Opera can be hijacked somehow to do something nasty on 
the computer running it.
</p>

<p>
9.02 has major security fixes but the two versions I downloaded require a 
later glibc, which (from Slackware) requires a later kernel than we have, 
which is not impossible.  Should I be concerned about the following:
</p>

<p>
the RSA signature checking problem found in openssl
</p>

<p>
a URL tag parsing heap overflow that could potentially execute code
</p>

<p>
My friends do not need the added features - Bittorrent support, Widgets, 
or Acid 2, or IMAP mailer code.  They mainly want to write webmail.
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas.adam22 at gmail.com]
</p>
</b><br />
<b>Mon, 29 Jan 2007 23:02:07 +0000</b>
</p>

<p>
On Mon, Jan 29, 2007 at 05:41:21PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; I have Running Linux ver 3 and some day will find time to read more of it.
&gt; There is a chapter on networking.
</pre>

<p>
Last I read of this, it just told you how to use the route command to
shunt traffic through another machine.  If you really want to learn
about networking there's a whole plethora of books dedicated to it.   I
didn't find that chapter particularly enlightening, and given your
somewhat dismissive approach to everything offered to you, I'm probably
not too far off being right, either.  
</p>


<pre>
&gt; &gt;&gt; Is P2P the same as pointopoint used by PLIP?
</pre>

<p>
No.  P2P is "Peer-To-Peer".  Note that PLIP is just one example of
pointopoint.
</p>


<pre>
&gt; Do I need to test firewalls when I don't have one?   I set one up once 
</pre>

<p>
Test them?  No.  Just assume they work.  <img src="../gx/smile.png" alt=":)">
</p>


<pre>
&gt; when using one computer as a gateway, following simple instructions.
&gt; Do I need a firewall if I am not running servers and use a modem?
</pre>

<p>
No, you don't.  But then some people like leaving their computers
exposed to <em>potential</em> threats.  Maybe you should do the same, and see
what happens.
</p>


<pre>
&gt; TCP Transmission Control Protocol send packets that are acknowledged
&gt; UDP User Datagram Protocol
&gt; ACK acknowledge
</pre>

<p>
Right... and?
</p>


<pre>
&gt; I found 30 pages online at www.yiluda.net/manual/linux/rute/node29.html, 
&gt; of which the first 5 are semiunderstandable without a dictionary.
</pre>

<p>
A dictionary wouldn't help you unless you first understand how they work
together.  Paradoxically though, you'd have to have a reasonable
assumption about the <strong>need</strong> for a firewall as well, something you seem
not to want to do.  I won't be repeating anything else people have saif
to you already, but most of your counter-questions are ridiculous; play
devil's advocate if you wish, but you won't learn a thing from it.
</p>


<pre>
&gt; ifconfig:  ifconfig was not compiled with interface status display support 
&gt; Part of busybox that I compiled.  I should compile it again with this 
&gt; support.  The older /bin/busybox ifconfig that I replaced gives ppp0 inet 
&gt; addr which looks like my IPLOCAL address.
</pre>

<p>
I'm well known for using and having antiquated hardware, but why are you
using busybox?  Surely you have a proper distribtion to hand where the
tools in it aren't squashed down so much as to provide very limited
functionality?
</p>


<pre>
&gt; How would someone install a trojanned copy of nmap when I never have any 
&gt; ports open to come through?  If I had a trojanned copy, why did I not 
&gt; find it with 'which nmap', which finds any executables on the path, when I 
&gt; renamed the downloaded nmap temporarily?
</pre>

<p>
There's many different ways -- running programs to exploit things like
buffer-overlows, etc.
</p>


<pre>
&gt; How can someone put files on my computer if I am not running a server and 
&gt; I don't even download emails to my own computer (I use pine at a shell 
&gt; account)?  I even delete Opera cache on exit and it is not on the path 
&gt; anyway.
</pre>

<p>
By causing arbitrary code execution through things like
buffer-overflows.
</p>

<p>
[...]
</p>

<p>
-- Thomas Adam
</p>

<pre>-- 
"Wanting to feel; to know what is real.  Living is a lie." -- Purpoise
Song, by The Monkees.
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Mon, 29 Jan 2007 21:17:17 -0500 (EST)</b>
</p>

<p>
On Mon, 29 Jan 2007, Thomas Adam wrote:
</p>


<pre>
&gt; On Mon, Jan 29, 2007 at 05:41:21PM -0500, Sindi Keesan wrote:
&gt;&gt; I have Running Linux ver 3 and some day will find time to read more of it.
&gt;&gt; There is a chapter on networking.
&gt;
&gt; Last I read of this, it just told you how to use the route command to
&gt; shunt traffic through another machine.  If you really want to learn
&gt; about networking there's a whole plethora of books dedicated to it.   I
&gt; didn't find that chapter particularly enlightening, and given your
&gt; somewhat dismissive approach to everything offered to you, I'm probably
&gt; not too far off being right, either.
</pre>

<p>
All I really want to do is help out a few friends by setting them up with 
small linuxes they can use for the internet and wordprocessing, not become 
a linux networking expert.  One of them wants to pick up his computer 
tomorrow, with software on it.
</p>

<p>
I don't have time to read books on the subject which would probably 
require reading other books first.  A basic idea of what is going on would 
be interesting.  I will look at the various intro to linux sites.
</p>


<pre>
&gt;
&gt;&gt; Do I need to test firewalls when I don't have one?   I set one up once
&gt;
&gt; Test them?  No.  Just assume they work.  <img src="../gx/smile.png" alt=":)">
&gt;
&gt;&gt; when using one computer as a gateway, following simple instructions.
&gt;&gt; Do I need a firewall if I am not running servers and use a modem?
&gt;
&gt; No, you don't.  But then some people like leaving their computers
&gt; exposed to <em>potential</em> threats.  Maybe you should do the same, and see
&gt; what happens.
</pre>

<p>
That would be interesting.  I could set up two minimal linuxes (maybe 
ramdisk versions) connected together, one with modem and firewall, and 
then repeat this without the firewall and see if anything changed (using 
chkrootkit?).  I will have more time in about 10 days for this.
</p>



<pre>
&gt;&gt; TCP Transmission Control Protocol send packets that are acknowledged
&gt;&gt; UDP User Datagram Protocol
&gt;&gt; ACK acknowledge
&gt;
&gt; Right... and?
</pre>

<p>
Just showing off my newfound knowledge of acronyms that I did not know 
yesterday.
</p>


<pre>
&gt;&gt; I found 30 pages online at www.yiluda.net/manual/linux/rute/node29.html,
&gt;&gt; of which the first 5 are semiunderstandable without a dictionary.
</pre>


<pre>
&gt; A dictionary wouldn't help you unless you first understand how they work
&gt; together.  Paradoxically though, you'd have to have a reasonable
&gt; assumption about the <strong>need</strong> for a firewall as well, something you seem
&gt; not to want to do.  I won't be repeating anything else people have saif
&gt; to you already, but most of your counter-questions are ridiculous; play
&gt; devil's advocate if you wish, but you won't learn a thing from it.
</pre>

<p>
We were told to use a firewall only if networking two computers together 
to use one as a gateway so we could go online with both.   I don't know 
what a firewall is but I followed instructions to set one up with 
ipchains (after learning to compile a kernel that could use it).  Do I 
need a firewall if I don't have a local network?
</p>

<p>
If my questions are ridiculous to you it is only because I really don't 
understand much of this.  All I was trying to do when I wrote to TAG was 
find a way for people to print from Opera and Abiword without having to 
learn to change permissions all over the place to run them as user, not to 
learn all about networking and firewalls and port scanners.  I can't reply 
to all these emails right away and still have time to learn all this at 
the same time and run a business too and get a friend's computer ready for 
tomorrow.  I will try to set him up to use opera as user and then do some 
more reading.
</p>


<pre>
&gt;&gt; ifconfig:  ifconfig was not compiled with interface status display support
&gt;&gt; Part of busybox that I compiled.  I should compile it again with this
&gt;&gt; support.  The older /bin/busybox ifconfig that I replaced gives ppp0 inet
&gt;&gt; addr which looks like my IPLOCAL address.
&gt;
&gt; I'm well known for using and having antiquated hardware, but why are you
&gt; using busybox?  Surely you have a proper distribtion to hand where the
&gt; tools in it aren't squashed down so much as to provide very limited
&gt; functionality?
</pre>

<p>
I have a distribution based on busybox, and if something in busybox is not 
adequate, for instance when compiling, I replace it.  The problem here is 
I replaced <em>busybox</em> with a newer version which I compiled myself, to get 
a lot of bug fixes and su and vi.  The original older busybox ifconfig was 
correctly configured.  I will fix this next time I compile busybox.  (I 
also left pdfwrite out of gs).
</p>


<pre>
&gt;&gt; How would someone install a trojanned copy of nmap when I never have any
&gt;&gt; ports open to come through?  If I had a trojanned copy, why did I not
&gt;&gt; find it with 'which nmap', which finds any executables on the path, when I
&gt;&gt; renamed the downloaded nmap temporarily?
&gt;
&gt; There's many different ways -- running programs to exploit things like
&gt; buffer-overlows, etc.
&gt;
&gt;&gt; How can someone put files on my computer if I am not running a server and
&gt;&gt; I don't even download emails to my own computer (I use pine at a shell
&gt;&gt; account)?  I even delete Opera cache on exit and it is not on the path
&gt;&gt; anyway.
&gt;
&gt; By causing arbitrary code execution through things like
&gt; buffer-overflows.
</pre>

<p>
Are you referring to buggy programs on my computer?  Can they only do this 
if I go online as root?
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Mon, 29 Jan 2007 18:39:50 -0800</b>
</p>

<p>
Quoting Sindi Keesan (keesan at grex.cyberspace.org):
</p>


<pre>
&gt; We were told to use a firewall only if networking two computers together 
&gt; to use one as a gateway so we could go online with both.
</pre>

<p>
There have been many flamewars over such topics, not to mention people
going around having trying to use "firewalls" (by which they mean
IP/port filters, as opposed to other meanings of that term) as a
cure-all talisman to ward off all possible badness, which of course
doesn't work -- so you will perhaps forgive Thomas and me for carefully
avoiding overbroad statements.  It really is true that the sort of
filters, if any, that suit your situation depend on your situation.
</p>


<pre>
&gt; If my questions are ridiculous to you it is only because I really don't 
&gt; understand much of this.
</pre>

<p>
Not ridiculous, but sometimes a <em>bit</em> scattershot.  Technical people tend to
learn over time that a sprinkling of apparently ill-aimed questions are
often a sign of someone who isn't <em>really</em> seeking the information
specified, but rather is just pumping out questions in semi-random
directions in an enegetic attempt to overcome lack of knowledge of the
basics.  When technical people spot that pattern, they often react by 
ceasing to minutely address the questions as posed, and instead urge the
questioner to master those basics first, so that subsequent questions 
can be more focussed, and use everyone's time better.
</p>


<pre>
&gt; All I was trying to do when I wrote to TAG was find a way for people
&gt; to print from Opera and Abiword without having to learn to change
&gt; permissions all over the place to run them as user, not to learn all
&gt; about networking and firewalls and port scanners.
</pre>

<p>
Unfortunately (speaking for myself, at least, possibly others), when
someone tells me "No, it really <em>is</em> OK for me to run routinely as root,
because my system's designed for it", my willingness to help,
particularly with security, goes way down.  This naturally is no
reflection on you personally.
</p>




<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Neil Youngman [ny at youngman.org.uk]
</p>
</b><br />
<b>Tue, 30 Jan 2007 11:15:48 +0000</b>
</p>

<p>
On or around Tuesday 30 January 2007 02:17, Sindi Keesan reorganised a bunch 
of electrons to form the message:
</p>

<pre>
&gt;
&gt; All I really want to do is help out a few friends by setting them up with
&gt; small linuxes they can use for the internet and wordprocessing, not become
&gt; a linux networking expert. 
</pre>

<p>
An admirable idea. There are a number of distributions designed for the sort 
of older machines you are using for this. Given what I've heard about 
BasicLinux, I can't help thinking that one of the others might be more 
suitable.
</p>

<p>
Even if a distribution designed to be run as root is not vulnerable to direct 
attack via the network, it allows many more opportunities for users to shoot 
themselves in the foot.
</p>

<p>
I appreciate that BasicLinux has the advantage of familiarity and it's not 
always easy to change, but I would suggest considering something else from 
<a href="http://lwn.net/Distributions/#smalldisk">http://lwn.net/Distributions/#smalldisk</a>, 
<a href="http://lwn.net/Distributions/#special">http://lwn.net/Distributions/#special</a> or <a href="http://lwn.net/Distributions/#india">http://lwn.net/Distributions/#india</a>
</p>

<p>
Popular small distributions include Damn Small linux and Puppy Linux. you 
would have to check their project sites to determine if they are suitable for 
your needs.
</p>

<p>
HTH
</p>

<p>
Neil Youngman
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Tue, 30 Jan 2007 10:39:00 -0500 (EST)</b>
</p>

<p>
On Tue, 30 Jan 2007, Neil Youngman wrote:
</p>


<pre>
&gt; On or around Tuesday 30 January 2007 02:17, Sindi Keesan reorganised a bunch
&gt; of electrons to form the message:
&gt;&gt;
&gt;&gt; All I really want to do is help out a few friends by setting them up with
&gt;&gt; small linuxes they can use for the internet and wordprocessing, not become
&gt;&gt; a linux networking expert.
&gt;
&gt; An admirable idea. There are a number of distributions designed for the sort
&gt; of older machines you are using for this. Given what I've heard about
&gt; BasicLinux, I can't help thinking that one of the others might be more
&gt; suitable.
&gt;
&gt; Even if a distribution designed to be run as root is not vulnerable to direct
&gt; attack via the network, it allows many more opportunities for users to shoot
&gt; themselves in the foot.
&gt;
&gt; I appreciate that BasicLinux has the advantage of familiarity and it's not
&gt; always easy to change, but I would suggest considering something else from
&gt; <a href="http://lwn.net/Distributions/#smalldisk">http://lwn.net/Distributions/#smalldisk</a>,
&gt; <a href="http://lwn.net/Distributions/#special">http://lwn.net/Distributions/#special</a> or <a href="http://lwn.net/Distributions/#india">http://lwn.net/Distributions/#india</a>
&gt;
&gt; Popular small distributions include Damn Small linux and Puppy Linux. you
&gt; would have to check their project sites to determine if they are suitable for
&gt; your needs.
</pre>

<p>
Puppy Linux is a Live CD.  I want ext2 linux, to which I can add programs.
</p>

<p>
DSL is Debian based and much larger than what I am using and would be 
slower to boot and require newer hardware.  I don't want to learn it.
It has a lot of stuff that people have not asked for, and not Opera which 
they have asked for (after using it in Windows).  If people later want to 
do more than browsing/email/wordprocessing they can get themselves a copy 
of DSL and try it.
</p>

<p>
I prefer to try to make what I have work.  I know how to use it and can 
support it.  Is there anything I would have to do other than get things 
working for 'user'?  If it is okay to dial as root then use a browser as 
user, I am almost set.
</p>

<p>
Thanks for your suggestions.  I will look at the URLs.
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Mon, 29 Jan 2007 16:23:33 -0800</b>
</p>

<p>
Quoting Sindi Keesan (keesan at grex.cyberspace.org):
</p>


<pre>
&gt; I am not a guy.
</pre>

<p>
OK, apologies about my limited knowledge of names; I keep trying to
learn them from additional countries, but have a great many I've not yet
studied -- and the English language is hopelessly ill-equipped for
dealing with non-specified gender.  (Finnish and Turkish are better.)
</p>

<p>
Of course, if I were wandering around Tirana, I'd learn some Albanian
names and conventions, quickly.  ;-&gt;
</p>

<p>
(FWIW, American informal English increasingly uses "guys" to refer to
both sexes, this being a tangle that cannot be undone in any clean
fashion.)
 
</p>

<pre>
&gt; Do I need to test firewalls when I don't have one?
</pre>

<p>
No.  You might be curious about the results, though.  I included that
third command because those are the three I always run -- and the third
one doesn't take significant time.
</p>


<pre>
&gt; Do I need a firewall if I am not running servers and use a modem?
</pre>

<p>
What security measures you take, generally, should be dictated by your
assessment of threats and your resulting security policy.  (The lack of
an explicit policy results in a default policy.)
</p>

<p>
A "firewall" script (set of IP/port blocking rules) is a device to
counter some particular anticipated threat.  It comes with disadvantages
in interference with open connectivity and system complexity that should
be obvious upon reflection.  Whether those disadvantages are warranted
depends on your local policy, and on the particulars of that script and
your situation.
</p>


<pre>
&gt; I found 30 pages online at
&gt; www.yiluda.net/manual/linux/rute/node29.html, of which the first 5 are
&gt; semiunderstandable without a dictionary.
</pre>

<p>
I like RUTE very much, and highly respect your enterprising spirit in
tackling it, but can't help thinking it probably exceeds the needs of
your current situation.
</p>


<pre>
&gt; ifconfig:  ifconfig was not compiled with interface status display
&gt; support Part of busybox that I compiled.  I should compile it again
&gt; with this support.  The older /bin/busybox ifconfig that I replaced
&gt; gives ppp0 inet addr which looks like my IPLOCAL address.
</pre>

<p>
Sounds right.
</p>


<pre>
&gt; &gt;I didn't tell you to run nmap.
&gt; 
&gt; Someone on the TAG list asked about chkrootkit and someone said to
&gt; scan my ports so I downloaded programs to do both, and neither of them
&gt; found any problems or potential problems.  I am at least learning a
&gt; lot.
</pre>

<p>
My apologies for my part in any confusion.  I hope you find the tips
about how to best use nmap useful -- in some future situation, if not
your present one.
</p>


<pre>
&gt; How would someone install a trojanned copy of nmap when I never have
&gt; any ports open to come through?
</pre>

<p>
One way (among many others) might be to somehow convince you to retrieve
and run a trojaned executable.   (If you tell me you won't do that,
that's interesting but it's just one example.)
</p>


<pre>
&gt; If I had a trojanned copy, why did I not find it with 'which nmap',
&gt; which finds any executables on the path, when I renamed the downloaded
&gt; nmap temporarily?
</pre>

<p>
Hyopthetically, an intruder might have replaced your downloaded nmap with 
a trojaned version, between the time you downloaded nmap and some time
you ran it.  That sabotage could be an automated process, left in
background to continue to hide the intruder from a suspicious admin.  
Alternatively, the intruder might have trojaned the console libraries,
such that nmap itself is OK, but the trojaned console libraries censor
its reports.  There are a myriad of other ways:  The point is that,
whenever you use the software of a suspect system to examine the system
itself, you are in some measure trusting software that you have some
reason to distrust.  That is why it is, generally speaking, smarter to
examine a host's network behaviour from a network-wise nearby node
rather than from the host itself.
</p>


<pre>
&gt; How can someone put files on my computer if I am not running a server
&gt; and I don't even download emails to my own computer (I use pine at a
&gt; shell account)?
</pre>

<p>
{sigh}
</p>

<p>
If indeed (almost) the only network access you make is outbound ssh or
telnet (via PPP or otherwise), and you don't run any network daemons
(except X11, which is reachable from localhost only), and the only
exception to that is a couple of Web browsers that you run "su - user",
and you never fetch and run executables, then it's indeed difficult to 
think offhand of a credible attack vector -- other than a kernel
exploit, which would have us all in trouble.
</p>

<p>
Because you are running a big heap of code as the root user, including
all of X11, you <em>are</em> setting up a situation where any flaw in that
stack that can be exploited will be fatal to security, as opposed to the
standard security model where the attacker cannot easily attack via
flaws in <em>pairs</em> of codebases for lack of a common set of access
permissions between them, and where the attacker must have the use of
both code flaws and paths to escalate privilege.  You model is thus what
we would call "brittle" in the sense that flaws can cause disaster
overall that normally would affect only a limited subsystem.
</p>

<p>
Please note that the "su - user" method you use to run Opera/lynx 
still means that the less-trusted browser process is resting on a
fundamental root-user parent process, which may be reachable by remote
attack in ways not possible if there is no underlying root process. 
</p>


<p>
Anyway, beyond that, I am not kidding:  I am not going to go out of my
way to help someone who insists on routinely using the root account --
and on running X11 as root -- in dealing with other security issues.
I've stated my reasons:  If you don't accept them, that's your
privilege, but helping other people by preference is mine.
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Mon, 29 Jan 2007 19:08:46 -0800</b>
</p>

<p>
----- Forwarded message from Sindi Keesan &lt;keesan at grex.cyberspace.org&gt; -----
</p>

<pre>
Date: Mon, 29 Jan 2007 21:49:11 -0500 (EST)
From: Sindi Keesan &lt;keesan@grex.cyberspace.org&gt;
To: TAG &lt;tag@lists.linuxgazette.net&gt;
To: Rick Moen &lt;rick at linuxmafia.com&gt;
Subject: Re: [TAG] Re: lpr works for user not root in Basiclinux 2.1
</pre>
On Mon, 29 Jan 2007, Rick Moen wrote:
</p>


<pre>
&gt;Quoting Sindi Keesan (keesan at grex.cyberspace.org):
&gt;
&gt;&gt;I am not a guy.
&gt;
&gt;OK, apologies about my limited knowledge of names; I keep trying to
&gt;learn them from additional countries, but have a great many I've not yet
&gt;studied -- and the English language is hopelessly ill-equipped for
&gt;dealing with non-specified gender.  (Finnish and Turkish are better.)
&gt;
&gt;Of course, if I were wandering around Tirana, I'd learn some Albanian
&gt;names and conventions, quickly.  ;-&gt;
</pre>

<p>
I have never been there, I only learned Albanian while living in Skopje 
for a couple of years.  I took to spelling my name this way while living 
in Belgrade so that it would be pronounced correctly.  Instead of Tsindoo.
And then discovered it has some meaning in some Indian language when a 
would-be chatter refused to stop chatting with me in (?) Punjabi.
</p>


<pre>
&gt;(FWIW, American informal English increasingly uses "guys" to refer to
&gt;both sexes, this being a tangle that cannot be undone in any clean
&gt;fashion.)
</pre>

<p>
Only in the plural, and not everywhere in the country.  Michigan uses 'you 
guys' like other places use 'you all' or 'you uns' or 'youse'.  One guy is 
only male.
</p>


<pre>
&gt;&gt;Do I need to test firewalls when I don't have one?
&gt;
&gt;No.  You might be curious about the results, though.  I included that
&gt;third command because those are the three I always run -- and the third
&gt;one doesn't take significant time.
&gt;
&gt;&gt;Do I need a firewall if I am not running servers and use a modem?
&gt;
&gt;What security measures you take, generally, should be dictated by your
&gt;assessment of threats and your resulting security policy.  (The lack of
&gt;an explicit policy results in a default policy.)
</pre>

<p>
I don't know enough to assess these things.  Yet.  So have been following 
the recommendations of others in our support group, which is not to run 
things like telnetd online.  And to go online with Opera as user because 
it might be buggy.
</p>

<p>
Is the threat that someone will get files onto my computer that will let 
them use it to send spam?  Or delete my files?  (I have lots more copies). 
Or steal my online banking info?  (I don't have any).  The 1991 security 
problems were often people stealing the hardware, according to a book I 
have on system administration.
</p>


<pre>
&gt;A "firewall" script (set of IP/port blocking rules) is a device to
&gt;counter some particular anticipated threat.  It comes with disadvantages
&gt;in interference with open connectivity and system complexity that should
&gt;be obvious upon reflection.  Whether those disadvantages are warranted
</pre>

<p>
Obvious only if I can make sense of it.  Which would require more reading.
</p>

<p>
I was told to use as firewall:
</p>

<pre>
ipchains -P forward DENY
ipchains -A forward -s 192.168.1.0/24 -j MASQ
</pre>
The two computers are in the same local network as 192.168.1.0 .
Is this specific to using the computer as a default gateway?
</p>


<pre>
&gt;depends on your local policy, and on the particulars of that script and
&gt;your situation.
&gt;
&gt;&gt;I found 30 pages online at
&gt;&gt;www.yiluda.net/manual/linux/rute/node29.html, of which the first 5 are
&gt;&gt;semiunderstandable without a dictionary.
&gt;
&gt;I like RUTE very much, and highly respect your enterprising spirit in
&gt;tackling it, but can't help thinking it probably exceeds the needs of
&gt;your current situation.
</pre>

<p>
Can you recommend a good online tutorial about networking and firewalls 
and security which is smaller?
</p>



<pre>
&gt;&gt;&gt;I didn't tell you to run nmap.
&gt;&gt;
&gt;&gt;Someone on the TAG list asked about chkrootkit and someone said to
&gt;&gt;scan my ports so I downloaded programs to do both, and neither of them
&gt;&gt;found any problems or potential problems.  I am at least learning a
&gt;&gt;lot.
&gt;
&gt;My apologies for my part in any confusion.  I hope you find the tips
&gt;about how to best use nmap useful -- in some future situation, if not
&gt;your present one.
</pre>

<p>
The more I learn the more confusion ;=)
</p>



<pre>
&gt;&gt;How would someone install a trojanned copy of nmap when I never have
&gt;&gt;any ports open to come through?
&gt;
&gt;One way (among many others) might be to somehow convince you to retrieve
&gt;and run a trojaned executable.   (If you tell me you won't do that,
&gt;that's interesting but it's just one example.)
</pre>

<p>
I did not compile nmap, the author of our distribution provided it.  I did 
compile chkrootkit from what looked like an official site.
</p>

<p>
I don't see how running as user would prevent the above anyway.
</p>


<pre>
&gt;&gt;If I had a trojanned copy, why did I not find it with 'which nmap',
&gt;&gt;which finds any executables on the path, when I renamed the downloaded
&gt;&gt;nmap temporarily?
&gt;
&gt;Hyopthetically, an intruder might have replaced your downloaded nmap with
&gt;a trojaned version, between the time you downloaded nmap and some time
&gt;you ran it.  That sabotage could be an automated process, left in
&gt;background to continue to hide the intruder from a suspicious admin.
&gt;Alternatively, the intruder might have trojaned the console libraries,
&gt;such that nmap itself is OK, but the trojaned console libraries censor
&gt;its reports.  There are a myriad of other ways:  The point is that,
&gt;whenever you use the software of a suspect system to examine the system
&gt;itself, you are in some measure trusting software that you have some
&gt;reason to distrust.  That is why it is, generally speaking, smarter to
&gt;examine a host's network behaviour from a network-wise nearby node
&gt;rather than from the host itself.
</pre>

<p>
Like running f-prot from write-protected floppy disks.
</p>


<pre>
&gt;&gt;How can someone put files on my computer if I am not running a server
&gt;&gt;and I don't even download emails to my own computer (I use pine at a
&gt;&gt;shell account)?
&gt;
&gt;{sigh}
&gt;
&gt;If indeed (almost) the only network access you make is outbound ssh or
&gt;telnet (via PPP or otherwise), and you don't run any network daemons
&gt;(except X11, which is reachable from localhost only), and the only
&gt;exception to that is a couple of Web browsers that you run "su - user",
&gt;and you never fetch and run executables, then it's indeed difficult to
&gt;think offhand of a credible attack vector -- other than a kernel
&gt;exploit, which would have us all in trouble.
</pre>

<p>
I have compiled a few executables which have not attacked me.  How would I 
know if source code was not to be trusted?
</p>

<p>
My friends will not even have a compiler.  So it appears they are safe, 
with su user opera.  (Links2 and links cannot be used that way - cannot 
exectue binary file - but I can login as user to use them).
</p>


<pre>
&gt;Because you are running a big heap of code as the root user, including
&gt;all of X11, you <em>are</em> setting up a situation where any flaw in that
&gt;stack that can be exploited will be fatal to security, as opposed to the
&gt;standard security model where the attacker cannot easily attack via
&gt;flaws in <em>pairs</em> of codebases for lack of a common set of access
&gt;permissions between them, and where the attacker must have the use of
&gt;both code flaws and paths to escalate privilege.  You model is thus what
&gt;we would call "brittle" in the sense that flaws can cause disaster
&gt;overall that normally would affect only a limited subsystem.
</pre>

<p>
Sounds like I have been lucky for four years.
</p>



<pre>
&gt;Please note that the "su - user" method you use to run Opera/lynx
&gt;still means that the less-trusted browser process is resting on a
&gt;fundamental root-user parent process, which may be reachable by remote
&gt;attack in ways not possible if there is no underlying root process.
&gt;Anyway, beyond that, I am not kidding:  I am not going to go out of my
&gt;way to help someone who insists on routinely using the root account --
&gt;and on running X11 as root -- in dealing with other security issues.
&gt;I've stated my reasons:  If you don't accept them, that's your
&gt;privilege, but helping other people by preference is mine.
</pre>

<p>
My list people told me a way to dump people into X when they start 
(inittab?) but I have no idea how I could log them in as user and then 
start X automatically.  I can have them dial from an rxvt as user - would 
that help?  And run opera as user.
</p>


<p>
Information overload for tonight.  Thanks again for the help.
</p>

<p>
Sindi Keesan
</p>

<p>
----- End forwarded message -----
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Mon, 29 Jan 2007 19:43:35 -0800</b>
</p>

<p>
Quoting Sindi Keesan (keesan at grex.cyberspace.org):
</p>


<pre>
&gt; &gt;(FWIW, American informal English increasingly uses "guys" to refer to
&gt; &gt;both sexes, this being a tangle that cannot be undone in any clean
&gt; &gt;fashion.)
&gt; 
&gt; Only in the plural, and not everywhere in the country.  Michigan uses 'you 
&gt; guys' like other places use 'you all' or 'you uns' or 'youse'.  One guy is 
&gt; only male.
</pre>

<p>
One guy whom you are familiar with.  It has been common to refer to an
unknown person as a "guy", while knowing that the implication of a
particular sex isn't quite right either, and knowing that English has,
in general, hopeless structural problems of the sort that are inevitable
when Latin and German collide and have a violent accident.
</p>

<p>
The lack of a proper second-person plural is of course another problem,
and "y'all" is frequently heard in the USA even outside the South, as it
may sound quaint and folksy, but at least gets you out of that
particular pickle.
</p>


<pre>
&gt; &gt;What security measures you take, generally, should be dictated by your
&gt; &gt;assessment of threats and your resulting security policy.  (The lack of
&gt; &gt;an explicit policy results in a default policy.)
&gt; 
&gt; I don't know enough to assess these things.  Yet.  
</pre>

<p>
Noted.  But you asked the question, and I gave a fair if somewhat pithy
answer.  I might have been willing to give a more-detailed answer, but
for my strong suspicion that most of your questions have been a bit
unfocussed.
</p>


<pre>
&gt; Is the threat that someone will get files onto my computer that will let 
&gt; them use it to send spam?  Or delete my files?  (I have lots more copies). 
</pre>

<p>
Quoting my old "Attacking Linux" article
(<a href="http://security.itworld.com/4352/LWD000829hacking/pfindex.html">http://security.itworld.com/4352/LWD000829hacking/pfindex.html</a>),
<pre>
  Some of those processes will be spy programs, running to capture login
  information entered by local users for remote systems elsewhere. Those
  will be logged and conveyed back to the attacker, giving him new
  targets. Some may be network sniffers, monitoring the traffic passing
  nearby, to or from other nearby machines, and likewise capturing private
  information for the bad guys. Those work by putting your network
  interface in promiscuous mode, in which the normal disregarding of other
  machines' network traffic gets disabled. Some may be clandestine network
  services, such as file-swapping, that are useful for the attacker and
  his friends. Most distressing of all, some may be carrying out attacks
  on other systems. The older variety of those involved flooding distant
  machines with either normal or deliberately malformed network traffic
  (ping, ping of death, smurf, SYN flooding, teardrop, land, bonk), as a
  denial of service (DoS) attack. Then starting last year, the
  more-organized DDoS tools (trinoo, Tribal Flood Network, stacheldraht,
  Trank, and so on) came to sudden public attention when they were used to
  overwhelm popular Internet sites. The third-party, subverted machines
  (zombies) used to carry out those attacks appear to have been university
  machines, favored for their lax security and high Internet bandwidth,
  but your Linux hosts could be the attackers' next tools.
 
  Even if your machines don't cause you that order of embarrassment, the
  other risks are equally grim: you can reveal confidential data with
  business and/or personal consequences, lose that data entirely, see it
  corrupted or sabotaged, be involved in wrongful or even criminal
  activity, lose access to your computing resources, and indirectly cause
  harm to your staff and business associates. Your Website can be defaced
  or modified, or visitors might be redirected by sabotaged company DNS
  servers to entirely different sites.
</pre>
(Please don't sit down and tell me that some or all of that doesn't
apply to your situation.  I really don't care -- no offence! -- and the 
answer is intended to be of general nature.)
</p>



<pre>
&gt; I was told to use as firewall:
&gt; 
&gt; ipchains -P forward DENY
&gt; ipchains -A forward -s 192.168.1.0/24 -j MASQ
</pre>

<p>
BTW, ipchains is old (though it still works, of course), having been
long ago replaced by iptables.
</p>

<p>
"ipchains -P forward DENY" is a blanket default-deny rule on
IP-forwarding only:  It does nothing about what sort of packets are
permitted in or out of the machine.  That rule then gets modified by the
command that follows.
</p>

<p>
"ipchains -A forward -s 192.168.1.0/24 -j MASQ" is the classic command
for enabling IP masquerading = network address translation, letting you 
have a private-IP-space 192.168.1.x network on your inside interface.  
It does no "firewalling" whatsoever.
</p>



<pre>
&gt; Can you recommend a good online tutorial about networking and firewalls 
&gt; and security which is smaller?
</pre>

<p>
Online and smaller?  I'm not sure.  TLDP's book-length "guides" might be 
good, but I haven't looked at them in a long time.
<a href="http://www.tldp.org/guides.html">http://www.tldp.org/guides.html</a>
</p>

<p>
If you're up for reading RUTE, good for you!  It's a very good book.  It
is also, of course, not primarily about security (if I recall correctly).
</p>


<pre>
&gt; &gt;One way (among many others) might be to somehow convince you to retrieve
&gt; &gt;and run a trojaned executable.   (If you tell me you won't do that,
&gt; &gt;that's interesting but it's just one example.)
&gt; 
&gt; I did not compile nmap, the author of our distribution provided it.  
</pre>

<p>
My point about local tools being perilous to rely on, <em>if</em> you have any 
reason to suspect security compromise, applies with or without local
compilation.
</p>


<pre>
&gt; I don't see how running as user would prevent the above anyway.
</pre>

<p>
I didn't say it would.
</p>

<p>
You were asking why one would nmap-scan one's host from a nearby machine
instead of scanning just localhost, which after all is simpler.  One of
several answers is the one I stated: that if you distrust local security
for some reason, then you logically need to distrust the local copy of
nmap, its console support libs, etc.
</p>


<pre>
&gt; I have compiled a few executables which have not attacked me.  How would I 
&gt; know if source code was not to be trusted?
</pre>

<p>
That is a very profound question, as it turns out.
</p>

<p>
People on Linux systems with package management tend to trust the code
(both source and binary) provided with and through their distributions
packages because of quality control by the package maintainers, attested
to by cryptographic signing on the packages.  Part of those package
maintainers' jobs is to verify that "upstream" source code they fetch
from the original developers and then package for their distros hasn't 
been tampered with, and is really from the upstream coders.
</p>

<p>
The upstream coders are, generally, motivated to cryptographically sign
their source code releases and make sure their signing keys are widely
known, so that forgeries would be easily detected.
</p>

<p>
Whenever you as an end-user take it upon yourself to fetch "upstream" 
source code (or upstream compile binaries, if any), you have implicitly
assumed that quality-control burden for yourself.
</p>

<p>
I have some more to say about that topic, here:
<a href="../../../118/weatherwax.html#1">http://linuxgazette.net/118/weatherwax.html#1</a>
</p>



<pre>
&gt; My friends will not even have a compiler.  So it appears they are safe, 
&gt; with su user opera.
</pre>

<p>
Safe against...?  Lack of a compile toolchain doesn't make one "safe".
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas.adam22 at gmail.com]
</p>
</b><br />
<b>Tue, 30 Jan 2007 07:00:09 +0000</b>
</p>

<p>
On Mon, Jan 29, 2007 at 07:08:46PM -0800, Rick Moen wrote:
</p>

<pre>
&gt;Quoting Sindi Keesan (keesan at grex.cyberspace.org):
&gt; My list people told me a way to dump people into X when they start 
&gt; (inittab?) but I have no idea how I could log them in as user and then 
&gt; start X automatically.  I can have them dial from an rxvt as user - would 
&gt; that help?  And run opera as user.
</pre>

<p>
Anyone that suggests you run X11 from inittab wants shooting -- that's a
nasty RedHat-ism which I am pleased to say went away some years ago.
The problem with running <strong>anything</strong> from inittab (X11 more so) is that
if X cannot start, inittab (well, init actually, but let's not split
hairs) attempts to continually launch it.  This is bad.
</p>

<p>
If you do some simple googling, there's many ways of automatically
logging into X and starting applications up.
</p>

<p>
-- Thomas Adam
</p>

<pre>-- 
"Wanting to feel; to know what is real.  Living is a lie." -- Purpoise
Song, by The Monkees.
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Tue, 30 Jan 2007 10:15:20 -0500 (EST)</b>
</p>

<p>
On Tue, 30 Jan 2007, Thomas Adam wrote:
</p>


<pre>
&gt; On Mon, Jan 29, 2007 at 07:08:46PM -0800, Rick Moen wrote:
&gt;&gt; Quoting Sindi Keesan (keesan at grex.cyberspace.org):
&gt;&gt; My list people told me a way to dump people into X when they start
&gt;&gt; (inittab?) but I have no idea how I could log them in as user and then
&gt;&gt; start X automatically.  I can have them dial from an rxvt as user - would
&gt;&gt; that help?  And run opera as user.
</pre>

<p>
Actually I have not yet managed to dial as user with pppd 
(/etc/ppp/options - No such file).  I also cannot use ssh as user despite 
having copied over everything from /root starting with . (including 
directories .ssh .links .opera and Mail) and chown user * or .* including 
subdirectories.  This at least fixed lynx and links and pmail to use my 
previous options.  I did this after noticing that only Abiword and Opera 
worked for user and they were both user users rather than root root.
</p>

<pre>
ssh:  Permission denied (publickey,password, 
keyboard-interactive,hostbased)
  
known_hosts and random_seed in .ssh for user are both user users now.
-rw-------.   My list will help with this.
</pre>
This sort of thing is why I was trying to print as root with lpr. I 
already changed various permissions (/dev/null, /dev/pty*, etc.) to get 
Xvesa, rxvt and Opera to work as user (with lots of help).
</p>

<p>
So I am currently dialed and sshed as root, as usual, not as user.
</p>


<pre>
&gt; Anyone that suggests you run X11 from inittab wants shooting -- that's a
&gt; nasty RedHat-ism which I am pleased to say went away some years ago.
&gt; The problem with running <strong>anything</strong> from inittab (X11 more so) is that
&gt; if X cannot start, inittab (well, init actually, but let's not split
&gt; hairs) attempts to continually launch it.  This is bad.
&gt;
&gt; If you do some simple googling, there's many ways of automatically
&gt; logging into X and starting applications up.
</pre>

<p>
Is it okay to use Xvesa and rxvt and dial as root and then go online as 
user?  If not, I have to fix the dial problem before worrying about how I 
go into X.
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Tue, 30 Jan 2007 00:06:45 -0500 (EST)</b>
</p>

<p>
On Mon, 29 Jan 2007, Rick Moen wrote:
</p>


<pre>
&gt; Quoting Sindi Keesan (keesan at grex.cyberspace.org):
&gt;
&gt;&gt;&gt; (FWIW, American informal English increasingly uses "guys" to refer to
&gt;&gt;&gt; both sexes, this being a tangle that cannot be undone in any clean
&gt;&gt;&gt; fashion.)
&gt;&gt;
&gt;&gt; Only in the plural, and not everywhere in the country.  Michigan uses 'you
&gt;&gt; guys' like other places use 'you all' or 'you uns' or 'youse'.  One guy is
&gt;&gt; only male.
&gt;
&gt; One guy whom you are familiar with.  It has been common to refer to an
&gt; unknown person as a "guy", while knowing that the implication of a
&gt; particular sex isn't quite right either, and knowing that English has,
&gt; in general, hopeless structural problems of the sort that are inevitable
&gt; when Latin and German collide and have a violent accident.
</pre>

<p>
Actually French was much more heavily involved than Latin, as were the 
Norse invaders.
</p>


<pre>
&gt;
&gt; The lack of a proper second-person plural is of course another problem,
&gt; and "y'all" is frequently heard in the USA even outside the South, as it
&gt; may sound quaint and folksy, but at least gets you out of that
&gt; particular pickle.
&gt;
&gt;&gt;&gt; What security measures you take, generally, should be dictated by your
&gt;&gt;&gt; assessment of threats and your resulting security policy.  (The lack of
&gt;&gt;&gt; an explicit policy results in a default policy.)
&gt;&gt;
&gt;&gt; I don't know enough to assess these things.  Yet.
&gt;
&gt; Noted.  But you asked the question, and I gave a fair if somewhat pithy
&gt; answer.  I might have been willing to give a more-detailed answer, but
&gt; for my strong suspicion that most of your questions have been a bit
&gt; unfocussed.
</pre>

<p>
I don't know enough to ask an intelligent question in this area.
</p>


<pre>
&gt;&gt; Is the threat that someone will get files onto my computer that will let
&gt;&gt; them use it to send spam?  Or delete my files?  (I have lots more copies).
&gt;
&gt; Quoting my old "Attacking Linux" article
&gt; (<a href="http://security.itworld.com/4352/LWD000829hacking/pfindex.html">http://security.itworld.com/4352/LWD000829hacking/pfindex.html</a>),
&gt;
&gt;  Some of those processes will be spy programs, running to capture login
&gt;  information entered by local users for remote systems elsewhere. Those
&gt;  will be logged and conveyed back to the attacker, giving him new
</pre>

<p>
What would the programs do with my shell account, which is run as user, 
send spam from it?
</p>


<pre>
&gt;  targets. Some may be network sniffers, monitoring the traffic passing
&gt;  nearby, to or from other nearby machines, and likewise capturing private
&gt;  information for the bad guys. Those work by putting your network
&gt;  interface in promiscuous mode, in which the normal disregarding of other
&gt;  machines' network traffic gets disabled. Some may be clandestine network
&gt;  services, such as file-swapping, that are useful for the attacker and
&gt;  his friends. Most distressing of all, some may be carrying out attacks
&gt;  on other systems. The older variety of those involved flooding distant
&gt;  machines with either normal or deliberately malformed network traffic
&gt;  (ping, ping of death, smurf, SYN flooding, teardrop, land, bonk), as a
&gt;  denial of service (DoS) attack. Then starting last year, the
</pre>

<p>
One of the browsers (Opera?) mentioned a DoS-related bug.
</p>


<pre>
&gt;  more-organized DDoS tools (trinoo, Tribal Flood Network, stacheldraht,
&gt;  Trank, and so on) came to sudden public attention when they were used to
&gt;  overwhelm popular Internet sites. The third-party, subverted machines
&gt;  (zombies) used to carry out those attacks appear to have been university
&gt;  machines, favored for their lax security and high Internet bandwidth,
&gt;  but your Linux hosts could be the attackers' next tools.
&gt;
&gt;  Even if your machines don't cause you that order of embarrassment, the
&gt;  other risks are equally grim: you can reveal confidential data with
&gt;  business and/or personal consequences, lose that data entirely, see it
&gt;  corrupted or sabotaged, be involved in wrongful or even criminal
&gt;  activity, lose access to your computing resources, and indirectly cause
&gt;  harm to your staff and business associates. Your Website can be defaced
&gt;  or modified, or visitors might be redirected by sabotaged company DNS
&gt;  servers to entirely different sites.
&gt;
&gt; (Please don't sit down and tell me that some or all of that doesn't
&gt; apply to your situation.  I really don't care -- no offence! -- and the
&gt; answer is intended to be of general nature.)
&gt;
&gt;
&gt;&gt; I was told to use as firewall:
&gt;&gt;
&gt;&gt; ipchains -P forward DENY
&gt;&gt; ipchains -A forward -s 192.168.1.0/24 -j MASQ
&gt;
&gt; BTW, ipchains is old (though it still works, of course), having been
&gt; long ago replaced by iptables.
</pre>

<p>
The kernel documentation said something about this but I had only 
instructions for ipchains since our usual kernel is 2.2 .  So I figured
out how to compile for it.  Someone kindly taught me how to compile 
kernels and eventually some of them were not broken.
</p>


<pre>
&gt; "ipchains -P forward DENY" is a blanket default-deny rule on
&gt; IP-forwarding only:  It does nothing about what sort of packets are
&gt; permitted in or out of the machine.  That rule then gets modified by the
&gt; command that follows.
</pre>

<p>
forwarding of packets from the internet via the dialed-in computer 
(gateway) to the other one, both on the same local network?
</p>


<pre>
&gt; "ipchains -A forward -s 192.168.1.0/24 -j MASQ" is the classic command
&gt; for enabling IP masquerading = network address translation, letting you
&gt; have a private-IP-space 192.168.1.x network on your inside interface.
&gt; It does no "firewalling" whatsoever.
</pre>

<p>
This will take some time to figure out.  I have set up a network of 
wireless router (into which I can plug ethernet cables) and laptop 
computer with aironet 340 pcmcia wireless card.  I could ping the router. 
Eventually the laptop (in whatever part of the apartment has the strongest 
signal) will pick up a free county wireless signal which I can then 
somehow pass along to two desktop computers plugged into the router.  I 
run udhcpc to get an IP address assigned to the laptop (and similarly for 
the desktops?) by the router.  Do I need a firewall like the above on the 
laptop computer?
</p>


<pre>
&gt;&gt; Can you recommend a good online tutorial about networking and firewalls
&gt;&gt; and security which is smaller?
&gt;
&gt; Online and smaller?  I'm not sure.  TLDP's book-length "guides" might be
&gt; good, but I haven't looked at them in a long time.
&gt; <a href="http://www.tldp.org/guides.html">http://www.tldp.org/guides.html</a>
</pre>

<p>
Someone else at our list recommended tldp.
</p>


<pre>
&gt; If you're up for reading RUTE, good for you!  It's a very good book.  It
&gt; is also, of course, not primarily about security (if I recall correctly).
</pre>

<p>
I only ran across it searching for a few terms you had mentioned.
</p>


<pre>
&gt;&gt;&gt; One way (among many others) might be to somehow convince you to retrieve
&gt;&gt;&gt; and run a trojaned executable.   (If you tell me you won't do that,
&gt;&gt;&gt; that's interesting but it's just one example.)
&gt;&gt;
&gt;&gt; I did not compile nmap, the author of our distribution provided it.
&gt;
&gt; My point about local tools being perilous to rely on, <em>if</em> you have any
&gt; reason to suspect security compromise, applies with or without local
&gt; compilation.
&gt;
&gt;&gt; I don't see how running as user would prevent the above anyway.
&gt;
&gt; I didn't say it would.
&gt;
&gt; You were asking why one would nmap-scan one's host from a nearby machine
&gt; instead of scanning just localhost, which after all is simpler.  One of
&gt; several answers is the one I stated: that if you distrust local security
&gt; for some reason, then you logically need to distrust the local copy of
&gt; nmap, its console support libs, etc.
</pre>

<p>
I have a little ramdisk version of our linux which is unchanging, and 
could add nmap to it and scan with something trusted.
</p>


<pre>
&gt;&gt; I have compiled a few executables which have not attacked me.  How would I
&gt;&gt; know if source code was not to be trusted?
&gt;
&gt; That is a very profound question, as it turns out.
&gt;
&gt; People on Linux systems with package management tend to trust the code
&gt; (both source and binary) provided with and through their distributions
&gt; packages because of quality control by the package maintainers, attested
&gt; to by cryptographic signing on the packages.  Part of those package
&gt; maintainers' jobs is to verify that "upstream" source code they fetch
&gt; from the original developers and then package for their distros hasn't
&gt; been tampered with, and is really from the upstream coders.
&gt;
&gt; The upstream coders are, generally, motivated to cryptographically sign
&gt; their source code releases and make sure their signing keys are widely
&gt; known, so that forgeries would be easily detected.
&gt;
&gt; Whenever you as an end-user take it upon yourself to fetch "upstream"
&gt; source code (or upstream compile binaries, if any), you have implicitly
&gt; assumed that quality-control burden for yourself.
&gt;
&gt; I have some more to say about that topic, here:
&gt; <a href="../../../118/weatherwax.html#1">http://linuxgazette.net/118/weatherwax.html#1</a>
&gt;
&gt;
</pre>

<p>
Is sourceforge considered safe?
</p>



<pre>
&gt;&gt; My friends will not even have a compiler.  So it appears they are safe,
&gt;&gt; with su user opera.
&gt;
&gt; Safe against...?  Lack of a compile toolchain doesn't make one "safe".
</pre>

<p>
They are not going to be installing anything, much less compiling anything 
from unsafe source code.  Just running one or two programs.  Besides 
running Opera (and maybe dialing and/or loading Xvesa and rxvt) as user 
should I take any other precautions on their computers?
</p>

<p>
We just replaced the dead power supply, floppy drive (had to remodel 
another to fit) and 20GB hard drive (with a 540MB) in a friend's 
never-used 900MHz eMachine.  128MB RAM.  Much faster than what we usually 
put linux on.  He wants part of it to be Windows (for familiarity) but we 
can add up to 200MB of linux on for browsing.  So I can try to include any 
security features you want to recommend, since the basic software would be 
under 50MB.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Sat, 24 Feb 2007 20:49:42 -0500</b>
</p>

<p>
On Tue, Feb 20, 2007 at 10:06:26PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; On Mon, 29 Jan 2007, Rick Moen wrote:
&gt; &gt;&gt; Besides  running Opera (and maybe dialing and/or loading Xvesa and
&gt; &gt;&gt; rxvt) as user should I take any other precautions on their computers?
&gt; &gt;
&gt; &gt; I don't know how many times I'm willing to say "Your design is
&gt; &gt; fundamentally bad, if only because it uses root logins by default."
&gt; &gt; This is probably the last time, as obviously I'm wasting my time.
&gt; &gt; I stated, for that reason, that I was uninterested in helping users
&gt; &gt; unwilling to do that basic step correctly -- and I meant what I said.
&gt; 
&gt; 
&gt; We had a long discussion about why it is bad to go online as root, which 
&gt; is how Basiclinux is set up to operate.
&gt; 
&gt; My current compromise is to:
&gt; 
&gt; 1.  Dial as root (because dialing as user would give the user access to 
&gt; the login name and password, which would then let anyone with access to 
&gt; the user account know these, and besides if I try to dial as user pppd 
&gt; complains about not having /etc/ppp/options, which root does not need).
</pre>

<p>
Just to correct a misconception on your part: the information in
/etc/ppp/*-secrets does not have to be readable by the user; this is why
'/usr/sbin/pppd' is set SUID 0. In fact, that's the default
configuration on every Linux system I've seen, including the one I've
just set up on my new laptop:
</p>

<p>
<pre class="code">
ben at Tyr:~$ ls -l /usr/sbin/pppd /etc/ppp/*secrets
-rw------- 1 root root     80 2006-05-30 20:58 /etc/ppp/chap-secrets
-rw------- 1 root root   1628 2006-05-30 20:58 /etc/ppp/pap-secrets
-rwsr-xr-- 1 root dip  306720 2006-07-05 06:22 /usr/sbin/pppd
</pre>
The above means that any user who is part of group 'dip' can execute
'pppd' - and since 'pppd' runs as root, it can read the files that
contain the name and the password.
</p>

<p>
In other words, it appears as though you're taking a mechanism that
works just fine and changing it so that it will do the same thing as
it's doing now. I suggest that understanding the current mechanism would
serve you better than trying to construct something new from the ground
up - especially since it's not new.
</p>


<pre>
&gt; 3.  Put into /home/user/profile the line startx (rather than editing 
&gt; inittab to make vt1 run X, which does not work any more anyway once you 
&gt; add a user account).
</pre>

<p>
This means, of course, that you'll be trying to start X every time you
log in. Perhaps making it conditional would work better.
 
</p>

<pre>
&gt; Permission denied (publickey, password, keyboard-interactive).
&gt; 
&gt; If I login user:
&gt; 
&gt; ssh_askpass:  exec (/opt/diet/libexec/ssh_askpass):  No such file or 
&gt; directory.
&gt; Write failed:  broken pipe
&gt; 
&gt; (I don't even have an /opt).
</pre>

<p>
In that case, either recompiling 'ssh' to look for 'ssh_askpass' in a
different place, or creating the above path and a link to the
actual location of 'ssh_askpass' should help.
 
</p>

<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Mon, 29 Jan 2007 22:06:41 -0800</b>
</p>

<p>
Quoting Sindi Keesan (keesan at grex.cyberspace.org):
</p>


<pre>
&gt; Actually French was much more heavily involved than Latin, as were the 
&gt; Norse invaders.
</pre>

<p>
I'm quite minutely familiar with that history, Sindi, for multiple
reasons including my principal ancestors having been the main threat to
civilisation at that time (Vikings) -- and, as I hoped would be apparent,
was speaking metaphorically, i.e., of the collision between the language
families involved.
</p>


<pre>
&gt; What would the programs do with my shell account, which is run as user, 
&gt; send spam from it?
</pre>

<p>
Let me turn that around and suggest that <em>you</em> think through the
possiblities.  You have everything you need to do so. 
</p>


<pre>
&gt; forwarding of packets from the internet via the dialed-in computer 
&gt; (gateway) to the other one, both on the same local network?
</pre>

<p>
Sorry, I'm about done with the idle questions for which you can
determine the answers from standard resources.  In addition to manpages
(which are often dauntingly terse, by design), try TLDP's HOWTOs, such
as this one:
</p>

<p>
<a href="http://tldp.org/HOWTO/IPCHAINS-HOWTO.html">http://tldp.org/HOWTO/IPCHAINS-HOWTO.html</a>
</p>

<p>
The Answer Gang is quite tolerant generally about questions, but at a
certain point we expect the querent to engage with the subject matter.
A check of my sent mail reveals that you've been exchanging mail with
tag since at least 2003.  It's time for you to resolve some basic
informational questions on your own, in my view.
</p>


<pre>
&gt; Do I need a firewall like the above on the laptop computer?
</pre>

<p>
Please re-read my earlier mails, on how you determine what security
measures you "need".
</p>



<pre>
&gt; Is sourceforge considered safe?
</pre>

<p>
Well, all of VA Linux Systems, Inc.'s corporate network was
security-compromised in 2001 because of a sysadmin incautiously visiting
shells.sourceforge.net (which was root-compromised at the time) and then
sshing or scping back into the corporate network.  At the same time,
almost all development code being handled via shells.sourceforge.net 
and hosted on SourceForge.net proved at the time to be verifiably
uncorrupted because the developers had cryptographically signed their
work.
</p>

<p>
All of the machines withing VA Linux Systems were powered down and their
ethernet ports disabled, after which every last one of them had to be
wiped and reinstalled, with any restored non-executable, non-conffile
data files needing to be carefully vetted.
</p>

<p>
I would not really call that "safe", personally.
</p>




<pre>
&gt; Besides  running Opera (and maybe dialing and/or loading Xvesa and
&gt; rxvt) as user should I take any other precautions on their computers?
</pre>

<p>
I don't know how many times I'm willing to say "Your design is
fundamentally bad, if only because it uses root logins by default."
This is probably the last time, as obviously I'm wasting my time.
I stated, for that reason, that I was uninterested in helping users
unwilling to do that basic step correctly -- and I meant what I said.
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Tue, 30 Jan 2007 10:44:36 -0500 (EST)</b>
</p>

<pre>
&gt;&gt; What would the programs do with my shell account, which is run as user,
&gt;&gt; send spam from it?
&gt;
&gt; Let me turn that around and suggest that <em>you</em> think through the
&gt; possiblities.  You have everything you need to do so.
&gt;
&gt;&gt; forwarding of packets from the internet via the dialed-in computer
&gt;&gt; (gateway) to the other one, both on the same local network?
&gt;
&gt; Sorry, I'm about done with the idle questions for which you can
&gt; determine the answers from standard resources.  In addition to manpages
&gt; (which are often dauntingly terse, by design), try TLDP's HOWTOs, such
&gt; as this one:
&gt;
&gt; <a href="http://tldp.org/HOWTO/IPCHAINS-HOWTO.html">http://tldp.org/HOWTO/IPCHAINS-HOWTO.html</a>
</pre>

<p>
Thanks.  I have read other HOWTOs (ethernet, wireless).
</p>


<pre>
&gt; The Answer Gang is quite tolerant generally about questions, but at a
&gt; certain point we expect the querent to engage with the subject matter.
&gt; A check of my sent mail reveals that you've been exchanging mail with
&gt; tag since at least 2003.  It's time for you to resolve some basic
&gt; informational questions on your own, in my view.
</pre>

<p>
Okay, I will take some time off exchanging emails to do some reading.
I have not had time recently to do both and also get any work done.
</p>



<pre>
&gt;&gt; Besides  running Opera (and maybe dialing and/or loading Xvesa and
&gt;&gt; rxvt) as user should I take any other precautions on their computers?
&gt;
&gt; I don't know how many times I'm willing to say "Your design is
&gt; fundamentally bad, if only because it uses root logins by default."
&gt; This is probably the last time, as obviously I'm wasting my time.
&gt; I stated, for that reason, that I was uninterested in helping users
&gt; unwilling to do that basic step correctly -- and I meant what I said.
</pre>

<p>
Okay, I will ask for help from my distribution's mailing list members.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Tue, 20 Feb 2007 22:06:26 -0500 (EST)</b>
</p>

<p>
On Mon, 29 Jan 2007, Rick Moen wrote:
</p>

<pre>
&gt;&gt; Besides  running Opera (and maybe dialing and/or loading Xvesa and
&gt;&gt; rxvt) as user should I take any other precautions on their computers?
&gt;
&gt; I don't know how many times I'm willing to say "Your design is
&gt; fundamentally bad, if only because it uses root logins by default."
&gt; This is probably the last time, as obviously I'm wasting my time.
&gt; I stated, for that reason, that I was uninterested in helping users
&gt; unwilling to do that basic step correctly -- and I meant what I said.
</pre>


<p>
We had a long discussion about why it is bad to go online as root, which 
is how Basiclinux is set up to operate.
</p>

<p>
My current compromise is to:
</p>

<p>
1.  Dial as root (because dialing as user would give the user access to 
the login name and password, which would then let anyone with access to 
the user account know these, and besides if I try to dial as user pppd 
complains about not having /etc/ppp/options, which root does not need).
</p>

<p>
2.  Copy over all the files from /root to /home/user with cp -a * and also 
cp -a .*, except that Opera has subdirectories so just start over again 
setting parameters for user.  Also chown user * and chown user .*  and 
make /dev/null writable by user.
</p>

<p>
3.  Put into /home/user/profile the line startx (rather than editing 
inittab to make vt1 run X, which does not work any more anyway once you 
add a user account).
</p>

<p>
4.  Login user, which starts X (and you can exit X if desired).
Or su user and don't start X.
</p>

<p>
5.  Run Opera or other programs from the wm menu as user (having made them 
all executable by user or chmod +s).
</p>

<p>
ssh still won't work for user:
</p>

<p>
If I su user:
</p>

<p>
Permission denied (publickey, password, keyboard-interactive).
</p>

<p>
If I login user:
<pre>
ssh_askpass:  exec (/opt/diet/libexec/ssh_askpass):  No such file or directory.
Write failed:  broken pipe
</pre>
(I don't even have an /opt).
</p>

<p>
I will solve the problem of files needed by user but not root for ssh 
eventually.  The paths are different for user and root (user has no /sbin 
or /usr/sbin).  So pppd is not on the path for user (/usr/sbin) Probably 
because user is not supposed to dial.  But ssh is on the path.  I will try 
to find instructions for our ssh.  I may need /home/user/.ssh/config or 
/etc/ssh/ssh_config
</p>

<p>
I have set up a computer for a friend to use without ssh, as above.
</p>

<p>
Thanks to all of you for the help.
</p>

<p>
I ran across an article by Rick on using multiple monitors with X.
TAG once helped me use two monitors without X (MGA and VGA cards).
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Thu, 1 Mar 2007 12:59:02 -0500 (EST)</b>
</p>

<p>
On Wed, 28 Feb 2007, Ben Okopnik wrote:
</p>


<pre>
&gt; On Wed, Feb 28, 2007 at 06:39:34PM -0500, Sindi Keesan wrote:
&gt;&gt;
&gt;&gt; My remaining problem is that ssh is working on one computer (with a
&gt;&gt; standard hardware modem) but not on the two with internal lucent modems
&gt;&gt; (where pppd for some reason is accessing ttyS1 and also ttyLT0).
&gt;
&gt; SSH is an application; it doesn't (can't) care about the kind of
&gt; hardware you use for networking.
</pre>

<p>
It is not working on another computer with hardware modem.
</p>


<pre>
&gt;&gt; Host key verification failed if I ssh without the login.
&gt;
&gt; Quick guide to SSH "key auth" configuration, assuming "host1" as your
&gt; computer, "host2" as the remote machine, and "keesan" as the name of the
&gt; user on both hosts:
&gt;
&gt; 1) Create the public/private keypair on host1 by running "ssh-keygen -t dsa".
</pre>

<p>
I compiled a putty version puttygen and will try it later.  It is on a 
computer at another location. Root does not seem to use this method.
</p>


<pre>
&gt; 2) Copy the <strong>public</strong> key (the contents of /home/keesan/.ssh/id_dsa.pub)
&gt; from host1 into /home/keesan/.ssh/authorized_keys on host2.
</pre>

<p>
Will try this later.  Maybe there is some easier method.
Below are the log files.
</p>

<p>
I managed to copy the verbose output to a file.  I don't have gpm 
installed here.  splitvt says it needs VT100 (when run as user) and 
screen complained about no PTTYs (which I think is related to the rxvt 
problem).
</p>

<p>
What I did was make two xterms (as user) and then edit my alias for using 
Xvesa to add -2button (rather than using the standard X server, which says 
not to run it as SUID, whereas Xvesa says to run it SUID), and use the 
right button to copy and both buttons to paste.  I normally use X only for 
Opera and xpdf.
</p>

<p>
I uploaded ssh.log (to my shell account at the bbs where I am getting TAG 
mail) via kermit because various permissions are broken at the bbs I am 
using for mail since the volunteer staff did an emergency disk removal 
(ftp appears to be dead even for root, which could be why psftp won't 
work for user today).  Here it is for 'user':
</p>


<p>
ssh keesan at xxxx.org -v produces:
</p>

<p>
<pre class="code">
OpenSSH_3.5p1, SSH protocols 1.5/2.0, OpenSSL 0x0090607f
debug1: Rhosts Authentication disabled, originating port will not be
trusted.
debug1: ssh_connect: needpriv 0
ssh: ssh: unknown host
</pre>
Why it is an unknown host for user but not for root?
</p>

<p>
ssh www.xxxx.org produces:
</p>

<p>
<pre class="code">
OpenSSH_3.5p1, SSH protocols 1.5/2.0, OpenSSL 0x0090607f
debug1: Rhosts Authentication disabled, originating port will not be trusted.
debug1: ssh_connect: needpriv 0
debug1: Connecting to www.xxxx.org [216.86.77.194] port 22.
debug1: Connection established.
debug1: identity file /home/user/.ssh/identity type -1
debug1: identity file /home/user/.ssh/id_rsa type -1
debug1: identity file /home/user/.ssh/id_dsa type -1
debug1: Remote protocol version 1.99, remote software version OpenSSH_4.2
debug1: match: OpenSSH_4.2 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_3.5p1
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server-&gt;client aes128-cbc hmac-md5 none
debug1: kex: client-&gt;server aes128-cbc hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: dh_gen_key: priv key bits set: 124/256
debug1: bits set: 1030/2048
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
ssh_askpass: exec(/opt/diet/libexec/ssh-askpass): No such file or directory
debug1: Calling cleanup 0x805deb0(0x0)
Host key verification failed.
debug1: Calling cleanup 0x805deb0(0x0)
</pre>
ssh as root works without ssh-askpass, and as user on one computer.
</p>

<p>
My neighbor's Fedora installation, when I typed set from an xterm (we were
looking for the path when his realplayer.bin file would not run, because 
it was in /root/Desktop), listed the location of ssh-askpass, which I do 
not have.  Root on my system can ssh without it. The above looks like a 
default for some other linux.  Does ssh-askpass contain the password?
I enter it manually.  I have several logins and paswords.
</p>


<pre>
&gt; 3) Execute "ssh keesan at host2" on host1 to log into host2.
&gt;
&gt; If you suspect that you messed up anywhere along the way, wipe out all
&gt; the files in ~/.ssh on both machines and restart from scratch.
</pre>

<p>
I have done that before without it helping, but not with the above method.
</p>


<p>
......
</p>

<pre>
&gt;
&gt;&gt; ssh -v keesan at xxxx.org &gt; ssh.log saves a zero-length file.
&gt;
&gt; Yep. Try "ssh -v keesan at xxx 2&gt; ssh.log" instead (the error messages
&gt; are printed to STDERR, a.k.a. file descriptor 2.)
</pre>

<p>
I should read your whole mail before replying.  At least I got the X mouse 
copying and found some other problems.
</p>

<p>
Here is the output for ssh -v keesan at xxxx.org as root.
</p>

<p>
<pre class="code">
OpenSSH_3.5p1, SSH protocols 1.5/2.0, OpenSSL 0x0090607f
debug1: Rhosts Authentication disabled, originating port will not be trusted.
debug1: ssh_connect: needpriv 0
debug1: Connecting to xxxx.org [216.86.77.194] port 22.
debug1: Connection established.
debug1: identity file /root/.ssh/identity type -1
debug1: identity file /root/.ssh/id_rsa type -1
debug1: identity file /root/.ssh/id_dsa type -1
debug1: Remote protocol version 1.99, remote software version OpenSSH_4.2
debug1: match: OpenSSH_4.2 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_3.5p1
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server-&gt;client aes128-cbc hmac-md5 none
debug1: kex: client-&gt;server aes128-cbc hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: dh_gen_key: priv key bits set: 130/256
debug1: bits set: 1020/2048
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host 'xxxx.org' is known and matches the RSA host key.
debug1: Found key in /root/.ssh/known_hosts:6
debug1: bits set: 1037/2048
debug1: ssh_rsa_verify: signature correct
debug1: kex_derive_keys
debug1: newkeys: mode 1
debug1: SSH2_MSG_NEWKEYS sent
debug1: waiting for SSH2_MSG_NEWKEYS
debug1: newkeys: mode 0
debug1: SSH2_MSG_NEWKEYS received
debug1: done: ssh_kex2.
debug1: send SSH2_MSG_SERVICE_REQUEST
debug1: service_accept: ssh-userauth
debug1: got SSH2_MSG_SERVICE_ACCEPT
debug1: authentications that can continue: publickey,password,keyboard-interactive
debug1: next auth method to try is publickey
debug1: try privkey: /root/.ssh/identity
debug1: try privkey: /root/.ssh/id_rsa
debug1: try privkey: /root/.ssh/id_dsa
debug1: next auth method to try is keyboard-interactive
debug1: authentications that can continue: publickey,password,keyboard-interactive
debug1: next auth method to try is password
debug1: ssh-userauth2 successful: method password
debug1: fd 7 setting O_NONBLOCK
debug1: channel 0: new [client-session]
debug1: send channel open 0
debug1: Entering interactive session.
</pre>
(and much more)
</p>


<p>
Root connects, without using id_dsa.  It asks me for my password and I 
give it and connect.  It does not ask user for password, on this computer. 
It does on one other computer.  Maybe I got permissions correct on some 
file there?.
</p>


<pre>
&gt;&gt; I am happy dialing as user and ssh'ing as root, and my friends are
&gt;&gt; unlikely to ssh at all, but I would like to understand what is going on
&gt;&gt; with ssh.  This continues to be educational.
&gt;
&gt; As Kapil pointed out, if you <em>really</em> want to know what's going on, use
&gt; a non-broken distro and run 'strace'. You'll see all the system calls,
&gt; failed file requests, etc.
</pre>

<p>
I used strace when realplayer would not install on most of my computers 
but could not figure out the output.
</p>

<p>
I have a shell account at the Slackware 10.2 computer of one of our list 
members (also a TAG member).  I will try ssh there and look at the verbose 
output later.  I suspect I missed changing some permissions on three 
computers.
</p>

<p>
I looked at my neighbor's Fedora installation last night.  It would not 
play MP3s from an ipod and wanted Realplayer, which he had two copies of 
on his desktop, neither installed.  I showed him how to find their 
locations (no 'locatedb' but he had 'find' and we also could click on 
Properties) and run them when not on the path with './' and it wanted a 
library he did not have.  He did not know if he has mpg123.  He has been 
using linux much longer than me.  He spent 1/2 hour updating a bunch of 
programs online, most of which he has never used.  He rebooted several 
times at a few minutes per boot, loading things he did not know if he used 
such as crontab.  I would rather start small and add things I need.
</p>

<p>
Thanks for all the help.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Thu, 1 Mar 2007 21:13:17 -0500 (EST)</b>
</p>

<p>
On Thu, 1 Mar 2007, Ben Okopnik wrote:
</p>

<pre>
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; My remaining problem is that ssh is working on one computer
</pre>

<p>
but was not on three others.
</p>


<pre>
&gt;It was a permissions problem.
</pre>
rxvt needed ttyp* and ptyp*.
ssh needed tty.
</p>

<p>
I made all the tty's rw for other, root tty.  Is this okay?
</p>


<pre>
&gt; The 'root' account is <strong>made</strong> to operate with literally no security
&gt; restrictions. Have you not heard what all of us here have been telling
&gt; you? This is precisely why it's so dangerous.
</pre>

<p>
Root was ssh'ing with known_hosts and password.
</p>


<pre>
&gt; Since I have no idea what the configuration for the other user is, I
&gt; can't tell you why it works: you've only shown me these two log reports.
</pre>

<p>
Wrong permissions for accessing tty.
Do you want to explain what ssh does with tty?
</p>


<pre>
&gt;
&gt;&gt; My neighbor's Fedora installation, when I typed set from an xterm (we were
&gt;&gt; looking for the path when his realplayer.bin file would not run, because
&gt;&gt; it was in /root/Desktop), listed the location of ssh-askpass, which I do
&gt;&gt; not have.  Root on my system can ssh without it. The above looks like a
&gt;&gt; default for some other linux.  Does ssh-askpass contain the password?
</pre>

<p>
Not needed here once I got permissions correct.
</p>


<pre>
&gt;
</pre>

<p>
I will study your explanation of 'how things work'.
</p>


<pre>
&gt;&gt; Here is the output for ssh -v keesan at xxxx.org as root.
&gt;&gt;
&gt;&gt; debug1: identity file /root/.ssh/identity type -1
&gt;&gt; debug1: identity file /root/.ssh/id_rsa type -1
&gt;&gt; debug1: identity file /root/.ssh/id_dsa type -1
&gt;
&gt; This would be part of the problem. It says that it's not finding any of
&gt; the above private keys in /root/.ssh - so, no key-based authentication
&gt; for you!
</pre>

<p>
Not needed, uses interactive keyboard password entry.
</p>


<pre>
&gt;
&gt;&gt; debug1: Host 'xxxx.org' is known and matches the RSA host key.
&gt;&gt; debug1: Found key in /root/.ssh/known_hosts:6
&gt;&gt; debug1: bits set: 1037/2048
&gt;&gt; debug1: ssh_rsa_verify: signature correct
&gt;
&gt; This <em>identifies</em> the remote host as a known one, but there's still no
&gt; authentication.
</pre>

<p>
I also had to get the owner and group correct for 
/home/user/.ssh/known-hosts (after copying from /root/.ssh).
The computers set different bits, probably each time I connect.
</p>


<pre>
&gt;
&gt;&gt; debug1: authentications that can continue:
&gt;&gt; publickey,password,keyboard-interactive
&gt;&gt; debug1: next auth method to try is publickey
&gt;
&gt; First thing it'll try is the 'key_auth' method...
&gt;
&gt;&gt; debug1: try privkey: /root/.ssh/identity
&gt;&gt; debug1: try privkey: /root/.ssh/id_rsa
&gt;&gt; debug1: try privkey: /root/.ssh/id_dsa
&gt;
&gt; ...which failed, since the private key files don't exist.
</pre>

<p>
But I could generate them with puttygen if needed.
</p>


<pre>
&gt;&gt; debug1: next auth method to try is keyboard-interactive
&gt;&gt; debug1: authentications that can continue:
&gt;&gt; publickey,password,keyboard-interactive
&gt;&gt; debug1: next auth method to try is password
&gt;&gt; debug1: ssh-userauth2 successful: method password
&gt;
&gt; And here is the auth method that succeeds: kb-interactive (i.e., you
&gt; typed in the password) and system password auth based on that.
</pre>

<p>
It required user access to tty to do that.
</p>



<pre>
&gt;&gt; debug1: fd 7 setting O_NONBLOCK
&gt;&gt; debug1: channel 0: new [client-session]
&gt;&gt; debug1: send channel open 0
&gt;&gt; debug1: Entering interactive session.
&gt;&gt; (and much more)
&gt;&gt;
&gt;&gt; Root connects, without using id_dsa.  It asks me for my password and I
&gt;&gt; give it and connect.  It does not ask user for password, on this computer.
&gt;&gt; It does on one other computer.  Maybe I got permissions correct on some
&gt;&gt; file there?.
&gt;
&gt; It's not about permissions. It's about missing necessary parts of the
&gt; package.
</pre>

<p>
It was wrong permissions in this case.   The keyboard-interactive part 
works now for 'user'.  The error message was about permission.
</p>


<pre>
&gt;&gt; I used strace when realplayer would not install on most of my computers
&gt;&gt; but could not figure out the output.
&gt;
&gt; Hint: a non-broken distro will include 'man strace'.
</pre>
I don't understand the vocab and syntax of most man pages.  My list 
members suggested it but nobody figured out what went wrong.  Again,
something worked on only one computer. Mplayer is better anyway.
</p>


<pre>
&gt;
&gt; The fact that your neighbor doesn't know anything about Linux - and
&gt; having multiple copies of uninstalled binaries sitting on his "desktop",
&gt; as well as not knowing how to tell if a program is installed argues for
&gt; a deep level of ignorance - implies absolutely nothing about small or
&gt; large distros.
&gt;
&gt; To continue the car analogy, what you're doing is equivalent to grabbing
&gt; a random hunk of metal out of a junkyard full of old trucks, trying to
&gt; fit it to a stripped race-car frame, and trying to see if you can run
&gt; the resulting gadget at a hundred miles an hour - all before installing
&gt; the brakes, and without any knowledge of mechanics. What all of us have
&gt; been telling you to do is to use an <strong>existing</strong> car, and carefully remove
&gt; the parts that you decide you don't need (at least the brakes are
&gt; guaranteed to be there, and you'll <strong>know</strong> that you removed them if you
&gt; decide to do so.)
&gt;
</pre>

<p>
I don't drive, I bike ;=)  It gets me places at the speed I want, seeing 
much more along the way and meeting nice people, and without wasting 
resources. Our bikes are put together out of parts from abandoned ones. 
We know how they work and how to maintain them.
</p>


<p>
I would have no idea what parts could be safely removed off anything as 
large and unwieldy as a car.  I know what most of the bike parts do.  We 
might spend more time working on our bikes than the average car owner does 
on a car, but we enjoy it.  And we don't spend time making money to buy 
the car, insure, or feed it.  Bikes start instantly without warmup and 
work in all temperatures. They exercise body and mind.  (I do avoid ice).
</p>

<p>
The author of our distribution also bikes and does not drive.  It attracts 
the do-it-yourselfers.
</p>

<p>
I think with your help I either have everything working for user, or have 
a better idea how to attack it by changing permissions and making sure 
things are on the path.  I would not have learned this from Fedora.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Wed, 7 Mar 2007 10:43:17 -0500</b>
</p>

<p>
On Thu, Mar 01, 2007 at 09:13:17PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; On Thu, 1 Mar 2007, Ben Okopnik wrote:
&gt; &gt;
&gt; &gt;To continue the car analogy, what you're doing is equivalent to grabbing
&gt; &gt;a random hunk of metal out of a junkyard full of old trucks, trying to
&gt; &gt;fit it to a stripped race-car frame, and trying to see if you can run
&gt; &gt;the resulting gadget at a hundred miles an hour - all before installing
&gt; &gt;the brakes, and without any knowledge of mechanics. What all of us have
&gt; &gt;been telling you to do is to use an <strong>existing</strong> car, and carefully remove
&gt; &gt;the parts that you decide you don't need (at least the brakes are
&gt; &gt;guaranteed to be there, and you'll <strong>know</strong> that you removed them if you
&gt; &gt;decide to do so.)
&gt; 
&gt; I don't drive, I bike ;=)  It gets me places at the speed I want, seeing 
&gt; much more along the way and meeting nice people, and without wasting 
&gt; resources. Our bikes are put together out of parts from abandoned ones. 
&gt; We know how they work and how to maintain them.
</pre>
 
But you see, that's precisely my point. Once you <strong>know</strong> the system, you
can fiddle with it to your heart's content - you understand the limits,
what you can and can't do, etc. When you don't know the system - as is
the case here - fiddling is essentially pointless.
</p>

<p>
A bicycle is a simple system, with few parts and not too many possible
system interactions (and thus easily comprehensible - a finite problem.)
An operating system is <strong>nothing</strong> like this: it is a highly complex
system - a number of orders of magnitude higher than a bicycle - and the
number of its possible internal and external interactions very quickly
approaches infinity. Fiddling with a part of it may teach you about that
part - but what you've learned is likely to be completely wrong, since
you don't have the overall picture.
</p>

<p>
It is possible to get a solid general overview of how an OS works; this
is, in fact, necessary if you're going to tweak various factors if
you're to have any hope of ending up with anything but a random mess.
You're trying to do it by fiddling; a patently bad approach.
 
</p>

<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Wed, 7 Mar 2007 12:11:59 -0500 (EST)</b>
</p>

<p>
On Wed, 7 Mar 2007, Ben Okopnik wrote:
</p>


<pre>
&gt; On Thu, Mar 01, 2007 at 09:13:17PM -0500, Sindi Keesan wrote:
&gt;&gt; On Thu, 1 Mar 2007, Ben Okopnik wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; To continue the car analogy, what you're doing is equivalent to grabbing
&gt;&gt;&gt; a random hunk of metal out of a junkyard full of old trucks, trying to
&gt;&gt;&gt; fit it to a stripped race-car frame, and trying to see if you can run
&gt;&gt;&gt; the resulting gadget at a hundred miles an hour - all before installing
&gt;&gt;&gt; the brakes, and without any knowledge of mechanics. What all of us have
&gt;&gt;&gt; been telling you to do is to use an <strong>existing</strong> car, and carefully remove
&gt;&gt;&gt; the parts that you decide you don't need (at least the brakes are
&gt;&gt;&gt; guaranteed to be there, and you'll <strong>know</strong> that you removed them if you
&gt;&gt;&gt; decide to do so.)
&gt;&gt;
&gt;&gt; I don't drive, I bike ;=)  It gets me places at the speed I want, seeing
&gt;&gt; much more along the way and meeting nice people, and without wasting
&gt;&gt; resources. Our bikes are put together out of parts from abandoned ones.
&gt;&gt; We know how they work and how to maintain them.
&gt;
&gt; But you see, that's precisely my point. Once you <strong>know</strong> the system, you
&gt; can fiddle with it to your heart's content - you understand the limits,
&gt; what you can and can't do, etc. When you don't know the system - as is
&gt; the case here - fiddling is essentially pointless.
&gt;
&gt; A bicycle is a simple system, with few parts and not too many possible
&gt; system interactions (and thus easily comprehensible - a finite problem.)
&gt; An operating system is <strong>nothing</strong> like this: it is a highly complex
&gt; system - a number of orders of magnitude higher than a bicycle - and the
&gt; number of its possible internal and external interactions very quickly
&gt; approaches infinity. Fiddling with a part of it may teach you about that
&gt; part - but what you've learned is likely to be completely wrong, since
&gt; you don't have the overall picture.
</pre>

<p>
My linux is already a custom bicycle.  Much smaller (not designed to haul 
a crowd and three dogs), not full of gadgets like cup holders that are in 
there 'just in case' someone might want to use them.  And it works to 
start with, for a single user, faster and more transparently than the 
big-box models.  It does what it is designed to do.  I would rather add 
any pieces I want than strip out 90% of what is there to make it go 
faster.  A matter of taste.
</p>

<p>
I don't like things to be automated.  I LIKE inserting modules one at a 
time (and it avoids the bugs such as needing to insmod gameport, which is
not on the list for some sound cards but is needed anyway).
</p>

<p>
With less pieces, it is less complicated to understand.  Not that I claim 
to understand most of what is in there but I prefer to start small.
</p>

<p>
I was advised to use the larger version to go online as 'user', by the 
author.  Karolis (in our BL group and TAG) will work on why the browsers 
cannot read or write their configuration files as 'user' in the smaller 
version.  The passwords are shadowed in the smaller version, if I 
understood right, so permissions might need to be different. (?)
</p>

<p>
So I am now stripping pieces from the larger version.  I don't need most 
of bin.tgz, for instance.  I kept splitvt.  I do need cpio (the busybox 
version is inadequate) or rpm2cpio might work instead.   I am recompiling 
busybox and leaving out programs that were left out in the smaller version 
(hexdump).  I can put them back later if needed.  This is educational.
I removed all the kernel source code not for i386 - half of the total.
Lots of glibc etc. is not needed (.a .pa .la, locale, most terminfo....) -
I left in what is used in the smaller version (vt100, linux, etc.).
I still have a whole 775MB of files (including source code for two 
kernels but not for programs and 110MB uclibc).  Karolis compiled a much 
smaller uclibc (38MB and going down).  My basic version of the smaller 
linux is only 35MB (four browsers in there) without the ability to 
compile.
</p>


<pre>
&gt; It is possible to get a solid general overview of how an OS works; this
&gt; is, in fact, necessary if you're going to tweak various factors if
&gt; you're to have any hope of ending up with anything but a random mess.
&gt; You're trying to do it by fiddling; a patently bad approach.
</pre>

<p>
Yes, I did make a mess of the permissions and thanks for explaining them. 
Also how security works (ssh).  I should do more reading before I change 
things.  So far I broke nothing (that I know of) which I did not fix. 
I have lots of backup copies.
</p>

<p>
Maybe opera will work for user on another copy - I messed them all up a 
bit differently (but kept a master copy).  We have 24 potentially working 
desktop computers.
</p>

<p>
My approach comes from being a technical translator with short deadlines. 
Get it working from a superficial knowledge because there is never time to 
go into the details.  I will let my friends continuing browsing as root 
until I can understand the details this time.  It is a vast improvement 
over Windows (which on one computer was so virus-ridden it no longer 
worked with the modem anyway, which works now with linux).  If they kill 
linux I can recopy it from a 23MB backup file in DOS.
</p>

<p>
Thanks again for your help and patience.  I hope other people also learned 
something useful.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Karolis Lyvens [karolisl at gmail.com]
</p>
</b><br />
<b>Sun, 18 Mar 2007 13:01:19 +0200</b>
</p>

<p>
On Wed, Mar 07, 2007 at 12:11:59PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; I was advised to use the larger version to go online as 'user', by the 
&gt; author.  Karolis (in our BL group and TAG) will work on why the browsers 
&gt; cannot read or write their configuration files as 'user' in the smaller 
&gt; version.  The passwords are shadowed in the smaller version, if I 
&gt; understood right, so permissions might need to be different. (?)
</pre>

<p>
The problem:
</p>

<pre>
~&lt;$&gt; echo $HOME
/root
</pre>
Lynx and all the programs look at this variable to figure out where
are the config files located - $HOME/.lynx or $HOME/.opera. They
expand the path to /root/.lynx or /root/.opera, and, because of that,
the applications get permission errors - the files are owned by root,
not the user.
</p>

<p>
To fix this once and for all, comment out the following line in
/etc/profile:
</p>

<pre>
export HOME=/root
</pre>
This is a bug in passwd.tgz's install.sh (it should comment out that
line when installed) and will be reported to BasLinux's mailing list.
</p>

<p>
Karolis Lyvens
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
sindi keesan [keesan at sdf.lonestar.org]
</p>
</b><br />
<b>Sun, 18 Mar 2007 17:31:48 +0000 (UTC)</b>
</p>

<p>
On Sun, 18 Mar 2007, Karolis Lyvens wrote:
</p>


<pre>
&gt; On Wed, Mar 07, 2007 at 12:11:59PM -0500, Sindi Keesan wrote:
&gt;&gt; I was advised to use the larger version to go online as 'user', by the
&gt;&gt; author.  Karolis (in our BL group and TAG) will work on why the browsers
&gt;&gt; cannot read or write their configuration files as 'user' in the smaller
&gt;&gt; version.  The passwords are shadowed in the smaller version, if I
&gt;&gt; understood right, so permissions might need to be different. (?)
&gt;
&gt; The problem:
&gt;
&gt; ``
&gt; ~&lt;$&gt; echo $HOME
&gt; /root
&gt; ''
&gt;
&gt; Lynx and all the programs look at this variable to figure out where
&gt; are the config files located - $HOME/.lynx or $HOME/.opera. They
&gt; expand the path to /root/.lynx or /root/.opera, and, because of that,
&gt; the applications get permission errors - the files are owned by root,
&gt; not the user.
&gt;
&gt; To fix this once and for all, comment out the following line in
&gt; /etc/profile:
&gt;
&gt; ``
&gt; export HOME=/root
&gt; ''
&gt;
&gt; This is a bug in passwd.tgz's install.sh (it should comment out that
&gt; line when installed) and will be reported to BasLinux's mailing list.
&gt;
&gt; Karolis Lyvens
&gt;
</pre>

<p>
Karolis has been fixing all my problems by using strace, which shows where 
a program failed.
</p>

<p>
The configuration files for the three browsers are:
<pre>
/home/user/.opera/ (and /root/.opera)   drwx------
/home/user/.links/			drwx------
/home/user/.lynxrc			-rw-------
</pre>
Ssh has configuration files in /root/.ssh/  drwx------
I had made known_hosts world-readable.  But not random_seed.
It is working for user though .ssh is not world-readable.
</p>

<p>
The files in .links are world-readable - so it works for 'user' but I 
cannot write changed preferences.  Apparently the directory permissions 
do not need to be changed, just file permissions.
</p>

<p>
/root/.xinitrc was also world-readable, and .pmailrc.
</p>

<p>
I also had to chmod o+w for /dev/dsp* and /dev/lp*, so as to listen 
to music and print (plus all the ?tty* devices so as to use rxvt and ssh, 
and dial).  Is there any danger in making all devices read/write for 
users?
</p>

<p>
There is a new basiclinux coming out shortly, and permission changes could 
be made in there or in the passwd.tgz package used to add user accounts.
</p>

<p>
keesan at sdf.lonestar.org
SDF Public Access UNIX System - <a href="http://sdf.lonestar.org">http://sdf.lonestar.org</a>
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas.adam22 at gmail.com]
</p>
</b><br />
<b>Sun, 18 Mar 2007 18:48:18 +0000</b>
</p>

<p>
On Sun, Mar 18, 2007 at 05:31:48PM +0000, sindi keesan wrote:
</p>

<pre>
&gt; There is a new basiclinux coming out shortly, and permission changes could 
&gt; be made in there or in the passwd.tgz package used to add user accounts.
</pre>

<p>
The fact that something so fundamental was broken like that in the first
place is enough for me to dismiss this distribution.  Frankly, given the
amount of effort needed to do anything, and given that many other
distributions are much more ubiquitous in their operation and the tools
used, the choice is simple.
</p>

<p>
-- Thomas Adam
</p>

<pre>-- 
"He wants you back, he screams into the night air, like a fireman going
through a window that has no fire." -- Mike Myers, "This Poem Sucks".
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Mon, 5 Mar 2007 12:00:19 -0500 (EST)</b>
</p>

<p>
I got Basiclinux 3.40 (libc5) mostly working online.  Besides making eznet 
and Xvesa SUID, I made symlinks to the dialing scripts from /usr/sbin to 
/usr/bin (which is on the path for user).
</p>

<p>
A book said for single-user systems you can make the devices a+rw rather 
than making them rw for groups (my only user is in just one group).  So I 
did chmod o+rw on all the tty* devices as well as /dev/null (needed by 
Opera).  Are there devices which should NOT be rw for user?
</p>

<p>
A couple of new puzzles which I need help with:
</p>

<p>
"PRNG is not seeded" when I try to ssh.
ssh -v provides no further information.
</p>

<p>
An internet search reveals:
"If you do not have /dev/random on your system you will get a "PRNG not 
seeded" error message.
</p>

<p>
We don't have it but I could mknod /dev/random c 1 8.
</p>

<p>
PRNG is still not seeded.
</p>

<p>
It did not help to make /dev/random o+w or o+x.
</p>

<p>
In BL2.1, /home/user/.ssh files are owned by 100 100 and /etc/group says 
users are 100.  (I had changed ownership to user users).  ssh works here.
</p>

<p>
In BL3 (which ssh works only for root) they are owned by user 500 (user 
is in a group called 500). Should it be 500 500 instead?
</p>

<p>
Deleting the files in /home/user/.ssh did not help.
------------------
</p>

<p>
Lynx won't let me change options:  tmp/lynxXXXXILZxu3:  Permission denied.
In BL3.40  /tmp is drwxr-xr-x
</p>

<p>
chmod a+w /tmp lets me change options now but
Alert!  Unable to save options (to disk).
</p>

<p>
I also have a .lynxrc copied over from /root to /home/user/ which is being 
ignored. -rw------- user 500.
</p>

<p>
Links, when I try to 'save options' is 'Unable to write to config file' 
(/home/user/.links/links.cfg) and is not reading the one I copied from 
/root.
</p>

<p>
What am I missing here?  Why can't lynx or links as user read or write 
files in /home/user which are -rw------- user 500 (or links.cfg 
-rw-r--r--).
</p>

<p>
I can view them with 'less'.
</p>

<p>
I made a 'testfile' and could save it to /home/user and it is -rw-r--r--.
</p>

<p>
In BL2.10  /tmp is drwxrwxrwt.  (Sticky bit set).
Running Linux says this means 'Keep executable in memory after exit'. ??
chmod +t /tmp  did not allow saving of lynx options.
</p>


<p>
Lynx is -rwxr-xr-x  - making it o+w did not help.
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Kapil Hari Paranjape [kapil at imsc.res.in]
</p>
</b><br />
<b>Mon, 5 Mar 2007 09:16:15 -0800</b>
</p>

<p>
Hello,
</p>

<p>
On Mon, 05 Mar 2007, Sindi Keesan wrote:
</p>

<pre>
&gt; A couple of new puzzles which I need help with:
&gt; 
&gt; "PRNG is not seeded" when I try to ssh.
&gt; ssh -v provides no further information.
&gt; 
&gt; An internet search reveals:
&gt; "If you do not have /dev/random on your system you will get a "PRNG not 
&gt; seeded" error message.
&gt; 
&gt; We don't have it but I could mknod /dev/random c 1 8.
&gt;
&gt; PRNG is still not seeded.
&gt;
&gt; It did not help to make /dev/random o+w or o+x.
</pre>

<p>
You generally need read access to /dev/random. It amy also be
necessary to use /dev/urandom (mknod /dev/urandom c 1 9).
</p>

<p>
Of course both these devices will not work if the kernel's random
number support is unavailable (I think Linux 2.0 added this support
but I am not sure).
</p>


<pre>
&gt; In BL3 (which ssh works only for root) they are owned by user 500 (user 
&gt; is in a group called 500). Should it be 500 500 instead?
</pre>

<p>
There is also the need to create .rnd in the $HOME directory. So the
$HOME directory has to be readable/writable by the user who is making
use of "ssh".
</p>

<p>
Regards,
</p>

<p>
Kapil.
--
</p>




<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Mon, 5 Mar 2007 13:11:38 -0500 (EST)</b>
</p>

<p>
On Mon, 5 Mar 2007, Kapil Hari Paranjape wrote:
</p>


<pre>
&gt;&gt; "PRNG is not seeded" when I try to ssh.
&gt;&gt; ssh -v provides no further information.
&gt;&gt;
&gt;&gt; An internet search reveals:
&gt;&gt; "If you do not have /dev/random on your system you will get a "PRNG not
&gt;&gt; seeded" error message.
&gt;&gt;
&gt;&gt; We don't have it but I could mknod /dev/random c 1 8.
&gt;&gt;
&gt;&gt; PRNG is still not seeded.
&gt;&gt;
&gt;&gt; It did not help to make /dev/random o+w or o+x.
&gt;
&gt; You generally need read access to /dev/random. It may also be
&gt; necessary to use /dev/urandom (mknod /dev/urandom c 1 9).
</pre>

<p>
We had /dev/urandom, not writeable by 'other'.  chmod o+w fixed it.
</p>


<pre>
&gt; Of course both these devices will not work if the kernel's random
&gt; number support is unavailable (I think Linux 2.0 added this support
&gt; but I am not sure).
</pre>

<p>
Kernel 2.2.26 worked.  We are 'modern'.  Unfortunately USB storage got 
back-ported and is broken so I usually use 2.4.31 (which has its own 
bugs).
</p>


<pre>
&gt; There is also the need to create .rnd in the $HOME directory. So the
&gt; $HOME directory has to be readable/writable by the user who is making
&gt; use of "ssh".
</pre>

<p>
/home and /home/user are drwxr-xr-x user 500 (writeable by user).
500 is the group where user is.  I don't see a .rnd in either.
</p>

<p>
Opera has a 'preference initialization failure' as user.
Lynx and links can't read/write .lynxrc or links.cfg.
</p>

<p>
They all work in BL2.1 not BL3.4 for user.  I copied these all from /root 
and changed ownerships.  They are all rw for the owner (user).
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Mon, 5 Mar 2007 12:18:24 -0500 (EST)</b>
</p>

<p>
On Mon, 5 Mar 2007, Sindi Keesan wrote:
</p>


<pre>
&gt; I got Basiclinux 3.40 (libc5) mostly working online.  Besides making eznet 
&gt; and Xvesa SUID, I made symlinks to the dialing scripts from /usr/sbin to 
&gt; /usr/bin (which is on the path for user).
</pre>


<pre>
&gt; A couple of new puzzles which I need help with:
&gt;
&gt; "PRNG is not seeded" when I try to ssh.
</pre>


<pre>
&gt; An internet search reveals:
&gt; "If you do not have /dev/random on your system you will get a "PRNG not 
&gt; seeded" error message.
&gt;
&gt; We don't have it but I could mknod /dev/random c 1 8.
&gt;
&gt; PRNG is still not seeded.
&gt;
&gt; It did not help to make /dev/random o+w or o+x.
</pre>

<p>
More research reveals that /dev/urandom is sufficient and is consulted 
before /dev/random.  (I used lynx as 'root' for a while to learn this).
</p>

<pre>
chmod o+w /dev/urandom
</pre>
I am ssh'ed here as user.!  (Last time I telnetted).
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Karolis Lyvens [karolisl at gmail.com]
</p>
</b><br />
<b>Mon, 5 Mar 2007 19:48:02 +0200</b>
</p>

<p>
On Mon, Mar 05, 2007 at 12:00:19PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; A couple of new puzzles which I need help with:
&gt; 
&gt; "PRNG is not seeded" when I try to ssh.
&gt; ssh -v provides no further information.
&gt; 
&gt; An internet search reveals:
&gt; "If you do not have /dev/random on your system you will get a "PRNG not 
&gt; seeded" error message.
&gt; 
&gt; We don't have it but I could mknod /dev/random c 1 8.
&gt; 
&gt; PRNG is still not seeded.
&gt;
&gt; It did not help to make /dev/random o+w or o+x.
</pre>

<p>
You could try the following command, which makes that missing device
(which is /dev/urandom, not /dev/random):
</p>

<pre>
mknod /dev/urandom c 1 9
</pre>
If my memory isn't lying to me, that fixed an exactly the same error
when I tried to use openssh on BasLinux.
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Wed, 7 Mar 2007 18:33:56 -0500</b>
</p>

<p>
On Mon, Mar 05, 2007 at 12:00:19PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; 
&gt; In BL2.10  /tmp is drwxrwxrwt.  (Sticky bit set).
&gt; Running Linux says this means 'Keep executable in memory after exit'. ??
</pre>

<p>
For directories, it means that for any file in that directory, only the
owner and root can remove that file regardless of permissions. This is
why some people also call it the "cooperative" bit: it's a good idea to
set it on directories where people are likely to share files.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Wed, 7 Mar 2007 19:04:00 -0500 (EST)</b>
</p>

<p>
On Wed, 7 Mar 2007, Ben Okopnik wrote:
</p>


<pre>
&gt; On Mon, Mar 05, 2007 at 12:00:19PM -0500, Sindi Keesan wrote:
&gt;&gt;
&gt;&gt; In BL2.10  /tmp is drwxrwxrwt.  (Sticky bit set).
&gt;&gt; Running Linux says this means 'Keep executable in memory after exit'. ??
&gt;
&gt; For directories, it means that for any file in that directory, only the
&gt; owner and root can remove that file regardless of permissions. This is
&gt; why some people also call it the "cooperative" bit: it's a good idea to
&gt; set it on directories where people are likely to share files.
</pre>

<p>
So people can copy each other's files but not delete them?
Totally irrelevant for a single-user system. 
Running Linux seems to be wrong here.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Wed, 7 Mar 2007 20:10:26 -0500</b>
</p>

<p>
On Wed, Mar 07, 2007 at 07:04:00PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; On Wed, 7 Mar 2007, Ben Okopnik wrote:
&gt; 
&gt; &gt;On Mon, Mar 05, 2007 at 12:00:19PM -0500, Sindi Keesan wrote:
&gt; &gt;&gt;
&gt; &gt;&gt;In BL2.10  /tmp is drwxrwxrwt.  (Sticky bit set).
&gt; &gt;&gt;Running Linux says this means 'Keep executable in memory after exit'. ??
&gt; &gt;
&gt; &gt;For directories, it means that for any file in that directory, only the
&gt; &gt;owner and root can remove that file regardless of permissions. This is
&gt; &gt;why some people also call it the "cooperative" bit: it's a good idea to
&gt; &gt;set it on directories where people are likely to share files.
&gt; 
&gt; So people can copy each other's files but not delete them?
</pre>

<p>
No - so they can <em>modify</em> each other's files (assuming the permissions
are right) but not delete them.
</p>


<pre>
&gt; Totally irrelevant for a single-user system. 
&gt; Running Linux seems to be wrong here.
</pre>

<p>
No, it's right - for files (although as I understand it, that usage is
no longer supported in newer Linux versions.) For directories, it has a
different meaning as I described.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Mon, 12 Mar 2007 16:57:27 -0400</b>
</p>

<p>
On Mon, Mar 12, 2007 at 02:11:41PM -0400, Sindi Keesan wrote:
</p>

<pre>
&gt; &gt;&gt;&gt;&gt;
&gt; &gt;&gt;&gt;&gt;In BL2.10  /tmp is drwxrwxrwt.  (Sticky bit set).
&gt; &gt;&gt;&gt;&gt;Running Linux says this means 'Keep executable in memory after exit'. ??
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt;For directories, it means that for any file in that directory, only the
&gt; &gt;&gt;&gt;owner and root can remove that file regardless of permissions. This is
&gt; &gt;&gt;&gt;why some people also call it the "cooperative" bit: it's a good idea to
&gt; &gt;&gt;&gt;set it on directories where people are likely to share files.
&gt; &gt;&gt;
&gt; &gt;&gt;So people can copy each other's files but not delete them?
&gt; &gt;
&gt; &gt;No - so they can <em>modify</em> each other's files (assuming the permissions
&gt; &gt;are right) but not delete them.
&gt; &gt;
&gt; &gt;&gt;Totally irrelevant for a single-user system.
&gt; 
&gt; Would this let 'user' modify files owned by 'root'?
</pre>

<p>
Assuming that the permissions are right, yes. The sticky bit on the
directory doesn't modify the effect of the file permissions; it affects
the way that the directory permissions are applied (directory
permissions are, unfortunately, often poorly understood by the average
*nix user - and even by many nominal sysadmins.) 
 
</p>

<pre>
&gt; &gt;&gt;Running Linux seems to be wrong here.
&gt; &gt;
&gt; &gt;No, it's right - for files (although as I understand it, that usage is
&gt; &gt;no longer supported in newer Linux versions.) For directories, it has a
&gt; &gt;different meaning as I described.
&gt; I don't know whether my libc5 linux qualifies as newer or older ;=)
</pre>
 
It's a question of policy rather than libc.
 
</p>

<pre>
&gt; svgalib is now available with a module and device that can be used instead 
&gt; of running it svgalib, but I seem to be missing two files in 2.4.31 kernel 
&gt; source that it wants to compile with.  (Not in the kernel source on the 
&gt; Slackware 10.2 CD).
&gt; 
&gt; The latest zgv (svgalib-based viewer) ver 5.9 has some new way of making 
&gt; it more secure.  The suid part is run only very briefly and then dropped 
&gt; somehow.  I could post the explanation if you like.
</pre>

<p>
No need - that's a very common (and effective where it's appropriate)
technique; e.g., many webservers do exactly that. They require root
privileges in order to bind to a low port (80, for HTTP), but after
that, drop down to user 'apache' or 'nobody'. That way, if somebody does
manage to crack into the server, they'll only gain a tiny, marginal set
of privileges on the system.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Sat, 24 Mar 2007 16:36:44 -0400 (EDT)</b>
</p>

<p>
I have been experiencing spontaneous permission changes on devices after 
using them as user:
</p>

<pre>
/dev/ttyS1  (needed to dial with pppd and hardware modem)
/dev/ttyp0  (needed by rxvt)
</pre>
And on another computer
<pre>
/dev/ttyLT0 (lucent modem)
</pre>
The lucent modem ownership was root tty (I had made it match all the other 
ttys that came with Basiclinux 2.1.
</p>

<p>
Various online suggestions from people with similar problems were:
</p>

<p>
1.  something happened when they used samba (I don't have that);
</p>

<p>
2.  they shut down with the application (Eterm) running - I cannot shut 
down with rxvt running, if I hit Ctrl-Alt-Del it just exits X.
</p>

<p>
3.  something to do with kernel 2.2.19 and the program expected 2.4.31
(I have 2.4.31 kernel)
</p>

<p>
someone fiddled with file permissions and ownerships and fixed it.
</p>

<p>
So I looked at Basiclinux 3 and the ownership is root root, not root tty.
I don't recall having similar problems there.
</p>

<p>
I had ownerships root tty for /dev/ttyLT0 (on this computer) and root root 
for /dev/ttyp0) (on this computer) and the former kept resetting when I 
rebooted and the latter did not.  I might have all tty* root tty on the 
other computer.  I have been messing around too much.  I KNOW some things 
came set root tty.
</p>

<p>
I changed group of ttyLT0 to users and the problem is cured.
</p>

<p>
Should I be using root root or root users for my devices that I want to be 
accessible to user?  ttyS1 or ttyLT0, and ttyp0-4 (four rxvts), and 
/dev/dsp0 (sound) and /dev/lp0 (printer).  These are currently all root 
root except for the serial/modem devices.
</p>

<p>
Setting things 'group tty' appears to reset permissions so only root can 
write to the device.
</p>




<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Mon, 26 Mar 2007 13:00:44 -0400 (EDT)</b>
</p>

<p>
I am still getting spontaneous permission resets on this other computer 
with /dev/ttyS1 as 'root tty'  'root root'  or 'root users'.
</p>

<p>
Any ideas other than resetting permissions in an rc file when I boot?
Is there a file I can use to reset permissions when I login as a user?
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
MNZ [mnzaki at gmail.com]
</p>
</b><br />
<b>Mon, 26 Mar 2007 21:29:22 +0400</b>
</p>

<p>
On Mon, Mar 26, 2007 at 01:00:44PM -0400, Sindi Keesan wrote:
</p>

<pre>
&gt; I am still getting spontaneous permission resets on this other computer 
&gt; with /dev/ttyS1 as 'root tty'  'root root'  or 'root users'.
&gt; 
&gt; Any ideas other than resetting permissions in an rc file when I boot?
&gt; Is there a file I can use to reset permissions when I login as a user?
</pre>

<p>
I wasn't following this from the start but,
You are not by any chance using udevd are you???
</p>


<pre>-- 
//MNZ\\			|"We all need mirrors to remind ourselves who we are"
MNZaki.BlogSpot.com	|				-- Leonard Shelby
			|||||||||||||||||||||||||||||||||||||||||||||||||||||
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
MNZ [mnzaki at gmail.com]
</p>
</b><br />
<b>Mon, 26 Mar 2007 22:07:36 +0400</b>
</p>

<p>
On Mon, Mar 26, 2007 at 01:38:24PM -0400, Sindi Keesan wrote:
</p>

<pre>
&gt; On Mon, 26 Mar 2007, MNZ wrote:
&gt; 
&gt; &gt;On Mon, Mar 26, 2007 at 01:00:44PM -0400, Sindi Keesan wrote:
&gt; &gt;&gt;I am still getting spontaneous permission resets on this other computer
&gt; &gt;&gt;with /dev/ttyS1 as 'root tty'  'root root'  or 'root users'.
&gt; &gt;&gt;
&gt; &gt;&gt;Any ideas other than resetting permissions in an rc file when I boot?
&gt; &gt;&gt;Is there a file I can use to reset permissions when I login as a user?
&gt; &gt;
&gt; &gt;I wasn't following this from the start but,
&gt; &gt;Ypu aren't by any chance using udevd are you??
&gt; 
&gt; Unlikely, since I don't even know what udevd is or does.  But thanks for 
&gt; the idea.  You did not post to TAG, just to me.
</pre>

<p>
udev handles devices, it populates /dev on startup. The permissions would
be reset each time you reboot and set again by udev rules.
</p>

<p>
Actually I sent the messages to TAG and forget CCing it to you, so I sent 
you the same again.
 
</p>

<pre>
&gt; This is a small Slackware 7.1 based distribution designed to be run as 
&gt; root.
</pre>


<pre>-- 
//MNZ\\			|"We all need mirrors to remind ourselves who we are"
MNZaki.BlogSpot.com	|				-- Leonard Shelby
			|||||||||||||||||||||||||||||||||||||||||||||||||||||
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Mon, 26 Mar 2007 16:14:47 -0400 (EDT)</b>
</p>

<pre>
&gt;&gt;&gt; On Mon, Mar 26, 2007 at 01:00:44PM -0400, Sindi Keesan wrote:
&gt;&gt;&gt;&gt; I am still getting spontaneous permission resets on this other computer
&gt;&gt;&gt;&gt; with /dev/ttyS1 as 'root tty'  'root root'  or 'root users'.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Any ideas other than resetting permissions in an rc file when I boot?
&gt;&gt;&gt;&gt; Is there a file I can use to reset permissions when I login as a user?
&gt;&gt;&gt;
&gt;&gt;&gt; I wasn't following this from the start but,
&gt;&gt;&gt; Ypu aren't by any chance using udevd are you??
&gt;&gt;
&gt;&gt; Unlikely, since I don't even know what udevd is or does.  But thanks for
&gt;&gt; the idea.  You did not post to TAG, just to me.
&gt;
&gt; udev handles devices, it populates /dev on startup. The permissions would
&gt; be reset each time you reboot and set again by udev rules.
&gt;
&gt; Actually I sent the messages to TAG and forget CCing it to you, so I sent
&gt; you the same again.
&gt;
&gt;&gt; This is a small Slackware 7.1 based distribution designed to be run as
&gt;&gt; root.
</pre>

<p>
I searched MANIFEST.gz, and Slackware 7.1 does not have udevd (nor do I).
Isn't there some way to prevent permissions from being reset, rather than 
resetting them during boot or login?
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
MNZ [mnzaki at gmail.com]
</p>
</b><br />
<b>Tue, 27 Mar 2007 01:55:38 +0400</b>
</p>

<p>
On Mon, Mar 26, 2007 at 04:14:47PM -0400, Sindi Keesan wrote:
</p>

<pre>
&gt; &gt;&gt;Unlikely, since I don't even know what udevd is or does.  But thanks for
&gt; &gt;&gt;the idea.  You did not post to TAG, just to me.
&gt; &gt;
&gt; &gt;udev handles devices, it populates /dev on startup. The permissions would
&gt; &gt;be reset each time you reboot and set again by udev rules.
&gt; &gt;
&gt; &gt;Actually I sent the messages to TAG and forget CCing it to you, so I sent
&gt; &gt;you the same again.
&gt; &gt;
&gt; &gt;&gt;This is a small Slackware 7.1 based distribution designed to be run as
&gt; &gt;&gt;root.
&gt; 
&gt; I searched MANIFEST.gz, and Slackware 7.1 does not have udevd (nor do I).
&gt; Isn't there some way to prevent permissions from being reset, rather than 
&gt; resetting them during boot or login?
</pre>

<p>
Have you got devfs? check the kernel (assuming you are using an old one 
more than version 2.3.46) config for CONFIG_DEVFS_FS=y and 
CONFIG_DEVFS_MOUNT=y. Or simply try "# mount" and check if /dev is a devfs
</p>

<p>
If you do have devfs, you'll have to use devfsd to control permissions
across reboots (or just do it from an rc file <img src="../gx/smile.png" alt=":)">
<pre>-- 
//MNZ\\			|"We all need mirrors to remind ourselves who we are"
MNZaki.BlogSpot.com	|				-- Leonard Shelby
			|||||||||||||||||||||||||||||||||||||||||||||||||||||
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Karolis Lyvens [karolisl at gmail.com]
</p>
</b><br />
<b>Tue, 27 Mar 2007 18:12:56 +0300</b>
</p>

<p>
On Tue, Mar 27, 2007 at 01:55:38AM +0400, MNZ wrote:
</p>

<pre>
&gt; On Mon, Mar 26, 2007 at 04:14:47PM -0400, Sindi Keesan wrote:
&gt; &gt; &gt;&gt;Unlikely, since I don't even know what udevd is or does.  But thanks for
&gt; &gt; &gt;&gt;the idea.  You did not post to TAG, just to me.
&gt; &gt; &gt;
&gt; &gt; &gt;udev handles devices, it populates /dev on startup. The permissions would
&gt; &gt; &gt;be reset each time you reboot and set again by udev rules.
&gt; &gt; &gt;
&gt; &gt; &gt;Actually I sent the messages to TAG and forget CCing it to you, so I sent
&gt; &gt; &gt;you the same again.
&gt; &gt; &gt;
&gt; &gt; &gt;&gt;This is a small Slackware 7.1 based distribution designed to be run as
&gt; &gt; &gt;&gt;root.
&gt; &gt; 
&gt; &gt; I searched MANIFEST.gz, and Slackware 7.1 does not have udevd (nor do I).
&gt; &gt; Isn't there some way to prevent permissions from being reset, rather than 
&gt; &gt; resetting them during boot or login?
&gt; 
&gt; Have you got devfs? check the kernel (assuming you are using an old one 
&gt; more than version 2.3.46) config for CONFIG_DEVFS_FS=y and 
&gt; CONFIG_DEVFS_MOUNT=y. Or simply try "# mount" and check if /dev is a devfs
&gt; 
&gt; If you do have devfs, you'll have to use devfsd to control permissions
&gt; across reboots (or just do it from an rc file <img src="../gx/smile.png" alt=":)">
</pre>

<p>
To clear up the matter about devfs/udev in BL:
</p>

<p>
Baslinux runs on 2.2.26 kernel by default, which is pre-devfs/hotplug
(which appeared in 2.4, if I'm not mistaken). There are several 2.4
images available, but BL doesn't use devfs. 2.6.x kernel isn't used in
BL at all (it could be compiled, but there's no need for that), so it
can't possibly have udev.
</p>

<p>
Instead of all this fancy automatic stuff, we use mknod to manually
create and manage our devices <img src="../gx/smile.png" alt=":)">
</p>

<p>
Karolis Lyvens
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Kapil Hari Paranjape [kapil at imsc.res.in]
</p>
</b><br />
<b>Tue, 27 Mar 2007 08:54:41 -0700</b>
</p>

<p>
Hello,
</p>

<p>
On Tue, 27 Mar 2007, Karolis Lyvens wrote:
</p>

<pre>
&gt; To clear up the matter about devfs/udev in BL:
&gt; 
&gt; Baslinux runs on 2.2.26 kernel by default, which is pre-devfs/hotplug
&gt; (which appeared in 2.4, if I'm not mistaken). There are several 2.4
&gt; images available, but BL doesn't use devfs. 2.6.x kernel isn't used in
&gt; BL at all (it could be compiled, but there's no need for that), so it
&gt; can't possibly have udev.
&gt; 
&gt; Instead of all this fancy automatic stuff, we use mknod to manually
&gt; create and manage our devices <img src="../gx/smile.png" alt=":)">
</pre>

<p>
I think the "udev/devfs" stuff was a McGuffin.
</p>

<p>
The original problem was that "some" program was changing the permissions
of the "dialout" device.
</p>

<p>
Now, <strong>if</strong> devices are removed and created (a la devfs/udevd) by some
automated process then <strong>that</strong> could be the reason for the changing
permissions.
</p>

<p>
Otherwise, it is some other program... <img src="../gx/frown.png" alt=":-(">
</p>

<p>
Unfortunately, it seems as if too many aspects of BL are
"non-standard" for most of us to be able to help in debugging this.
This is especially so with regard to the "deconstruction" of the
permissions system of Posix.[1]
</p>

<p>
On a Debian system (which I use) the solution used is that all
dialout devices have "group" ownership of "dialout". The users who
belong to that group can access these devices. No program accessing
these devices is "permitted" (by policy[2]) to play around with its
mode/ownership and so on.
</p>

<p>
Regards,
</p>

<p>
Kapil.
</p>

<p>
[1] The flaws of this system are well-known and many people have spent
hours designing "better" systems. However, any implementation of a
replacement of a "core" aspect like this is fraught with great
burdens: "legacy" software re-write/review and user education.
</p>

<p>
[2] This policy is currently one that governs the writers/packagers
of the programs rather than the programs themselves!
</p>

<p>
--
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Tue, 27 Mar 2007 18:08:33 -0500</b>
</p>

<p>
On Tue, Mar 27, 2007 at 08:54:41AM -0700, Kapil Hari Paranjape wrote:
</p>

<pre>
&gt; 
&gt; The original problem was that "some" program was changing the permissions
&gt; of the "dialout" device.
&gt; 
&gt; Now, <strong>if</strong> devices are removed and created (a la devfs/udevd) by some
&gt; automated process then <strong>that</strong> could be the reason for the changing
&gt; permissions.
&gt; 
&gt; Otherwise, it is some other program... <img src="../gx/frown.png" alt=":-(">
</pre>

<p>
I recall having this kind of problem a number of years ago, but I'm
afraid that my recollection of the fix is rather dim. If I <strong>am</strong>
remembering correctly, I ended up using "setserial".
</p>

<p>
I have a strong suspicion that, in this case, "pppd" itself is the
culprit. Running "strace" on the "pppd" process (with "-f" and "-s 4096"
options) and tracing the execution to see if it does anything silly with
the device might be helpful.
 
</p>

<pre>
&gt; Unfortunately, it seems as if too many aspects of BL are
&gt; "non-standard" for most of us to be able to help in debugging this.
&gt; This is especially so with regard to the "deconstruction" of the
&gt; permissions system of Posix.[1]
</pre>

<p>
[nod] On a "normal" system, I'd set the device to "chattr +i" and see
what process croaked (or complained in the log files.) On the B.A.D.
gadget that Sindi is using, it's anybody's guess.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
sindi keesan [keesan at sdf.lonestar.org]
</p>
</b><br />
<b>Tue, 27 Mar 2007 23:54:51 +0000 (UTC)</b>
</p>

<p>
On Tue, 27 Mar 2007, Ben Okopnik wrote:
</p>


<pre>
&gt; On Tue, Mar 27, 2007 at 08:54:41AM -0700, Kapil Hari Paranjape wrote:
&gt;&gt;
&gt;&gt; The original problem was that "some" program was changing the permissions
&gt;&gt; of the "dialout" device.
&gt;&gt;
&gt;&gt; Now, <strong>if</strong> devices are removed and created (a la devfs/udevd) by some
&gt;&gt; automated process then <strong>that</strong> could be the reason for the changing
&gt;&gt; permissions.
&gt;&gt;
&gt;&gt; Otherwise, it is some other program... <img src="../gx/frown.png" alt=":-(">
&gt;
&gt; I recall having this kind of problem a number of years ago, but I'm
&gt; afraid that my recollection of the fix is rather dim. If I <strong>am</strong>
&gt; remembering correctly, I ended up using "setserial".
&gt;
&gt; I have a strong suspicion that, in this case, "pppd" itself is the
&gt; culprit. Running "strace" on the "pppd" process (with "-f" and "-s 4096"
&gt; options) and tracing the execution to see if it does anything silly with
&gt; the device might be helpful.
</pre>

<p>
ttyp0 also changed permissions after I rebooted on the other computer. 
It is still okay here (as root root).  It is needed by rxvt. Xvesa appears 
to be staying suid root.
</p>

<p>
I will take a look at strace, with help from Karolis.   pppd and rxvt.
</p>


<pre>
&gt;
&gt;&gt; Unfortunately, it seems as if too many aspects of BL are
&gt;&gt; "non-standard" for most of us to be able to help in debugging this.
&gt;&gt; This is especially so with regard to the "deconstruction" of the
&gt;&gt; permissions system of Posix.[1]
&gt;
&gt; [nod] On a "normal" system, I'd set the device to "chattr +i" and see
&gt; what process croaked (or complained in the log files.) On the B.A.D.
&gt; gadget that Sindi is using, it's anybody's guess.
</pre>

<p>
I actually HAVE a chattr, amazingly.  Just n
</p>

<p>
<p class="editorial">
[[[  This seems to have been truncated in the original. -- Kat  ]]]
</p>

</p>

<p>
keesan at sdf.lonestar.org
SDF Public Access UNIX System - <a href="http://sdf.lonestar.org">http://sdf.lonestar.org</a>
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Tue, 27 Mar 2007 19:14:39 -0500</b>
</p>

<p>
On Tue, Mar 27, 2007 at 11:54:51PM +0000, sindi keesan wrote:
</p>

<pre>
&gt; 
&gt; ttyp0 also changed permissions after I rebooted on the other computer. 
&gt; It is still okay here (as root root).  It is needed by rxvt. Xvesa appears 
&gt; to be staying suid root.
</pre>

<p>
"/dev/ttypX" files are pseudoterminal slave devices; their permissions,
etc. change all the time. No surprises there. I suggest you read up on
them in /usr/src/linux/Documentation/devices.txt (although I suspect
that you don't have the kernel sources installed - which would give the
constantly-repeated point that you're using a Broken-As-Designed distro
yet another turn at the sharpening bench.) Perhaps you can get a copy
from someone with a less-broken system; it's only about 100k, and
contains a huge amount of info about the files in /dev.
 
Also, do note that terminal emulators such as 'xterm' and 'rxvt' are
usually SUID root. At least one of the reasons for this (at least in my
opinion) is the ability to "adjust" device files despite possible
weirdness in ownership/permissions.
</p>

<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
sindi keesan [keesan at sdf.lonestar.org]
</p>
</b><br />
<b>Wed, 28 Mar 2007 00:23:44 +0000 (UTC)</b>
</p>

<p>
On Tue, 27 Mar 2007, Ben Okopnik wrote:
</p>


<pre>
&gt; On Tue, Mar 27, 2007 at 11:54:51PM +0000, sindi keesan wrote:
&gt;&gt;
&gt;&gt; ttyp0 also changed permissions after I rebooted on the other computer.
&gt;&gt; It is still okay here (as root root).  It is needed by rxvt. Xvesa appears
&gt;&gt; to be staying suid root.
&gt;
&gt; "/dev/ttypX" files are pseudoterminal slave devices; their permissions,
&gt; etc. change all the time. No surprises there. I suggest you read up on
&gt; them in /usr/src/linux/Documentation/devices.txt (although I suspect
&gt; that you don't have the kernel sources installed - which would give the
&gt; constantly-repeated point that you're using a Broken-As-Designed distro
&gt; yet another turn at the sharpening bench.) Perhaps you can get a copy
&gt; from someone with a less-broken system; it's only about 100k, and
&gt; contains a huge amount of info about the files in /dev.
</pre>

<p>
I installed kernel source a long time ago and compiled lots of kernels, 
some of them not broken ;=)  I am using a custom 2.4.31 kernel.  I also 
have the Slackware 7.1 (and later) CDs.
</p>


<pre>
&gt; Also, do note that terminal emulators such as 'xterm' and 'rxvt' are
&gt; usually SUID root. At least one of the reasons for this (at least in my
&gt; opinion) is the ability to "adjust" device files despite possible
&gt; weirdness in ownership/permissions.
</pre>

<p>
rxvt is SUID root on this computer.  Maybe I need to make it that on the 
computer where user cannot use rxvt unless I keep resetting permissions. 
(They are 40 min apart, by foot, and it is raining).
</p>

<p>
pppd is -rwsr-xr-- root users
Should it be -rws--x--x root root like rxvt?
</p>

<p>
I have the strace man page and have succeeded in disabling one vt by 
filling the screen (probably with 4K of data, which started repeating 
things about SEEK_SET and start and len and ioctl). I don't understand man 
pages and will ask Karolis for help with strace.
</p>

<p>
Sindi
</p>


<p>
keesan at sdf.lonestar.org
SDF Public Access UNIX System - <a href="http://sdf.lonestar.org">http://sdf.lonestar.org</a>
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Kapil Hari Paranjape [kapil at imsc.res.in]
</p>
</b><br />
<b>Tue, 27 Mar 2007 17:30:16 -0700</b>
</p>

<p>
Hello,
</p>

<p>
On Tue, 27 Mar 2007, Ben Okopnik wrote:
</p>

<pre>
&gt; I suggest you read up on them in /usr/src/linux/Documentation/devices.txt
</pre>

<p>
There is also an article on Wikipedia on "pseudo terminals".
</p>

<p>
Regards,
</p>

<p>
Kapil.
--
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Kapil Hari Paranjape [kapil at imsc.res.in]
</p>
</b><br />
<b>Tue, 27 Mar 2007 17:23:16 -0700</b>
</p>

<p>
Hello,
</p>

<p>
On Tue, 27 Mar 2007, sindi keesan wrote:
</p>

<pre>
&gt; ttyp0 also changed permissions after I rebooted on the other computer. 
&gt; It is still okay here (as root root).  It is needed by rxvt. Xvesa appears 
&gt; to be staying suid root.
</pre>

<p>
Wait a minute. Did you say "/dev/ttyp0"? I must have missed that
somewhere.
</p>

<p>
The device "ttyp0" is the "slave" of the pair of "pseudo-tty"
devices (the master is "ptyp0"). These are dynamically assigned and
de-assigned by the kernel based on requests from processes---no wonder
that their ownerships and permissions are dynamic!
</p>

<p>
For example [1] do the following:
<pre>
	ssh -t localhost ls -l '$(tty)'
</pre>
You get the output (with kapil replaced by your username):
<pre>
	crw--w---- 1 kapil tty 136, 13 2007-03-27 17:18 /dev/ttyp13
</pre>
On the other hand:
<pre>
	ls -l /dev/ttyp13
</pre>
Will give the output:
<pre>
	crw--w---- 1 root tty 136, 13 2007-03-27 17:18 /dev/ttyp13
</pre>
Regards,
</p>

<p>
Kapil.
[1] I have cheated in the above example. Since my system is 2.6.x it
uses /dev/pts rather than /dev/[tp]typ* for the pseudo-terminals.
Moreover, since it uses "udev" the device disappears after I logout.
But the principle is the same.
--
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
sindi keesan [keesan at sdf.lonestar.org]
</p>
</b><br />
<b>Wed, 28 Mar 2007 00:33:07 +0000 (UTC)</b>
</p>

<p>
On Tue, 27 Mar 2007, Kapil Hari Paranjape wrote:
</p>


<pre>
&gt; Hello,
&gt;
&gt; On Tue, 27 Mar 2007, sindi keesan wrote:
&gt;&gt; ttyp0 also changed permissions after I rebooted on the other computer.
&gt;&gt; It is still okay here (as root root).  It is needed by rxvt. Xvesa appears
&gt;&gt; to be staying suid root.
&gt;
&gt; Wait a minute. Did you say "/dev/ttyp0"? I must have missed that
&gt; somewhere.
&gt;
&gt; The device "ttyp0" is the "slave" of the pair of "pseudo-tty"
&gt; devices (the master is "ptyp0"). These are dynamically assigned and
&gt; de-assigned by the kernel based on requests from processes---no wonder
&gt; that their ownerships and permissions are dynamic!
</pre>

<p>
Yes, Ben explained that rxvt has to be run SUID to deal with the changing 
permissions.  I seem to have rxvt permissions correct on this computer but 
not my other computer.  Amazingly, things mostly still work on both.
</p>



<pre>
&gt; For example [1] do the following:
&gt; 	ssh -t localhost ls -l '$(tty)'
&gt; You get the output (with kapil replaced by your username):
&gt; 	crw--w---- 1 kapil tty 136, 13 2007-03-27 17:18 /dev/ttyp13
</pre>

<p>
I typed the above line and my output is  '&gt;' at the start of the next 
line.  We have a small ssh, maybe lacking some feature.
</p>


<pre>
&gt; On the other hand:
&gt; 	ls -l /dev/ttyp13
&gt; Will give the output:
&gt; 	crw--w---- 1 root tty 136, 13 2007-03-27 17:18 /dev/ttyp13
</pre>

<pre>
ls:  /dev/ttyp13:  No such file or directory.
</pre>
We have ttyp 0-9 and a-f.  0-6 are dated this month, the others 2004 or 
earlier.  9-f are 1996.  ttyp0-6 are root root and the others root tty.
Should they all be root tty?
</p>

<p>
I seem to have changed permissions on them all to crw-rw-rw-.
Since they are dynamic I won't bother changing them to the above.
</p>


<p>
keesan at sdf.lonestar.org
SDF Public Access UNIX System - <a href="http://sdf.lonestar.org">http://sdf.lonestar.org</a>
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Kapil Hari Paranjape [kapil at imsc.res.in]
</p>
</b><br />
<b>Tue, 27 Mar 2007 17:34:49 -0700</b>
</p>

<p>
Hello,
</p>

<p>
A clarification.
</p>

<p>
On Tue, 27 Mar 2007, Kapil Hari Paranjape wrote:
</p>

<pre>
&gt; [1] I have cheated in the above example. Since my system is 2.6.x it
&gt; uses /dev/pts rather than /dev/[tp]typ* for the pseudo-terminals.
&gt; Moreover, since it uses "udev" the device disappears after I logout.
&gt; But the principle is the same.
</pre>

<p>
Actually "udev" is not the culprit in removing the device file. Since
2.6.x uses the "devpts" pseudo file-system, it is <strong>that</strong> file-system
which creates and removes the /dev/pts/* devices.
</p>

<p>
Regards,
</p>

<p>
Kapil.
--
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
sindi keesan [keesan at sdf.lonestar.org]
</p>
</b><br />
<b>Wed, 28 Mar 2007 00:11:51 +0000 (UTC)</b>
</p>

<p>
Regarding spontaneous permission resets:
</p>

<pre>
&gt; [nod] On a "normal" system, I'd set the device to "chattr +i" and see
&gt; what process croaked (or complained in the log files.) On the B.A.D.
&gt; gadget that Sindi is using, it's anybody's guess.
&gt;
</pre>

<p>
The man page says +i prevents you from writing data to the file.  I need 
to write to the device to use the modem or rxvt.  The problem is that it 
is being reset so the user cannot write to it.
</p>

<pre>
i is immutable
u is undeletable
</pre>
Sort of like write protection in DOS?
</p>

<p>
I doubt we have log files.
</p>

<pre>
chattr +i /dev/ttyp0
chattr:  Input/output error while reading flags on /dev/ttyp0
</pre>
(same for -i)
<pre>
chattr +i /dev/ttyS1  or ttyLT0
chattr:  Invalid argument while reading flags on /dev/ttyS1
</pre>
A web search gave me someone talking about reiserfs and a comment that 
chattr only works for ext2 fs.
</p>

<p>
lsattr gives the same results.
</p>

<p>
Maybe our devices don't have flags?
</p>

<p>
Sindi
</p>

<p>
keesan at sdf.lonestar.org
SDF Public Access UNIX System - <a href="http://sdf.lonestar.org">http://sdf.lonestar.org</a>
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Tue, 27 Mar 2007 19:23:49 -0500</b>
</p>

<p>
On Wed, Mar 28, 2007 at 12:11:51AM +0000, sindi keesan wrote:
</p>

<pre>
&gt; 
&gt; The man page says +i prevents you from writing data to the file.  I need 
&gt; to write to the device to use the modem or rxvt.  The problem is that it 
&gt; is being reset so the user cannot write to it.
</pre>

<p>
Right - so the initial step would be to "disable" it to see what
process complains. If it's "pppd" that's causing problems, then that's
what you'll see in the logs; if it's "rxvt", then that's what'll be
reported.
 
</p>

<pre>
&gt; i is immutable
&gt; u is undeletable
&gt; 
&gt; Sort of like write protection in DOS?
</pre>

<p>
No - that would be "chmod -w &lt;filename&gt;".
 
</p>

<pre>
&gt; I doubt we have log files.
</pre>

<p>
Then I can only wish you the best of luck in troubleshooting your
problems. I've never been good at running with both my feet tied in a
sack.
 
</p>

<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
sindi keesan [keesan at sdf.lonestar.org]
</p>
</b><br />
<b>Wed, 28 Mar 2007 00:59:24 +0000 (UTC)</b>
</p>

<p>
On Tue, 27 Mar 2007, Ben Okopnik wrote:
</p>


<pre>
&gt; On Wed, Mar 28, 2007 at 12:11:51AM +0000, sindi keesan wrote:
&gt;&gt;
&gt;&gt; The man page says +i prevents you from writing data to the file.  I need
&gt;&gt; to write to the device to use the modem or rxvt.  The problem is that it
&gt;&gt; is being reset so the user cannot write to it.
&gt;
&gt; Right - so the initial step would be to "disable" it to see what
&gt; process complains. If it's "pppd" that's causing problems, then that's
&gt; what you'll see in the logs; if it's "rxvt", then that's what'll be
&gt; reported.
&gt;
&gt;&gt; i is immutable
&gt;&gt; u is undeletable
&gt;&gt;
&gt;&gt; Sort of like write protection in DOS?
&gt;
&gt; No - that would be "chmod -w &lt;filename&gt;".
</pre>

<p>
Write protected DOS files cannot be deleted or written to, and +i makes a 
file unwriteable, so there is some overlap.
</p>



<pre>
&gt;&gt; I doubt we have log files.
&gt;
&gt; Then I can only wish you the best of luck in troubleshooting your
&gt; problems. I've never been good at running with both my feet tied in a
&gt; sack.
</pre>

<p>
We have a busybox syslogd - "system logging daemon (says Doctor Linux). 
It accumulates log messages from various applications and stores them into 
log files based on /etc/syslogd.conf" (which I would need to create to 
specify where the log message go).q
</p>

<p>
The log is used to check for attempts at a breakin.
</p>

<p>
I have the man page but this is more than I can handle tonight unless you 
want to walk me through the details.
</p>

<p>
pppd mini-HOWTO  says to chmod 4750 - 4 being suid which would give 
-rwsr-x---
</p>

<p>
I have -rwsr-xr-- 1 root root (close enough?)
</p>

<p>
Since rxvt and pppd are suid root it should not matter if ttyp0 and ttyS1 
and ttyLT0 are writeable by user.  Thanks for the explanations. 
I will experiment a bit with pppd permissions.
</p>

<p>
Sindi
</p>

<p>
keesan at sdf.lonestar.org
SDF Public Access UNIX System - <a href="http://sdf.lonestar.org">http://sdf.lonestar.org</a>
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
sindi keesan [keesan at sdf.lonestar.org]
</p>
</b><br />
<b>Wed, 28 Mar 2007 16:34:08 +0000 (UTC)</b>
</p>

<pre>
&gt;&gt; I doubt we have log files.
&gt;
&gt; Then I can only wish you the best of luck in troubleshooting your
&gt; problems. I've never been good at running with both my feet tied in a
</pre>


<p>
'Strace eznet up 4' when run as user indicates that eznet run as user does 
not have permission to access /var/eznet/eznet.conf or any other files in 
/var/eznet (which are log files kept for five different sessions such as 
ppp.0 pid.0 status.0 and sessions.html).  But eznet is root suid so I 
thought it had root permissions to access everything.
</p>

<p>
eznet.conf contains password so I don't want it to be user-readable.
</p>

<p>
Online eznet documentation does not help, nor can I understand the 130 
pages of source code for eznet.  Nobody else seems to have had problems 
dialing as user with eznet.
</p>

<pre>
-rws--s--x root root  eznet
</pre>
I can make it work by changing /dev/ttyS1 to user-writeable (every time 
before logging in as user, or probably in an rc file).
</p>

<p>
The error message when I try to dial as user with eznet says I don't have 
permission to access /dev/ttyS1 (or other modem device).
</p>

<p>
I put pppd back to non-suid and non-executable by user since eznet is what
runs it. I should not work on linux late at night.
</p>

<p>
Another approach would be to use pppd without eznet, but then the friends 
I set up linux for would need to learn to use it too (or come back to me 
whenever they changed user information).
</p>

<p>
Similar problems for both versions of Basiclinux.
</p>

<p>
I can dial as root and then do everything else as user.  I think this is 
how we were told to go online for added security.  How exactly would 
dialing as root compromise security?  We have no open ports.
</p>

<p>
Maybe Karolis can figure this out.
</p>

<p>
Sindi
</p>

<p>
keesan at sdf.lonestar.org
SDF Public Access UNIX System - <a href="http://sdf.lonestar.org">http://sdf.lonestar.org</a>
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
sindi keesan [keesan at sdf.lonestar.org]
</p>
</b><br />
<b>Wed, 28 Mar 2007 17:07:46 +0000 (UTC)</b>
</p>

<p>
On Tue, 27 Mar 2007, Ben Okopnik wrote:
</p>


<pre>
&gt; On Tue, Mar 27, 2007 at 08:54:41AM -0700, Kapil Hari Paranjape wrote:
&gt;&gt;
&gt;&gt; The original problem was that "some" program was changing the permissions
&gt;&gt; of the "dialout" device.
&gt;&gt;
&gt;&gt; Now, <strong>if</strong> devices are removed and created (a la devfs/udevd) by some
&gt;&gt; automated process then <strong>that</strong> could be the reason for the changing
&gt;&gt; permissions.
&gt;&gt;
&gt;&gt; Otherwise, it is some other program... <img src="../gx/frown.png" alt=":-(">
&gt;
&gt; I recall having this kind of problem a number of years ago, but I'm
&gt; afraid that my recollection of the fix is rather dim. If I <strong>am</strong>
&gt; remembering correctly, I ended up using "setserial".
&gt;
&gt; I have a strong suspicion that, in this case, "pppd" itself is the
&gt; culprit. Running "strace" on the "pppd" process (with "-f" and "-s 4096"
&gt; options) and tracing the execution to see if it does anything silly with
&gt; the device might be helpful.
&gt; -- 
&gt; * Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
&gt;
</pre>

<p>
Here is the output from running strace as user for eznet, which runs pppd 
(which is in /usr/sbin, not accessible to user).  eznet up 4 dials (for 
root) but for user says permission denied for /dev/ttyLT0 or ttyS1.
</p>

<p>
<p class="editorial">
[[[  This file is linked here: <a href="../../../137/misc/lg/keesan.txt">http://linuxgazette.net/137/misc/lg/keesan.txt</a> -- Kat  ]]]
</p>

</p>

<pre>
strace eznet up 4 &amp;&gt; /tmp/strace.log
</pre>
(I made /tmp user-writeable first).
</p>

<p>
It looks as if eznet run as user cannot access eznet.conf or pap-secrets 
(which contains modem device info, phone, login, password, and are not 
user-readable).
</p>

<pre>
-rws--s--x 1 root root   eznet
 
-rw------- 1 root root   pap-secrets and eznet.conf
</pre>
I don't see pppd even mentioned below, but it is
<pre>
-rwx------ 1 root root
</pre>
(I don't think it needs to be executable by user since eznet executes it 
and is suid root).
</p>

<p>
Sindi
</p>

<p>
keesan at sdf.lonestar.org
SDF Public Access UNIX System - <a href="http://sdf.lonestar.org">http://sdf.lonestar.org</a>
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Wed, 7 Mar 2007 12:45:56 -0500</b>
</p>

<p>
On Sun, Mar 04, 2007 at 03:25:54AM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; I read a short section on security in an old SuSE book, which says to 
&gt; avoid SUID programs because they are succeptible to buffer overruns which 
&gt; is bad for security.
</pre>

<p>
You've either misunderstood it, or it was poorly written. The real story
is that if you 
</p>

<p>
a) have an SUID program
</p>

<p>
 AND
</p>

<p>
b) it's susceptible to a buffer overrun - note that these two things are
distinct and independent - 
</p>

<p>
then attackers can crack into your system by attacking that program.
 
</p>

<pre>
&gt; 1.  Anything svgalib needs to be suid to run as 'user':
&gt; links2, zgv, seejpeg, bmv.
&gt; 
&gt; Are these security risks?
</pre>

<p>
Probably not in your usage scenario; all of the above are
local-execution programs (although 'links2', depending on how it deals
with CGI, may be - but that's a different attack vector.)
</p>


<pre>
&gt; 2.  Xvesa needs to be SUID to be loaded by 'user'.  Is it better to start 
&gt; X as root then login as 'user'?  (rxvt and xterm did not need to be suid).
</pre>

<p>
As I recall, Xvesa is just an X binary; it shouldn't need root
privileges (I recall when X did need them; I also recall the flamewars
that this caused.) instead, it should check '/etc/X11/Xsession.options'
and '/etc/X11/Xwrapper.config' for the appropriate options (e.g.,
"allowed_users=console", "allow-user-resources", etc.) and run based on
those. Take a look at a normal system, and check out the interaction
between 'startx', 'xinit', and the X program.
 
</p>

<pre>
&gt; 3.  eznet has to be SUID to access pppd (which is not on the path for 
&gt; 'user') and eznet.conf (with login and password, not readable by user) 
&gt; and/or pap-secrets.  Would it be more secure to dial as root and then 
&gt; login as user?  pppd is not suid, or even on the path for user, and is 
&gt; accessed by eznet.
</pre>

<p>
It would be more secure to configure 'pppd' as I described, then use it
as a non-root user.
 
</p>

<pre>
&gt; If I dial as root but do not run any internet-related programs as root is 
&gt; there still a security risk?
</pre>

<p>
Yes. Aside from the obvious - i.e., what everyone's been telling you -
see my first paragraph.
 
</p>

<pre>
&gt; 4.  In the larger linux (not being given to friends) I installed bin.tgz 
&gt; with at and crontab (I never use them) and also lpr.tgz (print spooler) 
&gt; with lpr lprm and lqp, which I no longer use.  All these files are SUID. 
&gt; Are they security risks?
</pre>

<p>
Yes. Besides being vulnerable to local exploits, 'lpd' is a daemon that
can be attacked remotely.
 
</p>

<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Wed, 7 Mar 2007 15:26:00 -0500 (EST)</b>
</p>

<p>
Just lost my connection after typing out a very long reply to this ;=(
</p>

<p>
On Wed, 7 Mar 2007, Ben Okopnik wrote:
</p>


<pre>
&gt; On Sun, Mar 04, 2007 at 03:25:54AM -0500, Sindi Keesan wrote:
&gt;&gt; I read a short section on security in an old SuSE book, which says to
&gt;&gt; avoid SUID programs because they are succeptible to buffer overruns which
&gt;&gt; is bad for security.
&gt;
&gt; You've either misunderstood it, or it was poorly written. The real story
&gt; is that if you
&gt;
&gt; a) have an SUID program
&gt;
&gt; AND
&gt;
&gt; b) it's susceptible to a buffer overrun - note that these two things are
&gt; distinct and independent -
&gt;
&gt; then attackers can crack into your system by attacking that program.
</pre>

<p>
I got a lot of hits on Opera and buffer overrun.
</p>


<pre>
&gt;
&gt;&gt; 1.  Anything svgalib needs to be suid to run as 'user':
&gt;&gt; links2, zgv, seejpeg, bmv.
&gt;&gt;
&gt;&gt; Are these security risks?
&gt;
&gt; Probably not in your usage scenario; all of the above are
&gt; local-execution programs (although 'links2', depending on how it deals
&gt; with CGI, may be - but that's a different attack vector.)
</pre>


<pre>
&gt;
&gt;&gt; 2.  Xvesa needs to be SUID to be loaded by 'user'.  Is it better to start
&gt;&gt; X as root then login as 'user'?  (rxvt and xterm did not need to be suid).
&gt;
&gt; As I recall, Xvesa is just an X binary; it shouldn't need root
&gt; privileges (I recall when X did need them; I also recall the flamewars
&gt; that this caused.) instead, it should check '/etc/X11/Xsession.options'
&gt; and '/etc/X11/Xwrapper.config' for the appropriate options (e.g.,
&gt; "allowed_users=console", "allow-user-resources", etc.) and run based on
&gt; those. Take a look at a normal system, and check out the interaction
&gt; between 'startx', 'xinit', and the X program.
</pre>

<p>
All TinyX servers need to be run SUID to work for user, unlike the regular 
servers which will work with xdm or Xwrapper (which I read about and cited 
info on in my attempted previous reply).  Xwrapper is set suid and 
needs only that one Xwrapper.config with that one line.  The options file 
is for running other things automatically at login time, I think.
xdm is for logging into the GUI which I don't want to do.
</p>

<p>
startx, Xwrapper (both in xbin.tgz) and Xwrapper.config are all tiny 
files.  They worked perfectly for root and user, except that I don't have 
the proper X server for my newer Matrox video card, which works fine with 
TinyX Xvesa and xfbdev (except in 8-bit color).  I don't know how to 
compile the mga server for XFree86-3.3.6.  I am told X is hard to compile.
</p>

<p>
I don't have any other PCI video cards this good which work with 
framebuffer.  AGP cards conflict with MGA in this dual-head system (which 
TAG helped me set up).
</p>

<p>
The X framebuffer standard server wants font 'fixed' (which we apparently 
do not have). SVGA and S3 servers do not need it.  Maybe I can put 
something in the config file to work around this.  I will ask at my list.
</p>

<p>
There is a TinyX matrox server but TinyX servers need to be set SUID.
</p>


<pre>
&gt;&gt; 3.  eznet has to be SUID to access pppd (which is not on the path for
&gt;&gt; 'user') and eznet.conf (with login and password, not readable by user)
&gt;&gt; and/or pap-secrets.  Would it be more secure to dial as root and then
&gt;&gt; login as user?  pppd is not suid, or even on the path for user, and is
&gt;&gt; accessed by eznet.
&gt;
&gt; It would be more secure to configure 'pppd' as I described, then use it
&gt; as a non-root user.
</pre>

<p>
I will leave this alone for a while.  I could not find anything online 
about eznet and security.  The files with login and password are not 
user-readable.  eznet is just a way to set up and access pppd and related 
files.  Several small distributions use it.
</p>


<pre>
&gt;&gt; If I dial as root but do not run any internet-related programs as root is
&gt;&gt; there still a security risk?
&gt;
&gt; Yes. Aside from the obvious - i.e., what everyone's been telling you -
&gt; see my first paragraph.
</pre>

<p>
That appears to be about SUID.  Are you referring to running zgv after 
dialing as root?
</p>


<pre>
&gt;&gt; 4.  In the larger linux (not being given to friends) I installed bin.tgz
&gt;&gt; with at and crontab (I never use them) and also lpr.tgz (print spooler)
&gt;&gt; with lpr lprm and lqp, which I no longer use.  All these files are SUID.
&gt;&gt; Are they security risks?
&gt;
&gt; Yes. Besides being vulnerable to local exploits, 'lpd' is a daemon that
&gt; can be attacked remotely.
</pre>

<p>
removepkg lpr
</p>

<p>
I no longer need to print with lpr even as user.
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas.adam22 at gmail.com]
</p>
</b><br />
<b>Wed, 7 Mar 2007 20:51:29 +0000</b>
</p>

<p>
On Wed, Mar 07, 2007 at 03:26:00PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; All TinyX servers need to be run SUID to work for user, unlike the regular 
&gt; servers which will work with xdm or Xwrapper (which I read about and cited 
&gt; info on in my attempted previous reply).  Xwrapper is set suid and 
&gt; needs only that one Xwrapper.config with that one line.  The options file 
&gt; is for running other things automatically at login time, I think.
</pre>

<p>
Really?  Nope.  XWrapper simply sets the nice value (somewhat redundant
on 2.6.X kernels where the scheduler has been rewritten anyway) and sets
permissions as to which users can launch it.
</p>


<pre>
&gt; xdm is for logging into the GUI which I don't want to do.
</pre>

<p>
You mean you don't want a graphical login manager.  That's fine.
</p>


<pre>
&gt; I am told X is hard to compile.
</pre>

<p>
It's not difficult -- just time consuming.
</p>


<pre>
&gt; I don't have any other PCI video cards this good which work with 
&gt; framebuffer.  AGP cards conflict with MGA in this dual-head system (which 
&gt; TAG helped me set up).
</pre>

<p>
Under TinyX you're going to be severly disadvangted with anything like
that anyway.
</p>


<pre>
&gt; The X framebuffer standard server wants font 'fixed' (which we apparently 
&gt; do not have). SVGA and S3 servers do not need it.  Maybe I can put 
&gt; something in the config file to work around this.  I will ask at my list.
</pre>

<p>
No, <strong>X11</strong> wants font fixed which it defaults to as the de facto font for
just about anything.  No font fixed, no worky.
</p>

<p>
[...]
</p>

<p>
-- Thomas Adam
</p>

<pre>-- 
"Wanting to feel; to know what is real.  Living is a lie." -- Purpoise
Song, by The Monkees.
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Wed, 7 Mar 2007 16:18:34 -0500 (EST)</b>
</p>

<p>
On Wed, 7 Mar 2007, Thomas Adam wrote:
</p>


<pre>
&gt; On Wed, Mar 07, 2007 at 03:26:00PM -0500, Sindi Keesan wrote:
&gt;&gt; All TinyX servers need to be run SUID to work for user, unlike the regular
&gt;&gt; servers which will work with xdm or Xwrapper (which I read about and cited
&gt;&gt; info on in my attempted previous reply).  Xwrapper is set suid and
&gt;&gt; needs only that one Xwrapper.config with that one line.  The options file
&gt;&gt; is for running other things automatically at login time, I think.
&gt;
&gt; Really?  Nope.  XWrapper simply sets the nice value (somewhat redundant
&gt; on 2.6.X kernels where the scheduler has been rewritten anyway) and sets
&gt; permissions as to which users can launch it.
</pre>

<p>
My original reply (longer) said I don't need any options file for 
Xwrapper, that was probably for something else.  I got Xwrapper working 
with just allowed_users=console.
</p>


<pre>
&gt;&gt; I am told X is hard to compile.
&gt;
&gt; It's not difficult -- just time consuming.
</pre>

<p>
Some day.
</p>


<pre>
&gt;
&gt;&gt; I don't have any other PCI video cards this good which work with
&gt;&gt; framebuffer.  AGP cards conflict with MGA in this dual-head system (which
&gt;&gt; TAG helped me set up).
&gt;
&gt; Under TinyX you're going to be severly disadvangted with anything like
&gt; that anyway.
</pre>

<p>
Xvesa works fine with this dual-head setup.  It is newer than the other 
X drivers (from Slackware 7.1, year 2000).
</p>



<pre>
&gt;&gt; The X framebuffer standard server wants font 'fixed' (which we apparently
&gt;&gt; do not have). SVGA and S3 servers do not need it.  Maybe I can put
&gt;&gt; something in the config file to work around this.  I will ask at my list.
&gt;
&gt; No, <strong>X11</strong> wants font fixed which it defaults to as the de facto font for
&gt; just about anything.  No font fixed, no worky.
</pre>

<p>
The SVGA and S3 servers work with the same font directories.
</p>

<p>
failed to set default font path .... could not open default font 'fixed'.
</p>

<p>
I probably need to do something to XF86Config, which is still set to a 
monitor that died last year.  I avoid X when possible.  I will start over 
with xf86config.
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas.adam22 at gmail.com]
</p>
</b><br />
<b>Wed, 7 Mar 2007 21:29:54 +0000</b>
</p>

<p>
On Wed, Mar 07, 2007 at 04:18:34PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; failed to set default font path .... could not open default font 'fixed'.
</pre>

<p>
Just so we're clear:
</p>

<p>
No font 'fixed'; no worky.
</p>

<p>
Or put another way:
</p>

<p>
If X cannot find font fixed (or font 'cursor' which it uses for a cursor
font, oddly enough, but that's a slightly separate issue) it won't
start.  This is invariably due to a poorly setup X11 installation (such
as half of it missing) or your FontPaths are screwed.
</p>

<p>
Given I've written about this before for LG, I am not repeating it here.  
</p>

<p>
<a href="../../../128/adam.html">http://linuxgazette.net/128/adam.html</a>
</p>

<p>
If you look back in the LG archives, you'll also see mention of another
font article I wrote a few years ago which says much the same thing as
the one cited above, it's just tangential.
</p>


<pre>
&gt; I probably need to do something to XF86Config, which is still set to a 
&gt; monitor that died last year.  I avoid X when possible.  I will start over 
&gt; with xf86config.
</pre>

<p>
See above.  Nothing to do with your monitor.
</p>

<p>
-- Thomas Adam
</p>

<pre>-- 
"Wanting to feel; to know what is real.  Living is a lie." -- Purpoise
Song, by The Monkees.
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Wed, 7 Mar 2007 18:35:25 -0500 (EST)</b>
</p>

<p>
On Wed, 7 Mar 2007, Thomas Adam wrote:
</p>


<pre>
&gt; On Wed, Mar 07, 2007 at 04:18:34PM -0500, Sindi Keesan wrote:
&gt;&gt; failed to set default font path .... could not open default font 'fixed'.
&gt;
&gt; Just so we're clear:
&gt;
&gt; No font 'fixed'; no worky.
&gt;
&gt; Or put another way:
&gt;
&gt; If X cannot find font fixed (or font 'cursor' which it uses for a cursor
&gt; font, oddly enough, but that's a slightly separate issue) it won't
&gt; start.  This is invariably due to a poorly setup X11 installation (such
&gt; as half of it missing) or your FontPaths are screwed.
</pre>

<p>
The same setup works on this computer with the SVGA server with no 
complaint about font paths.  It was scrambling things before but looks 
perfect now.  I think I only changed the monitor and card names and video 
RAM amount in XF86Config (a generic one for our linux, to which I added 
modelines above 800x600).  I am getting some odd video effects switching 
between user and root.  A few times I had to logout and login or the 
console prompt kept moving to the right.  Bugs?  Flakey hardware?
</p>

<p>
I also have a new XF86Config made with xf86config (it does not list Xvfb 
as an accelerated server and I made my own symlink).  It still 'failed to 
set default font path' with the Xvfb driver, looking first for 
/usr/X11R6/lib/X11/fonts/misc.  This new XF86Config does not work beyond 
320x200 with SVGA driver.  Or at all with Xvfb.
</p>

<p>
I have font directories misc (with fixed fonts), 100dpi and 75dpi (and 
PEX).  XF86Config has fontpaths misc (first) 75dpi 100dpi Type1.
All in the right places.  This server is not finding them (as root).
</p>

<p>
misc/fonts.alias has aliases for -misc-fixed and -sony-fixed and 
jis-fixed pointed at the fonts which are in misc.
</p>

<p>
xset q lists font paths when run with the SVGA server.
</p>

<p>
Started without xinit/startx, Xvfb just says Fatal error no screens found.
S3 and Tseng servers can't find their devices, understandably.  Tseng told 
me I have a Matrox.
</p>


<pre>
&gt; Given I've written about this before for LG, I am not repeating it here.
&gt;
&gt; <a href="../../../128/adam.html">http://linuxgazette.net/128/adam.html</a>
</pre>

<p>
It will take me a while to understand all of that, and figure out why it 
is not finding the font paths.  misc is in the default location.
</p>

<p>
Xvesa comes with built-in fonts. 
It won't work with startx and Xwrapper unless it is SUID root (I checked).
</p>

<p>
man Xvfb says it was written to run on machines without display hardware.
Other people seem to be using it to actually view things.
No longer needed, assuming SVGA keeps working.  I don't need the fancy 
features of the mga server for opera or xpdf.
</p>


<pre>
&gt; If you look back in the LG archives, you'll also see mention of another
&gt; font article I wrote a few years ago which says much the same thing as
&gt; the one cited above, it's just tangential.
</pre>


<pre>
&gt;&gt; I probably need to do something to XF86Config, which is still set to a
&gt;&gt; monitor that died last year.  I avoid X when possible.  I will start over
&gt;&gt; with xf86config.
&gt;
&gt; See above.  Nothing to do with your monitor.
</pre>

<p>
The monitor part was just a tipoff that it was an old config. 
The old config is now working properly with new monitor and card names.
</p>

<p>
Thanks for all the helpful info.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Thu, 1 Mar 2007 13:47:07 -0500 (EST)</b>
</p>

<p>
I have fixed the rxvt problem by reading about pseudoterminals at tldp 
site.  Pseudoterminals are pty/tty pairs.  I was changing permissions on 
ttyp* because someone on our list I think pointed me to those.  ttyS* has 
to be o+w to work for user to dial.
</p>

<pre>
chmod 666 ptyp* and ttyp*
</pre>
Or chmod o+w
</p>

<p>
Is it okay to have all these pairs user-accessible?
</p>

<p>
The 'screen' program no longer complains about not finding any PTTYs.
(I forgot how to exit it though).
</p>

<p>
I went down a wrong trail after reading that Nvidia framebuffer can 
disable pseudoterminals.  Mine messes up the screen colors badly.
</p>

<p>
rxvt in the smaller Basiclinux 3.40 probably works because the device 
permissions were set properly.  I was looking at the wrong devices.
</p>

<p>
New problem now.  As user:
''
splitvt:  Can't initialize screen:  Terminal type must be set to VT100.
''
More to learn.  Slackware would not be as much fun.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Karolis Lyvens [karolisl at gmail.com]
</p>
</b><br />
<b>Thu, 1 Mar 2007 21:09:45 +0200</b>
</p>

<p>
On Thu, Mar 01, 2007 at 01:47:07PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; New problem now.  As user:
&gt; splitvt:  Can't initialize screen:  Terminal type must be set to VT100.
</pre>

<p>
This should help:
</p>

<pre>
export TERM='VT100'
</pre>
Karolis Lyvens
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas.adam22 at gmail.com]
</p>
</b><br />
<b>Thu, 1 Mar 2007 19:16:22 +0000</b>
</p>

<p>
On Thu, Mar 01, 2007 at 09:09:45PM +0200, Karolis Lyvens wrote:
</p>

<pre>
&gt; On Thu, Mar 01, 2007 at 01:47:07PM -0500, Sindi Keesan wrote:
&gt; &gt; New problem now.  As user:
&gt; &gt; splitvt:  Can't initialize screen:  Terminal type must be set to VT100.
&gt; 
&gt; This should help:
&gt; 
&gt; ``
&gt; export TERM='VT100'
&gt; ''
</pre>

<p>
(Readded querent to the Cc list.)
</p>

<p>
I would be wary of exporting that, since most apps will simply barf on
it.  Set it to the duration of a process instead:
</p>

<p>
<pre class="code">
TERM=VT100 splitvt
</pre>
-- Thomas Adam
</p>

<pre>-- 
"Wanting to feel; to know what is real.  Living is a lie." -- Purpoise
Song, by The Monkees.
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Neil Youngman [ny at youngman.org.uk]
</p>
</b><br />
<b>Thu, 1 Mar 2007 19:24:33 +0000</b>
</p>

<p>
On or around Thursday 01 March 2007 19:16, Thomas Adam reorganised a bunch of 
electrons to form the message:
</p>

<pre>
&gt; On Thu, Mar 01, 2007 at 09:09:45PM +0200, Karolis Lyvens wrote:
</pre>


<pre>
&gt; I would be wary of exporting that, since most apps will simply barf on
&gt; it.  Set it to the duration of a process instead:
&gt;
&gt; ```
&gt; TERM=VT100 splitvt
</pre>

<p>
That's bash syntax. I'm not sure if the querent is using bash. I suspect 
busybox is probably providing a limited shell environment. If it fails she 
will need to check how environment variables are set in that environment.
</p>

<p>
Neil
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Thu, 1 Mar 2007 14:55:28 -0500 (EST)</b>
</p>

<p>
On Thu, 1 Mar 2007, Neil Youngman wrote:
</p>


<pre>
&gt; On or around Thursday 01 March 2007 19:16, Thomas Adam reorganised a bunch of
&gt; electrons to form the message:
&gt;&gt; On Thu, Mar 01, 2007 at 09:09:45PM +0200, Karolis Lyvens wrote:
&gt;
&gt;&gt; I would be wary of exporting that, since most apps will simply barf on
&gt;&gt; it.  Set it to the duration of a process instead:
&gt;&gt;
&gt;&gt; ```
&gt;&gt; TERM=VT100 splitvt
</pre>

<p>
User is using sh linked to bash, I think.
Root can't even do the above.
Can't find termcap entry for terminal type "(null)".
</p>

<p>
I did not get a mail from Karolis, who I think has Basiclinux 3.40 not 
2.10.  3.40 uses busybox sh.
</p>

<p>
Please could people include me on the Cc: line.
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Thu, 1 Mar 2007 12:00:57 -0800</b>
</p>

<p>
Quoting Sindi Keesan (keesan at grex.cyberspace.org):
</p>


<pre>
&gt; I did not get a mail from Karolis, who I think has Basiclinux 3.40 not 
&gt; 2.10.  3.40 uses busybox sh.
&gt; 
&gt; Please could people include me on the Cc: line.
</pre>

<p>
Sindi, Karolis indeed forgot to CC you (didn't do Reply-to-All), but Thomas
Adam then quoted his entire post in a subsequent follow-up, re-added you to
addresses, and mentioned doing so in his post:
</p>

<p>
   (Readded querent to the Cc list.)
</p>




<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Thu, 1 Mar 2007 15:15:53 -0500 (EST)</b>
</p>

<p>
On Thu, 1 Mar 2007, Thomas Adam wrote:
</p>


<pre>
&gt; On Thu, Mar 01, 2007 at 09:09:45PM +0200, Karolis Lyvens wrote:
&gt;&gt; On Thu, Mar 01, 2007 at 01:47:07PM -0500, Sindi Keesan wrote:
&gt;&gt;&gt; New problem now.  As user:
&gt;&gt;&gt; splitvt:  Can't initialize screen:  Terminal type must be set to VT100.
&gt;&gt;
&gt;&gt; This should help:
&gt;&gt;
&gt;&gt; ``
&gt;&gt; export TERM='VT100'
&gt;&gt; ''
</pre>

<p>
It actually said 'must be set to vt100' not 'VT100'.
<pre>
export TERM=vt100
</pre>
This changed user from TERM=linux to TERM=vt100 (type 'set'). Root 
is using TERM=linux and splitvt works for root.
<pre>
/etc/profile has TERM=linux
</pre>
Basiclinux 2.1 uses bash, 3.40 busybox sh.
</p>

<p>
New error message.  No available pseudo terminals.
</p>

<p>
splitvt must be using different ones from rxvt and screen.
</p>

<p>
Lynx commands don't all work in splitvt run as root (arrow keys) - maybe a 
terminal problem again?  I don't NEED splitvt.  I have a dual-head system, 
thanks to TAG a few years ago.
</p>

<p>
I log into my bbs as linux not vt100.  I think I should keep it this way 
since things are working.
</p>

<p>
So I need to change something else to make splitvt work for user.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Thu, 1 Mar 2007 19:10:38 -0500 (EST)</b>
</p>

<p>
On Thu, 1 Mar 2007, Thomas Adam wrote:
</p>


<pre>
&gt; On Thu, Mar 01, 2007 at 09:09:45PM +0200, Karolis Lyvens wrote:
&gt;&gt; On Thu, Mar 01, 2007 at 01:47:07PM -0500, Sindi Keesan wrote:
&gt;&gt;&gt; New problem now.  As user:
&gt;&gt;&gt; splitvt:  Can't initialize screen:  Terminal type must be set to VT100.
&gt;&gt;
&gt;&gt; This should help:
&gt;&gt;
&gt;&gt; ``
&gt;&gt; export TERM='VT100'
&gt;&gt; ''
&gt;
</pre>


<pre>
&gt; TERM=VT100 splitvt
</pre>

<p>
TERM=vt100 splitvt  is correct.
</p>

<p>
splitvt works, and exits back to TERM=linux, on two computers.
</p>

<p>
I will try again on the other.
</p>

<p>
If I telnet (can't ssh yet) with splitvt in vt100 I need to tset vt100 at 
my shell accounts or lynx is scrambled there.
</p>

<p>
Why does root not need vt100 and user does?  Consistency would be nice.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Thu, 1 Mar 2007 13:56:51 -0500 (EST)</b>
</p>

<p>
On Wed, 28 Feb 2007, Kapil Hari Paranjape wrote:
</p>


<pre>
&gt; Hello,
&gt;
&gt; A suggestion:
&gt; I understand that you want to create a minimal distribution.
&gt; There is no reason for you to <strong>use</strong> a minimal distribution while
&gt; designing one. Having a full-fledged working distribution may give
&gt; you a better idea of what you want to leave in in the minimal one.
&gt; Moreover, on a full-fledged distribution you can read man pages, run
&gt; strace/ltrace and possibly even run the debugger. You can test the
&gt; mini-distribution in a user-mode-linux or a qemu or some other
&gt; virtualised sub-box if you don't feel like booting all the time.
</pre>

<p>
For a while I had Slackware in another partition on one drive (that died).
I use at most 1GB for my linux, so no lack of space on a 3GB drive.
If I use kernel 2.4.31 in Basiclinux and have modules for it in both 
partitions, I can mount the other partition and chroot to it.  I have man 
pages on CD.  But I can't usually understand them.  I now have a shell 
account at a Slackware 10.02 machine with broadband connection.
</p>

<p>
I added strace but the output is hard to understand.  I am starting to 
learn vi and don't need tex or emacs.  I set up linux for friends in 35MB 
just for internet.
</p>


<pre>
&gt; I think you can have a full-fledged development box with about 4MB
&gt; of RAM providing you don't use X and are willing to wait a while for
&gt; compiles. I recall building linux (ver 1.x), libc, basic utilities,
&gt; vi, emacs and tex on a 386 which had 4MB of RAM and 500MB of disk. It
&gt; took a while but it worked.
</pre>

<p>
How long did it take to compile a kernel?
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Fri, 23 Mar 2007 14:56:07 -0500</b>
</p>

<p>
----- Forwarded message from Sindi Keesan &lt;keesan at grex.cyberspace.org&gt; -----
</p>

<pre>
Date: Fri, 23 Mar 2007 12:24:35 -0400 (EDT)
From: Sindi Keesan &lt;keesan@grex.cyberspace.org&gt;
To: TAG &lt;tag@lists.linuxgazette.net&gt;
To: Ben Okopnik &lt;ben at linuxgazette.net&gt;
Subject: Re: [TAG] lpr works for user not root in Basiclinux 2.1
</pre>Sender: Sindi Keesan &lt;keesan at cyberspace.org&gt;
</p>

<p>
A strange problem.  I dial as user and it works, then next time I don't 
have permission to use /dev/ttyS1.  This has happened repeatedly.  I 
change to o+rw and it changes itself back.  I changed all tty* to o+rw and 
today I have again:
</p>

<pre>
ttyS1  crw-r--r--
ttyp0  crw-------
ttyp1  crw--w--w-
</pre>
They are all different, even stranger.  They used to be all other rw.
The other tty's (which I did not use as user) are unchanged (rw).
</p>

<p>
I could set rc.S or something to redo the permissions on these 
three files each time I boot, but what could be causing this?
</p>

<p>
The author of svgalib helped me to make the module which lets me now use 
zgv and links2 non-suid.  Kernel 2.4 was missing two files which were 
non-essential so we commented them out.
</p>

<p>
Thanks for any ideas, and for all previous help.
</p>

<p>
Sindi Keesan
</p>

<p>
----- End forwarded message -----
</p>

<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Tue, 20 Feb 2007 22:06:26 -0500 (EST)</b>
</p>

<p>
On Mon, 29 Jan 2007, Rick Moen wrote:
</p>

<pre>
&gt;&gt; Besides  running Opera (and maybe dialing and/or loading Xvesa and
&gt;&gt; rxvt) as user should I take any other precautions on their computers?
&gt;
&gt; I don't know how many times I'm willing to say "Your design is
&gt; fundamentally bad, if only because it uses root logins by default."
&gt; This is probably the last time, as obviously I'm wasting my time.
&gt; I stated, for that reason, that I was uninterested in helping users
&gt; unwilling to do that basic step correctly -- and I meant what I said.
</pre>


<p>
We had a long discussion about why it is bad to go online as root, which 
is how Basiclinux is set up to operate.
</p>

<p>
My current compromise is to:
</p>

<p>
1.  Dial as root (because dialing as user would give the user access to 
the login name and password, which would then let anyone with access to 
the user account know these, and besides if I try to dial as user pppd 
complains about not having /etc/ppp/options, which root does not need).
</p>

<p>
2.  Copy over all the files from /root to /home/user with cp -a * and also 
cp -a .*, except that Opera has subdirectories so just start over again 
setting parameters for user.  Also chown user * and chown user .*  and 
make /dev/null writable by user.
</p>

<p>
3.  Put into /home/user/profile the line startx (rather than editing 
inittab to make vt1 run X, which does not work any more anyway once you 
add a user account).
</p>

<p>
4.  Login user, which starts X (and you can exit X if desired).
Or su user and don't start X.
</p>

<p>
5.  Run Opera or other programs from the wm menu as user (having made them 
all executable by user or chmod +s).
</p>

<p>
ssh still won't work for user:
</p>

<p>
If I su user:
</p>

<pre>
Permission denied (publickey, password, keyboard-interactive).
</pre>
If I login user:
</p>

<pre>
ssh_askpass:  exec (/opt/diet/libexec/ssh_askpass):  No such file or directory.
Write failed:  broken pipe
</pre>
(I don't even have an /opt).
</p>

<p>
I will solve the problem of files needed by user but not root for ssh 
eventually.  The paths are different for user and root (user has no /sbin 
or /usr/sbin).  So pppd is not on the path for user (/usr/sbin) Probably 
because user is not supposed to dial.  But ssh is on the path.  I will try 
to find instructions for our ssh.  I may need /home/user/.ssh/config or 
/etc/ssh/ssh_config
</p>

<p>
I have set up a computer for a friend to use without ssh, as above.
</p>

<p>
Thanks to all of you for the help.
</p>

<p>
I ran across an article by Rick on using multiple monitors with X.
TAG once helped me use two monitors without X (MGA and VGA cards).
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Sat, 24 Feb 2007 20:49:42 -0500</b>
</p>

<p>
On Tue, Feb 20, 2007 at 10:06:26PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; On Mon, 29 Jan 2007, Rick Moen wrote:
&gt; &gt;&gt; Besides  running Opera (and maybe dialing and/or loading Xvesa and
&gt; &gt;&gt; rxvt) as user should I take any other precautions on their computers?
&gt; &gt;
&gt; &gt; I don't know how many times I'm willing to say "Your design is
&gt; &gt; fundamentally bad, if only because it uses root logins by default."
&gt; &gt; This is probably the last time, as obviously I'm wasting my time.
&gt; &gt; I stated, for that reason, that I was uninterested in helping users
&gt; &gt; unwilling to do that basic step correctly -- and I meant what I said.
&gt; 
&gt; 
&gt; We had a long discussion about why it is bad to go online as root, which 
&gt; is how Basiclinux is set up to operate.
&gt; 
&gt; My current compromise is to:
&gt; 
&gt; 1.  Dial as root (because dialing as user would give the user access to 
&gt; the login name and password, which would then let anyone with access to 
&gt; the user account know these, and besides if I try to dial as user pppd 
&gt; complains about not having /etc/ppp/options, which root does not need).
</pre>

<p>
Just to correct a misconception on your part: the information in
/etc/ppp/*-secrets does not have to be readable by the user; this is why
'/usr/sbin/pppd' is set SUID 0. In fact, that's the default
configuration on every Linux system I've seen, including the one I've
just set up on my new laptop:
</p>

<p>
<pre class="code">
ben at Tyr:~$ ls -l /usr/sbin/pppd /etc/ppp/*secrets
-rw------- 1 root root     80 2006-05-30 20:58 /etc/ppp/chap-secrets
-rw------- 1 root root   1628 2006-05-30 20:58 /etc/ppp/pap-secrets
-rwsr-xr-- 1 root dip  306720 2006-07-05 06:22 /usr/sbin/pppd
</pre>
The above means that any user who is part of group 'dip' can execute
'pppd' - and since 'pppd' runs as root, it can read the files that
contain the name and the password.
</p>

<p>
In other words, it appears as though you're taking a mechanism that
works just fine and changing it so that it will do the same thing as
it's doing now. I suggest that understanding the current mechanism would
serve you better than trying to construct something new from the ground
up - especially since it's not new.
</p>


<pre>
&gt; 3.  Put into /home/user/profile the line startx (rather than editing 
&gt; inittab to make vt1 run X, which does not work any more anyway once you 
&gt; add a user account).
</pre>

<p>
This means, of course, that you'll be trying to start X every time you
log in. Perhaps making it conditional would work better.
 
</p>

<pre>
&gt; Permission denied (publickey, password, keyboard-interactive).
&gt; 
&gt; If I login user:
&gt; 
&gt; ssh_askpass:  exec (/opt/diet/libexec/ssh_askpass):  No such file or 
&gt; directory.
&gt; Write failed:  broken pipe
&gt; 
&gt; (I don't even have an /opt).
</pre>

<p>
In that case, either recompiling 'ssh' to look for 'ssh_askpass' in a
different place, or creating the above path and a link to the
actual location of 'ssh_askpass' should help.
 
</p>

<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Tue, 27 Feb 2007 00:13:34 -0500 (EST)</b>
</p>

<p>
On Mon, 26 Feb 2007, Ben Okopnik wrote:
</p>

<pre>
&gt;&gt;
&gt;&gt; We had a long discussion about why it is bad to go online as root, which
&gt;&gt; is how Basiclinux is set up to operate.
&gt;&gt;
&gt;&gt; My current compromise is to:
&gt;&gt;
&gt;&gt; 1.  Dial as root (because dialing as user would give the user access to
&gt;&gt; the login name and password, which would then let anyone with access to
&gt;&gt; the user account know these, and besides if I try to dial as user pppd
&gt;&gt; complains about not having /etc/ppp/options, which root does not need).
&gt;
&gt; Just to correct a misconception on your part: the information in
&gt; /etc/ppp/*-secrets does not have to be readable by the user; this is why
&gt; '/usr/sbin/pppd' is set SUID 0. In fact, that's the default
&gt; configuration on every Linux system I've seen, including the one I've
&gt; just set up on my new laptop:
</pre>

<p>
We don't HAVE a /usr/sbin/pppd.  We use eznet to dial with (it tells pppd 
what to do) and it uses /var/eznet/eznet.conf which contains login info.
</p>

<p>
When I try to dial as user, pppd wants /etc/ppp/options (which we also do 
not have).  When I dial as root that is not needed.
</p>


<pre>
&gt;
&gt; ``
&gt; ben at Tyr:~$ ls -l /usr/sbin/pppd /etc/ppp/*secrets
&gt; -rw------- 1 root root     80 2006-05-30 20:58 /etc/ppp/chap-secrets
&gt; -rw------- 1 root root   1628 2006-05-30 20:58 /etc/ppp/pap-secrets
&gt; -rwsr-xr-- 1 root dip  306720 2006-07-05 06:22 /usr/sbin/pppd
&gt; '''
&gt;
&gt; The above means that any user who is part of group 'dip' can execute
&gt; 'pppd' - and since 'pppd' runs as root, it can read the files that
&gt; contain the name and the password.
</pre>

<p>
In my attempts to dial I ended up with pppd -rwsr-sr-x root root
I am experimenting ....
chgrp users pppd  chmod o-r pppd    chmod g-s pppd
</p>

<p>
Ten minutes later I have -rwsr-xr-- root users pppd
</p>

<p>
This linux came with one 'user' login who lives in /home/user and uses 
/bin/sh.  Root uses /bin/bash (according to /etc/passwd).  I had to make 
/home/user owned by user (chown -R user user chgrp -R users user) before I 
could save anything to it.  As I said, this is a single-user distribution.
</p>

<p>
I compiled a new busybox which has adduser and addgroup (my linux had 
neither).  I have used adduser once.
</p>

<p>
addgroup users tells me it is already in use.
</p>

<p>
Next problem is that we are dialing with eznet not directly with pppd.
</p>

<p>
My pap-secrets is also not world-readable and it contains the same login 
and password info as eznet.conf.  I don't know where eznet looks for 
info.
</p>

<p>
I think you are saying if I set pppd SUID, then the user can use pppd, 
which can read the login and password info from pap-secrets, but the user 
cannot do that directly, so it is safe.  But I don't know how to dial with 
pppd directly, just via eznet.
</p>

<p>
I will set eznet like pppd.
</p>

<p>
It is currently -rwsr-sr-x root root - probably should not be executable 
by user.  chgrp users eznet  chmod u+s eznet
Now -rwsr-xr-- root users
</p>

<pre>
eznet.conf is -rw-------   readable by root like pap-secrets.
</pre>
An attempt to dial as user STILL wants /etc/ppp/options.
</p>

<p>
(I hope I can still dial as root after all this.)
</p>


<p>
Does the following help any:
</p>

<p>
I can type 'eznet up 4' to get the fourth login and password etc. (set up 
to use the lucent modem) listed in eznet.conf.  ps lists as a process:
</p>

<pre>
/usr/sbin/pppd /dev/ttyLT0 115200 connect /usr/bin/eznet chat 4 
defaultroute lock modem mtu 552 mru 5 (goes off the screen).
</pre>
(LT0 is a lucent modem for which I somehow managed to compile the 
modules.  It does not keep disconnecting due to line noise like the 
external 1997 USR that I updated from X2 to v90. crw-r--r-- root root).
</p>


<pre>
&gt; In other words, it appears as though you're taking a mechanism that
&gt; works just fine and changing it so that it will do the same thing as
&gt; it's doing now. I suggest that understanding the current mechanism would
&gt; serve you better than trying to construct something new from the ground
&gt; up - especially since it's not new.
</pre>

<p>
I don't have the standard setup to start with.
</p>


<pre>
&gt;&gt; 3.  Put into /home/user/profile the line startx (rather than editing
&gt;&gt; inittab to make vt1 run X, which does not work any more anyway once you
&gt;&gt; add a user account).
&gt;
&gt; This means, of course, that you'll be trying to start X every time you
&gt; log in. Perhaps making it conditional would work better.
</pre>

<p>
This is only for other people who only want to use opera in linux.  I want 
to save them a step.  But this stopped working.
</p>

<p>
To use X as user I needed to make Xvesa and rxvt o+x (or it would complain 
about permissions) and also suid root (Xvesa told me so).
</p>

<pre>
-rws--x--x root root Xvesa 
-rws--x--x root root rxvt
</pre>
Then rxvt complained  about pseudo-ttys so I changed permissions:
</p>

<pre>
crw-rw-rw- root tty   ttyp1 
crw--w--w- user users ttyp2
crw-rw-rw- root root  ttyp3 through 6
</pre>
Should these all be readable by user or just writeable? 
Probably root tty for all.
</p>

<p>
It is much easier to just dial as root then proceed as user. Lynx and 
links worked perfectly.  I need to load Xvesa and rxvt as user to use
opera as user.
</p>

<p>
I had to change permissions to make /dev/null writeable by user for opera.
And chown -R user user to /home/user.
</p>

<p>
pppd and ssh  are still looking for files I don't even have.
</p>


<pre>
&gt;&gt; Permission denied (publickey, password, keyboard-interactive).
&gt;&gt;
&gt;&gt; If I login user:
&gt;&gt;
&gt;&gt; ssh_askpass:  exec (/opt/diet/libexec/ssh_askpass):  No such file or
&gt;&gt; directory.
&gt;&gt; Write failed:  broken pipe
&gt;&gt;
&gt;&gt; (I don't even have an /opt).
</pre>


<pre>
&gt; In that case, either recompiling 'ssh' to look for 'ssh_askpass' in a
&gt; different place, or creating the above path and a link to the
&gt; actual location of 'ssh_askpass' should help.
</pre>

<p>
I don't know how to compile ssh.  Our distribution author did it 
(statically against uclibc).  A few of our users know how to compile and 
one of them is in TAG.  He will try to compile uclibc-static latest 
openssh, and maybe can explain how to use ssh as user in our distribution. 
We don't have a default config file for ssh either.
</p>

<p>
I don't have an ssh_askpass any more than I do /etc/ppp/options.  I don't 
even have an /opt - that is for some other distribution, I think.
It works for root without either of those.  Might this be related to user 
using /bin/sh and root using /bin/bash?  Root has a .bashrc which user 
may not be accessing but it only sets the prompt and a few aliases.
I am lost here.
</p>

<p>
Is ssh not secure enough to use as root?  I no longer telnet.
</p>

<p>
I just compiled putty's psftp and pscp for secure file transfers instead 
of kermit ftp or busybox ftpput and ftpget.
</p>

<p>
This reply took a couple of hours.  I am learning a lot.  Thanks.
</p>

<p>
Sindi Keesan
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Tue, 27 Feb 2007 13:05:21 -0500</b>
</p>

<p>
On Tue, Feb 27, 2007 at 12:13:34AM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; On Mon, 26 Feb 2007, Ben Okopnik wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; We had a long discussion about why it is bad to go online as root, which
&gt; &gt;&gt; is how Basiclinux is set up to operate.
&gt; &gt;&gt;
&gt; &gt;&gt; My current compromise is to:
&gt; &gt;&gt;
&gt; &gt;&gt; 1.  Dial as root (because dialing as user would give the user access to
&gt; &gt;&gt; the login name and password, which would then let anyone with access to
&gt; &gt;&gt; the user account know these, and besides if I try to dial as user pppd
&gt; &gt;&gt; complains about not having /etc/ppp/options, which root does not need).
&gt; &gt;
&gt; &gt; Just to correct a misconception on your part: the information in
&gt; &gt; /etc/ppp/*-secrets does not have to be readable by the user; this is why
&gt; &gt; '/usr/sbin/pppd' is set SUID 0. In fact, that's the default
&gt; &gt; configuration on every Linux system I've seen, including the one I've
&gt; &gt; just set up on my new laptop:
&gt; 
&gt; We don't HAVE a /usr/sbin/pppd.  
</pre>

<p>
The fact that you've emphasized this implies that you find it
meaningful, but I'm at a loss as to why. You clearly have a 'pppd'
<strong>somewhere</strong>; this means that you can follow the same method as everyone
else who uses 'pppd' - i.e., make the executable SUID 0 and executable
by some group, then make those users who should be able to dial out part
of that group. Where's the problem?
</p>


<pre>
&gt; We use eznet to dial with (it tells pppd 
&gt; what to do) and it uses /var/eznet/eznet.conf which contains login info.
&gt; 
&gt; When I try to dial as user, pppd wants /etc/ppp/options (which we also do 
&gt; not have).
</pre>

<p>
Honestly, this is getting rather silly. If your software complains about
not having some file - particularly if that file doesn't need to have
anything special in it and doesn't require a large amount of space -
then why not create it, perhaps by copying it from a working system?  In
the case of '/etc/ppp/options', on my system, it's just a tiny text file
that contains about 100 bytes of non-comment text:
</p>

<pre>
ben at Tyr:~$ grep '^[^#]' /etc/ppp/options
asyncmap 0
auth
crtscts
lock
hide-password
modem
proxyarp
lcp-echo-interval 30
lcp-echo-failure 4
noipx
</pre>

<pre>
&gt; &gt; ``
&gt; &gt; ben at Tyr:~$ ls -l /usr/sbin/pppd /etc/ppp/*secrets
&gt; &gt; -rw------- 1 root root     80 2006-05-30 20:58 /etc/ppp/chap-secrets
&gt; &gt; -rw------- 1 root root   1628 2006-05-30 20:58 /etc/ppp/pap-secrets
&gt; &gt; -rwsr-xr-- 1 root dip  306720 2006-07-05 06:22 /usr/sbin/pppd
&gt; &gt; '''
&gt; &gt;
&gt; &gt; The above means that any user who is part of group 'dip' can execute
&gt; &gt; 'pppd' - and since 'pppd' runs as root, it can read the files that
&gt; &gt; contain the name and the password.
&gt; 
&gt; In my attempts to dial I ended up with pppd -rwsr-sr-x root root
&gt; I am experimenting ....
&gt; chgrp users pppd  chmod o-r pppd    chmod g-s pppd
&gt; 
&gt; Ten minutes later I have -rwsr-xr-- root users pppd
</pre>

<p>
Well, Sindi... if you don't explicitly mention that you need help with
permissions/ownership, then you're not likely to get it. Reading the
relevant manpages would have helped, and in significantly less than 10
minutes (and please don't tell me that you don't have them on your
system; at this point, searching google for "man chmod" brings up the
'chmod' manpage as the first hit.)
</p>

<pre>
chown root.pppd pppd
chmod 4754 pppd
</pre>

<pre>
&gt; This linux came with one 'user' login who lives in /home/user and uses 
&gt; /bin/sh.  Root uses /bin/bash (according to /etc/passwd).  I had to make 
&gt; /home/user owned by user (chown -R user user chgrp -R users user) before I 
&gt; could save anything to it.  As I said, this is a single-user distribution.
</pre>

<p>
Clearly a very badly-configured one. A home directory where you can't
save anything as that user? That's pretty bad.
 
</p>

<pre>
&gt; I compiled a new busybox which has adduser and addgroup (my linux had 
&gt; neither).  I have used adduser once.
</pre>

<p>
Perhaps you should use 'useradd' instead. 'adduser', etc., are front
ends to that whole toolkit.
 
</p>

<pre>
&gt; addgroup users tells me it is already in use.
</pre>

<p>
The simplest way to add an existing user to an existing group is by
editing '/etc/group'. The <em>safe</em> and simple way to do it is by using
'vigr'.
 
</p>

<pre>
&gt; Next problem is that we are dialing with eznet not directly with pppd.
&gt; 
&gt; My pap-secrets is also not world-readable and it contains the same login 
&gt; and password info as eznet.conf.  I don't know where eznet looks for 
&gt; info.
</pre>

<p>
I'm not familiar with 'eznet' - I've never used it. Anytime I need to
connect by dialing - and I do this every day with my Aircard - I just
use 'pppd' directly (e.g., 'pppd call aircard' for the 'aircard'
configuration.) I do this as a non-root user, and haven't had any
problems related to the functioning of 'pppd' itself.
 
</p>

<pre>
&gt; I think you are saying if I set pppd SUID, then the user can use pppd, 
&gt; which can read the login and password info from pap-secrets, but the user 
&gt; cannot do that directly, so it is safe.  But I don't know how to dial with 
&gt; pppd directly, just via eznet.
</pre>

<p>
Based on what you've said (i.e., that eznet is a front end to pppd),
'pppd' is already configured for you - the only thing you need to do is
find out what the name of the configuration files is. Fortunately,
that's pretty easy: take a look at '/etc/ppp/peers' - this contains all
your "dialup configurations". If these don't contain root-only options
such as 'noauth' (and there's rarely any reason for having such
options), then a non-root user can just enter
</p>

<pre>
pppd call foo
</pre>
where 'foo' is the name of the config file from '/etc/ppp/peers', to
dial.
'
 
</p>

<pre>
&gt; Does the following help any:
&gt; 
&gt; I can type 'eznet up 4' to get the fourth login and password etc. (set up 
&gt; to use the lucent modem) listed in eznet.conf.  ps lists as a process:
&gt; 
&gt; /usr/sbin/pppd /dev/ttyLT0 115200 connect /usr/bin/eznet chat 4 
&gt; defaultroute lock modem mtu 552 mru 5 (goes off the screen).
</pre>

<p>
If you use the 'w' option to 'ps', it'll wrap the line.
 
</p>

<pre>
&gt; &gt; In other words, it appears as though you're taking a mechanism that
&gt; &gt; works just fine and changing it so that it will do the same thing as
&gt; &gt; it's doing now. I suggest that understanding the current mechanism would
&gt; &gt; serve you better than trying to construct something new from the ground
&gt; &gt; up - especially since it's not new.
&gt; 
&gt; I don't have the standard setup to start with.
</pre>

<p>
Then whoever set up the distro broke that standard setup for no reason.
In fact, that sounds like the core of all your problems - pretty much
everything you've asked here in this regard has been a standard
"question" in Unix that got answered a long time ago by either designing
a better system or defining a specific method for dealing with the
problem. In addition, all these things have been refined and "tuned"
over time to eliminate or avoid security problems, problematic edge
cases, etc. Now, it sounds like whoever put this distro together has
recreated these ancient problems - and you're stuck trying to solve
them. The only question, given the plethora of other, <strong>well-working</strong>
distros out there is "why"?
</p>

<p>
If you were doing this because you wanted to learn how to solve
low-level Linux problems, perhaps this would be a good approach.
However, you keep mentioning having to accomodate users; this is like
trying to design a brand-new type of chainsaw and handing it out to
random people to use while it's still in the prototype stage. The
results that you're getting are - well, exactly what could be expected
of such actions.
 
</p>

<pre>
&gt; &gt; In that case, either recompiling 'ssh' to look for 'ssh_askpass' in a
&gt; &gt; different place, or creating the above path and a link to the
&gt; &gt; actual location of 'ssh_askpass' should help.
&gt; 
&gt; I don't know how to compile ssh.
</pre>

<p>
Then create the path, as I've mentioned.
</p>


<pre>
&gt; This reply took a couple of hours.  I am learning a lot.  Thanks.
</pre>

<p>
I'm glad that you're finding this helpful, but you're working with a
broken system and learning many lessons that are going to be useless in
normal scenarios (along with some that will be useful.) I would
seriously suggest exploring other distros.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Tue, 27 Feb 2007 16:28:44 -0500</b>
</p>

<p>
On Tue, Feb 27, 2007 at 02:35:54PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; On Tue, 27 Feb 2007, Ben Okopnik wrote:
&gt; &gt;&gt;We don't HAVE a /usr/sbin/pppd.
&gt; 
&gt; Please forgive this error.  It was getting quite late.  
</pre>

<p>
Quite all right; I'm running pretty short of sleep myself, so I know
what it's like. <img src="../gx/smile.png" alt=":)">
</p>


<pre>
&gt; We do have 
&gt; /usr/sbin/pppd but when I dial as user it wants /etc/ppp/options, which is 
&gt; what we do not have.
&gt; 
&gt; &gt;Honestly, this is getting rather silly. If your software complains about
&gt; &gt;not having some file - particularly if that file doesn't need to have
&gt; &gt;anything special in it and doesn't require a large amount of space -
&gt; &gt;then why not create it, perhaps by copying it from a working system?  In
&gt; &gt;the case of '/etc/ppp/options', on my system, it's just a tiny text file
&gt; &gt;that contains about 100 bytes of non-comment text:
&gt; &gt;
&gt; &gt;``
&gt; &gt;ben at Tyr:~$ grep '^[^#]' /etc/ppp/options
&gt; &gt;asyncmap 0
&gt; &gt;auth
&gt; &gt;crtscts
&gt; &gt;lock
&gt; &gt;hide-password
&gt; &gt;modem
&gt; &gt;proxyarp
&gt; &gt;lcp-echo-interval 30
&gt; &gt;lcp-echo-failure 4
&gt; &gt;noipx
&gt; &gt;''
&gt; 
&gt; I copied this to /etc/ppp/options (without the`` '')
&gt; -rw-r--r-- root root /etc/ppp/options   - is this correct?
</pre>

<p>
Yes.
 
</p>

<pre>
&gt; Now when I try to dial (never mind that I am already dialed as root):
&gt; 
&gt; The remote system (x0) is required to authenticate itself but I couldn't 
&gt; find any suitable secret (password) for it to use to do so.
</pre>

<p>
Right - this means that you don't have a password defined for that
system. For your reference, here's the standard method of setting up a
PPP connection (there are plenty of setup scripts that can make this
easier, but you clearly want to know how to do it manually) is as
follows:
</p>

<p>
1) Pick a name for the connection (e.g., 'my_isp'.)
</p>

<p>
2) Create /etc/chatscripts/my_isp, typically by copying one of the
default scripts (e.g., /etc/chatscripts/provider); these define the
host negotiations for dial-up connections. A common chatscript might
look like this:
</p>

<pre>
ABORT        BUSY
ABORT        "NO CARRIER"
ABORT        VOICE
ABORT        "NO DIALTONE"
""           ATZW2
OK           ATDT&lt;put phone number here&gt;
ogin         &lt;put login name here&gt;
word         \q&lt;put password here&gt;
</pre>
3) Create '/etc/ppp/peers/my_isp' - usually by copying something like 
'/etc/ppp/peers/provider' and setting the 'user' and 'connect'
parameters as well as the modem interface and connection speed. A
common peer config might look like this:
</p>

<pre>
# Replace with actual name/domain.
user "myusername at domain"
# Replace <strong>******</strong> with phone number.
connect "/usr/sbin/chat -v -f /etc/chatscripts/pap -T ********"
# Serial device to which the modem is connected.
/dev/modem
# Speed of the serial line.
115200
# Assumes that your IP address is allocated dynamically by the ISP.
noipdefault
# Try to get the name server addresses from the ISP.
usepeerdns
# Use this connection as the default route.
defaultroute
# Makes pppd "dial again" when the connection is lost.
persist
# Do not ask the remote to authenticate.
noauth
</pre>
4) Enter the password into '/etc/ppp/pap-secrets' (this requires root
access, since the file is not even readable otherwise.) The format is
</p>

<pre>
*	password
</pre>
unless you want to dial several ISPs with different passwords, in which
case the '*' is replaced with the actual hostname.
 
</p>

<pre>
&gt; I read Running Linux 2nd edition.  I also have 'Linux Man' old version but 
&gt; man pages use a lot of unfamiliar vocabulary.  It would have gone faster 
&gt; if I had been more awake (and I may have been exaggerating just a bit 
&gt; about 10 min).
&gt; 
&gt; &gt;``
&gt; &gt;chown root.pppd pppd
&gt; &gt;chmod 4754 pppd
&gt; &gt;''
&gt; 
&gt; It is easier for me to remember o+x than the numbers.
</pre>

<p>
[shrug] In some cases, it's a lot more difficult to do it with the
relative permission settings; the absolute ones (the numbers) let you do
it all in one shot.
 
</p>

<pre>
&gt; &gt;&gt;This linux came with one 'user' login who lives in /home/user and uses
&gt; &gt;&gt;/bin/sh.  Root uses /bin/bash (according to /etc/passwd).  I had to make
&gt; &gt;&gt;/home/user owned by user (chown -R user user chgrp -R users user) before I
&gt; &gt;&gt;could save anything to it.  As I said, this is a single-user distribution.
&gt; &gt;
&gt; &gt;Clearly a very badly-configured one. A home directory where you can't
&gt; &gt;save anything as that user? That's pretty bad.
&gt; 
&gt; It was designed to use as root.  The author says we are on our own if we 
&gt; want to use it as user.
</pre>

<p>
Yep. That's BAD (Broken As Designed.)
</p>


<pre>
&gt; &gt;Then whoever set up the distro broke that standard setup for no reason.
&gt; 
&gt; To make it small enough to fit on 2 floppy disks, including X, a browser, 
&gt; a viewer, a window manager, a dialing program, a mail program and a lot of 
&gt; utilities.  The first disk can be used alone for rescue.
</pre>

<p>
There are at least a few that meet those requirements, as I understand
it.
</p>

<p>
<a href="http://www.linuxlinks.com/Distributions/Floppy/">http://www.linuxlinks.com/Distributions/Floppy/</a>
 
</p>

<pre>
&gt; &gt;I'm glad that you're finding this helpful, but you're working with a
&gt; &gt;broken system and learning many lessons that are going to be useless in
&gt; &gt;normal scenarios (along with some that will be useful.) I would
&gt; &gt;seriously suggest exploring other distros.
&gt; 
&gt; I tried installing a few and uninstalled them again.  I did not like 
&gt; Redhat, Caldera (horrible on older hardware), Debian (does too much 
&gt; automatically).  SuSE was okay, but I prefer Slackware and this is a small 
&gt; version of it that I can add to as needed.  The default small installation 
&gt; of SW10.2 used up 64MB immediately running daemons I did not ask for.  It 
&gt; would be a lot of work to strip Slackware.  We are putting linux on 
&gt; computers with 32MB RAM.
</pre>

<p>
Again, I'd suggest looking at the above list (among many others on the
Net); a number of those distros are designed for exactly the purpose
you've described. The ones you've just mentioned are all "full-sized"
distros, and not suitable for the hardware you've mentioned.
 
</p>

<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Wed, 28 Feb 2007 18:39:34 -0500 (EST)</b>
</p>

<p>
To dial I needed to chmod +s eznet, which lets eznet use pppd, which is 
not on the path for user and does not need to be suid or executable by 
user.  So I am dialed as user on all three computers now.
</p>



<p>
rxvt works for user in Basiclinux 3.40, where it is compiled not to need 
libXPM or lib-ldlinux just libX11 and libc.so.5
</p>

<p>
In BL2.1 (libc6) it cannot open pseudo-tty. rxvt -h lists XPM and utmp. 
I read something about pseudoterminals and registering users in 
/var/log/utmp (which of course we do not have).  Perhaps if compiled 
without the utmp stuff it would work without a utmp file in BL2.1.
</p>

<p>
I have switched to xterm, which needs a long list of libraries but not 
XPM.
</p>



<p>
My remaining problem is that ssh is working on one computer (with a 
standard hardware modem) but not on the two with internal lucent modems 
(where pppd for some reason is accessing ttyS1 and also ttyLT0).
</p>

<p>
Host key verification failed if I ssh without the login.
</p>

<pre>
ssh keesan at xxxx 
Permission denied (publickey,password,keyboard-interactive).
</pre>
Same permissions on ssh and on the .ssh files in both computers.
</p>

<p>
Same problem whether or not I copy over known_hosts from /root/.ssh .
</p>

<p>
ssh -v keesan at xxxx  generates a long message ending in
debug1:  expecting SSH2_MSG_KEX_DH_GEX_INIT_REPLY
Host key verification failed.
</p>

<p>
First it received one expected string but not another one.
</p>

<p>
ssh -v keesan at xxx &gt; ssh.log saves a zero-length file.
</p>

<p>
I am happy dialing as user and ssh'ing as root, and my friends are 
unlikely to ssh at all, but I would like to understand what is going on 
with ssh.  This continues to be educational.
</p>

<p>
Someone did once send out a generic mail to previous question-askers 
asking for more questions.  This might be more than you asked for.
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Kapil Hari Paranjape [kapil at imsc.res.in]
</p>
</b><br />
<b>Wed, 28 Feb 2007 17:12:52 -0800</b>
</p>

<p>
Hello,
</p>

<p>
On Wed, 28 Feb 2007, Sindi Keesan wrote:
</p>

<pre>
&gt; In BL2.1 (libc6) it cannot open pseudo-tty. rxvt -h lists XPM and utmp. 
&gt; I read something about pseudoterminals and registering users in 
&gt; /var/log/utmp (which of course we do not have).  Perhaps if compiled 
&gt; without the utmp stuff it would work without a utmp file in BL2.1.
</pre>

<p>
The "-ut" switch to rxvt or a suitable entry in the application
defaults file for rxvt may help you. The man page says.
</p>

<pre>
	rxvt(1):
 
	       -ut|+ut
			     Inhibit/enable writing a utmp entry; resource
			     utmp-Inhibit.
</pre>
Regards,
</p>

<p>
Kapil.
--
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Kapil Hari Paranjape [kapil at imsc.res.in]
</p>
</b><br />
<b>Wed, 28 Feb 2007 17:13:47 -0800</b>
</p>

<p>
Hello,
</p>

<p>
On Wed, 28 Feb 2007, Sindi Keesan wrote:
</p>

<pre>
&gt; I am happy dialing as user and ssh'ing as root, and my friends are 
&gt; unlikely to ssh at all, but I would like to understand what is going on 
&gt; with ssh.  This continues to be educational.
</pre>

<p>
I don't understand your setup and the places where files are to be
found but in case this is useful here is a (very) simplified version
of the steps that are performed by SSH:
</p>

<p>
1. Client establishes TCP connection to server.
</p>

<p>
2. Server sends a its "Host Key".
</p>

<p>
3. Client checks the "Host Key" against its "Known Hosts" or prompts the user for acceptance of the "unknown Host Key" if "StrictHostKeyChecking=no".
 
4. If the Client accepts this then it proceeds to authenticate itself.
</p>

<p>
Your ssh attempt is failing at step (3).
</p>

<p>
Regards,
</p>

<p>
Kapil.
--
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Kapil Hari Paranjape [kapil at imsc.res.in]
</p>
</b><br />
<b>Wed, 28 Feb 2007 17:15:12 -0800</b>
</p>

<p>
Hello,
</p>

<p>
On Wed, 28 Feb 2007, Sindi Keesan wrote:
</p>

<pre>
&gt; Someone did once send out a generic mail to previous question-askers 
&gt; asking for more questions.  This might be more than you asked for.
</pre>

<p>
A suggestion:
I understand that you want to create a minimal distribution.
There is no reason for you to <strong>use</strong> a minimal distribution while
designing one. Having a full-fledged working distribution may give
you a better idea of what you want to leave in in the minimal one.
Moreover, on a full-fledged distribution you can read man pages, run
strace/ltrace and possibly even run the debugger. You can test the
mini-distribution in a user-mode-linux or a qemu or some other
virtualised sub-box if you don't feel like booting all the time.
</p>

<p>
I think you can have a full-fledged development box with about 4MB
of RAM providing you don't use X and are willing to wait a while for
compiles. I recall building linux (ver 1.x), libc, basic utilities,
vi, emacs and tex on a 386 which had 4MB of RAM and 500MB of disk. It
took a while but it worked.
</p>

<p>
Regards,
</p>

<p>
Kapil.
--
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Wed, 28 Feb 2007 22:28:30 -0500</b>
</p>

<p>
On Wed, Feb 28, 2007 at 06:39:34PM -0500, Sindi Keesan wrote:
</p>

<pre>
&gt; 
&gt; My remaining problem is that ssh is working on one computer (with a 
&gt; standard hardware modem) but not on the two with internal lucent modems 
&gt; (where pppd for some reason is accessing ttyS1 and also ttyLT0).
</pre>

<p>
SSH is an application; it doesn't (can't) care about the kind of
hardware you use for networking.
 
</p>

<pre>
&gt; Host key verification failed if I ssh without the login.
</pre>

<p>
Quick guide to SSH "key auth" configuration, assuming "host1" as your
computer, "host2" as the remote machine, and "keesan" as the name of the
user on both hosts:
</p>

<p>
1) Create the public/private keypair on host1 by running "ssh-keygen -t dsa".
</p>

<p>
2) Copy the <strong>public</strong> key (the contents of /home/keesan/.ssh/id_dsa.pub)
from host1 into /home/keesan/.ssh/authorized_keys on host2.
</p>

<p>
3) Execute "ssh keesan at host2" on host1 to log into host2.
</p>

<p>
If you suspect that you messed up anywhere along the way, wipe out all
the files in ~/.ssh on both machines and restart from scratch.
</p>


<pre>
&gt; ssh keesan at xxxx 
&gt; Permission denied (publickey,password,keyboard-interactive).
&gt; 
&gt; 
&gt; Same permissions on ssh and on the .ssh files in both computers.
&gt; 
&gt; Same problem whether or not I copy over known_hosts from /root/.ssh .
</pre>

<p>
'known_hosts' will not help you; "ssh" will update it as required. 
</p>


<pre>
&gt; ssh -v keesan at xxxx  generates a long message ending in
&gt; debug1:  expecting SSH2_MSG_KEX_DH_GEX_INIT_REPLY
&gt; Host key verification failed.
</pre>

<p>
That "long message" is the one you should read carefully to figure out
what problem it's reporting. However, following the above procedure
should obviate the problem.
</p>


<pre>
&gt; First it received one expected string but not another one.
&gt; 
&gt; ssh -v keesan at xxx &gt; ssh.log saves a zero-length file.
</pre>

<p>
Yep. Try "ssh -v keesan at xxx 2&gt; ssh.log" instead (the error messages
are printed to STDERR, a.k.a. file descriptor 2.)
 
</p>

<pre>
&gt; I am happy dialing as user and ssh'ing as root, and my friends are 
&gt; unlikely to ssh at all, but I would like to understand what is going on 
&gt; with ssh.  This continues to be educational.
</pre>

<p>
As Kapil pointed out, if you <em>really</em> want to know what's going on, use
a non-broken distro and run 'strace'. You'll see all the system calls,
failed file requests, etc.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]
</p>
</b><br />
<b>Tue, 27 Feb 2007 14:56:29 -0500</b>
</p>

<p>
----- Forwarded message from Sindi Keesan &lt;keesan at grex.cyberspace.org&gt; -----
</p>

<pre>
Date: Tue, 27 Feb 2007 14:35:54 -0500 (EST)
From: Sindi Keesan &lt;keesan@grex.cyberspace.org&gt;
To: TAG &lt;tag@lists.linuxgazette.net&gt;
To: Ben Okopnik &lt;ben at linuxgazette.net&gt;
</pre>cc: Sindi Keesan &lt;keesan at grex.cyberspace.org&gt;
<pre>
Subject: Re: [TAG] lpr works for user not root in Basiclinux 2.1
</pre>Sender: Sindi Keesan &lt;keesan at cyberspace.org&gt;
</p>

<p>
On Tue, 27 Feb 2007, Ben Okopnik wrote:
</p>

<pre>
&gt;&gt;We don't HAVE a /usr/sbin/pppd.
</pre>

<p>
Please forgive this error.  It was getting quite late.  We do have 
/usr/sbin/pppd but when I dial as user it wants /etc/ppp/options, which is 
what we do not have.
</p>


<pre>
&gt;Honestly, this is getting rather silly. If your software complains about
&gt;not having some file - particularly if that file doesn't need to have
&gt;anything special in it and doesn't require a large amount of space -
&gt;then why not create it, perhaps by copying it from a working system?  In
&gt;the case of '/etc/ppp/options', on my system, it's just a tiny text file
&gt;that contains about 100 bytes of non-comment text:
&gt;
&gt;``
&gt;ben at Tyr:~$ grep '^[^#]' /etc/ppp/options
&gt;asyncmap 0
&gt;auth
&gt;crtscts
&gt;lock
&gt;hide-password
&gt;modem
&gt;proxyarp
&gt;lcp-echo-interval 30
&gt;lcp-echo-failure 4
&gt;noipx
&gt;''
</pre>

<p>
I copied this to /etc/ppp/options (without the`` '')
<pre>
-rw-r--r-- root root /etc/ppp/options 
</pre>
  - is this correct?
</p>

<p>
Now when I try to dial (never mind that I am already dialed as root):
</p>

<p>
The remote system (x0) is required to authenticate itself but I couldn't 
find any suitable secret (password) for it to use to do so.
</p>

<p>
My permissions are as follows: (pppd group is 'users' not dip)
</p>


<pre>
&gt;
&gt;&gt;&gt;``
&gt;&gt;&gt;ben at Tyr:~$ ls -l /usr/sbin/pppd /etc/ppp/*secrets
&gt;&gt;&gt;-rw------- 1 root root     80 2006-05-30 20:58 /etc/ppp/chap-secrets
&gt;&gt;&gt;-rw------- 1 root root   1628 2006-05-30 20:58 /etc/ppp/pap-secrets
&gt;&gt;&gt;-rwsr-xr-- 1 root dip  306720 2006-07-05 06:22 /usr/sbin/pppd
&gt;&gt;&gt;'''
&gt;&gt;&gt;
&gt;&gt;&gt;The above means that any user who is part of group 'dip' can execute
&gt;&gt;&gt;'pppd' - and since 'pppd' runs as root, it can read the files that
&gt;&gt;&gt;contain the name and the password.
&gt;&gt;
&gt;&gt;In my attempts to dial I ended up with pppd -rwsr-sr-x root root
&gt;&gt;I am experimenting ....
&gt;&gt;chgrp users pppd  chmod o-r pppd    chmod g-s pppd
&gt;&gt;
&gt;&gt;Ten minutes later I have -rwsr-xr-- root users pppd
&gt;
&gt;Well, Sindi... if you don't explicitly mention that you need help with
&gt;permissions/ownership, then you're not likely to get it. Reading the
&gt;relevant manpages would have helped, and in significantly less than 10
&gt;minutes (and please don't tell me that you don't have them on your
&gt;system; at this point, searching google for "man chmod" brings up the
&gt;'chmod' manpage as the first hit.)
&gt;
</pre>

<p>
I read Running Linux 2nd edition.  I also have 'Linux Man' old version but 
man pages use a lot of unfamiliar vocabulary.  It would have gone faster 
if I had been more awake (and I may have been exaggerating just a bit 
about 10 min).
</p>


<pre>
&gt;``
&gt;chown root.pppd pppd
&gt;chmod 4754 pppd
&gt;''
</pre>

<p>
It is easier for me to remember o+x than the numbers.
</p>


<pre>
&gt;&gt;This linux came with one 'user' login who lives in /home/user and uses
&gt;&gt;/bin/sh.  Root uses /bin/bash (according to /etc/passwd).  I had to make
&gt;&gt;/home/user owned by user (chown -R user user chgrp -R users user) before I
&gt;&gt;could save anything to it.  As I said, this is a single-user distribution.
&gt;
&gt;Clearly a very badly-configured one. A home directory where you can't
&gt;save anything as that user? That's pretty bad.
</pre>

<p>
It was designed to use as root.  The author says we are on our own if we 
want to use it as user.  The later version of this distribution does 
provide a passwd package (based on tinylogin, with passwd, getty, su, 
login, deluser, delgroup, adduser, addgroup, group, and /etc/group 
/etc/passwd /etc/inittab) to let us add a user.  But it is libc5 and the 
larger distribution I am using is libc6 so I compiled adduser etc into 
busybox instead.  I think I can delete a user by removing a line from 
/etc/passwd.
</p>


<pre>
&gt;&gt;I compiled a new busybox which has adduser and addgroup (my linux had
&gt;&gt;neither).  I have used adduser once.
&gt;
&gt;Perhaps you should use 'useradd' instead. 'adduser', etc., are front
&gt;ends to that whole toolkit.
</pre>

<p>
Tinylogin and busybox don't have useradd.  I am trying to keep this small.
I got it working on a 386 with 3MB RAM (X is rather slow there).
</p>


<pre>
&gt;&gt;addgroup users tells me it is already in use.
&gt;
&gt;The simplest way to add an existing user to an existing group is by
&gt;editing '/etc/group'. The <em>safe</em> and simple way to do it is by using
&gt;'vigr'.
</pre>

<p>
The larger/older version has no /etc/group.  It has /etc/passwd and 
inittab.  We do not have vigr.  Since my 'user' is already in 'users' (it 
came that way with the larger version) I don't think I need to add it to 
any other group. I should probably change the password with 'passwd', 
which I compiled in busybox.  I can add more users to 'users'.   I will 
play with this later.
</p>

<pre>
busybox
adduser [OPTIONS] user_name
Adds a user to the system
 -h DIR  Assign home directory DIR
 -s SHELL Assign login shell SHELL (I wonder why our user is sh not bash)
 -G Add the user to existing group GROUP
</pre>

<pre>
&gt;
&gt;&gt;Next problem is that we are dialing with eznet not directly with pppd.
&gt;&gt;
&gt;&gt;My pap-secrets is also not world-readable and it contains the same login
&gt;&gt;and password info as eznet.conf.  I don't know where eznet looks for
&gt;&gt;info.
&gt;
&gt;I'm not familiar with 'eznet' - I've never used it. Anytime I need to
&gt;connect by dialing - and I do this every day with my Aircard - I just
&gt;use 'pppd' directly (e.g., 'pppd call aircard' for the 'aircard'
&gt;configuration.) I do this as a non-root user, and haven't had any
&gt;problems related to the functioning of 'pppd' itself.
</pre>

<p>
I would have to figure out how to do this.  Eznet is already working and 
even the friends I set up with linux can handle changing login and 
password and phone number with the script ppp-on that edits eznet.conf.
</p>


<pre>
&gt;&gt;I think you are saying if I set pppd SUID, then the user can use pppd,
&gt;&gt;which can read the login and password info from pap-secrets, but the user
&gt;&gt;cannot do that directly, so it is safe.  But I don't know how to dial with
&gt;&gt;pppd directly, just via eznet.
&gt;
&gt;Based on what you've said (i.e., that eznet is a front end to pppd),
&gt;'pppd' is already configured for you - the only thing you need to do is
&gt;find out what the name of the configuration files is. Fortunately,
&gt;that's pretty easy: take a look at '/etc/ppp/peers' - this contains all
</pre>

<p>
We don't have that file.  Just pap-secrets and eznet.conf.
Where would a configuration file go and what would it look like?
</p>


<pre>
&gt;your "dialup configurations". If these don't contain root-only options
&gt;such as 'noauth' (and there's rarely any reason for having such
&gt;options), then a non-root user can just enter
&gt;
&gt;``
&gt;pppd call foo
&gt;''
&gt;
&gt;where 'foo' is the name of the config file from '/etc/ppp/peers', to
&gt;dial.
&gt;'
&gt;
&gt;&gt;Does the following help any:
&gt;&gt;
&gt;&gt;I can type 'eznet up 4' to get the fourth login and password etc. (set up
&gt;&gt;to use the lucent modem) listed in eznet.conf.  ps lists as a process:
&gt;&gt;
&gt;&gt;/usr/sbin/pppd /dev/ttyLT0 115200 connect /usr/bin/eznet chat 4
&gt;&gt;defaultroute lock modem mtu 552 mru 5 (goes off the screen).
&gt;
&gt;If you use the 'w' option to 'ps', it'll wrap the line.
</pre>

<p>
Thanks.   .... mru 552 cr
</p>

<p>
I had had to set framebuffer console to 1024x768 to even see what I did.
</p>


<pre>
&gt;
&gt;&gt;&gt;In other words, it appears as though you're taking a mechanism that
&gt;&gt;&gt;works just fine and changing it so that it will do the same thing as
&gt;&gt;&gt;it's doing now. I suggest that understanding the current mechanism would
&gt;&gt;&gt;serve you better than trying to construct something new from the ground
&gt;&gt;&gt;up - especially since it's not new.
&gt;&gt;
&gt;&gt;I don't have the standard setup to start with.
&gt;
&gt;Then whoever set up the distro broke that standard setup for no reason.
</pre>

<p>
To make it small enough to fit on 2 floppy disks, including X, a browser, 
a viewer, a window manager, a dialing program, a mail program and a lot of 
utilities.  The first disk can be used alone for rescue.
</p>


<pre>
&gt;In fact, that sounds like the core of all your problems - pretty much
&gt;everything you've asked here in this regard has been a standard
&gt;"question" in Unix that got answered a long time ago by either designing
&gt;a better system or defining a specific method for dealing with the
&gt;problem. In addition, all these things have been refined and "tuned"
&gt;over time to eliminate or avoid security problems, problematic edge
&gt;cases, etc. Now, it sounds like whoever put this distro together has
&gt;recreated these ancient problems - and you're stuck trying to solve
&gt;them. The only question, given the plethora of other, <strong>well-working</strong>
&gt;distros out there is "why"?
&gt;
&gt;If you were doing this because you wanted to learn how to solve
&gt;low-level Linux problems, perhaps this would be a good approach.
&gt;However, you keep mentioning having to accomodate users; this is like
&gt;trying to design a brand-new type of chainsaw and handing it out to
&gt;random people to use while it's still in the prototype stage. The
&gt;results that you're getting are - well, exactly what could be expected
&gt;of such actions.
</pre>

<p>
It is small and simple and works on older hardware and I already know 
enough to support my friends using it for internet.  It does work as 
designed, for root.  I have it working with root dialing and then going 
online as user (except ssh).  I am learning a lot trying to make it do 
other things.  I prefer the do-it-yourself approach.  Start with the 
basics and add what you need, keeping it small.
</p>


<pre>
&gt;&gt;&gt;In that case, either recompiling 'ssh' to look for 'ssh_askpass' in a
&gt;&gt;&gt;different place, or creating the above path and a link to the
&gt;&gt;&gt;actual location of 'ssh_askpass' should help.
&gt;&gt;
&gt;&gt;I don't know how to compile ssh.
</pre>


<pre>
&gt;Then create the path, as I've mentioned.
</pre>

<p>
I don't have the file to create the path to, as I've mentioned (in my last 
mail).
</p>



<pre>
&gt;&gt;This reply took a couple of hours.  I am learning a lot.  Thanks.
&gt;
&gt;I'm glad that you're finding this helpful, but you're working with a
&gt;broken system and learning many lessons that are going to be useless in
&gt;normal scenarios (along with some that will be useful.) I would
&gt;seriously suggest exploring other distros.
</pre>

<p>
I tried installing a few and uninstalled them again.  I did not like 
Redhat, Caldera (horrible on older hardware), Debian (does too much 
automatically).  SuSE was okay, but I prefer Slackware and this is a small 
version of it that I can add to as needed.  The default small installation 
of SW10.2 used up 64MB immediately running daemons I did not ask for.  It 
would be a lot of work to strip Slackware.  We are putting linux on 
computers with 32MB RAM.
</p>

<p>
I like to do things the more educational way and not have a bunch of 
programs on my computer that I don't use.  Or large GUI frontends that 
don't require thinking.  Our mail list members are very helpful.  Half of 
us knew next to nothing about linux and came from DOS, and the other half 
have been teaching us and compiling.  One of them taught me to compile 
kernels and busybox.  It is a group puzzle.  I like it.  I was happy 
running as root.  Our professional users said they have had lots of 
attempted breakins while online but none never succeeded.  Possibly 
because we have no open ports/sockets.  I am willing to try to make things 
more secure anyway, but not willing enough to change distributions.
</p>

<p>
There is no point in my dialing as user until I can ssh as user because I 
spend most of my online time at four shell accounts.  But friends would 
benefit from dialing as user.  In the meantime they prefer what I gave 
them to Windows.  It is a lot more secure.
</p>

<p>
Thanks again for the help.
</p>

<p>
Sindi Keesan
</p>

<p>
----- End forwarded message -----
</p>

<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Tue, 27 Feb 2007 13:21:02 -0800</b>
</p>

<p>
Sindi Keesan &lt;keesan at grex.cyberspace.org&gt; wrote:
</p>


<pre>
&gt; SuSE was okay, but I prefer Slackware and this is a small 
&gt; version of it that I can add to as needed.  The default small installation 
&gt; of SW10.2 used up 64MB immediately running daemons I did not ask for.  It 
&gt; would be a lot of work to strip Slackware.  We are putting linux on 
&gt; computers with 32MB RAM.
</pre>

<p>
I haven't used Slackware in a long time, but recall it being very easy
to pare down, e.g., disabling unwanted processes' startup.  And
small-RAM machines were a particular strong area for that distro.  I
don't know about the prospects for shrinking it to anything like
two-floppy sizes, though.
</p>

<p>
(By the way, please remember to Reply-to-All, when you are responding to
TAG, or to mailing lists generally.  Thanks.)
</p>

<pre>-- 
Cheers, "Your program just attempted an illegal instruction.  No worries, mate."
Rick Moen                         -- Australian error messages, #14 in a series
rick at linuxmafia.com
</pre>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Tue, 27 Feb 2007 16:53:11 -0500 (EST)</b>
</p>

<p>
On Tue, 27 Feb 2007, Rick Moen wrote:
</p>


<pre>
&gt; Sindi Keesan &lt;keesan at grex.cyberspace.org&gt; wrote:
&gt;
&gt;&gt; SuSE was okay, but I prefer Slackware and this is a small
&gt;&gt; version of it that I can add to as needed.  The default small installation
&gt;&gt; of SW10.2 used up 64MB immediately running daemons I did not ask for.  It
&gt;&gt; would be a lot of work to strip Slackware.  We are putting linux on
&gt;&gt; computers with 32MB RAM.
&gt;
&gt; I haven't used Slackware in a long time, but recall it being very easy
&gt; to pare down, e.g., disabling unwanted processes' startup.  And
&gt; small-RAM machines were a particular strong area for that distro.  I
&gt; don't know about the prospects for shrinking it to anything like
&gt; two-floppy sizes, though.
</pre>

<p>
My distribution boots in 15 seconds and works in 3MB RAM.  I can put a 
20MB loop version into a DOS or Win9X partition for people to play with or 
even use.  I added it to a small partition on someone's Win98 computer in 
which the viruses had disabled the lucent modem, and it worked online. Now 
that I can dial, use X, and print as user (without a print spooler such as 
lpr) my friends won't need Win98 for wordprocessing either.  (It is their 
problem if they want to play fancy online games).  Most people I know just 
user their computers for wordprocessing, webmail, and basic web searches.
They don't need most of what comes with a distribution.
</p>

<p>
This distribution is now included in a universal boot CD.
</p>

<p>
Slackware 10.2 came with several pages of X.org default configuration. 
Our Xvesa needs no configuration.  If it does not work with some video 
card we have a simple package for using the SVGA server.  And today I got 
Scitech Display Doctor working, which might help with Xvesa compatibility 
on our older hardware. (SDD is 1998 and got a Divide error when 
self-extracting on a 2001 computer).
</p>

<p>
It may be easy for you to stop the daemons from running but it would be 
just as much work for me to disable 90% of Slackware as to add the parts I 
do want to my own distribution.
</p>

<p>
I will attempt to write up and post to my distribution mailing list all 
the changes I needed to make to get online as user, so other people can do 
it more easily.  I had problems with permissions and ownership and 
configuration files for pppd, Xvesa, rxvt, svgalib programs, various 
devices (ttyS*, ttyp*, null), the user home directory and probably more. 
Maybe the next version will have different permissions so as to work for 
user.
</p>

<p>
ssh compiled for us still is not working for user.  I can use it as root 
after dialing as user.  It wants a file which I don't need as root.
</p>

<p>
Putty's psftp which I just compiled works for user.
Putty would not compile because it is X-based and would need more 
libraries.  Another list member is working on compiling the latest openssh 
(for console) and maybe that will work better for user.
</p>


<pre>
&gt;
&gt; (By the way, please remember to Reply-to-All, when you are responding to
&gt; TAG, or to mailing lists generally.  Thanks.)
</pre>

<p>
I did this time.  There was no 'all' last time.
</p>


<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Tue, 27 Feb 2007 14:07:04 -0800</b>
</p>

<p>
Quoting Sindi Keesan (keesan at grex.cyberspace.org):
</p>


<pre>
&gt; My distribution boots in 15 seconds and works in 3MB RAM.
</pre>

<p>
3MB RAM is pretty impressive in 2007 -- but more than a bit extreme.  
(Is it a requirement?)  In any event, any Linux distro, in any decade,
that requires routine use of the root account is broken.  You might find
a suitable substitute here:  "Small Linux" on <a href="http://linuxmafia.com/kb/Admin/">http://linuxmafia.com/kb/Admin/</a> .
Note in particular:  <a href="http://www.superant.com/smalllinux/">http://www.superant.com/smalllinux/</a>
</p>

<p>
As mentioned previously, I'm not prepared to assist in encouraging
demonstrably bad habits and practices.
</p>




<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Tue, 27 Feb 2007 17:26:32 -0500 (EST)</b>
</p>

<p>
On Tue, 27 Feb 2007, Rick Moen wrote:
</p>


<pre>
&gt; Quoting Sindi Keesan (keesan at grex.cyberspace.org):
&gt;
&gt;&gt; My distribution boots in 15 seconds and works in 3MB RAM.
&gt;
&gt; 3MB RAM is pretty impressive in 2007 -- but more than a bit extreme.
&gt; (Is it a requirement?)  In any event, any Linux distro, in any decade,
&gt; that requires routine use of the root account is broken.  You might find
&gt; a suitable substitute here:  "Small Linux" on <a href="http://linuxmafia.com/kb/Admin/">http://linuxmafia.com/kb/Admin/</a> .
&gt; Note in particular:  <a href="http://www.superant.com/smalllinux/">http://www.superant.com/smalllinux/</a>
</pre>

<p>
Smallinux looks interesting but it also runs root only.  Kernel 2.0, 
libc5. I am using 2.4.31 kernel (for the usb-storage support which remains 
broken in 2.2, but which works in DOS).
</p>

<p>
3MB was not required but several of us tested it out on laptops.  The 
video was quite slow on the old style LCD screens. svgalib used less 
memory than X.  DOS with lynx for DOS worked a lot better in 3MB, with a 
small viewer (lxpic).  Our linux works nicely in 12MB.  The distribution 
is now aimed at older laptops but is expandable to work with newer 
hardware.
</p>


<pre>
&gt; As mentioned previously, I'm not prepared to assist in encouraging
&gt; demonstrably bad habits and practices.
</pre>

<p>
Several TAG people have helped me to change things.
</p>


<pre>
&gt;
&gt;
</pre>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Rick Moen [rick at linuxmafia.com]
</p>
</b><br />
<b>Tue, 27 Feb 2007 16:09:22 -0800</b>
</p>

<p>
Quoting Sindi Keesan (keesan at grex.cyberspace.org):
</p>


<pre>
&gt; Smallinux looks interesting but it also runs root only.  Kernel 2.0, 
&gt; libc5.
</pre>

<p>
Yes, noted.  I'm frankly amazed that it's possible to run <em>any</em> Linux in 
3 MB of total RAM, since it was always a struggle to squeeze into 16 MB,
even in the old days.
</p>

<p>
If I still had one of those boxes (sub-16MB), I think I'd let it keep
running MS-DOS and Telix, and use it in server rooms for machines that
need remote serial console.  They are surely likely to be on their last
legs, among other problems.
</p>

<p>
With 16 MB and a 200 MB HD, by contrast, I would <em>guess</em> it should be
still possible to run small X configurations with a reasonable security
model, but have not attempted to hit that mark for a long time.
</p>



<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Sindi Keesan [keesan at grex.cyberspace.org]
</p>
</b><br />
<b>Tue, 27 Feb 2007 19:27:40 -0500 (EST)</b>
</p>

<p>
On Tue, 27 Feb 2007, Rick Moen wrote:
</p>


<pre>
&gt; Quoting Sindi Keesan (keesan at grex.cyberspace.org):
&gt;
&gt;&gt; Smallinux looks interesting but it also runs root only.  Kernel 2.0,
&gt;&gt; libc5.
&gt;
&gt; Yes, noted.  I'm frankly amazed that it's possible to run <em>any</em> Linux in
&gt; 3 MB of total RAM, since it was always a struggle to squeeze into 16 MB,
&gt; even in the old days.
</pre>

<p>
A smaller kernel helps a lot.  And a swap file.
</p>


<pre>
&gt; If I still had one of those boxes (sub-16MB), I think I'd let it keep
&gt; running MS-DOS and Telix, and use it in server rooms for machines that
&gt; need remote serial console.  They are surely likely to be on their last
&gt; legs, among other problems.
</pre>

<p>
Our Basiclinux distribution was designed so you could use it as a terminal 
with X, to run graphical programs on another faster machine.  It comes 
with microcom and I succeeded in using it with serial nullmodem cable as 
a console.
</p>

<p>
The older machines tended to have soldered-on batteries which would leak 
and corrode the board.
</p>


<pre>
&gt; With 16 MB and a 200 MB HD, by contrast, I would <em>guess</em> it should be
&gt; still possible to run small X configurations with a reasonable security
&gt; model, but have not attempted to hit that mark for a long time.
</pre>

<p>
The security features should not take up much space.
</p>

<p>
Sindi Keesan
</p>


<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail2.html#mb-lpr_works_for_user_not_root_in_basiclinux_2_1">Back</a><hr width="50%" align="left" /><p><br /></p></div>
</body>
</html>
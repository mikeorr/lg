<!--startcut  ==============================================-->
<!-- *** BEGIN HTML header *** -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML><HEAD>
<title>Creating Linux Diskless Client For Windows 2k/2003 Terminal Service LG #93</title>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#0000FF" VLINK="#0000AF"
ALINK="#FF0000">
<!-- *** END HTML header *** -->

<!-- *** BEGIN navbar *** -->
<A HREF="jenkins.graham.html">&lt;&lt;&nbsp;Prev</A>&nbsp;&nbsp;|&nbsp;&nbsp;<A HREF="index.html">TOC</A>&nbsp;&nbsp;|&nbsp;&nbsp;<A HREF="../index.html">Front Page</A>&nbsp;&nbsp;|&nbsp;&nbsp;Talkback&nbsp;&nbsp;|&nbsp;&nbsp;<A HREF="../faq/index.html">FAQ</A>&nbsp;&nbsp;|&nbsp;&nbsp;<A HREF="bhaskaran.html">Next&nbsp;&gt;&gt;</A>
<!-- *** END navbar *** -->

<!--endcut ============================================================-->

<TABLE BORDER><TR><TD WIDTH="200">
<A HREF="http://www.linuxgazette.net/">
<IMG ALT="LINUX GAZETTE" SRC="../gx/2002/lglogo_200x41.png" 
	WIDTH="200" HEIGHT="41" border="0"></A> 
<BR CLEAR="all">
<SMALL>...<I>making Linux just a little more fun!</I></SMALL>
</TD><TD WIDTH="380">


<CENTER>
<BIG><BIG><STRONG><FONT COLOR="maroon">Creating Linux Diskless Client For Windows 2k/2003 Terminal Service</FONT></STRONG></BIG></BIG>
<BR>
<STRONG>By <A HREF="../authors/levkovich.html">Avinoam Levkovich</A></STRONG>
</CENTER>

</TD></TR>
</TABLE>
<P>

<!-- END header -->






<html>

<body>

<p >version 1.0</p>
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="82%"  id="AutoNumber1" align="left" height="471">
  <tr>
    <td width="7%" height="15"></td>
    <td width="93%" height="15"><font face="David">The company I work for has 
    many old computers that are no longer suitable for the common application 
    today ( try Running Office XP/2k on a P-I 100MHZ with 32MB Ram, and you will 
    find out that this is not a pleasant experience ). We start looking for a 
    solution that will save the money of buying new computers or Brand 
    thin-clients. The goal was to use our old computer and still get good 
    performance . We find the Linux solution just great for my goals.</font><p>
    <font face="David">we still use our old computer and the only 
    investment we will have to make is buying the Windows 2K/2003 licenses and 
    hardware .</font></td>
  </tr>
  <tr>
    <td width="7%" height="15"></td>
    <td width="93%" height="15">
<p ><font face="David">The solution is actually an integration of 
the following Sub systems :&nbsp; LTSP, rdesktop and wilisystem , fortunately those systems are 
integrating quite naturally as you will see .</font></p>
    <hr>
    </td>
  </tr>
  <tr>
    <td width="7%" height="15"></td>
    <td width="93%" height="15">&nbsp;<p><b><font face="David" size="4">
    <font color="#008000">LTSP&nbsp; (&nbsp; </font> <a href="http://www.ltsp.org/">
    <font color="#008000">http://www.ltsp.org</font></a><font color="#008000"> ) 
    :</font></font></b></p>
    <p><font face="David">Is the backbone of all the 
    system which provide the Linux terminal services for the diskless client. 
    after installing LTSP it create the /opt/ltsp/i386&nbsp; Directory.<b> </b>
    </font></td>
  </tr>
  <tr>
    <td width="7%" height="15"></td>
    <td width="93%" height="15"><font face="David">this Directory will be the 
    root system of our diskless clients.&nbsp; when booting the client it will 
    get its kernel by tftp from LTSP and then it will mount /opt/ltsp/i386 as 
    its root directory. </font>
    <p><font face="David">So after your client finish its boot process you 
    will be logged to your LTSP Server and your file system will be the 
    /opt/ltsp/i386<font color="#0000FF"> </font>Directory. and then the 
    Wilisystem start Working.</font></td>
  </tr>
  <tr>
    <td width="7%" height="15"></td>
    <td width="93%" height="15"><hr>
    <p>&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="15"></td>
    <td width="93%" height="15"><font face="David" size="4">
    <font color="#008000"><b>R</b></font><b><font color="#008000">desktop :&nbsp;&nbsp;
    </font> <a href="http://www.rdesktop.org/">
    <font color="#008000">http://www.rdesktop.org/</font></a></b></font><p>
    <font face="David">Microsoft has developed a protocol called RDP which is 
    used for the Terminal Server communication with the client. </font></p>
    <p><font face="David">The rdesktop package is an application that opens&nbsp; RDP Session with a Windows Server and by doing it , the Linux station become 
    a Windows Terminal Client.</font></td>
  </tr>
  <tr>
    <td width="7%" height="15"></td>
    <td width="93%" height="15"><hr>
    <p>&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="15"></td>
    <td width="93%" height="15"><b><font face="David" size="4">
    <font color="#008000">Wilisystem ( </font>
<a href="http://www.wilisystem.com/"><font color="#008000">http://www.wilisystem.com/</font></a><font color="#008000"> 
    ) : </font></font></b>
    <p><font face="David">The Wilisystem is actually a patch for the LTSP 
    server. what is does is make the connection to the Windows Terminal Server 
    as easy as it can get. </font></p>
    <p><font face="David">The Wilisystem uses the rdesktop package and finish 
    the Diskless client boot process with the Windows login screen. by doing 
    this it make the LTSP Session invisible to the user who feel as if he 
    is plugged directly to the Windows Server . </font></p>
    <p><font face="David">I must thank the wilisystem developers for a great 
    job !</font></td>
  </tr>
  <tr>
    <td width="7%" height="15"></td>
    <td width="93%" height="15"><hr>
    <p>&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="15"></td>
    <td width="93%" height="15">
<p ><font face="David" size="4"><b><font color="#008000">Rom-O-Matic :&nbsp;
</font> <a href="http://www.rom-o-matic.net/">
<font color="#008000">www.rom-o-matic.net</font></a></b></font></p>
<p ><font face="David">This is where you get you boot image for you 
selected boot Device ( I used a floppy ). after specifying your Ethernet card 
model you can download your boot image.</font></p>
<p ><font face="David">&nbsp;Great implementation for a great idea.</font></p>
    </td>
  </tr>
  <tr>
    <td width="7%" height="15"></td>
    <td width="93%" height="15"><hr>
    <p>&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="15"></td>
    <td width="93%" height="15">
<p ><font face="David"><b>please read the documentation from the Above 
web site's.&nbsp; when you read the documentation you will discover all the 
options and benefits that you can get from this system and how to tune it to 
your needs.</b></font></p>
    <p>&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="15"></td>
    <td width="93%" height="15"></td>
  </tr>
  <tr>
    <td width="7%" height="15"></td>
    <td width="93%" height="15"><font color="#008000" face="David" size="4"><u>
    <b>what you need :</b></u></font></td>
  </tr>
  <tr>
    <td width="7%" height="15"></td>
    <td width="93%" height="15"></td>
  </tr>
  <tr>
    <td width="7%" height="15"><font face="David"><b>1.</b></font></td>
    <td width="93%" height="15"><font face="David">Linux Server , I used 
    P-III 800 with 256MB RAM , With Red Hat 9.0&nbsp; .</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>2. </b></font></td>
    <td width="93%" height="19"><font face="David">Diskless Client, I used a 
    P-I 133MHZ , 32MB RAM, Ati - Rage XL (mach64 Family) Display Adaptor, with 
    the intel 100/pro Ethernet .</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>3.</b></font></td>
    <td width="93%" height="19"><font face="David">Windows 2K/2003 Server 
    With Terminal Services installed, configured and Running .</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David">I used a P-4 1.7MHZ with 
    256MB RAM.</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><u><b>
    <font face="David" color="#008000" size="4">Create your diskless Client 
    Environment:</font></b></u></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David">The Diskless Client will 
    be called ws009.</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><u><b>
    <font color="#008000" face="David" size="4">The Linux Server Side :</font></b></u></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>1.</b></font></td>
    <td width="93%" height="19"><font face="David">Find your Client ( ws009 ) Display card Model&nbsp; 
    and his Ethernet mac address and write them down, you will need them later.</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>2.</b></font></td>
    <td width="93%" height="19"><font face="David">Download and install the 
    Following packages from <a href="http://www.ltsp.org/">http://www.ltsp.org</a> 
    :</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David">ltsp_core-X.X-X.rpm<br>
ltsp_kerne-X.X-X.rpm<br>
ltsp_x_core-X.X-X.rpm<br>
ltsp_x_fonts-X.X-X.rpm <br>
&nbsp;</font></td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>3. </b></font></td>
    <td width="93%" height="19"><font face="David">Install the rdesktop package from your RedHat 
    CD or Download it form <a href="http://www.rdesktop.org/">
    http://www.rdesktop.org/</a> .</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>4.</b></font></td>
    <td width="93%" height="19"><font face="David">Download the wilisystem patch from 
    <a href="http://www.wilisystem.com/">www.wilisystem.com</a> , and install it 
    .</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>5.</b></font></td>
    <td width="93%" height="19"><font face="David">Make sure that the 
    packages for the Dhcp,Nfs,Tftp servers are installed.</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>6.</b></font></td>
    <td width="93%" height="19"><font face="David">Edit the file /opt/ltsp/install_scripts/CONFIG 
    and change the settings&nbsp;
to match your network Setting.</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>7.</b></font></td>
    <td width="93%" height="19"><font face="David">Run&nbsp; /opt/ltsp/templates/ltsp_initialize&nbsp;
    </font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">
<p ><font face="David">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # cd 
/opt/ltsp/templates/ltsp_initialize&nbsp; </font></p>

<p ><font face="David">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; #&nbsp; ./ltsp_initialize
</font></p>

    </td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>8.</b></font></td>
    <td width="93%" height="19">
<p ><font face="David">Copy /etc/dhcpd.conf.example to /etc/dhcpd.conf 
and check that all the network numbers
match your network Configuration.</font></p>

    </td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David">Check the Mac address of 
    your client and update the client configuration section ( host ws009 ) in 
    the dhcpd.conf file.</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><hr>
<p ><b><font face="David"><u><font color="#008000" size="4">Here is my /etc/dhcpd.conf :</font><br>
</u>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ddns-update-style none;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
default-lease-time 21600;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
max-lease-time 21600;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
option subnet-mask 255.255.255.0;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
option broadcast-address 192.168.1.255;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
option routers 192.168.1.100;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
option domain-name-servers 192.168.1.100;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
option domain-name &quot;my-domain.com&quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
option root-path &quot;192.168.1.100:/opt/ltsp/i386&quot;;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
option option-128 code 128 = string;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
option option-129 code 129 = text;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
shared-network WORKSTATIONS {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
subnet 192.168.1.0 netmask 255.255.255.0 {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
group {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
use-host-decl-names on;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
option log-servers 192.168.1.100;<br>
&nbsp;</font></b></p>

<p ><b><font face="David">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
host ws009 {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
hardware ethernet 00:02:B3:2D:B0:D2;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
fixed-address 192.168.1.113;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
filename &quot;/lts/vmlinuz-2.4.21-ltsp-1&quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}<br>
&nbsp;</font></b></p>

    <hr></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>9.</b></font></td>
    <td width="93%" height="19"><font face="David">Check /etc/exports. check that the IP numbers match your network 
Configuration.&nbsp;
if everything is fine run :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
# exportfs -r<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
# exportfs -a</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>10.</b></font></td>
    <td width="93%" height="19"><font face="David">Check that your client is properly listed in /etc/hosts.
    </font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David">if your client name is w009 and your domain is 
    my-domain.com you should add a line to your /etc/hosts file&nbsp; 
like :<br>
    192.168.1.112&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ws009.my-domain.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
    ws009 <br>
this name (ws009) should be the same as the client name ( host ws009) that you configured in your dhcp.conf
    </font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>12.</b></font></td>
    <td width="93%" height="19"><font face="David">Check /opt/ltsp/i386/etc/lts.conf at the end of the file you should see the 
wilisystem configuration </font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><hr>
<p ><u><font face="David" size="4" color="#008000"><b>Here is my Wilisystem Config , 
I added my remarks for the configuration part:</b></font></u></p>

<p ><font face="David"><b># Config part for the 
<a href="http://www.wilisystem.com">http://www.wilisystem.com</a><br>
# example ws009 accessing the W2K/NT4 TSE<br>
[ws009]<br>
RDPSERVER = 192.168.1.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # The ip of your W2K/NT4 Terminal Server<br>
RUNLEVEL = 7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # runlevel 7 for wilisystem<br>
SERVER = 192.168.1.100&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # The IP of your 
LTSP server <br>
XSERVER = auto&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # auto Discovery of your Display-card <br>
<br>
# if your display card fail in the auto mod, you should 
download the proper ltsp_x336-XXX from www.ltsp.org and specify it like&nbsp;&nbsp;&nbsp;
XSERVER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = XF86_Mach64<br>
<br>
X_MODE_0 = 1024x768&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # The Resolution that you want, ( 1024x768 , 800x600 ...)<br>
<br>
X_COLOR_DEPTH = 15&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # The color Depth .. i think win2k server only support 8 bit 
(256) color.<br>
&nbsp;</b></font></p>

<p ><font face="David"><b># the folowing line configure your mouse , check the 
Documentation page for more mouse type configuration :
<a href="http://www.ltsp.org/documentation/">http://www.ltsp.org/documentation/</a></b></font></p>

<p ><font face="David"><b>
<br>
X_MOUSE_PROTOCOL = &quot;PS/2&quot;&nbsp;&nbsp;&nbsp;&nbsp; <br>
X_MOUSE_DEVICE = &quot;/dev/psaux&quot; <br>
X_MOUSE_RESOLUTION = 400<br>
X_MOUSE_BUTTONS = 3</b></font></p>

    <hr></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>13.</b></font></td>
    <td width="93%" height="19"><font face="David">Make sure that the tftp service is enabled in the xinetd directory.</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David">run : <br>
    #&nbsp;
service dhcpd restart<br>
    #&nbsp;
service xinetd restart <br>
    #&nbsp;
service nfs restart </font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David">The verify that the tftp server is running. run 
    :&nbsp;&nbsp; netstat -anp | grep &quot;:69 &quot; <br>
you should get something like : udp 0 0 0.0.0.0:69 0.0.0.0:* 799/xinetd <br>
<br>
verify dhcp server by :&nbsp;&nbsp; netstat -anp | grep &quot;:67 &quot; <br>
you should get something like : udp 0 0 0.0.0.0:67 0.0.0.0:* 2086/dhcpd<br>
<br>
If dhcp is not working try restarting it . <br>
If tftp is not working then you have to enable tftp in /etc/xinetd.d/tftp&nbsp; 
    and restart it.</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>14.</b></font></td>
    <td width="93%" height="19"><font face="David">The default runlevel is 
    specified in&nbsp;
/opt/ltsp/i386/etc/lts.conf&nbsp; is runlevel 5 BUT in the wilisystem section it 
    override the default with its own Runlevel 7 ( if you take a look at
/opt/ltsp/i386/etc/inittab you will see wilisystem Configuration for this 
    runlevel.).</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David">if you exerience 
    problems you should change it. try to load your client with one of the other 
    clients configuration that you have in
/opt/ltsp/i386/etc/lts.conf , ws001 is a good start . remember to change your 
    dhcp configuration and your hosts file to match your new host name. and 
    choose the runlevel 3 . this will only load the ltsp system without trying 
    to connect to the Windows Terminal Server. </font>
    <p><font face="David">then you will be able to debug the system.</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David" size="4" color="#008000"><u>
    The Diskless Client Side</u></font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>1.</b></font></td>
    <td width="93%" height="19"><font face="David">Get your initial client boot kernel from : 
    <a href="http://rom-o-matic.net/">http://rom-o-matic.net/ </a>&nbsp;</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David">To creat&nbsp; a boot 
    floppy from the image you downloaded run :</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David"># cat eb-5.0.10-yournic.lzdsk &gt; /dev/fd0</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David">where &quot;eb-5.0.10-yournic.lzdsk&quot; is where you stored your downloaded ROM image. </font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19"><font face="David"><b>2.</b></font></td>
    <td width="93%" height="19"><font face="David">Reboot the client with the boot 
    floppy that you created from the boot image.</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David" color="#FF0000" size="5"><b>
    After The boot process finished ,you should get the Windows logon screen&nbsp; 
    :-)</b></font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;<p>&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David" color="#008000" size="4"><b>Problems<br>
=====================</b></font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19"><font face="David">i experienced screen 
    flickers when the&nbsp; X Server was trying to load and failes with message 
    &quot;no screens found &quot; , it was because the system didnt recognized my display 
    adaptor ,&nbsp; which is &quot;mach64&quot; family , 
    it was solved after I downloaded the proper Xfree 
3.3 Drivers
from the ltsp site. and I used the &quot; XSERVER = XF86_Mach64 &quot; in the lts.conf 
file.</font></td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
  <tr>
    <td width="7%" height="19">&nbsp;</td>
    <td width="93%" height="19">&nbsp;</td>
  </tr>
</table>
<p >&nbsp;</p>
<p >&nbsp;</p>
<p >&nbsp;</p>
<p >&nbsp;</p>
<p >&nbsp;</p>
<p ><b>&nbsp;&nbsp;&nbsp;&nbsp; </b></p>
<p >&nbsp;</p>
<p ><b>&nbsp;</b></p>
<p >&nbsp;</p>
<p >&nbsp;</p>
<p >&nbsp;</p>
<p >&nbsp;</p>
<p >&nbsp;</p>
<p >&nbsp;</p>
<p >&nbsp;</p>
<p >&nbsp;</p>
<p >&nbsp;</p>
<p ><b>&nbsp; </b></p>
<p >&nbsp;</p>
<p >&nbsp;</p>
<p >&nbsp;</p>
<p ><b><font face="David"><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<br>
<br>
<br>
&nbsp;&nbsp; </font></b></p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p ><b><font face="David"><br>
<br>
&nbsp;</font></b></p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p ><b><font face="David"><br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
<br>
<br>
&nbsp;</font></b></p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p ><font face="David"><b>
<br>
&nbsp;</b></font></p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p ><font face="David"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
<br>
<br>
<br>
&nbsp;</b></font></p>

<p >&nbsp;</p>

<p ><font face="David"><b><br>
<br>
<br>
<br>
<br>
<br>
<br>
&nbsp;</b></font></p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p >&nbsp;</p>

<p ><font face="David"><b><br>
&nbsp;</b></font></p>

<p >&nbsp;</p>
<p >&nbsp;</p>

</body>

</html>







<!-- *** BEGIN author bio *** -->
<P>&nbsp;
<P>
<!-- *** BEGIN bio *** -->
<P>
<img ALIGN="LEFT" ALT="[BIO]" SRC="../gx/2002/note.png">
<em>
</em>
<br CLEAR="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->


<!-- *** BEGIN copyright *** -->
<hr>
<CENTER><SMALL><STRONG>
Copyright &copy; 2003, Avinoam Levkovich.
Copying license <A HREF="../copying.html">http://www.linuxgazette.net/copying.html</A><BR> 
Published in Issue 93 of <i>Linux Gazette</i>, August 2003
</STRONG></SMALL></CENTER>
<!-- *** END copyright *** -->
<HR>

<!--startcut ==========================================================-->
<CENTER>
<!-- *** BEGIN navbar *** -->
<A HREF="jenkins.graham.html">&lt;&lt;&nbsp;Prev</A>&nbsp;&nbsp;|&nbsp;&nbsp;<A HREF="index.html">TOC</A>&nbsp;&nbsp;|&nbsp;&nbsp;<A HREF="../index.html">Front Page</A>&nbsp;&nbsp;|&nbsp;&nbsp;Talkback&nbsp;&nbsp;|&nbsp;&nbsp;<A HREF="../faq/index.html">FAQ</A>&nbsp;&nbsp;|&nbsp;&nbsp;<A HREF="bhaskaran.html">Next&nbsp;&gt;&gt;</A>
<!-- *** END navbar *** -->
</CENTER>
</BODY></HTML>
<!--endcut ============================================================-->


<html>
<head>
<link href="../lg.css" rel="stylesheet" type="text/css" media="screen, projection"  />
<link rel="shortcut icon" href="../favicon.ico" />
<title>XML Bits LG #106</title>

<style type="text/css" media="screen, projection">
<!--

-->
</style>

<link rel="alternate" type="application/rss+xml" title="LG RSS" href="lg.rss" />
<link rel="alternate" type="application/rdf+xml" title="LG RDF" href="lg.rdf" />
<link rel="alternate" type="application/atom+xml" title="LG Atom" href="lg.atom.xml" />

</head>

<body>


<img src="../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" alt="Linux Gazette"/>
<p id="fun">...making Linux just a little more fun!</p>


<div class="content articlecontent">

<div id="previousnexttop">
<A HREF="oregan1.html" >&lt;-- prev</A> | <A HREF="orr.html" >next --&gt;</A>
</div>



<h1>XML Bits</h1>
<p id="by"><b>By <A HREF="../authors/oregan.html">Jimmy O'Regan</A></b></p>

<p>
<h3>Corrections</h3>

<p> Last month, I wrote about <a href="../105/oregan.html">RDF and the 
Semantic Web</a> and included a sample FOAF file... that wasn't even valid 
XML. The worst part of it is, I had a fixed version ready just before 
publication, but it was too late for publication (partly because, in a 
sleep deprived haze, I managed to make a mess of the stuff that was there, 
and <a href="../authors/okopnik.html">Ben</a> had to go with an earlier 
version). The corrected version is <a 
href="misc/oregan/foaf-example.rdf.txt">here</a>.

<p> As well as that, Frank Manola (co-editor of the <a 
href="http://www.w3.org/TR/rdf-primer/">RDF Primer</a>) wrote to make a 
correction: 

<blockquote>
I couldn't help commenting on your statement: "Each RDF statement is called 
a "triple", meaning it consists of three parts: subject, predicate, and 
object; the subject is either an RDF URI, or a blank node (I haven't seen 
a good explanation why these nodes are "blank", so I'll just refer to them 
as nodes). "

<p> I guess the Primer didn't make the connection explicit enough.  Under 
Figure 6 in the RDF Primer, the text says "Figure 6, which is a perfectly 
good RDF graph, uses a node without a URIref to stand for the concept of 
"John Smith's address". This blank node..."  The intent was to indicate 
that a blank node was one without a URIref.  In the figure, the blank node 
is an ellipse with no label, i.e., "blank".  The term "nodes" without 
qualification refers to all those parts of graphs that aren't arcs, 
including URIrefs, literals, and blank nodes (see the discussion of the 
graph model in Section 2.2 of the Primer, or Section 3.1 of RDF Concepts 
and Abstract Syntax). 
</blockquote>

<p> I also wrote about <a href="../105/oregan2.html">RSS</a> last month. In 
the meantime, I found <a 
href="http://diveintomark.org/archives/2004/02/04/incompatible-rss">this 
page</a>, which explains that there are <strong>9 different versions of 
RSS</strong>. Maybe Atom is a better idea than I had thought!

<h3>XML and CSS</h3>

<p> This is more of a "2 Cent Tip" than anything else, but I've found that 
a lot of people are unaware that XML can use CSS stylesheets, and that 
"modern" browsers are able to render this. 

<p> To include a stylesheet, just add a line like this to your XML file:

<pre class="code">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
<b>&lt;?xml-stylesheet href="xml-style.css"?&gt;</b>
</pre>

<p> After that, it's CSS as usual -- the only thing that's different is the 
tag names.

<p> One nice thing about this is that if you add a stylesheet to your feed 
files, people can get an idea of what it'll look like in their feed reader 
if they choose to subscribe to it.

<p> A drawback, especially with feeds, is that there are various ways of 
representing embedded HTML/XHTML. "Escaped" HTML in particular looks 
terrible. Because of the various ways Blogger allows people to post to 
their blogs, my <a href="misc/oregan/atom.xml">Blogger Atom feed</a> shows 
both how nice and how horrible this can look.

<p> That aside, though, for an XML file you're generating, and have 
complete control over, stylesheets can make the difference (and can spare 
you from having to <a href="#xsl">learn XSL</a>!).

<h3>XML Fortune Cookies</h3>

<p> Most Linux users know and love the <tt>fortune</tt> command, and use it 
regularly to get a dose of humour, wisdom, or silliness. Now, thanks to 
A.M. Kuchling's <a href="http://www.amk.ca/qel/">Quotation Exchange 
Language</a>, it's possible to write your fortunes in XML.

<p> Even if you're not the sort of person who wants to convert everything 
into XML, QEL has a lot going for it. For one thing, it can generate both 
standard fortune files and nice HTML. For another, it's politically correct 
regarding metadata (it'd be a terrible waste of XML if it wasn't, but that 
hasn't stopped anyone before).

<p> A simple quote in QEL would look something like this:

<pre class="code">
&lt;quotation&gt;
&lt;p&gt;
So, throughout life, our worst weaknesses and meannesses are usually
committed for the sake of the people whom we most despise.
&lt;/p&gt;
&lt;author&gt;Charles Dickens&lt;/author&gt;
&lt;source&gt;&lt;cite&gt;Great Expectations&lt;/cite&gt;&lt;/source&gt;
&lt;/quotation&gt;
</pre>

<p> With a little bit of wrapping, to make valid XML of it, it would look 
like this:

<pre class="code">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;quotations&gt;
&lt;quotation&gt;
&lt;p&gt;
So, throughout life, our worst weaknesses and meannesses are usually 
committed for the sake of the people whom we most despise.
&lt;/p&gt;
&lt;author&gt;Charles Dickens&lt;/author&gt;
&lt;source&gt;&lt;cite&gt;Great Expectations&lt;/cite&gt;&lt;/source&gt;
&lt;/quotation&gt;
&lt;/quotations&gt;
</pre>


<p> Using the <tt>qtformat</tt> tool, which is part of the quotation tools 
the creator of QEL provides <a 
href="http://www.amk.ca/qel/software">here</a>, we get this (<tt>qtformat
-f</tt> for fortune format):

<pre>
So, throughout life, our worst weaknesses and meannesses are usually
committed for the sake of the people whom we most despise.
    -- Charles Dickens, _Great Expectations_
%
</pre>

<p> As I am in the habit of writing about everything I spend more than 10
minutes doing, I, of course, have a prepared example. Again, this uses
CSS, so if you have a browser capable of rendering XML, you can see my
quotes file nicely laid out. (Otherwise, you'll see the usual XML
gibberish -- sorry 'bout that!). Check it out <a
href="misc/oregan/quotes.xml">here</a>

<a name="xsl"></a>
<h3>A quick stumble through XSL</h3>

<p> I spent longer than usual using Windows this month, and so started
using a Windows-based feed reader. Called <a
href="http://www.feedreader.com/">FeedReader</a>. (Kudos for using the <a
href="http://en.wikipedia.org/wiki/Principle_of_least_surprise">"Principle
of least surprise"</a> in their naming).

<p> While most feed readers I've encountered support exporting their feed
list as OPML, FeedReader doesn't. It does, however, keep its list of feeds
in a simple XML file. So, after a quick stumble through the basics of XSL,
I managed to whip together something that converted the list FeedReader
keeps into OPML.

<p> This is a simple example of a FeedReader file (normally kept in <tt>
[windows mount
point]/Documents\&nbsp;and\&nbsp;Settings/Owner/Application\&nbsp;Data/FeedReader/</tt>):

<pre class="code">
<?xml version="1.0" encoding="UTF-8"?>
&lt;feeds&gt;
      &lt;item&gt;
         &lt;feedid&gt;63219889590821&lt;/feedid&gt;
         &lt;title&gt;Linux Gazette&lt;/title&gt;
         &lt;description&gt;An e-zine dedicated to making Linux just a
little      
         bit more fun.
         Published the first day of every month.&lt;/description&gt;
         &lt;feedtype&gt;http&lt;/feedtype&gt;
         &lt;archivesize&gt;8888&lt;/archivesize&gt;
         &lt;alwaysshowlink&gt;0&lt;/alwaysshowlink&gt;
         &lt;htmlurl&gt;http://linuxgazette.net&lt;/htmlurl&gt;
         &lt;image&gt;http://linuxgazette.net/gx/2004/newlogo-blank-100-gold2.jpg&lt;/image&gt;
         &lt;read&gt;0&lt;/read&gt;
         &lt;unreadcount&gt;17&lt;/unreadcount&gt;
         &lt;updateperiod&gt;14&lt;/updateperiod&gt;
         &lt;LastModified&gt;Fri, 02 Jul 2004 16:42:16
GMT&lt;/LastModified&gt;
         &lt;link&gt;http://linuxgazette.net/lg.rss&lt;/link&gt;
         &lt;username&gt;&lt;/username&gt;
         &lt;password&gt;&lt;/password&gt;
      &lt;/item&gt;
&lt;/feeds&gt;
</pre>

<p> I don't care about most of this information -- all I want are the
contents of the <code>&lt;title&gt;</code>,
<code>&lt;description&gt;</code>, <code>&lt;htmlurl&gt;</code>, and
<code>&lt;link&gt;</code> tags, so I can have a simple XSL file (<a
href="misc/oregan/fr-subs.xsl.txt">Text version</a>):

<pre class="code">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
     
&lt;xsl:template match="/"&gt; 
 &lt;opml version="1.0"&gt;
   &lt;head&gt;
     &lt;title&gt;FeedReader Subscriptions&lt;/title&gt;
   &lt;/head&gt;
   &lt;body&gt;
     &lt;xsl:apply-templates select="//item"/&gt;
   &lt;/body&gt;
 &lt;/opml&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="item"&gt; 
&lt;xsl:variable name="title" select="title"/&gt;
&lt;xsl:variable name="desc" select="description"/&gt;
&lt;xsl:variable name="site" select="htmlurl"/&gt;
&lt;xsl:variable name="link" select="link"/&gt;
  &lt;outline title="{$title}" description="{$desc}" xmlUrl="{$link}"
htmlUrl="{$site}"/&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</pre>

<p><code>&lt;xsl:template match="/"&gt;</code> matches the top-level
element; I use this to output some header information (in this example,
anything that doesn't start with <code>xsl:</code> is output).

<p><code>xsl:apply-template</code> tells the XSL processor to apply the
second template on each matching line -- in this case, I have
<code>&lt;xsl:apply-templates select="//item"/&gt;</code>, so it selects
any second level element called <code>&lt;item&gt;</code>. If I wanted to
be more accurate, I'd use <code>&lt;xsl:apply-templates
select="/feeds/item"/&gt;</code>, so it would only match
<code>&lt;item&gt;</code> tags within <code>&lt;feeds&gt;</code> tags.

<p> The <code>xsl:variable</code> lines create a variable based on the
contents of the subtags named in the <code>select</code> attribute, and
then used to create my output.

<p> If you want to find out more about XSL, LG had a good article in issue
89: <a href="http://linuxgazette.net/issue89/danguer.html">Working with
XSLT</a>. XSL is a huge topic, and one I think I'll be using more of.
</p>


<!-- *** BEGIN author bio *** -->
<P>&nbsp;
<P>
<!-- *** BEGIN bio *** -->
<hr>
<P>
<img ALIGN="LEFT" ALT="[BIO]" SRC="../gx/2004/authors/oregan.jpg" class="bio">
<em>
<!-- ../110/lg_laundrette.html#nottag.15 :) -->
Jimmy is a single father of one, who enjoys long walks... Oh, right.

<p> Jimmy has been using computers from the tender age of seven, when his father 
inherited an Amstrad PCW8256. After a few brief flirtations with an Atari ST
and numerous versions of DOS and Windows, Jimmy was introduced to Linux in 1998
and hasn't looked back.

<p> In his spare time, Jimmy likes to play guitar and read: not at the same time, 
but the picks make handy bookmarks.
</em>
<br CLEAR="all">
<!-- *** END bio *** -->

<!-- *** END author bio *** -->

<div id="articlefooter">

<p>
Copyright &copy; 2004, Jimmy O'Regan. Released under the <a
href="http://linuxgazette.net/copying.html">Open Publication license</a>
unless otherwise noted in the body of the article. Linux Gazette is not
produced, sponsored, or endorsed by its prior host, SSC, Inc.
</p>

<p>
Published in Issue 106 of Linux Gazette, September 2004
</p>

</div>


<div id="previousnextbottom">
<A HREF="oregan1.html" >&lt;-- prev</A> | <A HREF="orr.html" >next --&gt;</A>
</div>


</div>






<div id="navigation">

<a href="../index.html">Home</a>
<a href="../faq/index.html">FAQ</a>
<a href="../lg_index.html">Site Map</a>
<a href="../mirrors.html">Mirrors</a>
<a href="../mirrors.html">Translations</a>
<a href="../search.html">Search</a>
<a href="../archives.html">Archives</a>
<a href="../authors/index.html">Authors</a>
<a href="../contact.html">Contact Us</a>

</div>



<div id="breadcrumbs">

<a href="../index.html">Home</a> &gt; 
<a href="index.html">September 2004 (#106)</a> &gt; 
Article

</div>





<img src="../gx/2003/sit3-shine.7-2.gif" id="tux" alt="Tux"/>




</body>
</html>


<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
		 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' lang='utf-8' xml:lang='utf-8'>
<head>
<title>SCP Sensing Remote file presense</title>
<meta http-equiv='Content-Type; charset=utf-8' />
<link rel='stylesheet' type='text/css' href='../../../lg.css' />
</head>
<body>
<a href="../../../"><img alt="Linux Gazette" src="../../../gx/2003/newlogo-blank-200-gold2.jpg" id="logo" /></a><img alt="Tux" src="../../../gx/tux_86x95_indexed.png" id="tux" /><p id="fun">...making Linux just a little more fun!</p><div class='content articlecontent'><a name="top"></a><h3>SCP Sensing Remote file presense</h3>
<p>
<b><p>
Smile Maker [britto_can at yahoo.com]

</p>
</b><br />
<b>Tue, 22 Jul 2008 04:28:11 -0700 (PDT)</b>
</p>

<p>
Folks:
</p>

<p>
When you do scp to remote machine, linux assumes to overwrite the target
file if exists. Is there any way to check whether the target file exists
and then copy the actual file.
</p>

<p>
---
Britto
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-scp_sensing_remote_file_presense">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Thomas Adam [thomas.adam22 at gmail.com]

</p>
</b><br />
<b>Tue, 22 Jul 2008 13:30:33 +0100</b>
</p>

<p>
2008/7/22 Smile Maker &lt;britto_can@yahoo.com&gt;:
</p>

<pre>
&gt; Folks:
&gt;
&gt;    When you do scp to remote machine, linux assumes to overwrite the target
&gt; file if exists.Is there any way to check whether the target file exists and
&gt; then copy the actual file.
</pre>

<p>
Not directly, no.  The best solution I can come up with is to use
rsync over SSH which will allow for things like --update and --backup.
</p>

<p>
-- Thomas Adam
</p>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-scp_sensing_remote_file_presense">Back</a><hr width="50%" align="left" /><p><br /></p><p>
<b><p>
Ben Okopnik [ben at linuxgazette.net]

</p>
</b><br />
<b>Tue, 22 Jul 2008 20:19:30 -0400</b>
</p>

<p>
On Tue, Jul 22, 2008 at 04:28:11AM -0700, Smile Maker wrote:
</p>

<pre>
&gt;    Folks:                                                                     
&gt;                                                                               
&gt;       When you do scp to remote machine, linux assumes to overwrite the       
&gt;    target file if exists.Is there any way to check whether the target file    
&gt;    exists and then copy the actual file.                                      
</pre>

<p>
You could use 'ssh' as a pipe instead of 'scp' (which does not provide
the functionality you're looking for, as far as I know.) Untested:
</p>

<pre>
tar czf - file1 file2 file3 ... | ssh user@host '(cd /my/target/dir; tar xvkzf -)'
</pre>

<p>
The '-k' option to 'tar' on the receiver side "k"eeps the old files
instead of overwriting them.
</p>


<pre>-- 
* Ben Okopnik * Editor-in-Chief, Linux Gazette * <a href="http://LinuxGazette.NET">http://LinuxGazette.NET</a> *
</pre>

<p>

</p>
<br /><a href="#top">Top</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="../../lg_mail.html#mb-scp_sensing_remote_file_presense">Back</a><hr width="50%" align="left" /><p><br /></p></div>
</body>
</html>
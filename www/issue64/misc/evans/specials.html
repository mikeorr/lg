<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
<TITLE>The Kaptain Handbook: Kaptain grammars</TITLE>
<META HTTP-EQUIV="content-type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="keywords" CONTENT="">
<META NAME="description" CONTENT="">
</HEAD>
<BODY BGCOLOR="#ffffff" LINK="#aa0000" TEXT="#000000" > 
<FONT FACE="Helvetica">

<!-- carved out of kaptains documentation -->

 
<P ALIGN="RIGHT">

</PRE>
</CODE></BLOCKQUOTE>
<P>
<P>
<H3><A NAME="ss4.3">4.3 Specials</A>
</H3>

<P>The format of a special is
<BLOCKQUOTE><CODE>
<PRE>
@name(param1, param2, ...)=initvalue
</PRE>
</CODE></BLOCKQUOTE>

where <CODE>param1</CODE>, <CODE>param2</CODE>, ... and <CODE>initvalue</CODE> can be either nonterminals, quoted strings or integer values.
<P>
<P>The following specials are available in the current release
<DL>
<DT><B><CODE>@integer</CODE></B><DD><P>An integer input from the user; you can specify valid range and inintial value if you like:
<CODE>@integer(-2,100)=4</CODE> means an integer between -2 and 100, initially 4. Either range or initial value can
be omitted.
<P>
<DT><B><CODE>@float</CODE></B><DD><P>Guess what it can be... Note that the initial value must be quoted! Ex.: <CODE>@float="1.13"</CODE>.
<P>
<DT><B><CODE>@string</CODE></B><DD><P>A text input field from the user; maximum length and initial value is optional:
<CODE>@string(15)="Hi, there!"</CODE>
<P>
<DT><B><CODE>@infile</CODE></B><DD><P>Input file.
A text input field and a button from the user; a <B>File Open</B> dialog will appear if the button is pressed.
Filter string and initial value are optional
<CODE>@infile("*.txt")="myfile.txt"</CODE>
<P>
<DT><B><CODE>@outfile</CODE></B><DD><P>The same as <CODE>@infile</CODE>, just with a <B>Save as</B> dialog.
<P>
<DT><B><CODE>@directory</CODE></B><DD><P>The same as above, just for choosing directory. No filter string is accepted, only initial value.
<CODE>@directory="/home/joe"</CODE>
<P>
<DT><B><CODE>@list, @combo, @combow</CODE></B><DD><P>A simple listbox or combo box with elements from which the user should choose. <CODE>@combow</CODE> is read-write combo box,
the others are read-only elements from the user's view.
The returned value is the selected string.
For example <CODE>@list("cat","dog","lion","tiger")</CODE>.
<P>If any of the given strings is multiline (it contains newline character), it is split to form different elements in the list. Thus
<CODE>@list(`ls`);</CODE> would execute the command <CODE>ls</CODE> which gives the list of files, each on a different line,
and the list box will contain the name of the files in the current directory.
<P>The initial value, if it is integer <EM>n</EM>, makes the <EM>n</EM>th element to be selected.
<P>
<DT><B><CODE>@regexp</CODE></B><DD><P>A text input field controlled by a regular expression:
<CODE>@string("^[ab]*$")</CODE> only allows to type <CODE>a</CODE> and <CODE>b</CODE> letters in the field.
<P>
<DT><B><CODE>@button</CODE></B><DD><P>A pushbutton which creates a new dialog when pressed. It accepts a nonterminal symbol as a
parameter, which will form the dialog. The initial value is the text on the button. Ex.:<CODE>@button(newdialog)="Settings..."</CODE>.
<CODE>@button</CODE> is deprecated, use <CODE>:dialog</CODE> modifier instead. The argument is that it doesn't express the relation between grammatical
symbols correctly.
<P>
<DT><B><CODE>@close</CODE></B><DD><P>A button to close the current dialog. Closing the main dialog means exiting <CODE>kaptain</CODE>.
<DT><B><CODE>@action</CODE></B><DD><P>A button for executing a command. If only a nonterminal is given as a parameter, it is evaluated and
passed to the shell for execution. If several parameters are given (either quoted strings and nonterminals), the first one
is considered to be a program and the others the parameters. For example
<CODE>@action(start)</CODE> would evaluate the <CODE>start</CODE> symbol and execute it through the shell (usually <CODE>bash</CODE>). It is equivalent to
<CODE>@action("bash","-c",start)</CODE>. Another possibility is to use
<CODE>@action("perl","-e",start)</CODE> to execute perl. In this case the text generated by the symbol <CODE>start</CODE> is meant to be perl code.
<P>During the command is executed, the push button is disabled. When child process finishes, it is enabled again.
To make Kaptain dialog disappear before executing command, use <CODE>@exec</CODE>.
<P>
<DT><B><CODE>@exec</CODE></B><DD><P>Same as <CODE>@action</CODE>, but Kaptain quits immediately after starting the command.
<P>
<DT><B><CODE>@container</CODE></B><DD><P>Accepts a nonterminal symbol as a parameter. It consists of a listbox and two buttons,
<CODE>Add</CODE> and <CODE>Remove</CODE>. When <CODE>Add</CODE> is pressed, it evaluates the nonterminal and puts the text into the listbox. <CODE>Remove</CODE>
removes the selected element from the listbox. It is useful when any number of arguments of the same type can be accepted
(usually file names)
<P>
<DT><B><CODE>@icon</CODE></B><DD><P>Given a file name parameter, it loads the graphic and shows it in the dialog. Has no effect in the generated text.
If Kaptain was compiled with kde support, it looks for the file in the kde standard icon directories. Otherwise, full paths have to be specified.
<DT><B><CODE>@text</CODE></B><DD><P>Information for the user slightly sunken in a frame. The parameter can be multiline text. Has no effect in the generated text.
<DT><B><CODE>@echo</CODE></B><DD><P>Similar to <CODE>@action</CODE>, but it just prints the text to the standard output, never executes it. Useful when Kaptain
is part of a pipe.
<P>
<DL>
<P>New features in 0.5:
</DL>
<DT><B><CODE>@execclose</CODE></B><DD><P>Behaves like <CODE>@exec</CODE> or <CODE>@action</CODE> but closes only the current subdialog (or the application, if it's about a top level dialog).
<DT><B><CODE>@fork</CODE></B><DD><P>Similar to <CODE>@exec</CODE> or <CODE>@action</CODE> but Kaptain just forks and is going on.
<DT><B><CODE>@dump</CODE></B><DD><P>Just like <CODE>@echo</CODE> but then quits.
<DT><B><CODE>@execbuffer</CODE></B><DD><P>Parameters and initial value are like those of <CODE>@action</CODE>. Places a button which executes the given command and catches the standard output
of the execution. After that, when it comes to text generation, it evaluates to the standard output of the command which has been executed when
the button was pressed the last time.
<DT><B><CODE>@password</CODE></B><DD><P>Similar to <CODE>@string</CODE>, but shows only <CODE>*</CODE>'s
<DT><B><CODE>@preview</CODE></B><DD><P>A button which creates a subdialog. That contains the text generated from the nonterminal given as a parameter.
<DT><B><CODE>@fill</CODE></B><DD><P>Inserts stretchable space.
For example pressing the button made by <CODE>@preview(start)</CODE>, you will see the generated text according to the current settings.
</DL>
<P>This list may improve in the future.
<P>


 
</BODY>
</HTML>

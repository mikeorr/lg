<!--startcut ======================================================= -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<META NAME="generator" CONTENT="lgazmail v1.1I.e">
<TITLE>The Answer Guy 38: Low Memory Installation</TITLE>
</HEAD><BODY BGCOLOR="#FFFFFF" TEXT="#000000"
	LINK="#3366FF" VLINK="#A000A0">
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<H4>"The Linux Gazette...<I>making Linux just a little more fun!</I>"</H4>
<P> <hr> <P>
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<center>
<H1><A NAME="answer">
	<img src="../../gx/dennis/qbubble.gif" alt="(?)" 
		border="0" align="middle">
	<font color="#B03060">The Answer Guy</font>
	<img src="../../gx/dennis/bbubble.gif" alt="(!)" 
		border="0" align="middle">
</A></H1> 
<BR>
<H4>By James T. Dennis,
	<a href="mailto:tag@lists.linuxgazette.net">tag@lists.linuxgazette.net</a><BR>
	Starshine Technical Services,
	<A HREF="http://www.starshine.org/">http://www.starshine.org/</A> 
</H4>
</center>

<p><hr><p>
<!--  endcut ======================================================= -->
<!-- begin 23 -->
<H3 align="left"><img src="../../gx/dennis/qbubble.gif" 
	height="50" width="60" alt="(?) " border="0"
	>Low Memory Installation</H3>


<p><strong>From Martin Skjöldebrand on Sun, 17 Jan 1999  
</strong></p>
<P><STRONG>
HI again,
</STRONG></P>
<P><STRONG>
Many thanks for you fast reply. And apologies if you got two messages
- I forgot to remove your e-mail adress in the second one.
</STRONG></P>
<!-- ::<BlockQuote>
Low Memory Installation
~~~~~~~~~~~~~~~~~~~~~~~
</BlockQuote>:: -->
<P><STRONG><FONT COLOR="#000099"><EM>
Hi,
</EM></FONT></STRONG></P>
<P><STRONG><FONT COLOR="#000099"><EM>
I'm trying to install <A HREF="http://www.debian.org/">Debian</A> 
from floppies on my spare lap-top.
</EM></FONT></STRONG></P>
<P><STRONG><FONT COLOR="#000099"><EM>
It's an old machine, an Compaq Contura 486/ 25 with 4 MB RAM and 80 MB
HDD.
</EM></FONT></STRONG></P>
<P><STRONG><FONT COLOR="#000099"><EM>
The installation goes well (mostly - it complains that the swap space
cannot be initialized but it still is used, swapon during startup
later on goes well). But after rebooting I get various memory errors.
</EM></FONT></STRONG></P>
<P><STRONG><FONT COLOR="#000099"><EM>
The latest being '<tt>bash fork: Cannot allocate memory</tt>'
when trying to do anything on the machine.
</EM></FONT></STRONG></P>
<blockquote><FONT COLOR="#000066"><EM><IMG 
	SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0" >
This sounds more like there is a disk error (bad block
or some such) that's somewhere in the area where you're
trying to create your swap partition.
</em></font></blockquote>
<blockquote><FONT COLOR="#000066"><EM>
That would explain both the initialization failure (which
I presume is an error message from the installation
script's '<tt>mkswap</tt>' routine) and the bash errors.
</em></font></blockquote>
<P><STRONG><FONT COLOR="#000099"><EM><IMG 
	SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0" >
I've read and re-read the floppy install on low-memory systems. I've
expanded the swap space to about 20 MB (should be enough) but it still
complains about the memory problem.
</EM></FONT></STRONG></P>
<blockquote><FONT COLOR="#000066"><EM><IMG 
	SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0" >
If the error is near the beginning of the swap
file/partition --- then you'll keep getting it now matter
how much disk space you <EM>add</EM> to the partition.
</em></font></blockquote>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0" >
Adding swap space sorted out a few error messages I got in the first
attempts. But you suggestion solves the problem of it not going away.
I partitioned the drive with the option of checking for bad blocks (I
think I did this the last time. I've rerun the install one time too
many. Is there a difference between this and <tt>mkswap -c</tt>?).
</STRONG></P>
<blockquote><FONT COLOR="#000066"><EM><IMG 
	SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0" >
Try invoking the mkswap command (which should be somewhere
in your startup files) with the <tt>-c</tt> option (to check for
bad blocks).
</em></font></blockquote>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0" >
I'll boot off of a start disk and run it as root, then. I suppose you
meant that. (As I can't get in on the system to do <em>anything</em>
meaningful at all as the only reaction I get is the error message).
</STRONG></P>
<P><STRONG><FONT COLOR="#000066"><EM>
Any ideas? Is it possible to run Debian on a 4 MB RAM machine?
</EM></FONT></STRONG></P>
<blockquote><FONT COLOR="#000066"><EM><IMG 
	SRC="../../gx/dennis/bbub.gif" ALT="(!)"
	HEIGHT="28" WIDTH="50" BORDER="0" >
I don't know.  That's cutting it pretty thin.  I
certainly wouldn't use '<tt>bash</tt>' on a 4Mb system --- '<tt>bash</tt>'
is hardly a lightweight shell.  Try '<tt>ash</tt>' --- which is a
simpler and smaller shell that's designed for use on
rescue floppies, etc.
</em></font></blockquote>
<blockquote><FONT COLOR="#000066"><EM>
You'll certainly want to compile a custom trimmed kernel
(on another system) for use in such a constrained
setting.  I wouldn't think that the Contura's were so
old that you can't find additional memory for them.
Bumping that up to 8 or 16 Mb will make a huge
difference in what you can do with that laptop.
</em></font></blockquote>
<P><STRONG><IMG SRC="../../gx/dennis/qbub.gif" ALT="(?)"
	HEIGHT="28" WIDTH="50" BORDER="0" >
Yeah, I've had the thought myself - but Compaq memory usually is
extremely overpriced. Especially for older machines. At least IMHO.
</STRONG><P>
<P><STRONG>
Again, thanks for your suggestions and your fast reply. I'll look into
it.
</STRONG><P>
<P><STRONG>
Cheers,
</STRONG><P>
<P><STRONG>
Martin Skjöldebrand 
<br>Sys admin, archaeologist, web designer
</STRONG><P>

<!-- end 23 -->
<!--startcut ======================================================= -->
<P> <hr> <P>
<H5 align="center"><a href="http://www.linuxgazette.net/copying.html"
	>Copyright &copy;</a> 1999, James T. Dennis 
<BR>Published in <I>The Linux Gazette</I> Issue 38 March 1999</H5>
<P> <hr> <P>
<!-- begin tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::-->
<TABLE WIDTH="96%"><TR VALIGN="center" ALIGN="center">
<TD ROWSPAN="3" COLSPAN="4" WIDTH="24%"><A HREF="../lg_answer38.html"
	><IMG SRC="../../gx/dennis/answernew.gif"
              ALT="[ Answer Guy Index ]"></A></td>
  <TD WIDTH="6%"><A HREF="1.html">1</A></TD>
  <TD WIDTH="6%"><A HREF="2.html">2</A></TD>
  <TD WIDTH="6%"><A HREF="3.html">3</A></TD>
  <TD WIDTH="6%"><A HREF="4.html">4</A></TD>
  <TD WIDTH="6%"><A HREF="5.html">5</A></TD>
  <TD WIDTH="6%"><A HREF="6.html">6</A></TD>
  <TD WIDTH="6%"><A HREF="7.html">7</A></TD>
  <TD WIDTH="6%"><A HREF="8.html">8</A></TD>
  <TD WIDTH="6%"><A HREF="9.html">9</A></TD>
  <TD WIDTH="6%"><A HREF="10.html">10</A></TD>
  <TD WIDTH="6%"><A HREF="11.html">11</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD><A HREF="12.html">12</A></TD>
  <TD>&nbsp;</TD>
  <TD><A HREF="14.html">14</A></TD>
  <TD>&nbsp;</TD>
  <TD><A HREF="16.html">16</A></TD>
  <TD><A HREF="17.html">17</A></TD>
  <TD><A HREF="18.html">18</A></TD>
  <TD><A HREF="19.html">19</A></TD>
  <TD>&nbsp;</TD>
  <TD><A HREF="21.html">21</A></TD>
  <TD><A HREF="22.html">22</A></TD>
</TR><TR VALIGN="center" ALIGN="center">
  <TD><A HREF="23.html">23</A></TD>
  <TD><A HREF="24.html">24</A></TD>
  <TD>&nbsp;</TD>
  <TD><A HREF="26.html">26</A></TD>
  <TD>&nbsp;</TD>
  <TD><A HREF="28.html">28</A></TD>
  <TD><A HREF="29.html">29</A></TD>
  <TD><A HREF="30.html">30</A></TD>
  <TD><A HREF="31.html">31</A></TD>
  <TD><A HREF="32.html">32</A></TD>
  <TD>&nbsp;</TD>
</TR></TABLE>
<!-- end tagnav ::::::::::::::::::::::::::::::::::::::::::::::::::::-->
<P> <hr> <P>
<!-- begin lgnav ::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<A HREF="../index.html"
	><IMG SRC="../../gx/indexnew.gif" ALT="[ Table Of Contents ]"></A>
<A HREF="../../index.html"
	><IMG SRC="../../gx/homenew.gif" ALT="[ Front Page ]"></A>
<A HREF="../lg_bytes38.html"
	><IMG SRC="../../gx/back2.gif" ALT="[ Previous Section ]"></A>
<A HREF="../lg_tips38.html"
	><IMG SRC="../../gx/fwd.gif" ALT="[ Next Section ]"></A>
<!-- end lgnav ::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
<!-- ::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: -->
</BODY></HTML>
<!--endcut ========================================================= -->
